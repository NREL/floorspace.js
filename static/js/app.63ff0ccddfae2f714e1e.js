webpackJsonp([2,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(285);var r=n(109),o=i(r),a=n(254),s=i(a),d=n(274),l=i(d),c=n(596),u=i(c),f=n(108),p=i(f),h=n(222),m=i(h);o.default.component("pretty-select",p.default),o.default.component("generic-input",m.default),window.eventBus=new o.default,window.application=new o.default({store:s.default,el:"#app",template:"<App/>",components:{App:u.default}}),l.default.init(s.default)},,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.sqrt(n*n+i*i)}function o(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"expand",r=t[1]-t[0],o=e[1]-e[0],a=o*n,s=r/n,d=a-r,l=s-o;return d>0==("expand"===i)?{xExtent:[t[0]-d/2,t[1]+d/2],yExtent:e}:{xExtent:t,yExtent:[e[0]-l/2,e[1]+l/2]}}function a(t){var e=t.start,n=t.end,i=n.x-e.x,r=n.y-e.y;return 0===i?.5*Math.PI:Math.atan(r/i)}function s(t,e){var n=a(t)-a(e),i=Math.min(Math.abs(n),Math.PI-n);return i<.05*Math.PI}function d(t){var e=t.dx,n=t.dy;if(0===e&&0===n)return{dx:0,dy:0};var i=Math.sqrt(e*e+n*n);return{dx:e/i,dy:n/i}}function l(t,e){var n=void 0,i=void 0;return t.x!==e.x?(i=1,n=(t.y-e.y)/(t.x-e.x)):t.y!==e.y?(n=1,i=(t.x-e.x)/(t.y-e.y)):n=i=1,d({dx:n,dy:i})}function c(t,e){var n=e.x-t.x,i=e.y-t.y;return d({dx:n,dy:i})}function u(t,e){var n=e.p1,i=n.x,r=n.y,o=e.p2,a=o.x,s=o.y,d=t.x-i,l=t.y-r,c=a-i,u=s-r,f=d*c+l*u,p=c*c+u*u||2,h=f/p;return h<=0?e.p1:h>1?e.p2:{x:i+h*c,y:r+h*u}}function f(t,e){var n=e.start,i=e.end,o=u(t,{p1:n,p2:i});return{dist:r(t,o),proj:o}}function p(t,e,n){var i=[t.x,t.y],r=i[0],o=i[1],a=[e.x,e.y],s=a[0],d=a[1],l=n.x,c=n.y;return Math.abs((d-o)*(l-s)-(c-d)*(s-r))<1e-5}function h(t){for(var e=t.start,n=t.end,i=t.spacing,o=t.width,a=r(e,n),s=[],d=c(e,n),l=o/2;l+o/2<a;){var u=d.dx*l,f=d.dy*l;s.push({x:e.x+u,y:e.y+f,distFromStart:l}),l+=o+(i||1)}if(0===s.length)return[];var p=(r(s[s.length-1],n)-o/2)/2,h=r(e,n),m=d.dx*p,g=d.dy*p;return s.map(function(t){return{x:t.x+m,y:t.y+g,alpha:(t.distFromStart+p)/h}})}function m(t){return 2===t.length&&M.default.isNumber(t[0])&&M.default.isNumber(t[1])}function g(t){return t.length>=1&&M.default.every(t,m)}function v(t){return t.length>=1&&M.default.every(t,g)}function y(t,e){var n=function(t){var e=t.x,n=t.y;return[e,n]};return P.inRing(n(t),e.map(n))}Object.defineProperty(e,"__esModule",{value:!0});var _=n(7),w=i(_),x=n(30),b=i(x);e.distanceBetweenPoints=r,e.fitToAspectRatio=o,e.edgeDirection=a,e.haveSimilarAngles=s,e.unitPerpVector=l,e.unitVector=c,e.projectionOfPointToLine=u,e.pointDistanceToSegment=f,e.ptsAreCollinear=p,e.repeatingWindowCenters=h,e.vertInRing=y;var S=n(3),M=i(S),C=n(585),T=i(C),I=n(84),P={clipScale:100,offset:.01,setOperation:function(t,e,n){var i=e.map(function(t){return{X:t.x,Y:t.y}}),r=n.map(function(t){return{X:t.x,Y:t.y}}),o=new T.default.ClipperOffset,a=new T.default.Paths,s=new T.default.Paths;o.AddPaths([i],T.default.JoinType.jtMiter,T.default.EndType.etClosedPolygon),o.Execute(a,this.offset),o.Clear(),o.AddPaths([r],T.default.JoinType.jtMiter,T.default.EndType.etClosedPolygon),o.Execute(s,this.offset),o.Clear(),T.default.JS.ScaleUpPaths(a,this.clipScale),T.default.JS.ScaleUpPaths(s,this.clipScale);var d=new T.default.Clipper,l=new T.default.Paths;d.AddPaths(a,T.default.PolyType.ptSubject,!0),d.AddPaths(s,T.default.PolyType.ptClip,!0);var c="union"===t?T.default.ClipType.ctUnion:"intersection"===t?T.default.ClipType.ctIntersection:"difference"===t?T.default.ClipType.ctDifference:null;if(null===c)throw new Error('invalid operation "'+t+'". expected union, intersection, or difference');d.Execute(c,l,T.default.PolyFillType.pftEvenOdd,T.default.PolyFillType.pftEvenOdd),T.default.JS.ScaleDownPaths(l,this.clipScale);var u=new T.default.Paths;return o.AddPaths(l,T.default.JoinType.jtMiter,T.default.EndType.etClosedPolygon),o.Execute(u,-this.offset),1===u.length?u[0].map(function(t){return{x:t.X,y:t.Y}}):0===u.length?[]:{error:P.clipperPolygonHasHoles(u)?"no holes":"no split faces"}},clipperPolygonHasHoles:function(t){var e=t[0].map(function(t){return[t.X,t.Y]}),n=[t[1][0].X,t[1][0].Y];return P.inRing(n,e)},intersection:function(t,e){return this.setOperation("intersection",t,e)},union:function(t,e){return this.setOperation("union",t,e)},difference:function(t,e){return this.setOperation("difference",t,e)},areaOfSelection:function(t){var e=t.map(function(t){return{X:t.x,Y:t.y}});return T.default.JS.AreaOfPolygon(e)},splittingVerticesForEdgeId:function(t,e){var n=this,i=e.edges.find(function(e){return e.id===t}),r=this.vertexForId(i.v1,e),o=this.vertexForId(i.v2,e);return e.vertices.filter(function(t){if(!(i.v1===t.id||i.v2===t.id||r.x===t.x&&r.y===t.y||o.x===t.x&&o.y===t.y)){var e=n.projectionOfPointToLine(t,{p1:r,p2:o});return n.distanceBetweenPoints(t,e)<=1/n.clipScale}})},projectionOfPointToLine:u,distanceBetweenPoints:r,intersectionOfLines:function(t,e,n,i){var r=1e-7,o=function(t,e,n){return t-r<=e&&e<=n+r},a=((t.x*e.y-t.y*e.x)*(n.x-i.x)-(t.x-e.x)*(n.x*i.y-n.y*i.x))/((t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x)),s=((t.x*e.y-t.y*e.x)*(n.y-i.y)-(t.y-e.y)*(n.x*i.y-n.y*i.x))/((t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x));if(isNaN(a)||isNaN(s)||this.distanceBetweenPoints({x:a,y:s},t)<r||this.distanceBetweenPoints({x:a,y:s},e)<r||this.distanceBetweenPoints({x:a,y:s},n)<r||this.distanceBetweenPoints({x:a,y:s},i)<r)return!1;if(t.x>=e.x){if(!o(e.x,a,t.x))return!1}else if(!o(t.x,a,e.x))return!1;if(t.y>=e.y){if(!o(e.y,s,t.y))return!1}else if(!o(t.y,s,e.y))return!1;if(n.x>=i.x){if(!o(i.x,a,n.x))return!1}else if(!o(n.x,a,i.x))return!1;if(n.y>=i.y){if(!o(i.y,s,n.y))return!1}else if(!o(n.y,s,i.y))return!1;return{x:a,y:s}},vertexForId:function(t,e){return e.vertices.find(function(e){return e.id===t})},vertexForCoordinates:function(t,e){var n=this;return e.vertices.find(function(e){return n.distanceBetweenPoints(e,t)<1e-5})},verticesForFaceId:function(t,e){var n=this;return e.faces.find(function(e){return e.id===t}).edgeRefs.map(function(t){var i=n.edgeForId(t.edge_id,e),r=t.reverse?i.v2:i.v1;return n.vertexForId(r,e)})},edgeForId:function(t,e){return e.edges.find(function(e){return e.id===t})},edgesForVertexId:function(t,e){return e.edges.filter(function(e){return e.v1===t||e.v2===t})},edgesForFaceId:function(t,e){var n=this;return e.faces.find(function(e){return e.id===t}).edgeRefs.map(function(t){return n.edgeForId(t.edge_id,e)})},faceForId:function(t,e){return e.faces.find(function(e){return e.id===t})},facesForVertexId:function(t,e){var n=this;return e.faces.filter(function(i){return i.edgeRefs.find(function(i){var r=n.edgeForId(i.edge_id,e);return r.v1===t||r.v2===t})})},facesForEdgeId:function(t,e){return e.faces.filter(function(e){return e.edgeRefs.find(function(e){return e.edge_id===t})})},pointInFace:function(t,e){var n=e.map(function(t){return{X:t.x,Y:t.y}}),i={X:t.x,Y:t.y};return!!T.default.Clipper.PointInPolygon(i,n)},ptsAreCollinear:p,syntheticRectangleSnaps:function(t,e,n){var i=(e.x+n.x)/2,r=(e.y+n.y)/2;return[].concat((0,b.default)(t.map(function(t){var e=t.x,n=t.y;return{y:n,x:e+2*(i-e),synthetic:!0,originalPt:{x:e,y:n}}})),(0,b.default)(t.map(function(t){var e=t.x,n=t.y;return{x:e,y:n+2*(r-n),synthetic:!0,originalPt:{x:e,y:n}}})))},edgeDirection:a,haveSimilarAngles:s,pointDistanceToSegment:f,exceptFace:function(t,e){return e?(0,w.default)({},t,{faces:M.default.reject(t.faces,{id:e})}):t},denormalize:function(t){var e=this,n=t.edges.map(function(n){return(0,w.default)({},n,{v1:e.vertexForId(n.v1,t),v2:e.vertexForId(n.v2,t)})}),i=M.default.zipObject(M.default.map(n,"id"),n),r=t.faces.map(function(t){return{id:t.id,edges:t.edgeRefs.map(function(t){var e=t.edge_id,n=t.reverse;return(0,w.default)({},i[e],{edge_id:e,reverse:n})}),get vertices(){return(0,I.dropConsecutiveDups)(M.default.flatMap(this.edges,function(t){return t.reverse?[t.v2,t.v1]:[t.v1,t.v2]}),function(t){return t.id})}}});return(0,w.default)({},t,{edges:n,faces:r})},normalize:function(t){var e=M.default.uniqBy([].concat((0,b.default)(t.edges),(0,b.default)(M.default.flatMap(t.faces,function(t){return t.edges}))),"id"),n=M.default.uniqBy([].concat((0,b.default)(t.vertices),(0,b.default)(M.default.flatMap(e,function(t){return[t.v1,t.v2]}))),"id");return{id:t.id,vertices:n.map(function(t){return M.default.pick(t,["id","x","y"])}),edges:e.map(function(t){return{id:t.id,v1:t.v1.id,v2:t.v2.id}}),faces:t.faces.map(function(t){return{id:t.id,edgeRefs:t.edges.map(function(t){return{edge_id:t.id,reverse:t.reverse}})}})}}};P.inside=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!m(t))throw new Error("point does not have correct coords: "+t);if(!v(e))throw new Error("polygon does not have correct coords: "+e);var i=P.bboxOfRing(e[0]);if(i&&P.inBBox(t,i)===!1)return!1;for(var r=!1,o=0;o<e.length&&!r;o++)if(P.inRing(t,e[0],n)){for(var a=!1,s=1;s<e.length&&!a;)P.inRing(t,e[s],!n)&&(a=!0),s++;a||(r=!0)}return r},P.bboxOfRing=function(t){return[M.default.min(M.default.map(t,0)),M.default.min(M.default.map(t,1)),M.default.max(M.default.map(t,0)),M.default.max(M.default.map(t,1))]},P.inRing=function(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],d=e[o][0],l=e[o][1],c=t[1]*(a-d)+s*(d-t[0])+l*(t[0]-a)===0&&(a-t[0])*(d-t[0])<=0&&(s-t[1])*(l-t[1])<=0;if(c)return!n;var u=s>t[1]!=l>t[1]&&t[0]<(d-a)*(t[1]-s)/(l-s)+a;u&&(i=!i)}return i},e.default=P},,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.assignableProperties=["building_units","thermal_zones","space_types","construction_sets","pitched_roofs"],i=e.componentTypes=["window_definitions","daylighting_control_definitions","door_definitions"],r=(e.libraryTypes=[].concat(n,i),e.textures=["circles-2","circles-5","circles-8","diagonal-stripe-1","diagonal-stripe-4","diagonal-stripe-6","dots-5","dots-8","vertical-line","crosshatch"],{modes:{stories:"Story",images:"Image",spaces:"Space",shading:"Shading",building_units:"Building Unit",thermal_zones:"Thermal Zone",space_types:"Space Type",pitched_roofs:"Pitched Roof",construction_sets:"Construction Set",window_definitions:"Window Definitions",daylighting_control_definitions:"Daylighting Control Definitions"},componentTypes:i,assignableProperties:n,palette:{shading:"#E8E3E5",neutral:"#bbc3c7",colors:["#aa4499","#88ccee","#332288","#117733","#999933","#ddcc77","#cc6677","#882255","#44aa99","#6699cc","#661100","#aa4466"]}});e.default=r},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(64),o=i(r),a=n(83),s=i(a),d={map:s.default,displayNameForKey:function(t,e){return this.map[t].keymap[e]?this.map[t].keymap[e].private?null:this.map[t].keymap[e].displayName:e},valueForKey:function(t,e,n,i){return this.map[n].keymap[i]&&this.map[n].keymap[i].get?this.map[n].keymap[i].get(t,e):t[i]},setValueForKey:function(t,e,n,i,r){var a={success:!0};if(this.map[n].keymap[i]&&this.map[n].keymap[i].converter&&(r=this.map[n].keymap[i].converter(r,this.map[n].keymap[i])),this.map[n].keymap[i]&&this.map[n].keymap[i].validator){var s=this.map[n].keymap[i].validator(t,e,r,n);if(a.success=s.success,!s.success)return a.error=s.error,a}return"stories"===n?e.dispatch("models/updateStoryWithData",(0,o.default)({story:t},i,r)):"spaces"===n?e.dispatch("models/updateSpaceWithData",(0,o.default)({space:t},i,r)):"shading"===n?e.dispatch("models/updateShadingWithData",(0,o.default)({shading:t},i,r)):"images"===n?e.dispatch("models/updateImageWithData",(0,o.default)({image:t},i,r)):"window_definitions"===n?e.dispatch("models/updateWindowDefinitionWithData",(0,o.default)({object:t},i,r)):e.dispatch("models/updateObjectWithData",(0,o.default)({object:t},i,r)),a},inputTypeForKey:function(t,e){return this.map[t].keymap[e]&&!this.map[t].keymap[e].readonly?this.map[t].keymap[e].input_type:null},selectOptionsForKey:function(t,e,n,i){return this.map[n].keymap[i]&&!this.map[n].keymap[i].readonly&&"select"===this.map[n].keymap[i].input_type?this.map[n].keymap[i].select_data(t,e):[]},libraryObjectWithId:function(t,e){var n;for(var i in t.library)t.library.hasOwnProperty(i)&&!n&&t.library[i].find(function(t){return t.id===e})&&(n=t.library[i].find(function(t){return t.id===e}),n.type=i);if(!n&&t.stories.find(function(t){return t.id===e})&&(n=t.stories.find(function(t){return t.id===e}),n.type="story"),!n)for(var r=0;r<t.stories.length;r++){var o=t.stories[r];!n&&o.spaces.find(function(t){return t.id===e})&&(n=o.spaces.find(function(t){return t.id===e}),n.type="space"),!n&&o.shading.find(function(t){return t.id===e})&&(n=o.shading.find(function(t){return t.id===e}),n.type="shading"),!n&&o.images.find(function(t){return t.id===e})&&(n=o.images.find(function(t){return t.id===e}),n.type="image")}return n},modelForFace:function(t,e){for(var n=0;n<t.stories.length;n++){var i=t.stories[n],r=i.shading.find(function(t){return t.face_id===e}),o=i.spaces.find(function(t){return t.face_id===e});if(r)return r.type="shading",r;if(o)return o.type="space",o}},generateName:function(t,e,n){var i=this.modelsForType(t,e),r=s.default[e].displayName+" ";if(n){var o=t.stories.findIndex(function(t){return t.id===n.id})+1;r=r.concat(o+" - ")}for(var a="",d=1;!a;)a=r+d,i.find(function(t){return console.log("querying "+t+".name: "+t.name),t.name===a})&&(a=""),d+=1;return a},modelsForType:function(t,e){switch(e){case"stories":return t.stories;case"shading":case"spaces":case"images":return t.stories.reduce(function(t,n){return t.concat(n[e])},[]);default:return t.library[e]}}};e.default=d},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return f.default.modes[t]}function o(t,e){var n=c.default.find(t.windows,{id:e});if(n)return(0,d.default)({},n,{type:"windows"});var i=c.default.find(c.default.flatMap(t.spaces,function(t){return t.daylighting_controls}),{id:e});if(i)return(0,d.default)({},i,{type:"daylighting_controls"});var r=c.default.find(t.doors,{id:e});return r?(0,d.default)({},r,{type:"doors"}):null}function a(t,e){var n=void 0,i=void 0;return u.assignableProperties.some(function(r){return(i=c.default.find(t[r],{id:e}))&&(n=r),!!i}),i?(0,d.default)({},i,{type:n}):null}Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),d=i(s);e.displayNameForMode=r,e.componentInstanceById=o,e.spacePropertyById=a;var l=n(3),c=i(l),u=n(21),f=i(u),p={displayNameForMode:r,config:f.default};e.default=p},,,,,,,,,,,function(t,e){"use strict";function n(t){var e=(r[t]||0)+1;return r[t]=e,t+" - "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.genName=n;var i=1;e.default={setId:function(t){i=t},generate:function(){return function(){return String(i++)}}()};var r={}},,,,,,,,,function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(48),a=r(o),s=n(7),d=r(s),l=n(30),c=r(l),u=n(3),f=r(u),p=n(113),h=r(p),m=n(269),g=r(m),v=n(265),y=i(v),_=n(21),w={building_units:{displayName:"Building Unit",definitionName:"BuildingUnit",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.BuildingUnit},thermal_zones:{displayName:"Thermal Zone",definitionName:"ThermalZone",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.ThermalZone},door_definitions:{displayName:"Door",definitionName:"DoorDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"width",displayName:"Width",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"door_type",displayName:"Type",input_type:"select",select_data:function(){var t=["Door","Glass Door","Overhead Door"];return f.default.zipObject(t,t)},validator:g.default.oneOf("Door","Glass Door","Overhead Door")},{name:"texture",displayName:"Texture",input_type:"texture",validator:g.default.oneOf.apply(g.default,(0,c.default)(_.textures))}],init:h.default.DoorDefinition},window_definitions:{displayName:"Window",definitionName:"WindowDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"window_definition_mode",displayName:"Mode",input_type:"select",select_data:function(){var t=["Single Window","Repeating Windows","Window to Wall Ratio"];return f.default.zipObject(t,t)},validator:g.default.oneOf("Single Window","Repeating Windows","Window to Wall Ratio")},{name:"wwr",displayName:"Window to Wall ratio",input_type:"text",validator:g.default.halfOpenInterval(0,1),converter:y.number,numeric:!0,enabled:function(t){return"Window to Wall Ratio"===t.window_definition_mode}},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(t){return"Single Window"===t.window_definition_mode||"Repeating Windows"===t.window_definition_mode}},{name:"width",displayName:"Width",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(t){return"Single Window"===t.window_definition_mode||"Repeating Windows"===t.window_definition_mode}},{name:"sill_height",displayName:"Sill Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"window_spacing",displayName:"Spacing",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(t){return"Repeating Windows"===t.window_definition_mode}},{name:"window_type",displayName:"Window Type",input_type:"select",select_data:function(){var t=["Fixed","Operable"];return f.default.zipObject(t,t)},validator:g.default.oneOf("Fixed","Operable")},{name:"overhang_projection_factor",displayName:"Overhang Projection Factor",input_type:"text",validator:g.default.gt0orNull,converter:y.gt0orNull,numeric:!0},{name:"fin_projection_factor",displayName:"Fin Projection Factor",input_type:"text",validator:g.default.gt0orNull,converter:y.gt0orNull,numeric:!0},{name:"texture",displayName:"Texture",input_type:"texture",validator:g.default.oneOf.apply(g.default,(0,c.default)(_.textures)),enabled:function(t){return"Window to Wall Ratio"===t.window_definition_mode}},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(t,e){return f.default.chain(e.models.stories).flatMap("windows").filter({window_definition_id:t.id}).value().length}}],init:h.default.WindowDefn},space_types:{displayName:"Space Type",definitionName:"SpaceType",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.SpaceType},construction_sets:{displayName:"Construction Set",definitionName:"ConstructionSet",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.ConstructionSet},daylighting_control_definitions:{displayName:"Daylighting Control",definitionName:"DaylightingControlDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"illuminance_setpoint",displayName:"Illuminance Setpoint (lux)",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(t,e){return f.default.chain(e.models.stories).flatMap("spaces").flatMap("daylighting_controls").filter({daylighting_control_definition_id:t.id}).value().length}}],init:h.default.DaylightingControlDefn},stories:{displayName:"Story",definitionName:"Story",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"geometry_id",readonly:!0,private:!0},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.number},{name:"floor_to_ceiling_height",displayName:"Floor To Ceiling Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.gt0},{name:"multiplier",displayName:"Multiplier",input_type:"text",converter:y.number,numeric:!0,validator:g.default.gt0},{name:"spaces",displayName:"Spaces",readonly:!0,numeric:!0,get:function(t,e){return t.spaces.length}},{name:"shading",displayName:"Shading",readonly:!0,numeric:!0,get:function(t,e){return t.shading.length}},{name:"images",readonly:!0,private:!0},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}]},spaces:{displayName:"Space",definitionName:"Space",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"daylighting_controls",displayName:"Daylighting Controls",readonly:!0,private:!0,get:function(t,e){return t.daylighting_controls.map(function(t){return t.name}).join(", ")}},{name:"story",displayName:"Story",readonly:!0,get:function(t,e){var n=e.models.stories.find(function(e){return~e.spaces.map(function(t){return t.id}).indexOf(t.id)});return n.name}},{name:"building_unit_id",displayName:"Building Unit",input_type:"select",select_data:function(t,e){var n={"(none)":null};return e.models.library.building_units.forEach(function(t){n[t.name]=t.id}),n},get:function(t,e){var n=e.models.library.building_units.find(function(e){return e.id===t.building_unit_id});return n?n.name:null}},{name:"thermal_zone_id",displayName:"Thermal Zone",input_type:"select",select_data:function(t,e){var n={"(none)":null};return e.models.library.thermal_zones.forEach(function(t){n[t.name]=t.id}),n},get:function(t,e){var n=e.models.library.thermal_zones.find(function(e){return e.id===t.thermal_zone_id});return n?n.name:null}},{name:"space_type_id",displayName:"Space Type",input_type:"select",select_data:function(t,e){var n={"(none)":null};return e.models.library.space_types.forEach(function(t){n[t.name]=t.id}),n},get:function(t,e){var n=e.models.library.space_types.find(function(e){return e.id===t.space_type_id});return n?n.name:null}},{name:"construction_set_id",displayName:"Construction Set",input_type:"select",select_data:function(t,e){var n={"(none)":null};return e.models.library.construction_sets.forEach(function(t){n[t.name]=t.id}),n},get:function(t,e){var n=e.models.library.construction_sets.find(function(e){return e.id===t.construction_set_id});return n?n.name:null}},{name:"pitched_roof_id",displayName:"Pitched Roof",input_type:"select",select_data:function(t,e){return(0,d.default)({"(none)":null},f.default.fromPairs(e.models.library.pitched_roofs.map(function(t){return[t.name,t.id]})))},get:function(t,e){var n=f.default.find(e.models.library.pitched_roofs,{id:t.pitched_roof_id});return n?n.name:null}},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"floor_to_ceiling_height",displayName:"Floor to Ceiling Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"floor_offset",displayName:"Floor Offset",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"open_to_below",displayName:"Open To Below",input_type:"select",select_data:function(){return{False:!1,True:!0}},converter:y.bool},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}]},shading:{displayName:"Shading",definitionName:"Shading",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"color",readonly:!0,private:!0}]},images:{displayName:"Image",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"height",displayName:"Height",input_type:"text",validator:g.default.number},{name:"z",displayName:"z",input_type:"text",validator:g.default.number,private:!0},{name:"opacity",displayName:"opacity",input_type:"text",validator:g.default.closedInterval(0,1)},{name:"x",displayName:"x",input_type:"text",validator:g.default.number},{name:"y",displayName:"y",input_type:"text",validator:g.default.number},{name:"src",readonly:!0,private:!0}]},windows:{displayName:"Window",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"window_definition_id",displayName:"Definition",input_type:"select",select_data:function(t,e){return f.default.fromPairs(e.models.library.window_definitions.map(function(t){return[t.name,t.id]}))}}]},daylighting_controls:{displayName:"Daylighting Control",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"daylighting_control_definition_id",displayName:"Definition",input_type:"select",select_data:function(t,e){return f.default.fromPairs(e.models.library.daylighting_control_definitions.map(function(t){return[t.name,t.id]}))}}]},doors:{displayName:"Door",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"door_definition_id",displayName:"Definition",input_type:"select",select_data:function(t,e){return f.default.fromPairs(e.models.library.door_definitions.map(function(t){return[t.name,t.id]}))}}]},pitched_roofs:{displayName:"Pitched Roof",columns:[{name:"id",displayName:"ID",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"pitched_roof_type",displayName:"Type",input_type:"select",select_data:function(){var t=["Gable","Hip","Shed"];return f.default.zipObject(t,t)},validator:g.default.oneOf("Gable","Hip","Shed")},{name:"pitch",displayName:"Pitch",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"shed_direction",displayName:"Shed Direction",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"color",displayName:"Color",input_type:"color"}],init:h.default.PitchedRoof}};(0,a.default)(w).forEach(function(t){w[t].keymap=f.default.zipObject(f.default.map(w[t].columns,"name"),w[t].columns),w[t].columns.forEach(function(e){f.default.has(w[t],"definitionName")&&f.default.get(p.allowableTypes,w[t].definitionName)&&f.default.includes(p.allowableTypes[w[t].definitionName][e.name],"null")&&(e.nullable=!0),f.default.has(w[t],"definitionName")&&(0,p.getDefaults)(w[t].definitionName)&&f.default.has((0,p.getDefaults)(w[t].definitionName),e.name)&&(e.default=(0,p.getDefaults)(w[t].definitionName)[e.name])})}),e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n;return function(){for(var i=this,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){n=null,t.apply(i,o)},e)}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default,n={};return t.filter(function(t){var i=e(t);return!n[i]&&(n[i]=!0,!0)})}function a(t){return f.default.flatten(t.map(function(e,n){return t.slice(n+1).map(function(t){return[e,t]})}))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default;return t.filter(function(n,i){return 0===i||e(n)!==e(t[i-1])})}function d(t){for(var e=[],n=t.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}Object.defineProperty(e,"__esModule",{value:!0});var l=n(37),c=i(l);e.debounce=r,e.uniq=o,e.allPairs=a,e.dropConsecutiveDups=s,e.getSiblings=d;var u=n(3),f=i(u)},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(577);var i=n(8)(n(247),n(638),"data-v-8f6e6820",null);t.exports=i.exports},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=e.x,i=e.y;return[{x:Math.floor(n/t)*t,y:Math.floor(i/t)*t},{x:(Math.floor(n/t)+1)*t,y:Math.floor(i/t)*t},{x:Math.floor(n/t)*t,y:(Math.floor(i/t)+1)*t},{x:(Math.floor(n/t)+1)*t,y:(Math.floor(i/t)+1)*t}].map(function(t){return(0,y.default)({},t,{type:"grid"})})}function o(t,e,n){return t.filter(function(t){return(0,x.distanceBetweenPoints)(n,t)<=e}).map(function(t){return(0,y.default)({},t,{type:"vertex"})})}function a(t,e,n){var i=[].concat((0,g.default)(r(e,n)),(0,g.default)(o(t,e,n))).map(function(t){return(0,y.default)({},t,{dist:(0,x.distanceBetweenPoints)(t,n),dx:n.x-t.x,dy:n.y-t.y})});return w.default.orderBy(i,["dist","origin","type"],["asc","asc","desc"])}function s(t,e,n){var i=n.width,r=n.spacing,o=n.window_definition_mode,a=n.texture;if("Window to Wall Ratio"===o||"Repeating Windows"===o)return{edge_id:t.id,center:{x:(t.v1.x+t.v2.x)/2,y:(t.v1.y+t.v2.y)/2},edge_start:t.v1,alpha:.5,start:t.v1,end:t.v2,window_definition_mode:o,width:i,spacing:r,texture:a};var s=(0,x.edgeDirection)({start:t.v1,end:t.v2}),d=i*Math.cos(s)/2,l=i*Math.sin(s)/2,c=t.v2.x===t.v1.x?(e.y-t.v1.y)/(t.v2.y-t.v1.y):(e.x-t.v1.x)/(t.v2.x-t.v1.x);return{edge_id:t.id,center:e,edge_start:t.v1,alpha:c,start:{x:e.x-d,y:e.y-l},end:{x:e.x+d,y:e.y+l},window_definition_mode:o}}function d(t,e){var n=t.map(function(t){return(0,y.default)({},t,(0,x.pointDistanceToSegment)(e,{start:t.v1,end:t.v2}))}),i=w.default.minBy(n,"dist");return i}function l(t,e){var n=t.map(function(t){var n="Single Window"===t.window_definition_mode?{dist:(0,x.distanceBetweenPoints)(e,t.center),proj:t.center}:(0,x.pointDistanceToSegment)(e,t);return(0,y.default)({},t,n,{v1:t.start,v2:t.end})});return w.default.minBy(n,"dist")}function c(t,e,n,i){var r=d(t,e);return!r||r.dist>i?null:s(r,r.proj,n)}function u(t,e,n,i,r){var o=d(t,e);if(!o||o.dist>i)return null;var a=(0,x.distanceBetweenPoints)(o.v1,o.proj),l=Math.round(a/r)*r,c=o.v2.x-o.v1.x,u=o.v2.y-o.v1.y,f=Math.sqrt(c*c+u*u),p={x:o.v1.x+l*(c/f),y:o.v1.y+l*(u/f)};return s(o,p,n)}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return"grid-strict"===t?u.apply(void 0,n):c.apply(void 0,n)}function p(t,e,n,i){var r="grid-strict"===t?[]:[n];return w.default.chain(a(r,i,n)).map(function(t){return(0,y.default)({},t,{face_id:w.default.find(e,function(e){return(0,x.vertInRing)(t,e.vertices)})})}).filter("face_id").map(function(t){return(0,y.default)({},t,{face_id:t.face_id.id})}).first().value()}function h(t,e){var n=e.alpha||.5;return{x:t.v1.x+n*(t.v2.x-t.v1.x),y:t.v1.y+n*(t.v2.y-t.v1.y)}}Object.defineProperty(e,"__esModule",{value:!0});var m=n(30),g=i(m),v=n(7),y=i(v);e.gridSnapTargets=r,e.snapTargets=a,e.expandWindowAlongEdge=s,e.findClosestEdge=d,e.findClosestWindow=l,e.snapWindowToEdge=f,e.snapToVertexWithinFace=p,e.windowLocation=h;var _=n(3),w=i(_),x=n(15)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{
default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeEvents=void 0;var r=n(163),o=i(r);e.ResizeEvents=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),o=i(r),a=n(15);i(a);e.default={Vertex:function(t,e){return{id:o.default.generate(),x:t,y:e}},Edge:function(t,e){return{id:o.default.generate(),v1:t,v2:e}},Face:function(t){return{id:o.default.generate(),edgeRefs:t}},Geometry:function(){return{id:o.default.generate(),vertices:[],edges:[],faces:[]}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.allowableTypes=e.getDefaults=void 0;var r=n(7),o=i(r),a=n(3),s=i(a),d=n(74),l=i(d),c=n(276),u=i(c),f=n(277),p=i(f),h=n(21),m=i(h),g=n(219),v=i(g),y=n(114),_=function(t){var e=function e(n){return s.default.has(n,"default")?n[t]:"null"===n.type?null:"array"===n.type?[]:"object"===n.type?s.default.mapValues(n.properties,e):s.default.has(n,t)?n[t]:null};return e},w=function(t){return s.default.mapValues(v.default.definitions,_(t))},x=w("default");if("ip"!==x.Project.config.units)throw new Error("Expected default units to be ip. Code changes are required to change the default units");var b=s.default.mapValues(x,function(t,e){return(0,y.getConverter)(e,"ip","si")(t)}),S=e.getDefaults=function(t){return s.default.cloneDeep("ip"===s.default.get(window,"application.$store.state.project.config.units","ip")?x[t]:b[t])};e.allowableTypes=w("type");e.default={Story:function(t){return(0,o.default)({},S("Story"),{id:l.default.generate(),name:t,color:(0,u.default)("story")})},Space:function(t){return(0,o.default)({},S("Space"),{id:l.default.generate(),name:t,color:(0,u.default)("space"),type:"space"})},Shading:function(t){return(0,o.default)({},S("Shading"),{id:l.default.generate(),name:t,color:m.default.palette.shading})},Image:function(t,e){return{id:l.default.generate(),src:e,name:t,visible:!0,height:0,width:0,x:0,y:0,z:0,r:0,opacity:.6}},BuildingUnit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:l.default.generate(),color:(0,u.default)("building_unit"),name:t.name,handle:t.handle||null}},ThermalZone:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ThermalZone"),{id:l.default.generate(),color:(0,u.default)("thermal_zone"),name:t.name})},SpaceType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("SpaceType"),{id:l.default.generate(),color:(0,u.default)("space_type"),name:t.name})},ConstructionSet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ConstructionSet"),{id:l.default.generate(),name:t.name,color:(0,u.default)("construction_set")})},WindowDefn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("WindowDefinition"),{id:l.default.generate(),name:t.name,wwr:null,window_spacing:null,texture:(0,p.default)("window_definition")})},DaylightingControlDefn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DaylightingControlDefinition"),{id:l.default.generate(),name:t.name})},DoorDefinition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DoorDefinition"),{id:l.default.generate(),name:t.name,texture:(0,p.default)("door_definition")})},PitchedRoof:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("PitchedRoof"),{id:l.default.generate(),name:t.name,color:(0,u.default)("pitched_roof")})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.convertLibrary=e.convertState=e.convertSchema=e.getConverter=e.conversionFactor=e.units=void 0;var r=n(7),o=i(r),a=n(3),s=i(a),d=n(219),l=i(d),c=n(21),u=n(283),f=i(u),p=function t(e){if(s.default.has(e,"si_units"))return s.default.pick(e,["si_units","ip_units"]);if("object"===e.type){var n=s.default.pickBy(s.default.mapValues(e.properties,t),s.default.identity);return s.default.isEmpty(n)?null:n}return"array"===e.type&&s.default.get(e,"items.$ref")?{arrayOf:e.items.$ref.replace("#/definitions/","")}:e.$ref?{$ref:e.$ref.replace("#/definitions/","")}:null},h=(0,o.default)({$schema:s.default.pickBy(s.default.mapValues(l.default.properties,p),s.default.identity)},s.default.pickBy(s.default.mapValues(l.default.definitions,p),s.default.identity));h.$state=s.default.pickBy({application:h.Application,project:h.Project,geometry:{arrayOf:"Geometry"},models:{stories:{arrayOf:"Story"},library:s.default.fromPairs(c.libraryTypes.map(function(t){return[t,h.$schema[t]]}))}},s.default.identity);var m=e.units=(0,f.default)(h),g={"m -> ft":3.280839895,"ft -> m":.3048,"fc -> lux":10.7639,"lux -> fc":.092903},v=e.conversionFactor=function(t,e){var n=g[t+" -> "+e];if(!n)throw new Error("Unable to find conversion from "+t+" to "+e);return n},y=e.getConverter=function t(e,n,i){if(!s.default.includes(["si","ip"],n))throw new Error("expected fromSystem to be 'si' or 'ip'. received "+n);if(!s.default.includes(["si","ip"],i))throw new Error("expected toSystem to be 'si' or 'ip'. received "+i);if(n===i)return s.default.identity;var r=n+"_units",o=i+"_units",a=s.default.get(m,e);if(!a||s.default.has(a,"si_units")&&a.si_units===a.ip_units)return s.default.identity;if(s.default.has(a,"si_units")){var d=v(a[r],a[o]);return function(t){return t*d}}if(a.$ref)return t(a.$ref,n,i);if(a.arrayOf){var l=t(a.arrayOf,n,i);return function(t){return t.map(l)}}if(s.default.isObject(a)){var c=s.default.mapValues(a,function(r,o){return t(e+"."+o,n,i)});return function(t){return s.default.mapValues(t,function(t,e){return(c[e]||s.default.identity)(t)})}}throw new Error("Path "+e+" did not lead to a useful spot in 'units'")},_=e.convertSchema=function(t,e,n){return y("$schema",e,n)(t)};e.convertState=function(t,e,n){return y("$state",e,n)(t)},e.convertLibrary=_},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10",cy:"10",fill:"#bf0049",r:"5.6"}}),_c("path",{attrs:{d:"M10.8 9.9L12.7 8c.2-.2.2-.6 0-.8-.2-.2-.6-.2-.8 0L10 9 8.1 7.1c-.2-.2-.6-.2-.8 0s-.3.7-.1.9l1.9 1.9-1.9 1.9c-.2.2-.2.6 0 .8.1.1.3.2.4.2s.3-.1.4-.2l1.9-1.9 1.9 1.9c.1.1.3.2.4.2s.3-.1.4-.2c.2-.2.2-.6 0-.8l-1.8-1.9z",fill:"#fff"}})])}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),o=i(r);e.default=new o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(659),o=i(r),a=n(665),s=i(a),d=n(657),l=i(d),c=n(676),u=i(c),f=n(664),p=i(f),h=n(669),m=i(h),g=n(670),v=i(g),y=n(667),_=i(y),w=n(668),x=i(w),b=n(673),S=i(b),M=n(672),C=i(M),T=n(674),I=i(T),P=n(675),j=i(P),z=n(671),D=i(z),E=n(656),$=i(E),O=n(654),F=i(O),k=n(658),R=i(k),N=n(679),W=i(N),V=n(677),G=i(V),A=n(678),B=i(A),L=n(660),H=i(L),U=n(644),q=i(U),X=n(655),Y=i(X),K=n(652),Z=i(K),J=n(651),Q=i(J),tt=n(647),et=i(tt),nt=n(648),it=(i(nt),n(646)),rt=i(it),ot=n(650),at=i(ot),st=n(649),dt=i(st),lt=n(661),ct=i(lt),ut=n(662),ft=i(ut),pt=n(663),ht=i(pt),mt=n(225),gt=i(mt),vt=n(666),yt=i(vt),_t={name:"ComponentIcon",props:["which"],template:'\n    <ComponentsWindow v-if="which === \'window_definitions\'" class="button" />\n    <ComponentsDaylighting v-else-if="which === \'daylighting_control_definitions\'" class="button" />\n  ',components:{ComponentsWindow:Z.default,ComponentsDaylighting:Q.default}},wt={name:"AssignSpacePropIcon",props:["which"],template:'\n    <AssignBldgModule v-if="which === \'building_units\'" class="button" />\n    <AssignThermalZone v-else-if="which === \'thermal_zones\'" class="button" />\n    <AssignActivity v-else-if="which === \'space_types\'" class="button" />\n    <AssignRoof v-else-if="which === \'pitched_roofs\'" class="button" />\n  ',components:{AssignBldgModule:et.default,AssignThermalZone:at.default,AssignActivity:rt.default,AssignRoof:dt.default}};e.default={"open-floorplan-svg":o.default,"save-floorplan-svg":s.default,"import-library-svg":l.default,"undo-svg":u.default,"redo-svg":p.default,"tab-floorplan-svg":m.default,"tab-shading-svg":v.default,"tab-assign-svg":_.default,"tab-components-svg":x.default,"tool-color-svg":D.default,"tool-draw-rectangle-svg":S.default,"tool-draw-polygon-svg":C.default,"tool-erase-svg":I.default,"tool-move-size-svg":j.default,"tool-image-svg":$.default,"tool-fill-svg":F.default,"tool-component-svg":R.default,"zoom-in-svg":G.default,"zoom-out-svg":B.default,"pan-svg":H.default,"add-image":q.default,ZoomToFitSvg:W.default,ComponentIcon:_t,AssignSpacePropIcon:wt,QuickstartIconNewMapFloorplan:ct.default,QuickstartIconNewFloorplan:ft.default,QuickstartIconOpenFloorplan:ht.default,InfoIcon:gt.default,SettingsGear:yt.default,GroundPropertiesIcon:Y.default}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return m.default.filter(t,function(t){return m.default.chain(t.edges).map("id").includes(e).value()})}function o(t,e){var n=v.default.denormalize(m.default.find(t.geometry,{id:e})),i=m.default.find(t.models.stories,{geometry_id:e}),o=i.spaces.map(function(t){return{daylighting_controls:t.daylighting_controls.map(function(t){return(0,p.default)({},t,{vertex:m.default.find(n.vertices,{id:t.vertex_id})})}),space_id:t.id,face_id:t.face_id}});return{geometry_id:e,story_id:i.id,windows:i.windows.map(function(t){var e=m.default.find(n.edges,{id:t.edge_id}),i=r(n.faces,t.edge_id);return(0,p.default)({},t,{originalLoc:(0,y.windowLocation)(e,t),originalFaceIds:m.default.map(i,"id")})}),doors:i.doors.map(function(t){var e=m.default.find(n.edges,{id:t.edge_id}),i=r(n.faces,t.edge_id);return(0,p.default)({},t,{originalLoc:(0,y.windowLocation)(e,t),originalFaceIds:m.default.map(i,"id")})}),perFaceComponents:o}}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.geometry_id,o=e.story_id,a=e.windows,s=e.doors,d=e.perFaceComponents,c=v.default.denormalize(m.default.find(t.rootState.geometry,{id:i})),f=m.default.find(t.rootState.models.stories,{id:o}),p=c.faces.filter(function(t){return m.default.find(f.spaces,{face_id:t.id})}),h=t.rootState.project.grid.spacing;t.dispatch("models/destroyAllComponents",{story_id:o},{root:!0});var g=m.default.flatMap(p,"edges"),_=function(e,i){var a=n[e.originalFaceIds[0]]||{dx:0,dy:0},s=a.dx,d=a.dy,c={x:e.originalLoc.x+s,y:e.originalLoc.y+d},f=(0,y.snapWindowToEdge)("nonstrict",g,c,{width:1},h/4);if(f){var v=m.default.map(r(p,f.edge_id),"id");e.originalFaceIds.length!==v.length||e.originalFaceIds.length>1&&m.default.intersection((0,u.default)(n),e.originalFaceIds)||t.dispatch("models/create"+i,(0,l.default)({story_id:o,edge_id:f.edge_id,alpha:f.alpha},i.toLowerCase()+"_definition_id",e.window_definition_id||e.door_definition_id),{root:!0})}};a.forEach(function(t){return _(t,"Window")}),s.forEach(function(t){return _(t,"Door")}),d.forEach(function(e){var i=e.face_id,r=e.daylighting_controls;r.forEach(function(e){var r=n[i]||{dx:0,dy:0},a=r.dx,s=r.dy,d={x:e.vertex.x+a,y:e.vertex.y+s},l=(0,y.snapToVertexWithinFace)("nonstrict",p,d,h/4);l&&t.dispatch("models/createDaylightingControl",{daylighting_control_definition_id:e.daylighting_control_definition_id,x:l.x,y:l.y,story_id:o,face_id:l.face_id},{root:!0})})})}function s(){for(var t=void 0,e=void 0,n=void 0,i=void 0,r=arguments.length,s=Array(r),d=0;d<r;d++)s[d]=arguments[d];if(3===s.length)t=s[0],e=s[1],n=s[2],i={};else{if(4!==s.length)throw new Error("usage: withPreservedComponents(context, geometry_id, action [,movementsByFaceId])");t=s[0],e=s[1],i=s[2],n=s[3]}var l=o(t.rootState,e);n(),a(t,l,i)}Object.defineProperty(e,"__esModule",{value:!0});var d=n(64),l=i(d),c=n(48),u=i(c),f=n(7),p=i(f);e.withPreservedComponents=s;var h=n(3),m=i(h),g=n(15),v=i(g),y=n(110)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(270),o=i(r),a=n(272),s=i(a),d=n(271),l=i(d);e.default={namespaced:!0,state:{config:{units:"ip",unitsEditable:!0,language:"EN-US"},north_axis:0,ground:{floor_offset:0,azimuth_angle:0,tilt_slope:0},grid:{visible:!0,spacing:5},view:{min_x:-250,min_y:-150,max_x:250,max_y:150},map:{initialized:!1,enabled:!0,visible:!0,latitude:39.7653,longitude:-104.9863,zoom:4.5,rotation:0,elevation:0},previous_story:{visible:!0},show_import_export:!0},actions:o.default,mutations:s.default,getters:l.default}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports={$schema:"http://json-schema.org/draft-04/schema#",version:"0.7.0",description:"Comment describing your JSON Schema",type:"object",properties:{version:{description:"File format version",type:"string"},application:{$ref:"#/definitions/Application"},project:{$ref:"#/definitions/Project"},stories:{type:"array",items:{$ref:"#/definitions/Story"}},building_units:{type:"array",items:{$ref:"#/definitions/BuildingUnit"}},thermal_zones:{type:"array",items:{$ref:"#/definitions/ThermalZone"}},space_types:{type:"array",items:{$ref:"#/definitions/SpaceType"}},construction_sets:{type:"array",items:{$ref:"#/definitions/ConstructionSet"}},window_definitions:{type:"array",items:{$ref:"#/definitions/WindowDefinition"}},door_definitions:{type:"array",items:{$ref:"#/definitions/DoorDefinition"}},daylighting_control_definitions:{type:"array",items:{$ref:"#/definitions/DaylightingControlDefinition"}},pitched_roofs:{type:"array",items:{$ref:"#/definitions/PitchedRoof"}}},required:["version","application","project","stories","building_units","thermal_zones","space_types","construction_sets","window_definitions","door_definitions","daylighting_control_definitions","pitched_roofs"],definitions:{Application:{description:"Reserved for application data, not for external use",type:"object"},Project:{description:"Information that applies to the entire project",type:"object",properties:{config:{type:"object",properties:{units:{type:["string","null"],enum:["ip","si"],default:"ip"},language:{type:["string","null"],default:"EN-US"}},required:["units","language"]},north_axis:{description:"Angle between building north and true north in degrees (clockwise is positive)",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},ground:{type:"object",properties:{floor_offset:{description:"Specifies the vertical offset between the building floor and the ground plane. Use a value < 0 for buildings with below-grade spaces, or a value > 0 for, e.g., buildings on piers.",type:["number","null"],default:0,si_units:"m",ip_units:"ft"},azimuth_angle:{description:"Direction of the ground plane, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},tilt_slope:{description:"Slope of the ground plane from horizontal. For example, a value of 1 implies a 45-deg angle.",type:["number","null"],default:0}},required:["floor_offset","azimuth_angle","tilt_slope"]},grid:{type:"object",properties:{visible:{type:["boolean","null"]},spacing:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["visible","spacing"]},view:{type:"object",properties:{min_x:{type:["number","null"],si_units:"m",ip_units:"ft"},min_y:{type:["number","null"],si_units:"m",ip_units:"ft"},max_x:{type:["number","null"],si_units:"m",ip_units:"ft"},max_y:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["min_x","min_y","max_x","max_y"]},map:{type:"object",properties:{visible:{type:["boolean","null"]},latitude:{type:["number","null"]},longitude:{type:["number","null"]},zoom:{type:["number","null"]},elevation:{type:["number","null"],si_units:"m",ip_units:"ft"},enabled:{type:["boolean","null"]},initialized:{type:["boolean","null"]},rotation:{type:["number","null"],si_units:"deg",ip_units:"deg"}},required:["visible","latitude","longitude","zoom","elevation","enabled","initialized","rotation"]},previous_story:{type:"object",properties:{visible:{type:["boolean","null"]}},required:["visible"]},show_import_export:{type:["boolean","null"]}},required:["config","north_axis","ground","grid","view","map","previous_story","show_import_export"]},Geometry:{type:"object",properties:{id:{type:"string"},vertices:{type:"array",items:{$ref:"#/definitions/Vertex"}},edges:{type:"array",items:{$ref:"#/definitions/Edge"}},faces:{type:"array",items:{$ref:"#/definitions/Face"}}},required:["id","vertices","edges","faces"]},Vertex:{type:"object",properties:{id:{type:"string"},x:{type:"number",si_units:"m",ip_units:"ft"},y:{type:"number",si_units:"m",ip_units:"ft"},edge_ids:{type:"array",items:{type:"string"}}},required:["id","x","y","edge_ids"]},Edge:{type:"object",properties:{id:{type:"string"},vertex_ids:{type:"array",minItems:2,maxItems:2,uniqueItems:!0,items:{type:"string"}},face_ids:{type:"array",minItems:1,maxItems:2,items:{type:"string"}}},required:["id","vertex_ids","face_ids"]},Face:{type:"object",properties:{id:{type:"string"},edge_ids:{type:"array",minItems:3,items:{type:"string"}},edge_order:{type:"array",minItems:3,items:{type:"number",enum:[0,1]}}},required:["id","edge_ids","edge_order"]},Story:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},image_visible:{type:["boolean","null"],default:!0},below_floor_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{type:["number","null"],minimum:0,default:8,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},multiplier:{type:["integer","null"],minimum:1,multipleOf:1,default:1},color:{$ref:"#/definitions/HexColor"},geometry:{$ref:"#/definitions/Geometry"},images:{type:"array"},spaces:{type:"array",items:{$ref:"#/definitions/Space"}},shading:{type:"array",items:{$ref:"#/definitions/Shading"}},windows:{type:"array",items:{type:"object",properties:{window_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:'Distance along edge to center point of window, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1).  Does not apply if window_definition_mode is "Window to Wall Ratio". Will be an array of such values if window_definition_mode is "Repeating Windows".',type:["array","number","null"],minimum:0,maximum:1,items:{type:"number",minimum:0,maximum:1}}},required:["window_definition_id","edge_id","alpha"]}},doors:{type:"array",items:{type:"object",properties:{door_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:"Distance along edge to center point of door, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1). ",type:"number",minimum:0,maximum:1}},required:["door_definition_id","edge_id","alpha"]}}},required:["id","handle","name","image_visible","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","multiplier","color","geometry","images","spaces","shading","windows","doors"]},Space:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]},building_unit_id:{type:["string","null"]},thermal_zone_id:{type:["string","null"]},space_type_id:{type:["string","null"]},construction_set_id:{type:["string","null"]},pitched_roof_id:{type:["string","null"]},daylighting_controls:{type:"array",items:{type:"object",properties:{daylighting_control_definition_id:{type:"string"},vertex_id:{type:"string"}},required:["daylighting_control_definition_id","vertex_id"]}},below_floor_plenum_height:{description:"If provided, overrides the story below_floor_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{description:"If provided, overrides the story floor_to_ceiling_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{description:"If provided, overrides the story above_ceiling_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_offset:{description:"If provided, specifies the vertical offset between the space floor and the story floor.",type:["number","null"],si_units:"m",ip_units:"ft"},open_to_below:{description:"If true, defines a space that is open to below (has no floor).",type:["boolean","null"]}},required:["id","handle","name","face_id","building_unit_id","thermal_zone_id","space_type_id","construction_set_id","pitched_roof_id","daylighting_controls","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","floor_offset","open_to_below"]},Shading:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]}},required:["id","handle","name","face_id"]},ThermalZone:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},SpaceType:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},BuildingUnit:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},ConstructionSet:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]}},required:["id","handle","name"]},WindowDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},window_definition_mode:{type:"string",enum:["Single Window","Repeating Windows","Window to Wall Ratio"],default:"Single Window"},wwr:{description:'Target window to wall ratio, only used if window_definition_mode is "Window to Wall Ratio"',type:["number","null"],minimum:0,maximum:1,exclusiveMaximum:!0,default:.2},sill_height:{description:"Vertical distance from the floor to the window sill. In drawing units.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},window_spacing:{description:'Spacing between windows.  Only used if window_definition_mode is  "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},height:{description:'Vertical height of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},width:{description:'Horizontal width of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:2,si_units:"m",ip_units:"ft"},window_type:{type:"string",enum:["Fixed","Operable"],default:"Fixed"},overhang_projection_factor:{description:"Projection factor for overhangs, set to null for no overhang.  Overhang depth = overhang_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},fin_projection_factor:{description:"Projection factor for fins, set to null for no overhang. Projection factor for overhangs, set to null for no overhang.  Fin depth = fin_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},texture:{description:'Internal attribute representing how this window group is displayed. Applies only if window_definition_mode is "Window to Wall Ratio".',type:["string","null"],default:null}},required:["id","name","window_definition_mode","wwr","sill_height","window_spacing","height","width","window_type","overhang_projection_factor","fin_projection_factor"]},DoorDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},height:{description:"Vertical height of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:6.67,si_units:"m",ip_units:"ft"},width:{description:"Horizontal width of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},door_type:{type:"string",enum:["Door","Glass Door","Overhead Door"],default:"Door"}},required:["id","name","height","width","door_type"]},DaylightingControlDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},illuminance_setpoint:{description:"Setpoint for daylighting control.",type:"number",default:300,si_units:"lux",ip_units:"fc"},height:{description:"Vertical distance of sensor above floor.  In drawing units.",type:"number",default:3,si_units:"m",ip_units:"ft"}},required:["id","name","illuminance_setpoint","height"]},PitchedRoof:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},pitched_roof_type:{type:"string",enum:["Gable","Hip","Shed"],default:"Gable"},pitch:{description:"Pitch of roof. A value of 6, for example, implies a 6 in 12 pitch (or 26.57 degrees).",type:"number",minimum:0,default:6},shed_direction:{description:"Direction of shed roof, from low edge to high edge, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},color:{$ref:"#/definitions/HexColor"}},required:["id","name","pitched_roof_type","pitch","shed_direction","color"]},HexColor:{type:["string","null"],pattern:"^#[a-fA-F0-9]{6}$"}}}},,,function(t,e,n){n(562);var i=n(8)(n(234),n(619),"data-v-14ece691",null);t.exports=i.exports},function(t,e,n){n(573);var i=n(8)(n(240),n(633),"data-v-6bbb2c29",null);t.exports=i.exports},function(t,e,n){n(563);var i=n(8)(n(242),n(620),"data-v-20be75f3",null);t.exports=i.exports},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"}},[_c("title",[_v("Artboard 10")]),_c("path",{attrs:{d:"M50 18a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm4 49h-8V47h8zm0-26h-8v-8h8z"}})])}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(612),d=i(s),l=n(604),c=i(l),u=n(597),f=i(u),p=n(617),h=i(p),m=n(605),g=i(m),v=n(607),y=i(v),_=n(616),w=i(_);n(111);e.default={name:"app",data:function(){return{error:null,success:null,navigationExpanded:!1}},beforeCreate:function(){this.$store.dispatch("models/initStory")},mounted:function(){var t=this;window.eventBus.$on("error",function(e){t.error=e,setTimeout(function(){t.error=null},5e3)}),window.eventBus.$on("success",function(e){t.success=e,setTimeout(function(){t.success=null},5e3)}),window.eventBus.$on("reload-grid",function(){document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}),document.addEventListener("keydown",function(e){t.$store.timetravel&&(90===e.keyCode&&(e.ctrlKey||e.metaKey)?(e.shiftKey?t.$store.timetravel.redo():t.$store.timetravel.undo(),e.preventDefault()):89==e.keyCode&&(e.ctrlKey||e.metaKey)&&(t.$store.timetravel.redo(),e.preventDefault()))})},computed:(0,o.default)({},(0,a.mapState)({tool:function(t){return t.application.currentSelections.tool}})),components:{"grid-view":c.default,"canvas-view":f.default,"inspector-view":y.default,navigation:d.default,toolbar:h.default,ImageUpload:g.default,Textures:w.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(598),s=i(a),d=n(20);e.default={name:"app",data:function(){return{}},computed:(0,o.default)({},(0,d.mapState)({mapEnabled:function(t){return t.project.map.enabled},mapVisible:function(t){return t.project.map.visible},northAxis:function(t){return t.project.north_axis}})),components:{"map-view":s.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(111),d=n(609),l=i(d),c=n(583)("AIzaSyDIja3lnhq63SxukBm9_mA-jn5R0Bj9RN8",["places"]),u=n(586),f=n(73);e.default={name:"map-view",data:function(){return{view:null,map:null,startResolution:null,autocomplete:null,mapModalVisible:!window.api||window.api.config.showMapDialogOnStart,showGrid:!1}},mounted:function(){this.showGrid=this.gridVisible,this.initAutoComplete(),this.loadMap(),s.ResizeEvents.$on("resize",this.updateMapView),window.eventBus.$on("boundsResolved",this.clearStartResolution)},beforeDestroy:function(){s.ResizeEvents.$off("resize",this.updateMapView),window.eventBus.$off("boundsResolved",this.clearStartResolution)},methods:{clearStartResolution:function(){this.startResolution=null,this.updateMapView()},initAutoComplete:function(){var t=this;c().then(function(e){var n=new e.places.Autocomplete(t.$refs.addressSearch);n.addListener("place_changed",function(){var e=n.getPlace();e.geometry&&(t.latitude=e.geometry.location.lat(),t.longitude=e.geometry.location.lng())})})},loadMap:function(){var t=this;window.ol=u,this.$refs.map.innerHTML="",this.view=new u.View,this.map=new u.Map({layers:[new u.layer.Tile({source:new u.source.OSM})],target:"map",view:this.view}),this.view.on("propertychange",function(e){"rotation"===e.key&&(t.rotation=t.view.getRotation())}),this.updateMapView()},updateMapView:function(){console.log("updateMapView"),this.map.updateSize();var t=(this.min_x+this.max_x)/2,e=(this.min_y+this.max_y)/2,n=(this.max_x-this.min_x)/this.$refs.map.clientWidth;if("ip"===this.units){var i=u.proj.METERS_PER_UNIT["us-ft"];n*=i,t*=i,e*=i}var r=u.proj.fromLonLat([this.longitude,this.latitude]),o=t*Math.cos(this.rotation)-e*Math.sin(this.rotation),a=e*Math.cos(this.rotation)+t*Math.sin(this.rotation);if(this.view.getCenter()){this.startResolution=this.startResolution||u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter()),console.log("start resolution",this.startResolution);var s=1/u.proj.getPointResolution(this.view.getProjection(),1,this.view.getCenter());n*=s,o*=s,a*=s}r[0]+=o,r[1]+=a,console.log("setting view resolution",n),this.view.setResolution(n),this.view.setCenter(r),this.view.setRotation(this.rotation)},finishSetup:function(){var t=u.proj.transform(this.view.getCenter(),"EPSG:3857","EPSG:4326");this.longitude=t[0],this.latitude=t[1];var e=u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter()),n=this.startResolution/e;window.eventBus.$emit("scaleTo",n),this.rotation=this.view.getRotation(),this.$store.dispatch("project/setMapInitialized",{initialized:!0}),this.tool="Rectangle",f.select("#reticle").remove(),this.gridVisible=this.showGrid},showReticle:function(){if("Map"===this.tool){this.gridVisible=!1;var t=100,e=this.$refs.map.clientWidth/2,n=this.$refs.map.clientHeight/2;f.select("#reticle").selectAll("#reticle path").data([[{x:e,y:n-t},{x:e,y:n+t}],[{x:e-t,y:n},{x:e+t,y:n}]]).enter().append("path").attr("stroke-width","1").attr("stroke","gray").attr("d",f.line().x(function(t){return t.x}).y(function(t){return t.y}))}}},computed:(0,o.default)({},(0,a.mapState)({projectView:function(t){return t.project.view},min_x:function(t){return t.project.view.min_x},max_x:function(t){return t.project.view.max_x},min_y:function(t){return t.project.view.min_y},max_y:function(t){return t.project.view.max_y},units:function(t){return t.project.config.units},mapInitialized:function(t){return t.project.map.initialized}}),{gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(t){this.$store.dispatch("project/setGridVisible",{visible:t})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool;
},set:function(t){this.$store.dispatch("application/setCurrentTool",{tool:t})}},latitude:{get:function(){return this.$store.state.project.map.latitude},set:function(t){this.$store.dispatch("project/setMapLatitude",{latitude:t})}},longitude:{get:function(){return this.$store.state.project.map.longitude},set:function(t){this.$store.dispatch("project/setMapLongitude",{longitude:t})}},rotation:{get:function(){return this.$store.state.project.map.rotation},set:function(t){this.$store.dispatch("project/setMapRotation",{rotation:t})}}}),watch:{units:function(){this.updateMapView()},latitude:function(){this.updateMapView()},longitude:function(){this.updateMapView()},rotation:function(){this.updateMapView()},projectView:{handler:function(){this.updateMapView()},deep:!0}},components:{MapModal:l.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(83),s=i(a),d=n(20),l=n(600),c=i(l);e.default={computed:(0,o.default)({},(0,d.mapGetters)({componentInstance:"application/currentComponentInstance",currentStory:"application/currentStory",currentComponent:"application/currentComponent"}),{instanceType:function(){return this.componentInstance&&this.componentInstance.type},columns:function(){return this.componentInstance?s.default[this.instanceType].columns:[]},visibleColumns:function(){return _.reject(this.columns,"private")},showInstanceEditor:function(){return this.instanceType&&this.currentComponent.type.replace(/_definitions$/,"s")===this.instanceType}}),methods:{destroyComponent:function(){if("windows"===this.instanceType)this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:this.componentInstance});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:this.componentInstance});else{if("doors"!==this.instanceType)throw new Error("Unrecognized component type "+this.instanceType);this.$store.dispatch("models/destroyDoor",{story_id:this.currentStory.id,object:this.componentInstance})}},modifyComponentInstance:function(t,e,n){if("windows"===this.instanceType)this.$store.dispatch("models/modifyWindow",{id:t,key:e,value:n,story_id:this.currentStory.id});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/modifyDaylightingControl",{id:t,key:e,value:n,story_id:this.currentStory.id});else{if("doors"!==this.instanceType)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDoor",{id:t,key:e,value:n,story_id:this.currentStory.id})}}},components:{EditBar:c.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(222),o=i(r),a=n(162),s=i(a);e.default={props:["row","columns","updateRow","destroy"],components:{GenericInput:o.default,Delete:s.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(602),o=i(r),a=n(223),s=i(a),d=n(108),l=i(d),c=n(653),u=i(c),f=n(645),p=i(f);e.default={name:"EditableSelectList",props:["columns","rows","addRow","editRow","destroyRow","selectRow","selectedRowId","objectTypes","selectedObjectType","searchAvailable","compact"],data:function(){return{search:""}},computed:{visibleColumns:function(){return _.reject(this.columns,"private")},searchedRows:function(){var t=this;return this.rows.filter(function(e){return _.chain(e).omit(["color"]).values().compact().some(function(e){return e.toLowerCase&&e.toLowerCase().includes(t.search.toLowerCase())}).value()})}},methods:{toggleCompact:function(){this.$emit("toggleCompact",!this.compact)}},watch:{rows:function(t,e){t===e&&t.length>e.length&&this.selectRow(_.maxBy(this.rows,function(t){return+t.id}))}},components:{EditableTable:o.default,LibrarySelect:s.default,PrettySelect:l.default,DoubleArrows:u.default,AddNew:p.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),a=(n(20),n(162)),s=i(a);e.default={name:"EditableTable",props:["columns","rows","deleteRow","updateRow","selectRow","selectedItemId"],data:function(){return{sortKey:function(t){return+t.id},sortDescending:!1}},computed:{visibleColumns:function(){return o.default.reject(this.columns,"private")},sortedRows:function(){var t=o.default.sortBy(this.rows,this.sortKey);return this.sortDescending&&t.reverse(),t}},methods:{sortBy:function(t){this.sortDescending=this.sortKey!==t||!this.sortDescending,this.sortKey=t}},components:{Delete:s.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["title"],data:function(){return{expanded:!1}},computed:{caret:function(){return this.expanded?"":""}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(75),o=i(r),a=n(3),s=i(a),d=n(584),l=i(d),c=n(615),u=i(c);e.default={name:"GenericInput",props:["col","row","onChange"],methods:{blurOnEnter:function(t){13===t.keyCode&&this.$el.blur(),27==t.keyCode&&(this.$el.value=row[col.name],this.$el.blur())},configurePicker:function(){var t=this;this.$refs.color_input&&new l.default(this.$refs.color_input,{saturations:1,notation:"hex"}).on("change",function(e){t.onChange(e)})}},mounted:function(){this.configurePicker()},computed:{selectData:function(){return s.default.toPairs(this.col.select_data(this.row,this.$store.state)).map(function(t){var e=(0,o.default)(t,2),n=e[0],i=e[1];return{val:i,display:n}})},rootState:function(){return this.$store.state},disabled:function(){return!!this.col.enabled&&!this.col.enabled(this.row)}},components:{TextureSelect:u.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=i(r),a=n(7),s=i(a),d=n(20),l=n(84),c=n(282),u=i(c),f=n(253),p=i(f),h=n(15),m=i(h),g=n(43),v=i(g),y=n(63),w=i(y),x=n(111),b=n(252),S=i(b),M=n(110),C=n(73);e.default={name:"grid",data:function(){var t=this,e=function(e){return t.rwuToGrid(e,"x")},n=function(e){return t.rwuToGrid(e,"y")};return(0,s.default)({points:[],axis:{x:null,y:null},axis_generator:{x:null,y:null},reduceTicks:!1,componentFacingSelection:null,transform:{k:1,x:0,y:0},transformAtLastRender:C.zoomIdentity,lastMousePosition:null,handleMouseMove:null},(0,S.default)({xScale:e,yScale:n,selectImage:function(e){t.currentImage=e},updateImage:function(t){return window.application.$store.dispatch("models/updateImageWithData",t)}}),{crosshatchModifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}})},mounted:function(){this.handleMouseMove=(0,u.default)(this.highlightSnapTarget,100),this.renderGrid(),this.renderGrid=(0,l.debounce)(this.renderGrid,5),this.$refs.grid.addEventListener("reloadGrid",this.reloadGridAndScales),window.addEventListener("keyup",this.escapeAction),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$on("resize",this.reloadGridAndScales),window.eventBus.$on("zoomToFit",this.zoomToFit),window.eventBus.$on("scaleTo",this.scaleTo)},beforeDestroy:function(){this.$refs.grid.removeEventListener("reloadGrid",this.reloadGridAndScales),window.removeEventListener("keyup",this.escapeAction),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$off("resize",this.reloadGridAndScales),window.eventBus.$off("zoomToFit",this.zoomToFit),window.eventBus.$off("scaleTo",this.scaleTo)},computed:(0,s.default)({},(0,d.mapState)({currentMode:function(t){return t.application.currentSelections.mode},modeTab:function(t){return t.application.currentSelections.modeTab},currentTool:function(t){return t.application.currentSelections.tool},snapMode:function(t){return t.application.currentSelections.snapMode},previousStoryVisible:function(t){return t.project.previous_story.visible},gridVisible:function(t){return t.project.grid.visible},units:function(t){return t.project.config.units},spacing:function(t){return t.project.grid.spacing},scaleX:function(t){return t.application.scale.x},scaleY:function(t){return t.application.scale.y},windowDefs:function(t){return t.models.library.window_definitions},doorDefs:function(t){return t.models.library.door_definitions},windowWidths:function(t){return _.sumBy(t.models.library.window_definitions,"width")},allVertices:function(t){return _.flatMap(t.geometry,"vertices")}}),(0,d.mapGetters)({currentStory:"application/currentStory",currentStoryGeometry:"application/currentStoryGeometry",denormalizedGeometry:"application/currentStoryDenormalizedGeom",currentSpace:"application/currentSpace",currentShading:"application/currentShading",currentComponent:"application/currentComponent",currentComponentInstance:"application/currentComponentInstance",currentSpaceProperty:"application/currentSpaceProperty"}),{spacePropertyKey:function(){switch(this.currentSpaceProperty.type){case"building_units":return"building_unit_id";case"thermal_zones":return"thermal_zone_id";case"space_types":return"space_type_id";case"pitched_roofs":return"pitched_roof_id";case"construction_sets":return"construction_set_id";default:throw new Error("unrecognized space property type "+this.currentSpaceProperty.type)}},windowAndDoorDefs:function(){return[].concat((0,o.default)(this.windowDefs),(0,o.default)(this.doorDefs.map(function(t){return(0,s.default)({},t,{window_definition_mode:"Single Window"})})))},currentImage:{get:function(){return this.$store.getters["application/currentImage"]},set:function(t){this.$store.dispatch("application/setCurrentSubSelectionId",{id:t.id})}},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(t){this.$store.dispatch("application/setCurrentSubSelectionId",{id:t.id})}},currentComponentInstanceId:{get:function(){return"components"===this.$store.state.application.currentSelections.modeTab&&this.$store.state.application.currentSelections.component_instance_id},set:function(t){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:t})}},min_x:{get:function(){return this.$store.state.project.view.min_x},set:function(t){this.$store.dispatch("project/setViewMinX",{min_x:t})}},min_y:{get:function(){return this.$store.state.project.view.min_y},set:function(t){this.$store.dispatch("project/setViewMinY",{min_y:t})}},max_x:{get:function(){return this.$store.state.project.view.max_x},set:function(t){this.$store.dispatch("project/setViewMaxX",{max_x:t})}},max_y:{get:function(){return this.$store.state.project.view.max_y},set:function(t){this.$store.dispatch("project/setViewMaxY",{max_y:t})}},previousStory:function(){var t=this,e=this.$store.state.models.stories.findIndex(function(e){return e===t.currentStory});return 0===e?null:this.$store.state.models.stories[e-1]},previousStoryGeometry:function(){var t=this;return this.previousStory?this.$store.state.geometry.find(function(e){return e.id===t.previousStory.geometry_id}):null},previousStoryPolygons:function(){return this.previousStoryVisible&&this.previousStoryGeometry?this.polygonsFromGeometry(this.previousStoryGeometry,{previous_story:!0}):[]},images:function(){var t=this;return this.currentStory.images.map(function(e){return(0,s.default)({},e,{current:"Image"===t.currentTool&&t.currentImage&&t.currentImage.id===e.id,clickable:"Image"===t.currentTool&&(!t.currentImage||t.currentImage.id!==e.id)})})},polygons:function(){var t=this.polygonsFromGeometry(this.currentStoryGeometry);return this.previousStoryPolygons?this.previousStoryPolygons.concat(t):t},daylightingControlLocs:function(){var t=this;return _.flatten(this.currentStory.spaces.map(function(e){return e.daylighting_controls.map(function(n){return(0,s.default)({},n,m.default.vertexForId(n.vertex_id,t.currentStoryGeometry),{id:n.id,type:"daylighting_controls",face_id:e.face_id})})}))},spaceFaces:function(){var t=this;return this.denormalizedGeometry.faces.filter(function(e){return _.find(t.currentStory.spaces,{face_id:e.id})})},spaceEdges:function(){return _.flatMap(this.spaceFaces,"edges")},visibleVerts:function(){var t=this;return this.allVertices.filter(function(e){return t.min_x<=e.x&&e.x<=t.max_x&&t.min_y<=e.y&&e.y<=t.max_y})}}),watch:{gridVisible:function(){this.showOrHideAxes()},spacing:function(){this.updateGrid()},units:function(){this.reloadGridAndScales()},currentMode:function(){this.draw()},polygons:function(){this.draw()},images:function(){this.draw()},windowDefs:function(){this.draw()},doorDefs:function(){this.draw()},currentTool:function(){this.points=[],this.draw(),this.clearHighlights(),"Image"===this.currentTool&&this.currentStory.images.length?this.currentImage&&_.includes(_.map(this.currentStory.images,"id"),this.currentImage.id)||(this.currentImage=this.currentStory.images[0]):_.includes(_.map(this.currentStory.spaces,"id"),this.currentSubSelection.id)||(this.currentSubSelection=this.currentStory.spaces[0])},currentSpace:function(){this.points=[],this.draw()},currentShading:function(){this.points=[],this.draw()},transform:function(t,e){t.k<.5?C.select("#svg-grid").selectAll(".polygon-text").style("display","none"):C.select("#svg-grid").selectAll(".polygon-text").style("display","initial")}},methods:(0,s.default)({},p.default,{windowCenterLocs:function(t){var e=this;return this.currentStory.windows.map(function(t){return{w:t,e:_.find(e.denormalizedGeometry.edges,{id:t.edge_id})}}).map(function(n){var i=n.w,r=n.e,o=e.denormalizeWindowOrDoor(r,i),a=(0,h.pointDistanceToSegment)(t,o),d=a.proj;return(0,s.default)({},o,{id:i.id,type:"windows"},d)})},doorCenterLocs:function(t){var e=this;return this.currentStory.doors.map(function(t){return{w:t,e:_.find(e.denormalizedGeometry.edges,{id:t.edge_id})}}).map(function(n){var i=n.w,r=n.e,o=e.denormalizeWindowOrDoor(r,i),a=(0,h.pointDistanceToSegment)(t,o),d=a.proj;return(0,s.default)({},o,{id:i.id,type:"doors"},d)})},currentComponentTypeLocs:function(t){if("window_definitions"===this.currentComponentType)return this.windowCenterLocs(t);if("daylighting_control_definitions"===this.currentComponentType)return this.daylightingControlLocs;if("door_definitions"===this.currentComponentType)return this.doorCenterLocs(t);throw new Error("unrecognized componentType: "+this.currentComponentType)},denormalizeWindowOrDoor:function(t,e){var n=(e.edge_id,e.alpha),i=e.window_definition_id,r=e.door_definition_id,o=_.find(this.windowAndDoorDefs,{id:i||r}),a=(0,M.windowLocation)(t,{alpha:n});return(0,s.default)({},(0,M.expandWindowAlongEdge)(t,a,o),{window_definition_mode:o.window_definition_mode,windowOrDoor:o.window_definition_mode?"window":"door",width:o.width,spacing:o.window_spacing,texture:o.texture})},windowsOnFace:function(t){var e=this;return _.flatMap(t.edges,function(t){return _.filter(e.currentStory.windows,{edge_id:t.id}).map(function(n){return(0,s.default)({},e.denormalizeWindowOrDoor(t,n),{selected:n.id===e.currentComponentInstanceId,facingSelection:n.id===e.componentFacingSelection})})})},doorsOnFace:function(t){var e=this;return _.flatMap(t.edges,function(t){return _.filter(e.currentStory.doors,{edge_id:t.id}).map(function(n){return(0,s.default)({},e.denormalizeWindowOrDoor(t,n),{windowOrDoor:"door",selected:n.id===e.currentComponentInstanceId,facingSelection:n.id===e.componentFacingSelection})})})},polygonsFromGeometry:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.default.denormalize(t),r=i.faces.map(function(i){var r=v.default.modelForFace(e.$store.state.models,i.id),o=i.vertices.slice(0,-1),a=(0,s.default)({face_id:i.id,name:r.name,modelType:r.type,color:r.color,points:o,labelPosition:e.polygonLabelPosition(o),windows:e.windowsOnFace(i),doors:e.doorsOnFace(i),current:"Apply Property"!==e.currentTool&&e.currentSpace&&i.id===e.currentSpace.face_id||"Apply Property"!==e.currentTool&&e.currentShading&&i.id===e.currentShading.face_id||"Apply Property"===e.currentTool&&e.currentSpaceProperty&&r[e.spacePropertyKey]===e.currentSpaceProperty.id,daylighting_controls:(r.daylighting_controls||[]).map(function(n){return(0,s.default)({},m.default.vertexForId(n.vertex_id,t),{selected:n.id===e.currentComponentInstanceId,facingSelection:n.id===e.componentFacingSelection})})},n);if(!o.length)return null;if("space"===r.type)if("thermal_zones"===e.currentMode){var d=v.default.libraryObjectWithId(e.$store.state.models,r.thermal_zone_id);a.color=d?d.color:w.default.config.palette.neutral}else if("space_types"===e.currentMode){var l=v.default.libraryObjectWithId(e.$store.state.models,r.space_type_id);a.color=l?l.color:w.default.config.palette.neutral}else if("building_units"===e.currentMode){var c=v.default.libraryObjectWithId(e.$store.state.models,r.building_unit_id);a.color=c?c.color:w.default.config.palette.neutral}else if("pitched_roofs"===e.currentMode){var u=v.default.libraryObjectWithId(e.$store.state.models,r.pitched_roof_id);a.color=u?u.color:w.default.config.palette.neutral}else if("construction_sets"===e.currentMode){var f=v.default.libraryObjectWithId(e.$store.state.models,r.construction_set_id);a.color=f?f.color:w.default.config.palette.neutral}else if("spaces"!==e.currentMode)throw new Error("unknown assignable property: "+e.currentMode);return a});return _.sortBy(_.compact(r),"current")}})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(43),d=i(s);e.default={name:"ImageUpload",mounted:function(){window.eventBus.$on("uploadImage",this.promptUpload.bind(this))},computed:(0,o.default)({},(0,a.mapState)({pxPerRWU:function(t){var e=t.application.scale.x,n=e.pixels,i=e.rwuRange;return n/(i[1]-i[0])},max_y:function(t){return t.project.view.max_y},min_y:function(t){return t.project.view.min_y},min_x:function(t){return t.project.view.min_x},max_x:function(t){return t.project.view.max_x}}),(0,a.mapGetters)({currentStory:"application/currentStory"})),methods:{promptUpload:function(){this.$refs.imageInput.click()},uploadImage:function(t){for(var e=t.target.files,n=this,i=function(t){var i=e[t],r=new FileReader;r.addEventListener("load",function(){var t=new Image;t.onload=function(){var e=t.height/n.pxPerRWU/4,i=t.width/n.pxPerRWU/4;n.$store.dispatch("models/createImageForStory",{story_id:n.currentStory.id,src:t.src,name:d.default.generateName(n.$store.state.models,"images",n.currentStory),height:e,width:i,x:(n.min_x+n.max_x)/2,y:(n.min_y+n.max_y)/2}),n.$refs.imageInput.value=""},t.src=r.result},!1),i&&r.readAsDataURL(i)},r=0;r<e.length;r++)i(r)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(225),o=i(r);e.default={name:"Info",components:{InfoIcon:o.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(15),d=i(s);e.default={name:"inspector",data:function(){return{geometryInspector:!0,storyInspector:!1}},methods:{startpoint:function(t){var e=this.edgeForId(t.edge_id);if(t.reverse){var n=this.vertexForId(e.v2);return"v2 "+n.id+" ("+n.x+", "+n.y+")"}var i=this.vertexForId(e.v1);return"v1 "+i.id+" ("+i.x+", "+i.y+")"},endpoint:function(t){var e=this.edgeForId(t.edge_id);if(!t.reverse){var n=this.vertexForId(e.v2);return n.id+" (v2) ("+n.x+", "+n.y+")"}var i=this.vertexForId(e.v1);return i.id+" (v1) ("+i.x+", "+i.y+")"},edgeForId:function(t){return d.default.edgeForId(t,this.currentStoryGeometry)},vertexForId:function(t){return d.default.vertexForId(t,this.currentStoryGeometry)}},computed:(0,o.default)({},(0,a.mapGetters)({currentStory:"application/currentStory",currentSubSelectionFace:"application/currentSubSelectionFace",currentStoryGeometry:"application/currentStoryGeometry",currentSpace:"application/currentSpace",currentShading:"application/currentShading"}))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return"stories"===t?"currentStory":_.includes(g.componentTypes,t)?"currentComponentDef":_.includes(g.assignableProperties,t)?"currentSpaceProperty":_.includes(["windows","daylighting_controls"],t)?"currentComponentInstance":"currentSubSelection"}Object.defineProperty(e,"__esModule",{value:!0});var o=n(37),a=i(o),s=n(7),d=i(s),l=n(20),c=n(83),u=i(c),f=n(601),p=i(f),h=n(43),m=i(h),g=n(21);e.default={name:"Library",props:["objectTypes","mode","searchAvailable","compact"],computed:(0,d.default)({objectTypesDisplay:function(){return this.objectTypes.map(function(t){return{val:t,display:u.default[t].displayName}})},columns:function(){return u.default[this.mode]?u.default[this.mode].columns:[]},currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(t){this.$store.dispatch("application/setCurrentStoryId",{id:t.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(t){this.$store.dispatch("application/setCurrentSubSelectionId",{id:t.id})}},currentSpaceProperty:{get:function(){return this.$store.getters["application/currentSpaceProperty"]},set:function(t){this.$store.dispatch("application/setCurrentSpacePropertyId",{id:t.id})}},currentComponentDef:{get:function(){return this.$store.getters["application/currentComponentDefinition"]},set:function(t){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:t.id})}},currentComponentInstance:{get:function(){return this.$store.getters["application/currentComponentInstance"]},set:function(t){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:t.id})}},selectedObject:{get:function(){return this[this.keyForCurrentMode]},set:function(t){this[this.keyForCurrentMode]=t}},keyForCurrentMode:function(){return r(this.mode)}},(0,l.mapState)({stories:function(t){return t.models.stories},modeTab:function(t){return t.application.currentSelections.modeTab}}),{spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},windows:function(){return this.currentStory.windows},daylighting_controls:function(){return _.flatMap(this.currentStory.spaces,function(t){return t.daylighting_controls})},rows:function(){return _.includes(["stories","spaces","shading","images","windows","daylighting_controls"],this.mode)?this[this.mode]:this.$store.state.models.library[this.mode]},componentInstanceMode:function(){return _.includes(["windows","daylighting_controls"],this.mode)},addRowPermitted:function(){return"stories"!==this.mode||"floorplan"===this.modeTab},renderByMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(t){this.$store.dispatch("application/setCurrentMode",{mode:t})}}}),watch:{rows:function(){this.selectedObject&&_.includes(_.map(this.rows,"id"),this.selectedObject.id)||!(this.rows.length>0)||(this.selectedObject=this.rows[0])},mode:function(t,e){"currentSpaceProperty"===r(t)?this.renderByMode=this.mode:"currentSpaceProperty"===r(e)&&(this.renderByMode="spaces")}},methods:{changeMode:function(t){if(!_.includes(this.objectTypes,t))throw new Error("Unable to find "+t+" in options "+(0,a.default)(this.objectTypes));this.$emit("changeMode",t)},modifyObject:function(t,e,n){if(this.componentInstanceMode)return this.modifyComponentInstance(t,e,n);var i=_.find(this.rows,{id:t}),r=m.default.setValueForKey(i,this.$store,this.mode,e,n);r.success||window.eventBus.$emit("error",r.error)},modifyComponentInstance:function(t,e,n){if("windows"===this.mode)this.$store.dispatch("models/modifyWindow",{id:t,key:e,value:n,story_id:this.currentStory.id});else{if("daylighting_controls"!==this.mode)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDaylightingControl",{id:t,key:e,value:n,story_id:this.currentStory.id})}},createObject:function(){switch(this.mode){case"stories":return void this.$store.dispatch("models/initStory");case"spaces":this.$store.dispatch("models/initSpace",{story:this.currentStory});break;case"shading":this.$store.dispatch("models/initShading",{story:this.currentStory});break;case"images":window.eventBus.$emit("uploadImage");break;case"windows":case"daylighting_controls":window.eventBus.$emit("error","Create components by clicking where you would like it to be");break;default:this.$store.dispatch("models/createObjectWithType",{type:this.mode})}this.selectLatest()},selectLatest:function(){var t=_.maxBy(this.rows,function(t){return+t.id});t&&(this.selectedObject=t)},destroyObject:function(t){var e=this;switch(this.mode){case"stories":return void this.$store.dispatch("models/destroyStory",{story:t});case"spaces":this.$store.dispatch("models/destroySpace",{space:t,story:this.$store.state.models.stories.find(function(n){return n[e.mode].find(function(e){return e.id===t.id})})});break;case"shading":this.$store.dispatch("models/destroyShading",{shading:t,story:this.$store.state.models.stories.find(function(n){return n[e.mode].find(function(e){return e.id===t.id})})});break;case"images":this.$store.dispatch("models/destroyImage",{image:t,story:this.$store.state.models.stories.find(function(n){return n[e.mode].find(function(e){return e.id===t.id})})});break;case"window_definitions":this.$store.dispatch("models/destroyWindowDef",{object:t});break;case"daylighting_control_definitions":this.$store.dispatch("models/destroyDaylightingControlDef",{object:t});break;case"door_definitions":this.$store.dispatch("models/destroyDoorDef",{object:t});break;case"windows":this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:t});break;case"daylighting_controls":this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:t});break;default:this.$store.dispatch("models/destroyObject",{object:t})}}},components:{EditableSelectList:p.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(162),o=i(r);e.default={name:"LibrarySelect",props:["rows","selectedItemId","selectItem","destroyItem"],components:{Delete:o.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(164),s=i(a),d=n(613),l=i(d);e.default={name:"MapModal",data:function(){return{address:""}},computed:{online:function(){return!window.api||!window.api.config||window.api.config.online},mapEnabled:{get:function(){return this.$store.state.project.map.enabled},set:function(t){this.$store.dispatch("project/setMapEnabled",{enabled:t})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(t){this.$store.dispatch("application/setCurrentTool",{tool:t})}}},methods:{importFloorplanAsFile:function(t){var e=this,n=t.target.files[0],i=new FileReader;i.addEventListener("load",function(){e.importFloorplan(i.result)},!1),n&&i.readAsText(n)},importFloorplan:function(t){this.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:JSON.parse(t)}),this.$emit("close")}},components:(0,o.default)({},s.default,{NonChromeWarning:l.default})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ModalBase",props:["title"],methods:{close:function(){this.$emit("close")}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(37),o=i(r),a=n(224),s=i(a);e.default={name:"SaveAsModal",props:["saveWhat","dataToDownload"],mounted:function(){this.$refs.downloadName.focus()},methods:{downloadFile:function(){var t=document.createElement("a");t.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent((0,o.default)(this.dataToDownload))),t.setAttribute("download",this.$refs.downloadName.value+".json"),t.click(),console.log("exporting:\n"+(0,o.default)(this.dataToDownload)),this.$emit("close")}},components:{ModalBase:s.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(224),d=i(s),l=n(606),c=i(l),u=n(603),f=i(u);e.default={name:"Settings",computed:(0,o.default)({},(0,a.mapState)({ground:function(t){return t.project.ground},mapEnabled:function(t){return t.project.map.enabled}}),{floor_offset:{get:function(){return this.ground.floor_offset},set:function(t){this.$store.dispatch("project/modifyGround",{key:"floor_offset",val:t})}},azimuth_angle:{get:function(){return this.ground.azimuth_angle},set:function(t){this.$store.dispatch("project/modifyGround",{key:"azimuth_angle",val:t})}},tilt_slope:{get:function(){return this.ground.tilt_slope},set:function(t){this.$store.dispatch("project/modifyGround",{key:"tilt_slope",val:t})}},northAxis:{get:function(){return this.$store.state.project.north_axis+""},set:function(t){this.$store.dispatch("project/setNorthAxis",{north_axis:t})}}}),components:{ModalBase:d.default,Info:c.default,ExpandableDrawer:f.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(3),s=i(a),d=n(20),l=(n(84),n(63)),c=(i(l),n(43)),u=(i(c),n(163)),f=i(u),p=n(608),h=i(p),m=n(223);i(m);e.default={name:"navigation",data:function(){return{libraryExpanded:!1}},computed:(0,o.default)({},(0,d.mapGetters)({currentComponent:"application/currentComponent"}),(0,d.mapState)({modeTab:function(t){return t.application.currentSelections.modeTab}}),{currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(t){this.$store.dispatch("application/setCurrentStoryId",{id:t.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(t){this.$store.dispatch("application/setCurrentSubSelectionId",{id:t?t.id:null})}},spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},objectTypesForTab:function(){switch(this.modeTab){case"floorplan":return["spaces","shading","images"];case"shading":return["shading"];case"components":return["window_definitions","daylighting_control_definitions","door_definitions"];case"assign":return["building_units","thermal_zones","space_types","construction_sets","pitched_roofs"]}},mode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(t){this.$store.dispatch("application/setCurrentMode",{mode:t})}},subselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(t){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:t})}}}),methods:{resetSize:function(){this.libraryExpanded},setWidthForOpenLibrary:function(){this.$emit("expanded",!!this.libraryExpanded),f.default.$emit("resize")}},watch:{libraryExpanded:function(){this.setWidthForOpenLibrary()},objectTypesForTab:function(t){s.default.includes(t,this.subselectionType)||("assign"===this.modeTab?this.subselectionType="thermal_zones":this.subselectionType=t[0])}},components:{Library:h.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{isChrome:function(){var t=window.chrome||window.qt,e=window.navigator,n=e.vendor,i=e.userAgent.indexOf("OPR")>-1,r=e.userAgent.indexOf("Edge")>-1,o=e.userAgent.match("CriOS");
return!o&&(null!==t&&"undefined"!=typeof t&&"Google Inc."===n&&i===!1&&r===!1)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r);e.default={name:"PrettySelect",props:["options","value","label","disabled"],computed:{normalizedOpts:function(){if(o.default.isArray(this.options)){if(!this.options.length)return[];if(o.default.has(this.options[0],"val")&&o.default.has(this.options[0],"display"))return this.options;if(o.default.isString(this.options[0]))return this.options.map(function(t){return{val:t,display:t}})}return console.warn("unrecognized options structure",this.options),this.options}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(63),o=n(108),a=i(o);e.default={computed:{renderableProperties:function(){return["spaces","building_units","thermal_zones","space_types","construction_sets","pitched_roofs"]},renderableOptions:function(){return this.renderableProperties.map(function(t){return{display:(0,r.displayNameForMode)(t),val:t}})},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(t){this.$store.dispatch("application/setCurrentMode",{mode:t})}}},components:{PrettySelect:a.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),o=(i(r),n(21)),a=n(3);i(a);e.default={name:"TextureSelect",props:["value","label","disabled"],data:function(){return{open:!1}},computed:{textures:function(){return o.textures}},methods:{choose:function(t){this.$emit("change",t),this.open=!1}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=i(r),a=n(167),s=i(a),d=n(48),l=i(d),c=n(3),u=i(c),f=n(21);e.default={name:"Textures",data:function(){return{modifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}}},mounted:function(){this.loadCssStyles(),this.checkTexturesList()},methods:{loadCssStyles:function(){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=this.styles:t.appendChild(document.createTextNode(this.styles)),document.head.appendChild(t)},checkTexturesList:function(){var t=u.default.difference(f.textures,u.default.map(this.patterns,"id")),e=u.default.difference(u.default.map(this.patterns,"id"),f.textures);t.length&&console.error("[warning]: Textures were added to Textures.vue, but not to appconfig.js.\n  This will cause those textures not to be used. The following are missing from appconfig:\n  "+t),e.length&&console.error("[warning]: Textures were added to appconfig.js, but not to Textures.vue.\n  Those textures will not be visible. The following are missing from Textures.vue:\n  "+e)}},computed:{modSuffixes:function(){return u.default.filter((0,l.default)(this.modifiers),u.default.identity)},patterns:function(){var t=this;return u.default.reject((0,s.default)(this.$el.querySelectorAll("pattern")),function(e){return t.modSuffixes.some(function(t){return u.default.endsWith(e.getAttribute("id"),t)})})},cssStyles:function(){return this.patterns.map(function(t){var e=t.getAttribute("id"),n=t.getAttribute("width"),i=t.getAttribute("height"),r=t.innerHTML,o="<svg xmlns='http://www.w3.org/2000/svg' width='"+n+"' height='"+i+"'>"+r+"</svg>";return"\n            .texture-"+e+' {\n              background-image: url("data:image/svg+xml;base64,'+btoa(o)+'");\n              background-repeat: repeat;\n            }'})},windowStyles:function(){return u.default.map(this.patterns,function(t){return t.getAttribute("id")}).map(function(t){return'\n            #grid svg .polygons .window .hatch[data-texture="'+t+'"] {\n              fill: url(#'+t+');\n            }\n            #grid svg .polygons .window .facing-selection .hatch[data-texture="'+t+'"] {\n              fill: url(#'+t+'-facing-selection);\n            }\n            #grid svg .polygons .window .selected .hatch[data-texture="'+t+'"] {\n              fill: url(#'+t+'-selected);\n            }\n            #grid svg .highlight .window .hatch[data-texture="'+t+'"] {\n              fill: url(#'+t+"-highlight);\n            }\n          "})},styles:function(){return[].concat((0,o.default)(this.cssStyles),(0,o.default)(this.windowStyles)).join("\n")}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(20),s=n(610),d=i(s),l=n(611),c=i(l),u=n(108),f=i(u),p=n(63),h=i(p),m=n(164),g=i(m),v=n(614),y=i(v),w=n(599),x=i(w),b=n(21),S=i(b);e.default={name:"toolbar",data:function(){return{componentTypes:{daylighting_control_definitions:"Daylighting Control Definitions",window_definitions:"Window Definitions"},showSaveModal:!1,thingWereSaving:"",visibleComponentType:null,showGroundPropsModal:!1}},methods:{setImageTool:function(){this.tool="Image",0===this.currentStory.images.length&&window.eventBus.$emit("uploadImage")},zoomToFit:function(){window.eventBus.$emit("zoomToFit")},exportData:function(){return this.thingWereSaving="Floorplan",this.showSaveModal=!0,this.$store.getters.exportData},importDataAsFile:function(t,e){var n=this,i=t.target.files[0],r=new FileReader;r.addEventListener("load",function(){var t=void 0;try{t=JSON.parse(r.result)}catch(t){return void window.eventBus.$emit("error","Invalid JSON")}"library"===e?n.$store.dispatch("importLibrary",{data:t}):"floorplan"===e&&n.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:t})},!1),i&&r.readAsText(i)},undo:function(){this.$store.timetravel.undo()},redo:function(){this.$store.timetravel.redo()},updateUnits:function(t){this.allowSettingUnits?this.rwUnits=t:window.eventBus.$emit("error","Units must be set before any geometry is drawn.")},displayNameForMode:function(t){return h.default.displayNameForMode(t)}},computed:(0,o.default)({latestCreatedCompId:function(){return _.chain(this.allComponents).map("defs").flatten().map("id").map(Number).max().value()+""},allComponents:function(){var t=this;return b.componentTypes.map(function(e){return{defs:t.$store.state.models.library[e],name:S.default.modes[e],type:e}})},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition}},(0,a.mapGetters)({currentSpaceProperty:"application/currentSpaceProperty",currentStory:"application/currentStory"}),(0,a.mapState)({mapEnabled:function(t){return t.project.map.enabled},timetravelInitialized:function(t){return t.timetravelInitialized},showImportExport:function(t){return t.project.show_import_export},allowSettingUnits:function(t){return!1}}),{currentSubselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(t){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:t})}},availableTools:function(){var t=[];switch(this.modeTab){case"floorplan":t=["Rectangle","Polygon","Eraser","Select","Image"];break;case"shading":t=["Rectangle","Polygon","Eraser","Select"];break;case"components":t=["Place Component"];break;case"assign":t=["Apply Property"]}return!this.previousStoryVisible||"floorplan"!==this.modeTab&&"shading"!==this.currentMode||t.push("Fill"),t},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(t){this.$store.dispatch("application/setCurrentMode",{mode:t})}},modeTab:{get:function(){return this.$store.state.application.currentSelections.modeTab},set:function(t){this.$store.dispatch("application/setCurrentModeTab",{modeTab:t})}},gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(t){this.$store.dispatch("project/setGridVisible",{visible:t})}},mapVisible:{get:function(){return this.$store.state.project.map.visible},set:function(t){this.$store.dispatch("project/setMapVisible",{visible:t})}},previousStoryVisible:{get:function(){return this.$store.state.project.previous_story.visible},set:function(t){this.$store.dispatch("project/setPreviousStoryVisible",{visible:t})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(t){this.$store.dispatch("application/setCurrentTool",{tool:t})}},spacing:{get:function(){return this.$store.state.project.grid.spacing},set:function(t){this.$store.dispatch("project/setSpacing",{spacing:t})}},currentComponent:{get:function(){return this.$store.getters["application/currentComponent"]},set:function(t){t&&t.definition&&t.definition.id&&this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:t.definition.id})}},rwUnits:{get:function(){return"ip"===this.$store.state.project.config.units?"ft":"m"},set:function(t){this.$store.dispatch("project/setUnits",{units:"ft"===t?"ip":"si"})}},snapMode:{get:function(){return this.$store.state.application.currentSelections.snapMode},set:function(t){this.$store.dispatch("application/setCurrentSnapMode",{snapMode:t})}},dataToDownload:function(){return this.$store.getters.exportData}}),watch:{modeTab:function(){"assign"===this.modeTab&&this.currentSpaceProperty?this.currentMode=this.currentSpaceProperty.type:this.currentMode="spaces"},tool:function(t){this.availableTools.indexOf(t)===-1&&"Map"!==t&&(this.tool=this.availableTools[0]),"Image"===this.tool&&"images"!==this.currentSubselectionType?this.currentSubselectionType="images":"Image"!==this.tool&&"images"===this.currentSubselectionType&&(this.currentSubselectionType="spaces")},availableTools:function(){_.includes(this.availableTools,this.tool)||(this.tool=this.availableTools[0])},currentSubselectionType:function(t){"images"===t&&"Image"!==this.tool?this.tool="Image":"images"!==t&&"Image"===this.tool&&(this.tool=this.availableTools[0])},latestCreatedCompId:function(){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:this.latestCreatedCompId})}},components:(0,o.default)({PrettySelect:f.default,SaveAsModal:d.default,Settings:c.default,RenderByDropdown:y.default,ComponentInstanceEditBar:x.default},g.default)}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.xScale,n=t.yScale,i=t.edge,r=t.offset,o=(0,T.unitPerpVector)(i.start,i.end),a=o.dx,s=o.dy;return[[e(i.start.x)+r*a,n(i.start.y)+r*s],[e(i.start.x)-r*a,n(i.start.y)-r*s],[e(i.end.x)-r*a,n(i.end.y)-r*s],[e(i.end.x)+r*a,n(i.end.y)+r*s],[e(i.start.x)+r*a,n(i.start.y)+r*s]]}function a(t,e,n,i){S.select(n).selectAll(".single-window, .repeating-windows").remove();var r=S.select(n).selectAll(".window-wall-ratio").data([i]),a=r.enter().append("g").attr("class","window-wall-ratio");a.append("path").attr("class","hatch");var s=S.line(),d=r.merge(a);d.classed("selected",function(t){return t.selected}),d.classed("facing-selection",function(t){return t.facingSelection}),d.select(".hatch").attr("d",s(o({edge:i,xScale:t,yScale:e,offset:8}))).attr("data-texture",i.texture||"diagonal-stripes-4")}function s(t,e,n,i){var r=S.select(n).selectAll(".door").data([i]),a=r.enter().append("g").attr("class","door");a.append("path").attr("class","hatch");var s=S.line(),d=r.merge(a);d.exit().remove(),d.classed("selected",function(t){return t.selected}),d.classed("facing-selection",function(t){return t.facingSelection}),d.select(".hatch").attr("d",s(o({edge:i,xScale:t,yScale:e,offset:8}))).attr("data-texture",i.texture)}function d(t,e,n,i){S.select(n).selectAll(".window-wall-ratio, .repeating-windows").remove();var r=S.select(n).selectAll(".single-window").data([i]),o=r.enter().append("g").attr("class","single-window");o.append("line").attr("class","pane"),o.append("circle"),o.append("line").attr("class","start-linecap"),o.append("line").attr("class","end-linecap");var a=r.merge(o);a.classed("selected",function(t){return t.selected}),a.classed("facing-selection",function(t){return t.facingSelection}),a.select("line.pane").attr("x1",function(e){return t(e.start.x)}).attr("y1",function(t){return e(t.start.y)}).attr("x2",function(e){return t(e.end.x)}).attr("y2",function(t){return e(t.end.y)}),a.each(function(n){var i=(0,T.unitPerpVector)(n.start,n.end),r=i.dx,o=i.dy,a=6,s=S.select(this);s.select(".start-linecap").attr("x1",t(n.start.x)+a*r).attr("y1",e(n.start.y)+a*o).attr("x2",t(n.start.x)-a*r).attr("y2",e(n.start.y)-a*o),s.select(".end-linecap").attr("x1",t(n.end.x)+a*r).attr("y1",e(n.end.y)+a*o).attr("x2",t(n.end.x)-a*r).attr("y2",e(n.end.y)-a*o),(n.selected||n.facingSelection)&&s.raise()}),a.select("circle").attr("cx",function(e){return t(e.center.x)}).attr("cy",function(t){return e(t.center.y)}).attr("r","2")}function l(t,e,n,i){var r=i.start,a=i.end,s=i.width,l=i.spacing;S.select(n).selectAll(".window-wall-ratio, .single-window").remove();var c=S.select(n).selectAll(".repeating-windows").data([i]),u=c.enter().append("g").attr("class","repeating-windows");u.append("path").attr("class","box"),u.append("g").attr("class","sub-windows");var f=S.line(),p=c.merge(u);p.classed("selected",function(t){return t.selected}),p.classed("facing-selection",function(t){return t.facingSelection}),p.select(".box").attr("d",f(o({edge:i,xScale:t,yScale:e,offset:6})));var h=(0,T.unitVector)(r,a),m=(0,T.repeatingWindowCenters)({start:r,end:a,spacing:l,width:s}),g=h.dx*s,v=h.dy*s,y=m.map(function(t){return(0,x.default)({},i,{center:t,start:{x:t.x-g/2,y:t.y-v/2},end:{x:t.x+g/2,y:t.y+v/2}})}),_=p.select(".sub-windows").selectAll(".sub-window").data(y);_.exit().remove(),_.merge(_.enter().append("g").attr("class","sub-window")).each(function(n){d(t,e,this,n)})}function c(){function t(t){t.exit().remove(),t.merge(t.enter().append("g").attr("class","window")).each(function(t){if("door"===t.windowOrDoor)s(e,n,this,t);else if("Single Window"===t.window_definition_mode)d(e,n,this,t);else if("Window to Wall Ratio"===t.window_definition_mode)a(e,n,this,t);else{if("Repeating Windows"!==t.window_definition_mode)throw new Error("unexpected window_definition_mode: "+t.window_definition_mode);l(e,n,this,t)}})}var e=C.default.identity,n=C.default.identity;return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t}function u(){function t(t){t.exit().remove();var o=t.enter().append("g").attr("class","distance-measure").attr("transform",function(t){var e=(0,T.unitPerpVector)(t.start,t.end),n=e.dx,r=e.dy,o=i*n,a=i*r;return"translate("+o+", "+a+")"});o.append("line"),o.append("text"),o.append("path").attr("class","start"),o.append("path").attr("class","end");var a=t.merge(o);a.select("text").attr("x",function(t){return(1-r)*e(t.start.x)+r*e(t.end.x)}).attr("y",function(t){return(1-r)*n(t.start.y)+r*n(t.end.y)}).attr("dominant-baseline","text-before-edge").attrs(function(t){var e=(0,T.unitPerpVector)(t.start,t.end),n=e.dx,i=e.dy,r=4;return{dx:n*r,dy:i*r}}).text(function(t){var e=(0,T.distanceBetweenPoints)(t.start,t.end),n=Math.round(100*e)/100;return""+n}),a.select("line").attrs(function(t){var i=(0,T.unitVector)(t.start,t.end),r=i.dx,o=i.dy,a=11.5,s=r*a,d=o*a;return{x1:e(t.start.x)+s,y1:n(t.start.y)-d,x2:e(t.end.x)-s,y2:n(t.end.y)+d}});var s="M -6,-2 V 2 L0,0 Z",d=function(t){var e=180*(0,T.edgeDirection)(t)/Math.PI,n=t.start.x===t.end.x?t.start.y>t.end.y?0:180:t.start.x>t.end.x?0:180;return n-e};a.select("path.start").attr("transform",function(t){return"translate("+e(t.start.x)+", "+n(t.start.y)+") scale(2) rotate("+d(t)+")"}).attr("d",s),a.select("path.end").attr("transform",function(t){return"translate("+e(t.end.x)+", "+n(t.end.y)+") scale(2) rotate("+(180+d(t))+")"}).attr("d",s)}var e=C.default.identity,n=C.default.identity,i=20,r=1;return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t.lineOffset=function(e){return arguments.length?(i=e,t):i},t.labelPosition=function(e){return arguments.length?((e<0||e>1)&&console.warn("Expected labelPosition to be in [0, 1] (got "+e+")"),r=e,t):r},t}function f(){function t(t){i.xScale(e).yScale(n),t.exit().remove(),t.merge(t.enter().append("g").classed("window-guideline component-guideline",!0)).selectAll(".distance-measure").data(t.merge(t.enter()).data().map(function(t){return{start:t.edge_start,end:t.center}})).filter(function(t){return"Single Window"===t.window_definition_mode}).call(i)}var e=C.default.identity,n=C.default.identity,i=u();return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t}function p(){function t(t){t.exit().remove();var i=t.enter().append("g").attr("class","daylighting-control");i.append("circle").attr("class","bg"),i.append("path").attr("class","quadrants");var r=t.merge(i);r.classed("selected",function(t){return t.selected}),r.classed("facing-selection",function(t){return t.facingSelection}),r.select("circle.bg").attr("cx",function(t){return e(t.x)}).attr("cy",function(t){return n(t.y)}).attr("r",10),r.select("path.quadrants").attr("d",function(t){var i=e(t.x),r=n(t.y),o=10;return"M"+i+" "+r+" L"+(i+o)+" "+r+" A "+o+" "+o+" 0 0 1 "+i+" "+(r+o)+" L "+i+" "+(r-o)+" A "+o+" "+o+" 0 0 0 "+(i-o)+" "+r+" Z"}),r.each(function(t){(t.selected||t.facingSelection)&&S.select(this).raise()})}var e=C.default.identity,n=C.default.identity;return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t}function h(){function t(t){i.xScale(e).yScale(n),t.exit().remove();var r=t.enter().append("g").classed("daylighting-control-guideline component-guideline",!0),o=C.default.flatMap(t.merge(t.enter()).data(),function(t){var e=(0,T.unitVector)(t.nearestEdge.v1,t.nearestEdge.v2),n={start:t.loc,end:t.nearestEdge.proj},i=(n.end.x-n.start.x)*e.dx+(n.end.y-n.start.y)*e.dy,r={start:n.start,end:{x:n.start.x+i*e.dx,y:n.start.y+i*e.dy}},o={start:r.end,end:n.end};return[n,o,r].filter(function(t){var e=t.start,n=t.end;return(0,T.distanceBetweenPoints)(e,n)>.01})}),a=t.merge(r);a.selectAll(".distance-measure").data(o).call(i)}var e=C.default.identity,n=C.default.identity,i=u().lineOffset(0).labelPosition(.5);return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t}function m(t,e,n){var i=Math.sqrt(t*t+e*e),r=t/i,o=e/i,a=Math.PI*n/180,s={x:r*Math.cos(a)-o*Math.sin(a),y:r*Math.sin(a)+o*Math.cos(a)};return C.default.minBy(P,function(t){return(0,T.distanceBetweenPoints)(t.vec,s)}).cursor}function g(){function t(t){var o=(e(100)-e(0))/100,a=void 0,s=void 0,d=void 0,l=void 0,c=function(t){var e=d-a,n=l-s,i=-1*t.r*Math.PI/180;return{dx:e*Math.cos(i)-n*Math.sin(i),dy:e*Math.sin(i)+n*Math.cos(i)}},u=S.drag().on("start",function(){S.event.sourceEvent.stopPropagation();var t=S.mouse(document.querySelector("#grid svg")),e=(0,_.default)(t,2);a=e[0],s=e[1],d=l=void 0}).on("drag",function(t){var e=S.mouse(document.querySelector("#grid svg")),n=(0,_.default)(e,2);d=n[0],l=n[1];var i=c(t),r=i.dx,o=i.dy;S.select(this).attr("transform","translate("+r+", "+o+")")}).on("end",function(t){if("undefined"!=typeof d){var e=c(t);e.dx,e.dy;i({image:t,x:t.x+(d-a)/o,y:t.y-(l-s)/o})}}),f=function(t){var i={x:e(t.x),y:n(t.y)},r=(0,T.distanceBetweenPoints)({x:d,y:l},i),o=(0,T.distanceBetweenPoints)({x:a,y:s},i),c=r/o;return c},p=S.drag().on("start",function(){S.event.sourceEvent.stopPropagation();var t=S.mouse(document.querySelector("#grid svg")),e=(0,_.default)(t,2);a=e[0],s=e[1],d=l=void 0}).on("drag",function(t){var e=S.mouse(document.querySelector("#grid svg")),n=(0,_.default)(e,2);d=n[0],l=n[1],S.select(this.parentNode.parentNode).attr("transform","scale("+f(t)+")")}).on("end",function(t){if("undefined"!=typeof d){var e=f(t);i({image:t,width:t.width*e,height:t.height*e})}}),h=function(t){var i={x:e(t.x),y:n(t.y)},r=(0,T.edgeDirection)({start:i,end:{x:a,y:s}}),o=(0,T.edgeDirection)({start:i,end:{x:d,y:l}});return 180*(o-r)/Math.PI+180*(e(t.x)>d!=e(t.x)>a)},g=S.drag().on("start",function(){S.event.sourceEvent.stopPropagation();var t=S.mouse(document.querySelector("#grid svg")),e=(0,_.default)(t,2);a=e[0],s=e[1],d=l=void 0}).on("drag",function(t){var e=S.mouse(document.querySelector("#grid svg")),n=(0,_.default)(e,2);d=n[0],l=n[1],S.select(this.parentNode.parentNode).attr("transform","rotate("+h(t)+")")}).on("end",function(t){if("undefined"!=typeof d){var e=h(t);i({image:t,r:e+t.r})}});t.exit().remove();var v=t.enter().append("g").attr("class","image-group"),y=v.append("g").attr("class","moveable-wrapper");y.append("image");var w=y.append("g").attr("class","controls");w.append("line").attr("class","rotation-to-center"),w.append("circle").attr("class","rotation-handle"),["tl","tr","bl","br"].forEach(function(t){return w.append("circle").attr("class","corner "+t)});var x=t.merge(v);x.attr("transform",function(t){return"translate("+e(t.x)+", "+n(t.y)+") rotate("+t.r+")"}),x.select("image").attr("x",function(t){return-1*o*t.width/2}).attr("y",function(t){return-1*o*t.height/2}).attr("width",function(t){return o*t.width}).attr("height",function(t){return o*t.height}).attr("opacity",function(t){return t.opacity}).attr("xlink:href",function(t){return t.src}),x.select(".moveable-wrapper").attr("transform","translate(0,0)").style("cursor",function(t){return t.current?"move":t.clickable?"pointer":null}).style("pointer-events",function(t){return t.current?"auto":"none"}),x.select(".controls").attr("display",function(t){return t.current?"":"none"}),x.each(function(t){var e=S.select(this);t.clickable?e.on("click",function(t){S.event.stopPropagation(),r(t)}):e.on("click",null),t.current?(e.select(".moveable-wrapper").call(u),e.select(".controls .center").attr("cx",0).attr("cy",0).attr("r",3),e.select(".controls .rotation-handle").attr("cx",0).attr("cy",o*t.height*.7).attr("r",5).style("cursor",j).call(g),e.select(".controls .rotation-to-center").attr("x1",0).attr("y1",o*t.height/2).attr("x2",0).attr("y2",o*t.height*.7-5),C.default.forIn({tl:[-1,-1],tr:[1,-1],bl:[-1,1],br:[1,1]},function(n,i){var r=(0,_.default)(n,2),a=r[0],s=r[1];e.select(".controls ."+i).attr("cx",a*o*t.width/2).attr("cy",s*o*t.height/2).attr("r",5).style("cursor",m(a,s,t.r)).call(p)})):e.select(".moveable-wrapper, .rotation-handle, .corner").on(".drag",null)})}var e=C.default.identity,n=C.default.identity,i=C.default.identity,r=C.default.identity;return t.xScale=function(n){return arguments.length?(e=n,t):e},t.yScale=function(e){return arguments.length?(n=e,t):n},t.updateImage=function(e){return arguments.length?(i=e,t):i},t.selectImage=function(e){return arguments.length?(r=e,t):r},t}function v(t){var e=t.xScale,n=t.yScale,i=t.updateImage,r=t.selectImage;return{drawWindow:c().xScale(e).yScale(n),drawWindowGuideline:f().xScale(e).yScale(n),drawDaylightingControl:p().xScale(e).yScale(n),drawDaylightingControlGuideline:h().xScale(e).yScale(n),drawImage:g().xScale(e).yScale(n).updateImage(i).selectImage(r)}}Object.defineProperty(e,"__esModule",{value:!0});var y=n(75),_=r(y),w=n(7),x=r(w);e.drawWindow=c,e.drawWindowGuideline=f,e.drawDaylightingControl=p,e.drawDaylightingControlGuideline=h,e.drawImage=g,e.default=v;var b=n(73),S=i(b);n(557);var M=n(3),C=r(M),T=n(15),I=1/Math.sqrt(2),P=[{vec:{x:1,y:0},cursor:"ew-resize"},{vec:{x:-1,y:0},cursor:"ew-resize"},{vec:{x:0,y:1},cursor:"ns-resize"},{vec:{x:0,y:-1},cursor:"ns-resize"},{vec:{x:I,y:I},cursor:"nwse-resize"},{vec:{x:-1*I,y:-1*I},cursor:"nwse-resize"},{vec:{x:I,y:-1*I},cursor:"nesw-resize"},{vec:{x:-1*I,y:I},cursor:"nesw-resize"}],j="url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="25.6" height="25.6" viewBox="0 0 25.6 25.6">  <path transform="scale(0.5)" d="M25.6,44.8c7.9406,0,14.4-6.4594,14.4-14.4s-6.4594-14.4-14.4-14.4v9.6L9.6,12.8L25.6,0v9.6c11.4688,0,20.8,9.3313,20.8,20.8s-9.3313,20.8-20.8,20.8S4.8,41.8688,4.8,30.4h6.4C11.2,38.3406,17.6594,44.8,25.6,44.8z"/></svg>')+") 12.8 12.8, pointer"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return b.default.range(Math.ceil(t/n)*n,e,n)}function a(t,e){return new y.zoomIdentity.constructor(e.k/t.k,(e.x/e.k-t.x/t.k)*e.k,(e.y/e.k-t.y/t.k)*e.k)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(37),d=r(s),l=n(75),c=r(l),u=n(30),f=r(u),p=n(7),h=r(p),m=n(64),g=r(m),v=n(73),y=i(v),_=n(587),w=r(_),x=n(3),b=r(x),S=n(110),M=n(15),C=r(M),T=n(43),I=r(T);e.default={gridClicked:function(){"Eraser"!==this.currentTool&&("Rectangle"!==this.currentTool&&"Polygon"!==this.currentTool||!this.currentSpace&&!this.currentShading)||this.addPoint(),"Place Component"===this.currentTool&&this.placeOrSelectComponent(),"Image"===this.currentTool&&this.deselectImages(),"Apply Property"===this.currentTool&&this.assignProperty()},assignProperty:function(){var t=this;if(this.currentSpaceProperty){var e=y.mouse(this.$refs.grid),n={x:e[0],y:e[1]},i=this.gridPointToRWU(n),r=this.currentStory.spaces.find(function(e){var n=b.default.find(t.denormalizedGeometry.faces,{id:e.face_id});return!!n&&C.default.pointInFace(i,n.vertices)});r&&this.$store.dispatch("models/updateSpaceWithData",(0,g.default)({space:r},this.spacePropertyKey,this.currentSpaceProperty.id))}},deselectImages:function(){this.$store.dispatch("application/setCurrentSubSelectionId",this.currentStory.spaces[0])},componentToSelect:function(){var t=y.mouse(this.$refs.grid),e={x:t[0],y:t[1]},n=this.gridPointToRWU(e),i=b.default.minBy(this.currentComponentTypeLocs(n),function(t){return(0,M.distanceBetweenPoints)(t,n)}),r=i&&(0,M.distanceBetweenPoints)(i,n);return!i||r>this.spacing/2?null:i},handleKeyDown:function(t){8!==t.keyCode&&46!==t.keyCode||b.default.includes(["input","textarea"],document.activeElement.tagName.toLowerCase())||this.deleteElement()},deleteElement:function(){"components"===this.modeTab&&this.removeSelectedComponent()},removeSelectedComponent:function(){var t=this.currentComponentInstance;if(t){var e={story_id:this.currentStory.id,object:{id:t.id}};"windows"===t.type?this.$store.dispatch("models/destroyWindow",e):"daylighting_controls"===t.type?this.$store.dispatch("models/destroyDaylightingControl",e):"doors"===t.type?this.$store.dispatch("models/destroyDoor",e):console.error("unrecognized component to remove: "+t)}},placeOrSelectComponent:function(){var t=!y.event.shiftKey&&this.componentToSelect();if(t)return void(this.currentComponentInstanceId=t.id);if("daylighting_control_definitions"===this.currentComponentType)this.placeDaylightingControl();else{if("window_definitions"!==this.currentComponentType&&"door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.placeWindowOrDoor()}},highlightComponentToSelect:function(){if(y.event.shiftKey)return null;var t=this.componentToSelect();if(this.componentFacingSelection=t&&t.id,t)if("windows"===t.type||"doors"===t.type)this.highlightWindowGuideline(t);else{if("daylighting_controls"!==t.type)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDaylightingControlGuideline(t)}else;return t},placeWindowOrDoor:function(){var t,e=y.mouse(this.$refs.grid),n={x:e[0],y:e[1]},i=this.gridPointToRWU(n),r=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,i,this.currentComponentDefinition,2*this.spacing,this.spacing),o="window_definitions"===this.currentComponentType?"Window":"Door";if(r){var a=(t={story_id:this.currentStory.id,edge_id:r.edge_id},(0,g.default)(t,o.toLowerCase()+"_definition_id",this.currentComponentDefinition.id),(0,g.default)(t,"alpha",r.alpha),t);this.$store.dispatch("models/create"+o,a)}},raiseOrLowerImages:function(){"Image"===this.currentTool?y.select("#grid svg .images").raise():y.select("#grid svg .images").lower()},placeDaylightingControl:function(){var t=y.mouse(this.$refs.grid),e={x:t[0],y:t[1]},n={x:this.gridToRWU(e.x,"x"),y:this.gridToRWU(e.y,"y")},i=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,n,this.spacing);if(i){var r=(0,h.default)({story_id:this.currentStory.id,face_id:i.face_id,daylighting_control_definition_id:this.currentComponentDefinition.id},i);this.$store.dispatch("models/createDaylightingControl",r)}},addPoint:function(){var t=y.mouse(this.$refs.grid),e={x:t[0],y:t[1]},n=this.findSnapTarget(e);if("vertex"===n.type&&n.origin&&"Polygon"===this.currentTool)return void this.savePolygonFace();var i="edge"===n.type?n.projection:n;this.points.push(i),this.drawPoints(),"Eraser"===this.currentTool&&2===this.points.length&&this.eraseRectangularSelection(),"Rectangle"===this.currentTool&&2===this.points.length&&this.saveRectangularFace()},highlightSnapTarget:function(t){if("Eraser"===this.currentTool||"Place Component"===this.currentTool&&this.currentComponentDefinition||("Rectangle"===this.currentTool||"Polygon"===this.currentTool)&&(this.currentSpace||this.currentShading)){this.clearHighlights();var e=void 0;if(y.event instanceof MouseEvent){var n=y.mouse(this.$refs.grid);e={x:n[0],y:n[1]}}else e=this.lastMousePosition;if(e){if("Place Component"===this.currentTool)return void this.highlightComponentToPlaceOrSelect(e);var i=this.findSnapTarget(e),r="edge"===i.type?i.projection:i,o=i.synthetic?i.originalPt:r;this.drawGuideLines(t,r),"edge"===i.type||"vertex"===i.type?y.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",5).attr("ry",5).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"):y.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",2).attr("ry",2).classed("gridpoint",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),"edge"===i.type&&"Eraser"!==this.currentTool&&y.select("#grid svg").append("line").attr("x1",this.rwuToGrid(i.v1GridCoords.x,"x")).attr("y1",this.rwuToGrid(i.v1GridCoords.y,"y")).attr("x2",this.rwuToGrid(i.v2GridCoords.x,"x")).attr("y2",this.rwuToGrid(i.v2GridCoords.y,"y")).attr("stroke-width",1).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),this.lastMousePosition=e}}},clearHighlights:function(){y.selectAll("#grid .highlight, #grid .gridpoint, #grid .guideline").remove(),this.componentFacingSelection=null},clearComponentHighlights:function(){y.selectAll("#grid .highlight, #grid .component-guideline").remove(),this.componentFacingSelection=null},highlightComponentToPlaceOrSelect:function(t){this.highlightComponentToSelect()||this.highlightComponentToPlace(t)},highlightComponentToPlace:function(t){if("window_definitions"===this.currentComponentType)this.highlightWindow(t);else if("daylighting_control_definitions"===this.currentComponentType)this.highlightDaylightingControl(t);else{if("door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDoor(t)}},highlightWindow:function(t){var e=this.gridPointToRWU(t),n=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,e,this.currentComponentDefinition,2*this.spacing,this.spacing);n&&("Single Window"!==this.currentComponentDefinition.window_definition_mode&&b.default.filter(this.windowCenterLocs(e),{edge_id:n.edge_id}).filter(function(t){return"Single Window"!==t.window_definition_mode}).length||(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,h.default)({},n,{window_definition_mode:this.currentComponentDefinition.window_definition_mode,width:this.currentComponentDefinition.width,spacing:this.currentComponentDefinition.window_spacing,texture:this.currentComponentDefinition.texture
})]).call(this.drawWindow),this.highlightWindowGuideline(n)))},highlightDoor:function(t){var e=this.gridPointToRWU(t),n=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,e,this.currentComponentDefinition,2*this.spacing,this.spacing);n&&(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,h.default)({},n,{window_definition_mode:null,windowOrDoor:"door",width:this.currentComponentDefinition.width,texture:this.currentComponentDefinition.texture})]).call(this.drawWindow),this.highlightWindowGuideline(n))},highlightWindowGuideline:function(t){y.select("#grid svg").append("g").classed("guideline",!0).selectAll(".window-guideline").data([t]).call(this.drawWindowGuideline)},highlightDaylightingControl:function(t){var e=this.gridPointToRWU(t),n=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,e,this.spacing);n&&(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".daylighting-control").data([n]).call(this.drawDaylightingControl),this.highlightDaylightingControlGuideline(n))},highlightDaylightingControlGuideline:function(t){var e=b.default.find(this.denormalizedGeometry.faces,{id:t.face_id}),n=this.windowsOnFace(e),i=(0,S.findClosestWindow)(n,t)||(0,S.findClosestEdge)(e.edges,t);y.select("#grid svg").append("g").classed("guideline",!0).selectAll(".daylighting-control-guideline").data([{loc:t,nearestEdge:i}]).call(this.drawDaylightingControlGuideline)},drawGuideLines:function(t,e){var n=this;if(this.points.length){this.eraseGuidelines();var i=void 0,r=void 0;"Polygon"===this.currentTool?(i=[e,this.points[this.points.length-1]],r=[i]):"Rectangle"!==this.currentTool&&"Eraser"!==this.currentTool||(i=[this.points[0],{x:e.x,y:this.points[0].y},e,{x:this.points[0].x,y:e.y},this.points[0]],r=[[i[0],i[1]],[i[1],i[2]]]);var o="Polygon"===this.currentTool?[].concat((0,f.default)(this.points),[e,this.points[0]]):i,a=[o,this.points],s=y.select("#grid svg");if(s.selectAll(".guideline-line").append("path").datum(i).attr("fill","none").classed("guideline guideline-line",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",y.line().x(function(t){return n.rwuToGrid(t.x,"x")}).y(function(t){return n.rwuToGrid(t.y,"y")})).lower(),s.selectAll(".guideline-area").data(a).enter().append("polygon").attr("points",function(t){return t.map(function(t){return[n.rwuToGrid(t.x,"x"),n.rwuToGrid(t.y,"y")].join(",")}).join(" ")}).classed("guideline guideline-area guideLine",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("fill",function(){return"Eraser"===n.currentTool?"none":n.currentSpace?n.currentSpace.color:n.currentShading?n.currentShading.color:null}),"Eraser"!==this.currentTool){if(s.selectAll(".guideline-text").data(r).enter().append("text").attr("x",function(t){return n.rwuToGrid(t[0].x,"x")+(n.rwuToGrid(t[1].x,"x")-n.rwuToGrid(t[0].x,"x"))/2}).attr("y",function(t){return n.rwuToGrid(t[0].y,"y")+(n.rwuToGrid(t[1].y,"y")-n.rwuToGrid(t[0].y,"y"))/2}).attr("dx",-1.25*(this.transform.k>1?1:this.transform.k)+"em").attr("data-transform-plz","").text(function(t){var e=n.distanceBetweenPoints(t[0],t[1]);return e?e.toFixed(2):""}).classed("guideline guideline-text guideline-dist",!0).attr("font-family","sans-serif").attr("fill","red").style("font-size","1em"),o.length>3){var d=o.map(function(t){var e=t.x,n=t.y;return{x:e,y:n,X:e,Y:n}}),l=this.polygonLabelPosition(d),c=l.x,u=l.y,p=l.area,h=p?p.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"",m=h+" "+("ip"===this.units?"ft":"m")+"";if(null===c||null===u)return;s.append("text").attr("x",this.rwuToGrid(c,"x")).attr("y",this.rwuToGrid(u,"y")).text(m).classed("guideline guideline-text guideline-area-text guideLine",!0).attr("data-transform-plz","").attr("text-anchor","middle").attr("font-family","sans-serif").attr("fill","red").style("font-size","1em").raise()}y.selectAll(".vertical, .horizontal").lower()}}},eraseGuidelines:function(){y.selectAll("#grid .guideline").remove()},escapeAction:function(t){"Escape"!==t.code&&27!==t.which||(this.points=[],this.clearHighlights(),y.selectAll("#grid .point-path").remove())},savePolygonFace:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var t={points:[].concat((0,f.default)(this.points))};this.currentSpace?t.model_id=this.currentSpace.id:this.currentShading&&(t.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",t),this.points=[]},saveRectangularFace:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var t={};t.points=[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}],this.currentSpace?t.model_id=this.currentSpace.id:this.currentShading&&(t.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",t),this.points=[]},eraseRectangularSelection:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var t={points:[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}]};this.$store.dispatch("geometry/eraseSelection",t),this.points=[]},drawPoints:function(){var t=this;y.selectAll("#grid .point-path").remove();var e=y.select("#grid svg").selectAll("ellipse.point-path").data(this.points);e.merge(e.enter().append("ellipse").attr("class","point-path")).classed("origin",function(t,e){return 0===e}).attr("data-transform-plz","").attr("cx",function(e){return t.rwuToGrid(e.x,"x")}).attr("cy",function(e){return t.rwuToGrid(e.y,"y")}).attr("rx",function(t,e){return 0===e?7:2}).attr("ry",function(t,e){return 0===e?7:2}).attr("vector-effect","non-scaling-stroke").attr("fill",function(t,e){return 0===e?"none":""}),y.select("#grid svg").append("path").attr("class","point-path").datum(this.points).attr("fill","none").attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",y.line().x(function(e){return t.rwuToGrid(e.x,"x")}).y(function(e){return t.rwuToGrid(e.y,"y")})).lower(),y.selectAll(".vertical, .horizontal").lower()},registerDrag:function(){var t=y.select("#grid svg").selectAll("polygon");this.deregisterD3Events(t),"Select"===this.currentTool?this.registerSelectEvents(t):"Fill"===this.currentTool&&this.registerFillEvents(t)},deregisterD3Events:function(t){t.on(".drag",null).on("click",null)},registerFillEvents:function(t){var e=this;t.on("click",function(t){(e.currentSpace||e.currentShading)&&(e.points=[].concat((0,f.default)(t.points)),e.savePolygonFace())})},registerSelectEvents:function(t){var e=this,n=void 0,i=void 0,r=y.drag().on("start",function(t){var r=y.mouse(e.$refs.grid),o=(0,c.default)(r,2);n=o[0],i=o[1],t.previous_story||(e.currentSubSelection=I.default.modelForFace(e.$store.state.models,t.face_id))}).on("drag",function(t){if(!t.previous_story){var r=y.mouse(e.$refs.grid),o=(0,c.default)(r,2),a=o[0],s=o[1];y.select("#poly-"+t.face_id).attr("transform",function(){return"translate("+(a-n)+", "+(s-i)+")"})}}).on("end",function(t){if(!t.previous_story){var r=y.mouse(e.$refs.grid),o=(0,c.default)(r,2),a=o[0],s=o[1];e.$store.dispatch("geometry/moveFaceByOffset",{face_id:t.face_id,dx:e.gridToRWU(a,"x")-e.gridToRWU(n,"x"),dy:e.gridToRWU(s,"y")-e.gridToRWU(i,"y")})}});t.call(r)},drawPolygons:function(){var t=this;this.recalcScales();var e=y.select("#grid svg .polygons").selectAll("g.poly").data(this.polygons,function(t){return t.face_id});e.exit().remove();var n=e.enter().append("g").attr("class","poly");n.append("polygon"),n.append("text").attr("class","polygon-text"),n.append("g").attr("class","windows"),n.append("g").attr("class","doors"),n.append("g").attr("class","daylighting-controls"),e=n.merge(e).classed("current",function(t){return t.current}).classed("previousStory",function(t){return t.previous_story}).classed("poly",!0).attr("data-model-type",function(t){return t.modelType}).attr("id",function(t){return"poly-"+t.face_id}).attr("transform",null),e.select("polygon").attr("id",function(t){return"face-"+t.face_id}).attr("points",function(e){return e.points.map(function(e){return[t.rwuToGrid(e.x,"x"),t.rwuToGrid(e.y,"y")].join(",")}).join(" ")}).attr("fill",function(t){return t.color}).attr("vector-effect","non-scaling-stroke"),e.select("text").attr("id",function(t){return"text-"+t.face_id}).attr("x",function(e){return t.rwuToGrid(e.labelPosition.x,"x")}).attr("y",function(e){return t.rwuToGrid(e.labelPosition.y,"y")}).text(function(t){return t.name}).attr("text-anchor","middle").style("font-size","14px").style("font-weight","bold").attr("font-family","sans-serif").attr("fill","red").classed("polygon-text",!0),e.select(".windows").selectAll(".window").data(function(t){return t.windows}).call(this.drawWindow),e.select(".doors").selectAll(".window").data(function(t){return t.doors}).call(this.drawWindow),e.select(".daylighting-controls").selectAll(".daylighting-control").data(function(t){return t.daylighting_controls}).call(this.drawDaylightingControl),this.registerDrag(),e.order()},drawImages:function(){y.select("#grid svg .images").selectAll(".image-group").data(this.images,function(t){return t.id}).call(this.drawImage)},draw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zoomEnd;this.transformAtLastRender=(0,h.default)({},this.transform),y.selectAll("[data-transform-plz]").attr("transform",""),this.drawPolygons(),this.drawImages(),this.raiseOrLowerImages();var n=e&&this.points.length>0;n&&(this.highlightSnapTarget(),this.drawPoints())},findSnapTarget:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.edge_component,r={x:this.gridToRWU(t.x,"x"),y:this.gridToRWU(t.y,"y")};if("grid-strict"===this.snapMode)return this.strictSnapTargets(r)[0];if(event.shiftKey)return(0,h.default)({type:"gridpoint"},r);if(i){var o=this.snappingEdgeData(r);return o||(0,h.default)({type:"gridpoint"},r)}var a=this.snappingVertexData(r);if(a)return a;var s=this.snappingEdgeData(r);if(s)return s;if(this.gridVisible){var d=+this.axis.x.select(".tick").attr("transform").replace("translate(","").replace(")","").split(",")[0],l=+this.axis.y.select(".tick").attr("transform").replace("translate(","").replace(")","").split(",")[1],c=this.rwuToGrid(this.spacing+this.min_x,"x"),u=this.rwuToGrid(this.max_y-this.spacing,"y"),f={type:"gridpoint",x:this.round(t.x,this.rwuToGrid(this.spacing+this.min_x,"x"))+d-.5,y:this.round(t.y,this.rwuToGrid(this.max_y-this.spacing,"y"))+l-.5};return f.x=Math.abs(t.x-(f.x-c))>Math.abs(t.x-f.x)?f.x:f.x-c,f.y=Math.abs(t.y-(f.y-u))>Math.abs(t.y-f.y)?f.y:f.y-u,f}if(this.points.length){var p,m=[-180,-90,0,90,180],g=this.points[this.points.length-1],v=Math.atan2(g.y-t.y,g.x-t.x)*(180/Math.PI);if(m.some(function(n){if(Math.abs(v-n)<e.$store.getters["project/angleTolerance"]){if(n===-180||0===n||180===n)return{x:t.x,y:e.rotatePoint(g,t,n-v).y};if(n===-90||90===n)return{x:e.rotatePoint(g,t,n-v).x,y:t.y}}}),p)return(0,h.default)({type:"gridpoint"},p)}return(0,h.default)({type:"gridpoint"},t)},strictSnapTargets:function(t){var e=[].concat((0,f.default)(this.currentStoryGeometry.vertices),(0,f.default)(this.previousStoryGeometry?this.previousStoryGeometry.vertices:[]));return this.points.length>=3&&"Polygon"===this.currentTool&&e.push((0,h.default)({},this.points[0],{origin:!0})),(0,S.snapTargets)(e,this.spacing,t)},snappingVertexData:function(t){var e=this,n=[].concat((0,f.default)(this.currentStoryGeometry.vertices));if(this.previousStoryGeometry&&(n=n.concat(JSON.parse((0,d.default)(this.previousStoryGeometry.vertices)))),this.points.length>=3&&"Polygon"===this.currentTool&&n.push((0,h.default)({},this.points[0],{origin:!0})),1===this.points.length&&"Rectangle"===this.currentTool&&(n=n.concat(C.default.syntheticRectangleSnaps(n,this.points[0],t))),!n.length)return null;var i=n.reduce(function(n,i){var r=e.distanceBetweenPoints(n,t),o=e.distanceBetweenPoints(i,t);return r<o?n:i});return this.distanceBetweenPoints(i,t)<this.$store.getters["project/snapTolerance"]?(0,h.default)({},i,{type:"vertex"}):void 0},snappingEdgeData:function(t){var e=this,n=[].concat((0,f.default)(this.currentStoryGeometry.edges));if(this.previousStoryGeometry&&(n=n.concat(JSON.parse((0,d.default)(this.previousStoryGeometry.edges.map(function(t){return(0,h.default)({},t,{previous_story:!0})}))))),!n.length)return null;var i=n.reduce(function(n,i){var r=n.previous_story?e.previousStoryGeometry:e.currentStoryGeometry,o=i.previous_story?e.previousStoryGeometry:e.currentStoryGeometry,a=C.default.vertexForId(n.v1,r),s=C.default.vertexForId(n.v2,r),d=C.default.vertexForId(i.v1,o),l=C.default.vertexForId(i.v2,o),c=C.default.projectionOfPointToLine(t,{p1:a,p2:s}),u=C.default.projectionOfPointToLine(t,{p1:d,p2:l}),f=C.default.distanceBetweenPoints(c,t),p=C.default.distanceBetweenPoints(u,t);return f<p?n:i}),r=i.previous_story?this.previousStoryGeometry:this.currentStoryGeometry,o=C.default.vertexForId(i.v1,r),a=C.default.vertexForId(i.v2,r),s=C.default.projectionOfPointToLine(t,{p1:o,p2:a}),l=this.distanceBetweenPoints(s,t),c=[-180,-90,0,90,180],u=Math.atan2(t.y-s.y,t.x-s.x)*(180/Math.PI);return c.some(function(n){if(Math.abs(u-n)<e.$store.getters["project/angleTolerance"]){var i,r;return 180===n||0===n||n===-180?(i={x:t.x-2*l,y:t.y},r={x:t.x+2*l,y:t.y}):90!==n&&n!==-90||(i={x:t.x,y:t.y-2*l},r={x:t.x,y:t.y+2*l}),s=C.default.ptsAreCollinear(i,o,r)?o:C.default.ptsAreCollinear(i,a,r)?a:C.default.intersectionOfLines(i,r,o,a),!0}return!1}),l<this.$store.getters["project/snapTolerance"]?{snappingEdge:i,dist:i.dist,type:"edge",projection:s,v1GridCoords:o,v2GridCoords:a}:null},distanceBetweenPoints:function(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.sqrt(n*n+i*i)},round:function(t,e){var n,i=t<0?-1:1;return t=Math.abs(t),n=t%e<e/2?t-t%e:t+e-t%e,n*=i},rotatePoint:function(t,e,n){var i=n*Math.PI/180,r=Math.cos(i),o=Math.sin(i),a=e.x-t.x,s=e.y-t.y;return{x:r*a-o*s+t.x,y:o*a+r*s+t.y}},resolveBounds:function(){var t=[this.min_x,this.max_x],e=[this.min_y,this.max_y],n=function(t){var e=(0,c.default)(t,2),n=e[0],i=e[1],r=(i-n)/20;return[n-r,i+r]};this.visibleVerts.length&&(t=n(y.extent(this.allVertices,function(t){return t.x})),e=n(y.extent(this.allVertices,function(t){return t.y})));var i=this.$refs.gridParent.clientWidth,r=this.$refs.gridParent.clientHeight,o=(0,M.fitToAspectRatio)(t,e,i/r,"expand"),a=o.xExtent,s=o.yExtent,d=(0,c.default)(a,2);this.min_x=d[0],this.max_x=d[1];var l=(0,c.default)(s,2);this.min_y=l[0],this.max_y=l[1],b.default.defer(function(){window.eventBus.$emit("boundsResolved")})},nullTransform:function(){y.select(this.$refs.grid).call(this.zoomBehavior.transform,y.zoomIdentity)},renderGrid:function(){var t=this.$refs.gridParent.clientWidth,e=this.$refs.gridParent.clientHeight;this.resolveBounds(),this.$store.dispatch("application/setScaleX",{scaleX:{pixels:t,rwuRange:[this.min_x,this.max_x]}}),this.$store.dispatch("application/setScaleY",{scaleY:{pixels:e,rwuRange:[this.min_y,this.max_y]}}),this.calcGrid(),this.nullTransform(),this.draw()},reloadGridAndScales:function(){this.zoomXScale=null,this.zoomYScale=null,this.resolveBounds(),this.renderGrid()},recalcScales:function(){var t=this.$refs.gridParent.clientWidth,e=this.$refs.gridParent.clientHeight;this.xScale=y.scaleLinear().domain([this.min_x,this.max_x]).range([0,t]),this.yScale=y.scaleLinear().domain([this.min_y,this.max_y]).range([e,0]),this.zoomXScale=this.zoomXScale||this.xScale.copy(),this.zoomYScale=this.zoomYScale||this.yScale.copy()},calcGrid:function(){var t=this;this.recalcScales();var e=this.$refs.gridParent.clientWidth,n=this.$refs.gridParent.clientHeight,i=y.select("#grid svg"),r=1,o="14px";i.attr("height",n).attr("width",e),this.axis.x=i.selectAll("g.axis--x").data([void 0]),this.axis.x=this.axis.x.merge(this.axis.x.enter().append("g").attr("class","axis axis--x")).attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.axis.y=i.selectAll("g.axis--y").data([void 0]),this.axis.y=this.axis.y.merge(this.axis.y.enter().append("g").attr("class","axis axis--y")).attr("class","axis axis--y").attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.updateGrid(),this.zoomBehavior=y.zoom().scaleExtent([0,1/0]).on("zoom",function(){var e=y.event.transform;t.transform=(0,h.default)({},e);var n=e.rescaleX(t.zoomXScale),i=e.rescaleY(t.zoomYScale),r=n.domain(),o=(0,c.default)(r,2);t.min_x=o[0],t.max_x=o[1];var a=i.domain(),s=(0,c.default)(a,2);t.min_y=s[0],t.max_y=s[1],t.axis_generator.x.scale(n),t.axis_generator.y.scale(i),t.updateGrid(),t.padTickY(-12),t.translateEntities(),t.clearComponentHighlights()}).on("end",function(){t.draw({zoomEnd:!0})}),i.call(this.zoomBehavior),i.on("mousemove",this.handleMouseMove).on("click",this.gridClicked)},transformTo:function(t){y.select(this.$refs.grid).call(this.zoomBehavior.transform,t)},zoomBy:function(t){var e=this.transform.k*t;y.select(this.$refs.grid).transition().duration(400).call(this.zoomBehavior.transform,y.zoomIdentity.scale(e))},zoomToFit:function(){var t,e=this,n=this.$refs.grid.clientWidth,i=this.$refs.grid.clientHeight;if(this.allVertices.length){var r=y.extent(this.allVertices,function(t){return e.zoomXScale(t.x)}),o=y.extent(this.allVertices,function(t){return e.zoomYScale(t.y)}),a=r[1]-r[0],s=o[1]-o[0],d=(r[0]+r[1])/2,l=(o[0]+o[1])/2,c=.9/Math.max(a/n,s/i),u=[n/2-c*d,i/2-c*l],f=y.select("#grid svg"),p=(t=y.zoomIdentity).translate.apply(t,u).scale(c);f.call(this.zoomBehavior.transform,p)}},scaleTo:function(t){var e,n=this.$refs.grid.clientWidth,i=this.$refs.grid.clientHeight,r=(this.zoomXScale(this.max_x)+this.zoomXScale(this.min_x))/2,o=(this.zoomYScale(this.max_y)+this.zoomYScale(this.min_y))/2,a=[n/2-t*r,i/2-t*o];y.select(this.$refs.grid).call(this.zoomBehavior.transform,(e=y.zoomIdentity).translate.apply(e,a).scale(t))},translateEntities:function(){y.selectAll("[data-transform-plz]").attr("transform",a(this.transformAtLastRender,y.event.transform))},showOrHideAxes:function(){this.axis.x.style("visibility",this.gridVisible?"visible":"hidden"),this.axis.y.style("visibility",this.gridVisible?"visible":"hidden")},updateGrid:function(){if(this.axis.x&&this.axis.y){var t=this.$refs.gridParent.clientWidth,e=this.$refs.gridParent.clientHeight,n=this.max_x-this.min_x,i=this.max_y-this.min_y,r=o(this.min_x,this.max_x,this.spacing),a=o(this.min_y,this.max_y,this.spacing);this.reduceTicks=a.length>250||r.length>250,this.axis_generator.x=this.axis_generator.x||y.axisBottom(this.xScale),this.axis_generator.x.tickSize(e).tickPadding(-20).tickFormat(this.reduceTicks?b.default.identity:this.formatTickX.bind(this,Math.floor(10*(t/e)))),this.axis_generator.y=this.axis_generator.y||y.axisRight(this.yScale),this.axis_generator.y.tickSize(t).tickPadding(-25).tickFormat(this.reduceTicks?b.default.identity:this.formatTickY.bind(this,10)),this.reduceTicks?(this.axis_generator.x.tickValues(null).ticks(5*(n/i)),this.axis_generator.y.tickValues(null).ticks(5)):(this.axis_generator.x.ticks(null).tickValues(r),this.axis_generator.y.ticks(null).tickValues(a)),this.axis.y.call(this.axis_generator.y),this.axis.x.call(this.axis_generator.x)}},rwuToGrid:function(t,e){var n=void 0;return"x"===e?n=this.xScale:"y"===e&&(n=this.yScale),n(t)},gridToRWU:function(t,e){var n=void 0;"x"===e?n=this.xScale:"y"===e&&(n=this.yScale);var i=n.invert(t);return Math.round(1e11*i)/1e11},gridPointToRWU:function(t){return{x:this.gridToRWU(t.x,"x"),y:this.gridToRWU(t.y,"y")}},rwuPointToGrid:function(t){return{x:this.rwuToGrid(t.x,"x"),y:this.rwuToGrid(t.y,"y")}},polygonLabelPosition:function(t){var e=[t.map(function(t){return[t.x,t.y]})],n=Math.abs(Math.round(C.default.areaOfSelection(t))),i=n?(0,w.default)(e,1):[null,null],r=(0,c.default)(i,2),o=r[0],a=r[1];return{x:o,y:a,area:n}},formatTickX:function(t,e){var n=this.max_x-this.min_x,i=this.spacing,r=Math.ceil(n/t/i)*i;return 0===r||e%r===0?e:""},formatTickY:function(t,e){var n=this.max_y-this.min_y,i=this.spacing,r=Math.ceil(n/t/i)*i;return 0===r||e%r===0?e:""},padTickY:function(t){var e=Math.abs(this.min_y),n=Math.abs(this.max_y),i=(e<n?n:e).toFixed(0).length,r=t*i;this.axis.y.call(this.axis_generator.y.tickPadding(r))}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),o=i(r),a=n(20),s=i(a),d=n(257),l=i(d),c=n(166),u=i(c),f=n(262),p=i(f),h=n(267),m=i(h),g=n(275),v=i(g),y=n(278),_=i(y),w=n(279),x=i(w),b=n(114),S=n(273),M=i(S);o.default.use(s.default);var C=new s.default.Store({strict:!1,modules:{application:l.default,project:u.default,geometry:p.default,models:m.default},getters:{exportData:v.default},actions:{importFloorplan:_.default,importLibrary:x.default,changeUnits:function(t,e){var n=e.newUnits,i=t.state.project.config.units;console.log("moving from "+i+" to "+n),"ip"!==i&&"si"!==i&&console.error('Expected data.project.config.units to be "ip" or "si", received "'+i+'"'),"ip"!==n&&"si"!==n&&console.error('Expected oldUnits to be "ip" or "si", received "'+n+'"'),t.commit("changeUnits",(0,b.convertState)(t.state,i,n)),t.dispatch("project/setUnits",{units:n})}},mutations:M.default});e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(21),s=n(63);e.default={setCurrentStoryId:function(t,e){var n=e.id;t.rootState.models.stories.map(function(t){return t.id}).indexOf(n)!==-1&&t.commit("setCurrentStoryId",{id:n})},setCurrentSubSelectionId:function(t,e){var n=e.id;t.getters.currentStory&&(t.getters.currentStory.spaces.find(function(t){return t.id===n})||t.getters.currentStory.shading.find(function(t){return t.id===n})||t.getters.currentStory.images.find(function(t){return t.id===n}))&&t.commit("setCurrentSubSelectionId",{id:n})},setCurrentComponentId:function(t,e){var n=e.id;t.getters.currentStory&&(t.getters.currentStory.windows.find(function(t){return t.id===n})||t.getters.currentStory.daylighting_controls.find(function(t){return t.id===n}))&&t.commit("setCurrentComponentId",{id:n})},setCurrentComponentDefinitionId:function(t,e){var n=e.id;if(t.rootState.models.library.daylighting_control_definitions.find(function(t){return t.id===n})||t.rootState.models.library.window_definitions.find(function(t){return t.id===n})||t.rootState.models.library.door_definitions.find(function(t){return t.id===n}))t.commit("setCurrentComponentDefinitionId",{id:n});else if("undefined"!==n)throw new Error("unable to set component definition -- couldn't find one with id "+n)},setCurrentComponentInstanceId:function(t,e){var n=e.id;(0,s.componentInstanceById)(t.getters.currentStory,n)?t.commit("setCurrentComponentInstanceId",e):console.error("unable to find an instance with that id on the current story")},setCurrentSnapMode:function(t,e){var n=e.snapMode;if(!o.default.includes(["grid-strict","grid-verts-edges"],n))throw new Error("Unknown grid mode "+n);t.commit("setCurrentSnapMode",{snapMode:n})},setCurrentModeTab:function(t,e){var n=e.modeTab;t.commit("setCurrentModeTab",{modeTab:n})},setCurrentSubselectionType:function(t,e){var n=e.subselectionType;t.commit("setCurrentSubselectionType",{subselectionType:n})},setCurrentTool:function(t,e){var n=e.tool;t.state.tools.indexOf(n)!==-1&&t.commit("setCurrentTool",{tool:n})},setCurrentMode:function(t,e){var n=e.mode;"spaces"===n||o.default.includes(a.assignableProperties,n)?t.commit("setCurrentMode",{mode:n}):console.error("unrecognized view-by option: "+n)},setCurrentSpacePropertyId:function(t,e){var n=e.id;!n||(0,s.spacePropertyById)(t.rootState.models.library,n)?t.commit("setCurrentSpacePropertyId",{id:n}):console.error("unable to find space property with id: "+n)},setScaleX:function(t,e){var n=e.scaleX;t.commit("setScaleX",{scaleX:n})},setScaleY:function(t,e){var n=e.scaleY;t.commit("setScaleY",{scaleY:n})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(15),s=i(a),d=n(63);e.default={currentStory:function(t,e,n){return console.log("trying to get currentStory",n.models.stories),n.models.stories.find(function(e){return e.id===t.currentSelections.story_id})},currentSubSelection:function(t,e){var n=e.currentStory;if(!n)return null;var i=t.currentSelections.subselection_ids[n.id];return n.spaces.find(function(t){return t.id===i})||n.shading.find(function(t){return t.id===i})||n.images.find(function(t){return t.id===i})},currentSubSelectionType:function(t,e){var n=e.currentStory;if(!n)return null;var i=t.currentSelections.subselection_ids[n.id];return n.spaces.find(function(t){return t.id===i})?"spaces":n.shading.find(function(t){return t.id===i})?"shading":n.images.find(function(t){return t.id===i})?"images":null},currentSpace:function(t,e){return"spaces"===e.currentSubSelectionType?e.currentSubSelection:null},currentShading:function(t,e){return"shading"===e.currentSubSelectionType?e.currentSubSelection:null},currentImage:function(t,e){return"images"===e.currentSubSelectionType?e.currentSubSelection:null},currentComponent:function(t,e,n){var i=t.currentSelections.component_definition_id,r=void 0,a=void 0;return(a=n.models.library.window_definitions.find(function(t){return t.id===i}))?r="window_definitions":(a=n.models.library.daylighting_control_definitions.find(function(t){return t.id===i}))?r="daylighting_control_definitions":(a=o.default.find(n.models.library.door_definitions,{id:i}))&&(r="door_definitions"),{type:r,definition:a}},currentComponentDefinition:function(t,e){return e.currentComponent.definition},currentComponentInstance:function(t,e){var n=t.currentSelections.component_instance_id;return n?(0,d.componentInstanceById)(e.currentStory,n):null},currentSpaceProperty:function(t,e,n){var i=t.currentSelections.space_property_id,r=n.models.library;return(0,d.spacePropertyById)(r,i)},currentStoryGeometry:function(t,e,n){var i=e.currentStory;return i?n.geometry.find(function(t){return t.id===i.geometry_id}):null},currentStoryDenormalizedGeom:function(t,e){var n=e.currentStoryGeometry;return n?s.default.denormalize(n):null},currentSubSelectionFace:function(t,e){return e.currentSubSelection&&e.currentSubSelection.face_id?e.currentStoryGeometry.faces.find(function(t){return t.id===e.currentSubSelection.face_id}):null}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(255),o=i(r),a=n(258),s=i(a),d=n(256),l=i(d),c=n(73);e.default={namespaced:!0,state:{currentSelections:{story:null,story_id:null,subselection_ids:{},component_id:null,component_definition_id:null,component_instance_id:null,space_property_id:null,tool:"Rectangle",mode:"spaces",snapMode:"grid-strict",modeTab:"floorplan",subselectionType:"spaces"},modes:["spaces","shading","building_units","thermal_zones","pitched_roofs","space_types","images"],tools:["Pan","Drag","Rectangle","Polygon","Eraser","Select","Map","Fill","Place Component","Image","Apply Property"],scale:{x:c.scaleLinear().range([0,0]).domain([0,0]),y:c.scaleLinear().range([0,0]).domain([0,0])}},actions:o.default,mutations:s.default,getters:l.default}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(64),o=i(r),a=n(7),s=i(a);e.default={setCurrentStoryId:function(t,e){t.currentSelections.story_id=e.id},setCurrentSubSelectionId:function(t,e){var n=t.currentSelections.story_id;return n?void(t.currentSelections.subselection_ids=(0,s.default)({},t.currentSelections.subselection_ids,(0,o.default)({},n,e.id))):void console.error("expected a story to be selected, in order to set a subselection")},setCurrentComponentId:function(t,e){t.currentSelections.component_id=e.id},setCurrentComponentDefinitionId:function(t,e){t.currentSelections.component_definition_id=e.id},setCurrentComponentInstanceId:function(t,e){t.currentSelections.component_instance_id=e.id},setCurrentSpacePropertyId:function(t,e){t.currentSelections.space_property_id=e.id},setCurrentSnapMode:function(t,e){t.currentSelections.snapMode=e.snapMode},setCurrentModeTab:function(t,e){t.currentSelections.modeTab=e.modeTab},setCurrentSubselectionType:function(t,e){t.currentSelections.subselectionType=e.subselectionType},setCurrentTool:function(t,e){t.currentSelections.tool=e.tool},setCurrentMode:function(t,e){t.currentSelections.mode=e.mode},setScaleX:function(t,e){t.scale.x=e.scaleX},setScaleY:function(t,e){t.scale.y=e.scaleY}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return f.default.vertexForCoordinates(e,t)||c.default.Vertex(e.x,e.y)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(64),a=i(o);e.getOrCreateVertex=r;var s=n(3),d=i(s),l=n(112),c=i(l),u=n(15),f=i(u),p=n(260),h=i(p),m=n(165);e.default={initGeometry:function(t,e){var n=e.story_id,i=new c.default.Geometry;t.commit("initGeometry",{geometry:i}),t.dispatch("models/updateStoryWithData",{story:t.rootState.models.stories.find(function(t){return t.id===n}),geometry_id:i.id},{root:!0})},destroyGeometry:function(t,e){var n=t.commit;n("destroyGeometry",{id:e})},eraseSelection:function(t,e){var n=e.points,i=t.rootGetters["application/currentStoryGeometry"].id;(0,m.withPreservedComponents)(t,i,function(){var e=(0,p.eraseSelection)(n,t);e||window.eventBus.$emit("error","Operation cancelled - no split faces")}),t.dispatch("trimGeometry",{geometry_id:i})},moveFaceByOffset:function(t,e){var n=e.face_id,i=e.dx,r=e.dy,o=t.rootGetters["application/currentStoryGeometry"],s=f.default.faceForId(n,o),d=f.default.verticesForFaceId(s.id,o).map(function(t){return{x:t.x+i,y:t.y+r}}),l=(0,p.newGeometriesOfOverlappedFaces)(d,f.default.exceptFace(o,n));if(l.error)return window.eventBus.$emit("error","Operation cancelled - "+l.error),void window.eventBus.$emit("reload-grid");var c=(0,p.validateFaceGeometry)(d,o);if(!c.success)return window.eventBus.$emit("error",c.error),void window.eventBus.$emit("reload-grid");var u=(0,a.default)({},n,{dx:i,dy:r});(0,m.withPreservedComponents)(t,o.id,u,function(){l.forEach(function(e){return t.dispatch("replaceFacePoints",e)}),t.dispatch("replaceFacePoints",{geometry_id:o.id,face_id:n,vertices:c.vertices,edges:c.edges,dx:i,dy:r})}),t.dispatch("trimGeometry",{geometry_id:o.id})},createFaceFromPoints:h.default,destroyFaceAndDescendents:function(t,e){var n=e.geometry_id,i=e.face,r=t.state.find(function(t){return t.id===n}),o=i.edgeRefs.map(function(t){var e=f.default.edgeForId(t.edge_id,r),n=t.reverse?e.v2:e.v1;return f.default.vertexForId(n,r)}).filter(function(t){return f.default.facesForVertexId(t.id,r).length<2}),a=i.edgeRefs.filter(function(t){return f.default.facesForEdgeId(t.edge_id,r).length<2});t.commit("destroyGeometry",{id:i.id}),a.forEach(function(e){return t.commit("destroyGeometry",{id:e.edge_id})}),o.forEach(function(e){return t.commit("destroyGeometry",{id:e.id})})},replaceFacePoints:function(t,e){var n=e.geometry_id,i=e.face_id,r=e.vertices,o=e.edges,a=d.default.find(t.state,{id:n}),s=d.default.chain(r).map(function(t){var e=d.default.find(a.vertices,d.default.pick(t,["x","y"]));return e?t.id===e.id?null:[t.id,e.id]:null}).compact().fromPairs().value();r.forEach(function(t){t.id=s[t.id]||t.id}),o.forEach(function(t){t.v1=s[t.v1]||t.v1,t.v2=s[t.v2]||t.v2}),t.commit("replaceFacePoints",{geometry_id:n,vertices:r,edges:o,face_id:i})},trimGeometry:function(t,e){var n=t.rootState,i=t.commit,r=e.geometry_id,o=d.default.find(n.models.stories,{geometry_id:r}),a=d.default.flatMap(o.spaces,function(t){return d.default.map(t.daylighting_controls,"vertex_id")});i("trimGeometry",{geometry_id:r,vertsReferencedElsewhere:a})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=e.model_id,i=e.points;if(!((0,W.uniq)(i).length<3)){var r=t.rootGetters["application/currentStoryGeometry"],a=N.default.libraryObjectWithId(t.rootState.models,n),d=a.face_id?k.default.faceForId(a.face_id,r):null,l=void 0;
if(d){var c=k.default.verticesForFaceId(d.id,r);if(l=k.default.setOperation("union",c,i),l.error)return void window.eventBus.$emit("error","Operation cancelled - "+l.error)}else l=i;var u=g(l,t.rootGetters["application/currentStoryGeometry"],t.rootGetters["project/snapTolerance"]);if(!u.success)return window.eventBus.$emit("error",u.error),void console.error(u.error);var f=o(l,k.default.exceptFace(r,d&&d.id));if(f.error)return void window.eventBus.$emit("error","Operation cancelled - "+f.error);(0,V.withPreservedComponents)(t,r.id,function(){f.forEach(function(e){return t.dispatch("replaceFacePoints",e)}),s(u,a,t,d),w(t)}),t.dispatch("trimGeometry",{geometry_id:r.id})}}function o(t,e){if(t.length<3||!k.default.areaOfSelection(t))return!1;var n=k.default.denormalize(e),i=n.faces.filter(function(e){var n=k.default.intersection(e.vertices,t);return n.error||n.length>0}),r=i.map(function(e){return k.default.difference(e.vertices,t)}),o=E.default.find(r,"error");if(o)return o;var a=r.map(function(t){return g(t,e)}),s=E.default.find(a,"error");return s?s:E.default.zip(i,a).map(function(t){var n=(0,z.default)(t,2),i=n[0],r=n[1],o=r.vertices,a=r.edges;return{geometry_id:e.id,face_id:i.id,vertices:o,edges:a}})}function a(t,e){var n=e.rootGetters["application/currentStoryGeometry"];if(t.length<3||!k.default.areaOfSelection(t))return!1;var i=o(t,n);return i.error?(window.eventBus.$emit("error","Operation cancelled - "+i.error),!1):(i.forEach(function(t){return e.dispatch("replaceFacePoints",t)}),!0)}function s(t,e,n,i){var r,o=t.vertices,a=t.edges,s=n.rootGetters["application/currentStoryGeometry"],d=i||new O.default.Face([]);n.dispatch("replaceFacePoints",{face_id:d.id,geometry_id:s.id,vertices:o,edges:a}),n.dispatch("space"===e.type?"models/updateSpaceWithData":"models/updateShadingWithData",(r={},(0,P.default)(r,e.type,e),(0,P.default)(r,"face_id",d.id),r),{root:!0})}function d(t,e,n){var i=n.find(function(n){return n.v1===t.id&&n.v2===e.id||n.v2===t.id&&n.v1===e.id});return i&&(0,T.default)({},i,{reverse:i.v1===e.id})}function l(t){return function(e){var n=(0,z.default)(e,2),i=n[0],r=n[1];return d(i,r,t)||new O.default.Edge(i.id,r.id)}}function c(t,e){return t.length?E.default.zip(t,[].concat((0,M.default)(t.slice(1)),[t[0]])).map(l(e)):[]}function u(t){this.message=t}function f(t){if(t.length<3)throw new u("can't make a polygon with fewer than three vertices: "+(0,b.default)(t))}function p(t){t.forEach(function(e){if(E.default.find(t,{x:e.x,y:e.y}).length>=2)throw new u("Duplicate vertex at ("+e.x+", "+e.y+")")})}function h(t,e){e.forEach(function(e){var n=e.v1,i=e.v2,r=E.default.find(t,{id:n}),o=E.default.find(t,{id:i});t.forEach(function(t){if(t.id!==n&&t.id!==i&&k.default.ptsAreCollinear(r,o,t)){var e=E.default.reject([(t.x-r.x)/(o.x-r.x),(t.y-r.y)/(o.y-r.y)],isNaN)[0];if(!(e>1||e<0))throw new u("An edge is being touched by a vertex on the same face at ("+t.x+", "+t.y+")")}})})}function m(t,e){(0,W.allPairs)(e).forEach(function(e){var n=(0,z.default)(e,2),i=n[0],r=n[1],o=E.default.find(t,{id:i.v1}),a=E.default.find(t,{id:i.v2}),s=E.default.find(t,{id:r.v1}),d=E.default.find(t,{id:r.v2}),l=k.default.intersectionOfLines(o,a,s,d);if(l)throw new u("Self intersection at "+l.x+", "+l.y)})}function g(t,e){if(0===t.length)return{success:!0,vertices:[],edges:[]};if(t.length<=2)return{success:!1,error:"need at least 3 points to make a face"};var n=t.map(function(t){return k.default.vertexForCoordinates(t,e)||new O.default.Vertex(t.x,t.y)});n=(0,W.dropConsecutiveDups)(n);var i=c(n,e.edges);try{f(n),p(n),h(n,i),m(n,i)}catch(t){if(t instanceof u)return{success:!1,error:t.message};throw t}return{success:!0,vertices:n,edges:i}}function v(t,e){return E.default.zip(t.slice(0,-1),t.slice(1)).map(l(e))}function y(t,e,n){var i=k.default.facesForEdgeId(e,t),r=i.map(function(i){return{type:"replaceEdgeRef",geometry_id:t.id,edge_id:e,face_id:i.id,newEdges:E.default.map(n,E.default.partialRight(E.default.pick,["id","reverse"]))}});return r}function _(t){return E.default.compact(t.edges.map(function(e){var n=k.default.splittingVerticesForEdgeId(e.id,t);if(!n.length)return!1;var i=k.default.vertexForId(e.v1,t),r=k.default.vertexForId(e.v2,t);n=E.default.sortBy(n,function(t){return(0,F.distanceBetweenPoints)(t,i)}),n=[i].concat((0,M.default)(n),[r]);var o=v(n,t.edges),a=y(t,e.id,o);return{edgeToDelete:e.id,newEdges:o,replaceEdgeRefs:a}}))}function w(t){var e=t.rootGetters["application/currentStoryGeometry"],n=_(e);n.forEach(function(n){return t.commit((0,T.default)({type:"splitEdge",geometry_id:e.id},n))})}Object.defineProperty(e,"__esModule",{value:!0});var x=n(37),b=i(x),S=n(30),M=i(S),C=n(7),T=i(C),I=n(64),P=i(I),j=n(75),z=i(j);e.default=r,e.newGeometriesOfOverlappedFaces=o,e.eraseSelection=a,e.findExistingEdge=d,e.matchOrCreateEdges=c,e.errOnTooFewVerts=f,e.errOnDuplicateVerts=p,e.errOnVertexIntersectsEdge=h,e.errOnEdgeIntersectsEdge=m,e.validateFaceGeometry=g,e.edgesToSplit=_;var D=n(3),E=i(D),$=n(112),O=i($),F=n(15),k=i(F),R=n(43),N=i(R),W=n(84),V=n(165);u.prototype=new Error},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(15),s=i(a),d=n(281),l=i(d);e.default={denormalized:function(t){return t.map(function(t){return s.default.denormalize(t)})},errors:function(t,e){return o.default.flatMap(e.denormalized,l.default)},exportData:function(t,e,n,i){return t.map(function(t){return{id:t.id,vertices:t.vertices.map(function(e){return{id:e.id,x:Number(e.x),y:Number(e.y),edge_ids:s.default.edgesForVertexId(e.id,t).map(function(t){return t.id})}}),edges:t.edges.map(function(e){return{id:e.id,vertex_ids:[e.v1,e.v2],face_ids:s.default.facesForEdgeId(e.id,t).map(function(t){return t.id})}}),faces:t.faces.map(function(t){return{id:t.id,edge_ids:t.edgeRefs.map(function(t){return t.edge_id}),edge_order:t.edgeRefs.map(function(t){return t.reverse?0:1})}})}})}}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(259),a=r(o),s=n(263),d=i(s),l=n(261),c=r(l);e.default={namespaced:!0,state:[],actions:a.default,mutations:d,getters:c.default}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=e.geometry_id,i=e.vertsReferencedElsewhere,r=M.default.find(t,{id:n}),o=new b.default(M.default.flatMap(r.faces,function(t){return M.default.map(t.edgeRefs,"edge_id")})),a=M.default.flatMap(r.edges.filter(function(t){return o.has(t.id)}),function(t){return[t.v1,t.v2]}),s=new b.default([].concat((0,w.default)(i||[]),(0,w.default)(a)));r.edges=r.edges.filter(function(t){return o.has(t.id)}),r.vertices=r.vertices.filter(function(t){return s.has(t.id)});var d=M.default.difference([].concat((0,w.default)(o)),M.default.map(r.edges,"id"));d.length&&console.error("An edge is referenced by a face, but does not exist!",(0,y.default)(r));var l=M.default.difference(a,M.default.map(r.vertices,"id"));l.length&&console.error("A vertex is referenced by a face, but does not exist!",(0,y.default)(r))}function o(t,e){var n=e.geometry;t.push(n)}function a(t,e){var n=e.geometry_id,i=e.vertex;t.find(function(t){return t.id===n}).vertices.push(i)}function s(t,e){var n=e.geometry_id,i=e.face;t.find(function(t){return t.id===n}).faces.push(i)}function d(t,e){for(var n=e.id,i=0;i<t.length;i++){var r=t[i];if(r.id===n){t.splice(t.findIndex(function(t){return t.id===n}),1);break}if(~r.faces.map(function(t){return t.id}).indexOf(n)){r.faces.splice(r.faces.findIndex(function(t){return t.id===n}),1);break}if(~r.edges.map(function(t){return t.id}).indexOf(n)){r.edges.splice(r.edges.findIndex(function(t){return t.id===n}),1);break}if(~r.vertices.map(function(t){return t.id}).indexOf(n)){r.vertices.splice(r.vertices.findIndex(function(t){return t.id===n}),1);break}}}function l(t,e){var n=e.geometry_id,i=e.face_id,r=e.edgeRef,o=t.find(function(t){return t.id===n}),a=o.faces.find(function(t){return t.id===i}),s=o.edges.find(function(t){return t.id===r.edge_id});s&&a.edgeRefs.push(r)}function c(t,e){var n=e.geometry_id,i=e.face_id,r=e.edgeRefs,o=t.find(function(t){return t.id===n}),a=o.faces.find(function(t){return t.id===i});a.edgeRefs=r.filter(function(t){return o.edges.find(function(e){return e.id===t.edge_id})})}function u(t,e){var n=e.geometry_id,i=e.face_id,r=e.edge_id,o=t.find(function(t){return t.id===n}),a=o.faces.find(function(t){return t.id===i});a.edgeRefs.splice(a.edgeRefs.findIndex(function(t){return t.edge_id===r}),1)}function f(t,e){var n,i=e.geometry_id,r=e.face_id,o=e.edge_id,a=e.newEdges,s=t.find(function(t){return t.id===i}),d=s.faces.find(function(t){return t.id===r}),l=M.default.findIndex(d.edgeRefs,{edge_id:o}),c=d.edgeRefs[l];(n=d.edgeRefs).splice.apply(n,[l,1].concat((0,w.default)(a.map(function(t){var e=t.id,n=t.reverse;return{edge_id:e,reverse:c.reverse^n}}))))}function p(t,e){var n=e.geometry_id,i=e.vertices,r=M.default.find(t,{id:n});i.forEach(function(t){return M.default.find(r.vertices,{id:t.id})||r.vertices.push(t)})}function h(t,e){var n=e.geometry_id,i=e.edges,r=M.default.find(t,{id:n});i.forEach(function(t){return M.default.find(r.edges,{id:t.id})||r.edges.push(t)})}function m(t,e){var n=e.geometry_id,i=e.edgeToDelete,r=e.newEdges,o=e.replaceEdgeRefs;h(t,{geometry_id:n,edges:r}),o.forEach(function(e){return f(t,e)}),d(t,{id:i})}function g(t,e){var n=e.geometry_id,i=e.vertices,r=e.edges,o=e.face_id,a=M.default.find(t,{id:n});p(t,{geometry_id:n,vertices:i}),h(t,{geometry_id:n,edges:r});var s=M.default.find(a.faces,{id:o});s||(s={id:o,edgeRefs:[]},a.faces.push(s)),s.edgeRefs=r.map(function(t){return{edge_id:t.id,reverse:!!t.reverse}})}Object.defineProperty(e,"__esModule",{value:!0});var v=n(37),y=i(v),_=n(30),w=i(_),x=n(292),b=i(x);e.trimGeometry=r,e.initGeometry=o,e.createVertex=a,e.createFace=s,e.destroyGeometry=d,e.createEdgeRef=l,e.setEdgeRefsForFace=c,e.destroyEdgeRef=u,e.replaceEdgeRef=f,e.ensureVertsExist=p,e.ensureEdgesExist=h,e.splitEdge=m,e.replaceFacePoints=g;var S=n(3),M=i(S)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(85),s=i(a),d=n(48),l=i(d),c=n(3),u=i(c),f=n(83),p=i(f),h=n(113),m=i(h),g=n(74),v=i(g),y=n(112),_=i(y),w=n(43),x=i(w),b=n(15),S=i(b);e.default={initStory:function(t){var e=x.default.generateName(t.state,"stories"),n=new m.default.Story(e);t.commit("initStory",{story:n}),t.dispatch("geometry/initGeometry",{story_id:n.id},{root:!0}),t.dispatch("initSpace",{story:n}),t.dispatch("initShading",{story:n}),t.dispatch("selectStory",{story:n})},initSpace:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=x.default.generateName(t.state,"spaces",n),r=new m.default.Space(i);t.commit("initSpace",{story:n,space:r})},initShading:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=x.default.generateName(t.state,"shading",n),r=new m.default.Shading(i);t.commit("initShading",{story:n,shading:r})},destroyStory:function(t,e){var n=t.state.stories,i=n.findIndex(function(t){return t.id===e.story.id}),r=n[i];t.commit("destroyStory",{story:r}),t.dispatch("geometry/destroyGeometry",r.geometry_id,{root:!0}),0===n.length?t.dispatch("initStory"):t.dispatch("selectStory",{story:n[i-1]})},destroySpace:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=n.spaces.find(function(t){return t.id===e.space.id});t.commit("destroySpace",{space:i,story:n});var r=t.rootGetters["application/currentStoryGeometry"].faces.find(function(t){return t.id===i.face_id});r&&t.dispatch("geometry/destroyFaceAndDescendents",{face:r,geometry_id:t.rootGetters["application/currentStoryGeometry"].id},{root:!0})},destroyShading:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=n.shading.find(function(t){return t.id===e.shading.id});t.commit("destroyShading",{shading:i,story:n});var r=t.rootGetters["application/currentStoryGeometry"].faces.find(function(t){return t.id===i.face_id});r&&t.dispatch("geometry/destroyFaceAndDescendents",{face:r,geometry_id:t.rootGetters["application/currentStoryGeometry"].id},{root:!0})},destroyImage:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=n.images.find(function(t){return t.id===e.image.id});t.commit("destroyImage",{image:i,story:n})},destroyWindowDef:function(t,e){t.commit("destroyWindowsByDefinition",e.object),t.commit("destroyObject",e)},destroyDaylightingControlDef:function(t,e){t.commit("destroyDaylightingControlsByDefinition",e.object),t.commit("destroyObject",e)},destroyDoorDef:function(t,e){t.commit("destroyDoorsByDefinition",e.object),t.commit("destroyObject",e)},destroyObject:function(t,e){t.commit("destroyObject",{object:e.object})},updateStoryWithData:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story.id}),i=(0,l.default)(p.default.stories.keymap),r={};for(var o in e)e.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=e[o]);r.story=n,t.commit("updateStoryWithData",r)},updateSpaceWithData:function(t,e){var n=t.getters.allSpaces.find(function(t){return t.id===e.space.id}),i=(0,l.default)(n),r={};for(var o in e)e.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=e[o]);r.space=n,t.commit("updateSpaceWithData",r)},updateShadingWithData:function(t,e){var n=t.getters.allShading.find(function(t){return t.id===e.shading.id}),i=(0,l.default)(n),r={};for(var o in e)e.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=e[o]);r.shading=n,t.commit("updateShadingWithData",r)},updateImageWithData:function(t,e){var n=t.getters.allImages.find(function(t){return t.id===e.image.id}),i=(0,l.default)(n),r={};for(var o in e)e.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=e[o]);r.image=n,t.commit("updateImageWithData",r)},updateWindowDefinitionWithData:function(t,e){var n=t.state,i=t.dispatch,r=e.object.id,o=u.default.pick((0,h.getDefaults)("WindowDefinition"),["height","width","window_spacing","wwr"]);if("Window to Wall Ratio"===e.window_definition_mode)(0,s.default)(e,o,{height:null,width:null,window_spacing:null});else if("Repeating Windows"===e.window_definition_mode)(0,s.default)(e,o,{wwr:null});else if("Single Window"===e.window_definition_mode)(0,s.default)(e,o,{wwr:null,window_spacing:null});else if(e.window_definition_mode)throw new Error("unrecognized window_definition_mode: "+e.window_definition_mode);if(u.default.includes(["Window to Wall Ratio","Repeating Windows"],e.window_definition_mode)){var a=u.default.flatMap(n.stories,function(t){return u.default.chain(t.windows).filter({window_definition_id:r}).groupBy("edge_id").values().flatMap(u.default.tail).map(function(e){return{story_id:t.id,object:{id:e.id}}}).value()});a.forEach(function(t){return i("destroyWindow",t)})}i("updateObjectWithData",e)},updateObjectWithData:function(t,e){var n=x.default.libraryObjectWithId(t.state,e.object.id);e.object=n,t.commit("updateObjectWithData",e)},createImageForStory:function(t,e){var n=t.state.stories.find(function(t){return t.id===e.story_id}),i=x.default.generateName(t.state,"images",n),r=new m.default.Image(i,e.src);r.height=e.height,r.width=e.width,r.x=e.x,r.y=e.y,t.commit("createImageForStory",{story_id:n.id,image:r})},createObjectWithType:function(t,e){var n=e.type,i=x.default.generateName(t.state,n),r=new x.default.map[n].init({name:i});t.commit("initObject",{type:n,object:r})},selectStory:function(t,e){var n=e.story;t.dispatch("application/setCurrentStoryId",{id:n.id},{root:!0})},createWindow:function(t,e){var n=e.story_id,i=e.edge_id,r=e.window_definition_id,a=e.alpha,s=u.default.find(t.state.stories,{id:n}),d=u.default.find(t.state.library.window_definitions,{id:r}),l=s&&u.default.find(t.rootState.geometry,{id:s.geometry_id}),c=l&&u.default.find(l.edges,{id:i});if(!s)throw new Error("Story not found");if(!d)throw new Error("Window Definition not found");if(!l)throw new Error("Geometry not found");if(!c)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");var f=u.default.filter(s.windows,{edge_id:i}).map(function(e){return(0,o.default)({},e,{window_definition_mode:u.default.find(t.state.library.window_definitions,{id:e.window_definition_id}).window_definition_mode})}),p=void 0;p="Single Window"===d.window_definition_mode?u.default.reject(f,{window_definition_mode:"Single Window"}):f,p.forEach(function(e){return t.commit("destroyWindow",{story_id:n,object:{id:e.id}})}),t.commit("createWindow",(0,o.default)({},e,{id:v.default.generate(),name:(0,g.genName)(d.name)}))},createDoor:function(t,e){var n=e.story_id,i=e.edge_id,r=e.door_definition_id,a=e.alpha,s=u.default.find(t.state.stories,{id:n}),d=u.default.find(t.state.library.door_definitions,{id:r}),l=s&&u.default.find(t.rootState.geometry,{id:s.geometry_id}),c=l&&u.default.find(l.edges,{id:i});if(!s)throw new Error("Story not found");if(!d)throw new Error("Door Definition not found");if(!l)throw new Error("Geometry not found");if(!c)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");t.commit("createDoor",(0,o.default)({},e,{id:v.default.generate(),name:(0,g.genName)(d.name)}))},createDaylightingControl:function(t,e){var n=e.story_id,i=e.face_id,r=e.daylighting_control_definition_id,a=e.x,s=e.y,d=u.default.find(t.state.stories,{id:n}),l=u.default.find(t.state.library.daylighting_control_definitions,{id:r}),c=d&&u.default.find(t.rootState.geometry,{id:d.geometry_id}),f=c&&u.default.find(c.faces,{id:i}),p=c&&(S.default.vertexForCoordinates({x:a,y:s},c)||_.default.Vertex(a,s));if(!d)throw new Error("Story not found");if(!l)throw new Error("Daylighting Control Definition not found");if(!c)throw new Error("Geometry not found");if(!f)throw new Error("Face not found");if(!p.id)throw new Error("Unable to find or create vertex");t.commit("geometry/ensureVertsExist",{geometry_id:c.id,vertices:[p]},{root:!0}),t.commit("createDaylightingControl",(0,o.default)({},e,{vertex_id:p.id,id:v.default.generate(),name:(0,g.genName)(l.name)}))},destroyDaylightingControl:function(t,e){var n=t.commit;n("destroyDaylightingControl",e)},destroyWindow:function(t,e){var n=t.commit;n("destroyWindow",e)},destroyDoor:function(t,e){var n=t.commit;n("destroyDoor",e)},modifyDaylightingControl:function(t,e){var n=t.commit;n("modifyDaylightingControl",e)},modifyWindow:function(t,e){var n=t.commit;n("modifyWindow",e)},modifyDoor:function(t,e){var n=t.commit;n("modifyDoor",e)},destroyAllComponents:function(t,e){var n=t.commit,i=e.story_id;n("dropDaylightingControls",{story_id:i}),n("dropWindows",{story_id:i}),n("dropDoors",{story_id:i})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return""===t||null===t?d.default.has(e,"default")?e.default:e.nullable?null:0:+t}function o(t){return"true"===t.toLowerCase()}function a(t){return+t||null}Object.defineProperty(e,"__esModule",{value:!0}),e.number=r,e.bool=o,e.gt0orNull=a;var s=n(3),d=i(s)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=i(r),a=n(48),s=i(a),d=n(7),l=i(d);e.default={allSpaces:function(t,e,n,i){return n.models.stories.reduce(function(t,e){return t.concat(e.spaces)},[])},allShading:function(t,e,n,i){return n.models.stories.reduce(function(t,e){return t.concat(e.shading)},[])},allImages:function(t,e,n,i){return n.models.stories.reduce(function(t,e){return t.concat(e.images)},[])},all:function(t,e,n,i){var r=(0,l.default)({},n.models.library,{stories:n.models.stories,spaces:e.allSpaces,shading:e.allShading,images:e.allImages});return(0,s.default)(r).reduce(function(t,e){return t.push.apply(t,(0,o.default)(r[e])),t},[])}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(264),o=i(r),a=n(268),s=i(a),d=n(266),l=i(d);e.default={namespaced:!0,state:{stories:[],library:{building_units:[],thermal_zones:[],space_types:[],construction_sets:[],window_definitions:[],daylighting_control_definitions:[],pitched_roofs:[],door_definitions:[]}},actions:o.default,mutations:s.default,getters:l.default}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(85),o=i(r),a=n(3),s=i(a),d=n(43);i(d);e.default={initStory:function(t,e){t.stories.push(e.story)},initSpace:function(t,e){e.story.spaces.push(e.space)},initShading:function(t,e){e.story.shading.push(e.shading)},initObject:function(t,e){t.library[e.type].push(e.object)},destroySpace:function(t,e){e.story.spaces.splice(e.story.spaces.findIndex(function(t){return t.id===e.space.id}),1)},destroyShading:function(t,e){e.story.shading.splice(e.story.shading.findIndex(function(t){return t.id===e.shading.id}),1)},destroyImage:function(t,e){e.story.images.splice(e.story.images.findIndex(function(t){return t.id===e.image.id}),1)},destroyStory:function(t,e){t.stories.splice(t.stories.findIndex(function(t){return t.id===e.story.id}),1)},destroyObject:function(t,e){var n=e.object.id;t.library=s.default.mapValues(t.library,function(t){return s.default.reject(t,{id:n})})},updateStoryWithData:function(t,e){var n=e.story;delete e.story,(0,o.default)(n,e)},createImageForStory:function(t,e){var n=t.stories.find(function(t){return t.id===e.story_id});n.images.push(e.image)},updateSpaceWithData:function(t,e){var n=e.space;(0,o.default)(n,e),delete n.space},updateShadingWithData:function(t,e){var n=e.shading;(0,o.default)(n,e),delete n.shading},updateImageWithData:function(t,e){var n=e.image;(0,o.default)(n,e),delete n.image},updateObjectWithData:function(t,e){var n=e.object;(0,o.default)(n,e),delete n.object},createWindow:function(t,e){var n=e.story_id,i=e.edge_id,r=e.window_definition_id,o=e.alpha,a=e.id,d=e.name,l=s.default.find(t.stories,{id:n});l.windows.push({window_definition_id:r,edge_id:i,alpha:o,id:a,name:d})},createDoor:function(t,e){var n=e.story_id,i=e.edge_id,r=e.door_definition_id,o=e.alpha,a=e.id,d=s.default.find(t.stories,{id:n});d.doors.push({door_definition_id:r,edge_id:i,alpha:o,id:a,name:name})},dropWindows:function(t,e){var n=e.story_id,i=s.default.find(t.stories,{id:n});i.windows=[]},dropDoors:function(t,e){var n=e.story_id,i=s.default.find(t.stories,{id:n});i.doors=[]},createDaylightingControl:function(t,e){var n=e.story_id,i=e.face_id,r=e.daylighting_control_definition_id,o=e.vertex_id,a=e.name,d=e.id,l=s.default.find(t.stories,{id:n}),c=s.default.find(l.spaces,{face_id:i});c.daylighting_controls.push({daylighting_control_definition_id:r,vertex_id:o,id:d,name:a})},dropDaylightingControls:function(t,e){var n=e.story_id,i=s.default.find(t.stories,{id:n});i.spaces.forEach(function(t){t.daylighting_controls=[]})},destroyWindowsByDefinition:function(t,e){var n=e.id;t.stories.forEach(function(t){t.windows=s.default.reject(t.windows,{window_definition_id:n})})},destroyDaylightingControlsByDefinition:function(t,e){var n=e.id;t.stories.forEach(function(t){t.spaces.forEach(function(t){t.daylighting_controls=s.default.reject(t.daylighting_controls,{daylighting_control_definition_id:n})})})},destroyDoorsByDefinition:function(t,e){var n=e.id;t.stories.forEach(function(t){t.doors=s.default.reject(t.doors,{door_definition_id:n})})},destroyDaylightingControl:function(t,e){var n=e.story_id,i=e.object.id,r=s.default.find(t.stories,{id:n});r.spaces.forEach(function(t){t.daylighting_controls=s.default.reject(t.daylighting_controls,{id:i})})},modifyDaylightingControl:function(t,e){var n=e.story_id,i=e.id,r=e.key,o=e.value,a=s.default.find(t.stories,{id:n});a.spaces.some(function(t){var e=s.default.find(t.daylighting_controls,{id:i});return!!e&&(e[r]=o,!0)})},destroyWindow:function(t,e){var n=e.story_id,i=e.object.id,r=s.default.find(t.stories,{id:n});r.windows=s.default.reject(r.windows,{id:i})},destroyDoor:function(t,e){var n=e.story_id,i=e.object.id,r=s.default.find(t.stories,{id:n});r.doors=s.default.reject(r.doors,{id:i})},modifyWindow:function(t,e){var n=e.story_id,i=e.id,r=e.key,o=e.value,a=s.default.find(t.stories,{id:n}),d=s.default.find(a.windows,{id:i});d[r]=o},modifyDoor:function(t,e){var n=e.story_id,i=e.id,r=e.key,o=e.value,a=s.default.find(t.stories,{id:n}),d=s.default.find(a.doors,{id:i});d[r]=o}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r);e.default={name:function(t,e,n,i){var r=e.getters["models/all"];switch(i){case"stories":r=e.state.models.stories;break;case"spaces":r=e.getters["models/allSpaces"];break;case"shading":r=e.getters["models/allShading"];break;case"images":r=e.getters["models/allImages"];break;default:r=e.state.models.library[i]}var o="";return r.filter(function(e){return e.name===n&&e.id!==t.id}).length?o="Names must be unique.":""===n&&(o="Names must be at least 1 characters long."),o?{success:!1,error:o}:{success:!0}},number:function(t,e,n,i){var r="";return isNaN(n)&&(r="Value must be numeric."),r?{success:!1,error:r}:{success:!0}},oneOf:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,i,r){return o.default.includes(e,i)?{success:!0}:{success:!1,error:"Expected one of "+e+", got "+i}}},gt0:function(t,e,n,i){return n>0?{success:!0}:{success:!1,error:"Expected value to be greater than zero"}},closedInterval:function(t,e){return function(n,i,r,o){return r<t||r>e?{success:!1,error:"Must be between "+t+" and "+e}:{success:!0}}},halfOpenInterval:function(t,e){return function(n,i,r,o){return r<t||r>=e?{success:!1,error:"Must be greater than or equal "+t+" and less than "+e}:{success:!0}}},gt0orNull:function(t,e,n,i){return null===n||""===n||n>0?{success:!0}:{success:!1,error:"If provided, value must be greater than 0"}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(48),o=i(r),a=n(3),s=i(a),d=n(280),l=i(d);e.default={setUnits:function(t,e){var n=t.commit,i=t.dispatch,r=t.rootState;if("m"===e.units||"ft"===e.units)throw new Error('units must be "ip" or "si"');"ip"!==e.units&&"si"!==e.units||(n("setUnits",e),r.models.stories.forEach(function(t){return i("models/destroyStory",{story:t},{root:!0})}))},setLanguage:function(t,e){"EN-US"===e.language&&t.commit("setLanguage",e)},setNorthAxis:function(t,e){var n=e.north_axis;n>360||n<0||(t.commit("setConfigNorthAxis",{north_axis:n}),t.commit("setMapRotation",{rotation:n*Math.PI/180}))},setMapVisible:function(t,e){"boolean"==typeof e.visible&&t.commit("setMapVisible",e)},setMapEnabled:function(t,e){"boolean"==typeof e.enabled&&t.commit("setMapEnabled",e)},setMapInitialized:function(t,e){"boolean"==typeof e.initialized&&t.commit("setMapInitialized",e)},setGridVisible:function(t,e){"boolean"==typeof e.visible&&t.commit("setGridVisible",e)},setSpacing:function(t,e){t.commit("setSpacing",e)},setViewMinX:function(t,e){t.commit("setViewMinX",e)},setViewMinY:function(t,e){t.commit("setViewMinY",e)},setViewMaxX:function(t,e){var n=new l.default(e);n.validateInt("max_x"),n.validateMin("max_x",t.state.view.min_x),t.commit("setViewMaxX",n.validatedPayload)},setViewMaxY:function(t,e){var n=new l.default(e);n.validateInt("max_y"),n.validateMin("max_y",t.state.view.min_y),t.commit("setViewMaxY",n.validatedPayload)},setZoom:function(t,e){t.commit("setMapZoom",e)},setMapLatitude:function(t,e){var n=new l.default(e);n.validateFloat("latitude"),n.validateMax("latitude",180),n.validateMin("latitude",-180),t.commit("setMapLatitude",n.validatedPayload)},setMapLongitude:function(t,e){var n=new l.default(e);n.validateFloat("longitude"),n.validateMax("longitude",180),n.validateMin("longitude",-180),t.commit("setMapLongitude",n.validatedPayload)},setMapZoom:function(t,e){var n=new l.default(e);n.validateFloat("zoom"),t.commit("setMapZoom",{zoom:e.zoom})},setMapRotation:function(t,e){t.commit("setConfigNorthAxis",{north_axis:e.rotation/(2*Math.PI)*360}),t.commit("setMapRotation",{rotation:e.rotation})},setPreviousStoryVisible:function(t,e){t.commit("setPreviousStoryVisible",{visible:e.visible})},setShowImportExport:function(t,e){t.commit("setShowImportExport",e)},zoomToFit:function(t,e){e.geometry_id,e.widthOverHeight;t.commit("setView",{xExtent:xExtent,yExtent:yExtent})},modifyGround:function(t,e){var n=t.state,i=t.commit,r=e.key,a=e.val,d=+a;return isNaN(d)&&(d=0),s.default.includes((0,o.default)(n.ground),r)?"tilt_angle"===r&&(d<0||d>=90)?void window.eventBus.$emit("error","Tilt Angle must be in [0, 90)"):void i("modifyGround",{key:r,value:d}):void console.error('unrecognized ground property "'+r+'"')}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={snapTolerance:function(t){var e=.025*Math.abs(t.view.max_x-t.view.min_x);return t.grid.visible?.5*t.grid.spacing:e},angleTolerance:function(){return 20}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setUnits:function(t,e){"units"in e&&(t.config.units=e.units),"editable"in e&&(t.config.unitsEditable=e.editable)},setLanguage:function(t,e){"language"in e&&(t.config.language=e.language)},setConfigNorthAxis:function(t,e){"north_axis"in e&&(t.north_axis=e.north_axis)},setGridVisible:function(t,e){"visible"in e&&(t.grid.visible=e.visible)},setSpacing:function(t,e){t.grid.spacing=e.spacing},setViewMinX:function(t,e){"min_x"in e&&(t.view.min_x=e.min_x)},setViewMinY:function(t,e){"min_y"in e&&(t.view.min_y=e.min_y)},setViewMaxX:function(t,e){"max_x"in e&&(t.view.max_x=e.max_x)},setViewMaxY:function(t,e){"max_y"in e&&(t.view.max_y=e.max_y)},setMapEnabled:function(t,e){"enabled"in e&&(t.map.enabled=e.enabled)},setMapInitialized:function(t,e){"initialized"in e&&(t.map.initialized=e.initialized)},setMapVisible:function(t,e){"visible"in e&&(t.map.visible=e.visible)},setMapLatitude:function(t,e){"latitude"in e&&(t.map.latitude=e.latitude)},setMapLongitude:function(t,e){"longitude"in e&&(t.map.longitude=e.longitude)},setMapZoom:function(t,e){"zoom"in e&&(t.map.zoom=e.zoom)},setMapRotation:function(t,e){"rotation"in e&&(t.map.rotation=e.rotation)},setPreviousStoryVisible:function(t,e){"visible"in e&&(t.previous_story.visible=e.visible)},setShowImportExport:function(t,e){t.show_import_export=e},modifyGround:function(t,e){var n=e.key,i=e.value;t.config.ground[n]=i}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(85),o=i(r),a=n(3),s=i(a),d=n(166),l=i(d);e.default={importState:function(t,e){t.project=(0,o.default)(l.default.state,e.project),t.application=e.application,t.models=e.models,t.geometry=e.geometry},importLibrary:function(t,e){t.models.library=e},changeUnits:function(t,e){s.default.keys(t).forEach(function(n){t[n]=e[n]})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(37),s=i(a),d=n(3),l=i(d),c=function(t){var e=JSON.parse((0,s.default)(t));return e},u=["application/setScaleX","application/setCurrentTool","application/setScaleY","project/setSpacing","project/setViewMinX","project/setViewMinY","project/setViewMaxX","project/setViewMaxY","application/clearSubSelections","application/setCurrentStoryId","application/setCurrentStory","application/setCurrentSpace","application/setCurrentShading","application/setCurrentImage","application/setCurrentSpacePropertyId","application/setCurrentSubSelectionType","project/setPreviousStoryVisible","project/setGridVisible","project/setMapLatitude","project/setMapLongitude","project/setMapRotation"],f=["importFloorplan","project/setMapEnabled","project/setMapInitialized"],p=function(t){return t};e.default={store:null,pastTimetravelStates:[],futureTimetravelStates:[],currentlyInBatch:!1,triggeringAction:"(none)",
init:function(t){var e=this;this.store=t,t.timetravel=this,this.pastTimetravelStates=[],this.futureTimetravelStates=[],this.store.replaceState((0,o.default)({},t.state,{timetravelInitialized:!0}));var n=t.replaceState;t.replaceState=function(){window.api&&window.api.config.onChange();for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e[0];r.application.scale=this.state.application.scale,r.project.view=this.state.project.view,r.project.grid=this.state.project.grid,r.project.previous_story=this.state.project.previous_story,n.apply(this,e)};var i=t.commit;t.commit=function(){window.api&&window.api.config.onChange();for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];i.apply(this,e)};var r=t.dispatch;t.dispatch=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[0];l.default.includes(u,o)||(e.maybeSaveCheckpoint(o),console.log("dispatching action:",n[0])),r.apply(this,n)}},maybeSaveCheckpoint:function(t){var e=this;this.currentlyInBatch||this.saveCheckpoint(t),this.currentlyInBatch=!0,clearTimeout(this.resetBatchFlag),this.resetBatchFlag=setTimeout(function(){e.currentlyInBatch=!1},0)},saveCheckpoint:function(t){this.pastTimetravelStates.push({triggeringAction:this.triggeringAction,state:c(this.store.state)}),this.triggeringAction=t,console.warn("saving state:",this.pastTimetravelStates[this.pastTimetravelStates.length-1]),this.futureTimetravelStates=[],this.potentiallyRollbackCheckpoint(t)},potentiallyRollbackCheckpoint:function(t){var e=this.pastTimetravelStates,n=this.store;return l.default.includes(f,t)?(this.pastTimetravelStates=[],void(this.futureTimetravelStates=[])):void l.default.defer(function(){for(;e.length>0&&l.default.isEqual(c(n.state),e[e.length-1].state);)console.log("current state matches previous, so rolling back",e[e.length-1].triggeringAction),e.pop()})},undo:function(){if(this.pastTimetravelStates.length){var t=this.pastTimetravelStates.pop(),e=t.state,n=t.triggeringAction,i=this.triggeringAction;this.futureTimetravelStates.push({triggeringAction:this.triggeringAction,state:c(this.store.state)}),this.triggeringAction=n,this.store.replaceState(e),console.log("undo",e),window.eventBus.$emit("success","undo "+i)}},redo:function(){if(this.futureTimetravelStates.length){var t=this.futureTimetravelStates.pop(),e=t.state,n=t.triggeringAction;this.pastTimetravelStates.push({state:c(this.store.state),triggeringAction:this.triggeringAction}),this.triggeringAction=n,this.store.replaceState(e),window.eventBus.$emit("success","redo "+n),console.log("redo",e)}},logTimetravel:function(){console.log("past:",this.pastTimetravelStates.map(function(t){return p(t)})),console.log("current",p(this.store.state)),console.log("future:",this.futureTimetravelStates.map(function(t){return p(t)}))}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t?4===t.length?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t:null}function o(t){return h.default.isArray(t)?t.map(o):h.default.isObject(t)?h.default.mapValues(t,function(t,e){return("id"===e||e.indexOf("_id")>=0)&&h.default.isNumber(t)?String(t):"color"===e?r(t):o(t)}):t}function a(t,e,n){var i=h.default.chain(n).filter({window_definition_mode:"Repeating Windows"}).map(function(t){return[t.id,t]}).fromPairs().value();return t.map(function(t){var n=i[t.window_definition_id];if(n){var r=h.default.find(e.edges,{id:t.edge_id}),o=(0,v.repeatingWindowCenters)({start:h.default.find(e.vertices,{id:r.vertex_ids[0]}),end:h.default.find(e.vertices,{id:r.vertex_ids[1]}),spacing:n.window_spacing,width:n.width});return(0,f.default)({},t,{alpha:h.default.map(o,"alpha")})}return t})}function s(t,e,n){return t.map(function(t){var i=JSON.parse((0,c.default)(h.default.find(e,{id:t.geometry_id})));return(0,f.default)({},t,{spaces:t.spaces,geometry:i,windows:a(t.windows,i,n),geometry_id:void 0})})}function d(t,e){var n=(0,f.default)({application:t.application,project:t.project,stories:s(t.models.stories,e["geometry/exportData"],t.models.library.window_definitions)},t.models.library,{version:g.default});return o(n)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(37),c=i(l),u=n(7),f=i(u);e.default=d;var p=n(3),h=i(p),m=n(284),g=i(m),v=n(15)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return s[t]=(s[t]||0)+1,a.default.palette.colors[s[t]%a.default.palette.colors.length]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=n(21),a=i(o),s={}},function(t,e,n){"use strict";function i(t){return o[t]=(o[t]||0)+1,r.textures[o[t]%r.textures.length]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(21),o={}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.config.north_axis&&(t.north_axis=t.north_axis||t.config.north_axis,delete t.config.north_axis),t.config.units="ft"===t.config.units?"ip":"m"===t.config.units?"si":t.config.units,t}function o(t){return t&&t.length?t.map(function(t){return(0,f.default)({handle:null},t)}):[]}function a(t){return t&&t.length?t.map(function(t){return(0,f.default)({},(0,v.getDefaults)("WindowDefinition"),{window_definition_mode:t.window_definition_type||(0,v.getDefaults)("WindowDefinition").window_definition_mode},t,{window_definition_type:void 0})}):[]}function s(t){return t.map(function(t){var e=t.multiplier>=1?t.multiplier:(0,v.getDefaults)("Story").multiplier;return(0,f.default)({},(0,v.getDefaults)("Story"),t,{spaces:t.spaces.map(function(t){return(0,f.default)({},(0,v.getDefaults)("Space"),t)}),shading:o(t.shading),multiplier:e})})}function d(t,e){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h.default.isObject(t)?(0,c.default)(t).forEach(function(i){return n(t[i],e,i)}):h.default.isArray(t)?t.forEach(function(t){return n(t,e)}):e(i,t)}window.api&&(window.versionNumber=0);var i=e.options||{},d=e.data.stories.map(function(t){var e=t.geometry.faces.map(function(t){var e=t.edge_ids.map(function(e,n){return{edge_id:e,reverse:!t.edge_order[n]}});return{id:t.id,edgeRefs:e}}),n=t.geometry.edges.map(function(t){return{id:t.id,v1:t.vertex_ids[0],v2:t.vertex_ids[1]}});return{id:t.geometry.id,faces:e,edges:n,vertices:t.geometry.vertices}}),l=e.data.stories.map(function(t){var e=(0,f.default)({geometry_id:t.geometry.id},t);return delete e.geometry,e}),u=0;n(e,function(t,e){t&&"id"===t&&+e>u&&(u=e)}),u+=1,g.default.setId(u),t.commit("importState",{project:r(e.data.project),application:t.state.application,models:{stories:s(l),library:{building_units:o(e.data.building_units),thermal_zones:o(e.data.thermal_zones),space_types:o(e.data.space_types),construction_sets:o(e.data.construction_sets),window_definitions:a(e.data.window_definitions),daylighting_control_definitions:e.data.daylighting_control_definitions||[],pitched_roofs:(e.data.pitched_roofs||[]).map(function(t){return(0,f.default)({shed_direction:null},t)}),door_definitions:o(e.data.door_definitions)}},geometry:d}),h.default.defer(function(){t.dispatch("application/setCurrentStoryId",{id:l[0].id},{root:!0}),l.forEach(function(e){return t.dispatch("geometry/trimGeometry",{geometry_id:e.geometry_id})}),i.noReloadGrid||h.default.defer(function(){return window.eventBus.$emit("zoomToFit")})}),i.noReloadGrid||document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}Object.defineProperty(e,"__esModule",{value:!0});var l=n(48),c=i(l),u=n(7),f=i(u);e.default=d;var p=n(3),h=i(p),m=n(74),g=i(m),v=n(113)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=0;l.libraryTypes.forEach(function(i){if(e.data[i]&&e.data[i].length){var r=t.state.models.library[i].map(function(t){return/_\d+[\w\s]?$/.test(t.name)?t.name.split("_").slice(0,-1).join("_"):t.name});e.data[i]=e.data[i].map(function(t){var e=t;e.id=d.default.generate();var i=r.filter(function(e){return e===t.name}).length;return i&&(e.name+="_"+i),n+=1,e})}});var i=t.state.project.config.units,r=a.default.get(e,"data.project.config.units"),o="ft"===r?"ip":"m"===r?"si":r;"ip"!==o&&"si"!==o&&(console.warn('Expected data.project.config.units to be "ip" or "si", received "'+r+'"'),console.warn("unable to determine units of library -- using project units"),o=i);var s=(0,c.convertLibrary)(e.data,o,i);window.eventBus.$emit("success","Imported "+n+" object"+(1!==n?"s":"")),t.commit("importLibrary",a.default.fromPairs(["building_units","thermal_zones","space_types","construction_sets","window_definitions","daylighting_control_definitions","pitched_roofs"].map(function(e){return[e,t.state.models.library[e].concat(s[e]||[])]})))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=n(3),a=i(o),s=n(74),d=i(s),l=n(21),c=n(114)},function(t,e){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return{invalidKeys:n,validatedPayload:e,validateLength:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in t&&n.indexOf(i)===-1&&(i in t&&t[i].length>=r?e[i]=t[i]:(delete e[i],n.push(i)))},validateMin:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in t&&n.indexOf(i)===-1&&(t[i]>r?e[i]=t[i]:(delete e[i],n.push(i)))},validateMax:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in t&&n.indexOf(i)===-1&&(i in t&&t[i]<r?e[i]=t[i]:(delete e[i],n.push(i)))},validateFloat:function(i){i in t&&n.indexOf(i)===-1&&(i in t&&!isNaN(parseFloat(t[i]))?e[i]=parseFloat(t[i]):(delete e[i],n.push(i)))},validateInt:function(i){i in t&&n.indexOf(i)===-1&&(i in t&&!isNaN(parseInt(t[i]))?e[i]=parseInt(t[i]):(delete e[i],n.push(i)))},validateBoolean:function(i){i in t&&n.indexOf(i)===-1&&(i in t?e[i]=!!t[i]:(delete e[i],n.push(i)))}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=[];return t.vertices.map(function(t,e,n){return[n[0===e?n.length-1:e-1],n[e],n[(e+1)%n.length]]}).forEach(function(n){var i=(0,u.default)(n,3),r=i[0],o=i[1],a=i[2];(0,h.ptsAreCollinear)(r,o,a)&&(0,h.distanceBetweenPoints)(r,o)>(0,h.distanceBetweenPoints)(r,a)&&e.push("face "+t.id+" has a backwards section ("+(0,l.default)(r)+" -> "+(0,l.default)(o)+" -> "+(0,l.default)(a)+")")}),e}function o(t){var e=[],n=function(t){return t.x+":"+t.y},i=p.default.fromPairs(t.vertices.map(function(t){return[n(t),t.id]}));return t.vertices.forEach(function(t){t.id!==i[n(t)]&&e.push("vertex "+t.id+" is a duplicate of "+i[n(t)])}),t.edges.forEach(function(t){t.v1.id!==t.v2.id&&n(t.v1)!==n(t.v2)||e.push("edge "+t.id+" is of length zero")}),t.faces.map(r).forEach(function(t){return e.push.apply(e,(0,s.default)(t))}),e}Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),s=i(a),d=n(37),l=i(d),c=n(75),u=i(c);e.checkFace=r,e.default=o;var f=n(3),p=i(f),h=n(15)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){function i(e){var n=m,i=g,r=d.event;return l.event=v,v=m=g=void 0,b=e,_=t.apply(i,n),l.event=r,_}function r(t){return b=t,w=setTimeout(c,e),S?i(t):_}function o(t){var n=t-x,i=t-b,r=e-n;return M?Math.min(r,y-i):r}function a(t){var n=t-x,i=t-b;return void 0===x||n>=e||n<0||M&&i>=y}function c(){var t=s.default.now();return a(t)?u(t):void(w=setTimeout(c,o(t)))}function u(t){return w=void 0,C&&m?i(t):(v=m=g=void 0,_)}function f(){void 0!==w&&clearTimeout(w),b=0,v=m=x=g=w=void 0}function p(){return void 0===w?_:u(s.default.now())}function h(){var t=s.default.now(),n=a(t);if(m=arguments,g=this,x=t,v=d.event,n){if(void 0===w)return r(x);if(M)return w=setTimeout(c,e),i(x)}return void 0===w&&(w=setTimeout(c,e)),_}var m,g,v,y,_,w,x,b=0,S=!1,M=!1,C=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e=s.default.toNumber(e)||0,s.default.isObject(n)&&(S=!!n.leading,M="maxWait"in n,y=M?Math.max(s.default.toNumber(n.maxWait)||0,e):y,C="trailing"in n?!!n.trailing:C),h.cancel=f,h.flush=p,h}function o(t,e){return r(t,e,{leading:!0,trailing:!0,maxWait:e})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(3),s=i(a),d=n(73),l=n(62)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return c.default.forOwn(t,function(t){c.default.isObject(t)&&r(t)}),(0,d.default)(t)||(0,a.default)(t),t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(290),a=i(o),s=n(291),d=i(s);e.default=r;var l=n(3),c=i(l)},function(t,e){"use strict";t.exports="0.7.0"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,function(t,e,n){n(580),n(581);var i=n(8)(n(226),n(642),"data-v-c1b60834",null);t.exports=i.exports},function(t,e,n){n(561);var i=n(8)(n(227),n(618),"data-v-031586be",null);t.exports=i.exports},function(t,e,n){n(568);var i=n(8)(n(228),n(625),"data-v-3d99eee3",null);t.exports=i.exports},function(t,e,n){var i=n(8)(n(229),n(627),null,null);t.exports=i.exports},function(t,e,n){n(565);var i=n(8)(n(230),n(622),"data-v-306f4abb",null);t.exports=i.exports},function(t,e,n){n(575);var i=n(8)(n(231),n(635),"data-v-746cecc8",null);t.exports=i.exports},function(t,e,n){n(570);var i=n(8)(n(232),n(628),"data-v-4b0808dc",null);t.exports=i.exports},function(t,e,n){var i=n(8)(n(233),n(630),null,null);t.exports=i.exports},function(t,e,n){n(579);var i=n(8)(n(235),n(641),"data-v-a8e9dfbe",null);t.exports=i.exports},function(t,e,n){var i=n(8)(n(236),n(629),null,null);t.exports=i.exports},function(t,e,n){n(578);var i=n(8)(n(237),n(639),"data-v-987d60e8",null);t.exports=i.exports},function(t,e,n){n(574);var i=n(8)(n(238),n(634),"data-v-73ec12ee",null);t.exports=i.exports},function(t,e,n){var i=n(8)(n(239),n(640),null,null);t.exports=i.exports},function(t,e,n){n(582);var i=n(8)(n(241),n(643),"data-v-d56d6c28",null);t.exports=i.exports},function(t,e,n){n(567);var i=n(8)(n(243),n(624),"data-v-3c3490f3",null);t.exports=i.exports},function(t,e,n){n(564);var i=n(8)(n(244),n(621),null,null);t.exports=i.exports},function(t,e,n){n(572);var i=n(8)(n(245),n(632),"data-v-64bc751c",null);t.exports=i.exports},function(t,e,n){n(576);var i=n(8)(n(246),n(636),null,null);t.exports=i.exports},function(t,e,n){var i=n(8)(n(248),n(637),null,null);t.exports=i.exports},function(t,e,n){n(566);var i=n(8)(n(249),n(623),"data-v-309036ee",null);t.exports=i.exports},function(t,e,n){n(571);var i=n(8)(n(250),n(631),null,null);t.exports=i.exports},function(t,e,n){n(569);var i=n(8)(n(251),n(626),"data-v-40563b8d",null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"canvas",attrs:{id:"canvas"}},[n("svg",{attrs:{id:"north_axis",height:"1792",viewBox:"0 0 1792 1792",width:"1792",xmlns:"http://www.w3.org/2000/svg",transform:"rotate("+t.northAxis+")"}},[n("path",{attrs:{d:"M1277 493q-9 19-29 19h-224v1248q0 14-9 23t-23 9H800q-14 0-23-9t-9-23V512H544q-21 0-29-19t5-35L870 74q10-10 23-10 14 0 24 10l355 384q13 16 5 35z"}})]),t._v(" "),t.mapEnabled?n("map-view",{directives:[{name:"show",rawName:"v-show",value:t.mapVisible,expression:"mapVisible"}]}):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.col.readonly||!t.col.input_type?n("span",{class:{numeric:t.col.numeric}},[t._v("\n  "+t._s(t.col.get?t.col.get(t.row,t.rootState):t.row[t.col.name])+"\n")]):"text"===t.col.input_type?n("input",{class:{numeric:t.col.numeric},attrs:{disabled:t.disabled,placeholder:t.col.nullable&&null===t.row[t.col.name]?"(none)":null},domProps:{value:t.row[t.col.name]},on:{keydown:t.blurOnEnter,blur:function(e){t.onChange(e.target.value),t.$forceUpdate()}}}):"color"===t.col.input_type?n("div",{staticClass:"color-wrapper"},[n("input",{ref:"color_input",staticClass:"input-color",attrs:{"object-id":t.row.id,disabled:t.disabled},domProps:{value:t.row[t.col.name]}})]):"select"===t.col.input_type?n("pretty-select",{attrs:{options:t.selectData,value:t.row[t.col.name],disabled:t.disabled},on:{change:function(e){return t.onChange(e)}}}):"texture"===t.col.input_type?n("TextureSelect",{attrs:{value:t.row[t.col.name],disabled:t.disabled},on:{change:function(e){return t.onChange(e)}}}):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[n("div",{staticClass:"overlay",on:{click:t.close}}),t._v(" "),n("div",{staticClass:"modal"},[n("span",[n("svg",{staticClass:"close-button",attrs:{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},on:{click:t.close}},[n("path",{attrs:{d:"M137.05 128l75.476-75.475c2.5-2.5 2.5-6.55 0-9.05s-6.55-2.5-9.05 0L128 118.948 52.525 43.474c-2.5-2.5-6.55-2.5-9.05 0s-2.5 6.55 0 9.05L118.948 128l-75.476 75.475c-2.5 2.5-2.5 6.55 0 9.05 1.25 1.25 2.888 1.876 4.525 1.876s3.274-.624 4.524-1.874L128 137.05l75.475 75.476c1.25 1.25 2.888 1.875 4.525 1.875s3.275-.624 4.525-1.874c2.5-2.5 2.5-6.55 0-9.05L137.05 128z"}})])]),t._v(" "),n("header",[n("h2",[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"content"},[t._t("default")],2)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ModalBase",{staticClass:"settings-modal",attrs:{title:"Settings"},on:{close:function(e){t.$emit("close")}}},[n("div",{staticClass:"settings"},[n("p",[n("label",{staticClass:"input-text"},[t._v("\n        North Axis\n        "),n("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.northAxis,expression:"northAxis",modifiers:{number:!0,lazy:!0}}],attrs:{type:"text",disabled:t.mapEnabled},domProps:{value:t.northAxis},on:{change:function(e){t.northAxis=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),n("ExpandableDrawer",{staticClass:"ground-props-drawer",attrs:{title:"Ground Properties"}},[n("p",[n("label",{staticClass:"input-text"},[t._v("\n          Floor Offset\n          "),n("Info",[t._v("\n            Specifies the vertical offset between the building floor and the ground plane.\n            Use a value < 0 for buildings with below-grade spaces, or a value > 0 for,\n            e.g., buildings on piers.\n          ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.floor_offset,expression:"floor_offset"}],attrs:{type:"text"},domProps:{value:t.floor_offset},on:{input:function(e){e.target.composing||(t.floor_offset=e.target.value)}}})],1)]),t._v(" "),n("p",[n("label",{staticClass:"input-text"},[t._v("\n          Azimuth Angle\n          "),n("Info",[t._v("\n            Direction of the ground plane, in clockwise degrees from the\n            positive y-axis when viewed from above.\n          ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.azimuth_angle,expression:"azimuth_angle"}],attrs:{type:"text"},domProps:{value:t.azimuth_angle},on:{input:function(e){e.target.composing||(t.azimuth_angle=e.target.value)}}})],1)]),t._v(" "),n("p",[n("label",{staticClass:"input-text"},[t._v("\n          Tilt Slope\n          "),n("Info",[t._v("\n            Slope of the ground plane from horizontal. For example, a value of 1 implies a 45 angle.\n          ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tilt_slope,expression:"tilt_slope"}],attrs:{type:"text"},domProps:{value:t.tilt_slope},on:{input:function(e){e.target.composing||(t.tilt_slope=e.target.value)}}})],1)])]),t._v(" "),n("button",{staticClass:"button",on:{click:function(e){t.$emit("close")}}},[t._v("Okay")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-bar"},[t._l(t.columns,function(e){return n("span",{key:e.name,attrs:{"data-column":e.name}},[n("GenericInput",{attrs:{col:e,row:t.row,onChange:t.updateRow.bind(null,t.row.id,e.name)}})],1)}),t._v(" "),n("span",{staticClass:"destroy",on:{click:function(e){t.destroy()}}},[n("Delete",{staticClass:"button"})],1)],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-select"},[t.disabled?t._e():n("button",{class:"texture-"+t.value,on:{click:function(e){t.open=!t.open},blur:function(e){t.open=!1}}},[n("span",{staticClass:"svg-background"}),t._v(" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[n("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}]},t._l(t.textures,function(e){return n("li",{class:(i={selected:e===t.value},i["texture-"+e]=!0,i),on:{mousedown:function(n){t.choose(e)}}});var i}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ModalBase",{attrs:{title:"Save "+t.saveWhat+" as"},on:{close:function(e){t.$emit("close")}}},[n("span",{staticClass:"input-text"},[n("input",{ref:"downloadName",attrs:{type:"text",id:"download-name",spellcheck:"false"},domProps:{value:t.saveWhat.toLowerCase()},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.downloadFile(e):null}}}),t._v("\n    .json\n    "),n("button",{staticClass:"download-button",on:{click:t.downloadFile}},[t._v("Download")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"map-container"}},[n("div",{ref:"map",style:{"pointer-events":"Map"===t.tool?"all":"none"},attrs:{id:"map"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===t.tool,expression:"tool === 'Map'"}],attrs:{id:"autocomplete"}},[n("span",{staticClass:"input-text"},[n("input",{ref:"addressSearch",attrs:{type:"text",placeholder:"Search for a location"}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===t.tool,expression:"tool === 'Map'"}],attrs:{id:"help-text"}},[n("p",[t._v("Drag the map and/or search to set desired location.  Use alt+shift to rotate the north axis. Click 'Done' when finished.")]),t._v(" "),n("button",{on:{click:t.finishSetup}},[t._v("Done")])]),t._v(" "),t.mapModalVisible&&!t.mapInitialized?n("map-modal",{on:{close:function(e){t.mapModalVisible=!1,t.showReticle()}}}):t._e(),t._v(" "),n("svg",{attrs:{id:"reticle"}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{attrs:{id:"toolbar"}},[n("section",{attrs:{id:"top"}},[n("div",{attrs:{id:"navigation-head"}},[t.showImportExport?n("div",{staticClass:"import-export-buttons"},[n("input",{ref:"importLibrary",attrs:{type:"file"},on:{change:function(e){t.importDataAsFile(e,"library")}}}),t._v(" "),n("input",{ref:"importInput",attrs:{type:"file"},on:{change:function(e){t.importDataAsFile(e,"floorplan")}}}),t._v(" "),n("div",{attrs:{title:"open floorplan"}},[n("open-floorplan-svg",{staticClass:"button",attrs:{id:"import"},nativeOn:{click:function(e){t.$refs.importInput.click()}}})],1),t._v(" "),n("div",{attrs:{title:"save floorplan"}},[n("save-floorplan-svg",{staticClass:"button",attrs:{id:"export"},nativeOn:{click:function(e){return t.exportData(e)}}})],1),t._v(" "),n("div",{attrs:{title:"import library"}},[n("import-library-svg",{staticClass:"button",nativeOn:{click:function(e){t.$refs.importLibrary.click()}}})],1)]):t._e(),t._v(" "),n("div",{attrs:{id:"undo-redo"}},[n("div",{attrs:{title:"undo"}},[n("undo-svg",{staticClass:"button",class:{disabled:!t.timetravelInitialized},nativeOn:{click:function(e){return t.undo(e)}}})],1),t._v(" "),n("div",{attrs:{title:"redo"}},[n("redo-svg",{staticClass:"button",class:{disabled:!t.timetravelInitialized},attrs:{disabled:!t.timetravelInitialized},nativeOn:{click:function(e){return t.redo(e)}}})],1)])]),t._v(" "),n("ul",{attrs:{id:"mode-tabs"}},[n("li",{staticClass:"tab",class:{active:"floorplan"===t.modeTab},attrs:{"data-modetab":"floorplan"},on:{click:function(e){t.modeTab="floorplan"}}},[n("span",[t._v("\n          Floorplan\n          "),n("tab-floorplan-svg",{staticClass:"icon"})],1)]),t._v(" "),n("li",{staticClass:"tab",class:{active:"assign"===t.modeTab},on:{click:function(e){t.modeTab="assign"}}},[n("span",[t._v("\n          Assignments\n          "),n("tab-assign-svg",{staticClass:"icon"})],1)]),t._v(" "),n("li",{staticClass:"tab",class:{active:"components"===t.modeTab},attrs:{"data-modetab":"components"},on:{click:function(e){t.modeTab="components"}}},[n("span",[t._v("\n          Components\n          "),n("tool-component-svg",{staticClass:"icon"})],1)]),t._v(" "),t._m(0)]),t._v(" "),n("div",{attrs:{id:"grid-settings"}},[n("div",{staticClass:"input-checkbox"},[n("label",[t._v("Story Below")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.previousStoryVisible,expression:"previousStoryVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.previousStoryVisible)?t._i(t.previousStoryVisible,null)>-1:t.previousStoryVisible},on:{change:function(e){var n=t.previousStoryVisible,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.previousStoryVisible=n.concat([o])):a>-1&&(t.previousStoryVisible=n.slice(0,a).concat(n.slice(a+1)))}else t.previousStoryVisible=r}}})]),t._v(" "),t.mapEnabled?n("div",{staticClass:"input-checkbox"},[n("label",[t._v("map")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mapVisible,expression:"mapVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.mapVisible)?t._i(t.mapVisible,null)>-1:t.mapVisible},on:{change:function(e){var n=t.mapVisible,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.mapVisible=n.concat([o])):a>-1&&(t.mapVisible=n.slice(0,a).concat(n.slice(a+1)))}else t.mapVisible=r}}})]):t._e(),t._v(" "),n("div",{staticClass:"input-checkbox"},[n("label",[t._v("grid")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gridVisible,expression:"gridVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.gridVisible)?t._i(t.gridVisible,null)>-1:t.gridVisible},on:{change:function(e){var n=t.gridVisible,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.gridVisible=n.concat([o])):a>-1&&(t.gridVisible=n.slice(0,a).concat(n.slice(a+1)))}else t.gridVisible=r}}})]),t._v(" "),n("div",{staticClass:"input-number"},[n("label",[t._v("spacing")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.spacing,expression:"spacing",modifiers:{number:!0,lazy:!0}}],domProps:{value:t.spacing},on:{change:function(e){t.spacing=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}}),t._v(" "),t.allowSettingUnits?t._e():n("label",[t._v(t._s(t.rwUnits))])]),t._v(" "),t.allowSettingUnits?n("PrettySelect",{ref:"unitsSelect",attrs:{options:["ft","m"],value:t.rwUnits},on:{change:t.updateUnits}}):t._e(),t._v(" "),n("div",{attrs:{title:"settings"},on:{click:function(e){t.showGroundPropsModal=!0}}},[n("SettingsGear",{staticClass:"button"})],1)],1)]),t._v(" "),n("section",{class:t.modeTab,attrs:{id:"bottom"}},["floorplan"===t.modeTab?[n("div",{attrs:{id:"instructions"}},[t._v("Draw a floorplan and import images")]),t._v(" "),n("div",{staticClass:"tools-list tools",attrs:{id:"drawing-tools"}},[n("div",{class:{active:"Rectangle"===t.tool},attrs:{"data-tool":"Rectangle",title:"Rectangle"},on:{click:function(e){t.tool="Rectangle"}}},[n("tool-draw-rectangle-svg",{staticClass:"button"})],1),t._v(" "),n("div",{class:{active:"Polygon"===t.tool},attrs:{"data-tool":"Polygon",title:"Polygon"},on:{click:function(e){t.tool="Polygon"}}},[n("tool-draw-polygon-svg",{staticClass:"button"})],1),t._v(" "),n("div",{class:{active:"Fill"===t.tool},attrs:{"data-tool":"Fill",title:"Fill"},on:{click:function(e){t.tool="Fill"}}},[n("tool-fill-svg",{staticClass:"button"})],1),t._v(" "),n("div",{class:{active:"Eraser"===t.tool},attrs:{"data-tool":"Eraser",title:"Eraser"},on:{click:function(e){t.tool="Eraser"}}},[n("tool-erase-svg",{staticClass:"button"})],1),t._v(" "),n("div",{class:{active:"Image"===t.tool},attrs:{"data-tool":"Image",title:"Image"},on:{click:t.setImageTool}},[n("tool-image-svg",{staticClass:"button"})],1)])]:t._e(),t._v(" "),"components"===t.modeTab?[n("div",{attrs:{id:"instructions"}},[t.currentComponentDefinition?n("span",[t._v("Click to place a "+t._s(t.currentComponentDefinition.name))]):n("span",[t._v("Add fenestration, daylighting, and PV")])]),t._v(" "),n("ComponentInstanceEditBar")]:t._e(),t._v(" "),"assign"===t.modeTab?[n("div",{attrs:{id:"instructions"}},[t._v("Assign thermal zones, etc, to spaces")])]:t._e(),t._v(" "),n("div",{attrs:{id:"grid-tools"}},[n("RenderByDropdown"),t._v(" "),n("div",{attrs:{title:"zoom to fit"}},[n("ZoomToFitSvg",{staticClass:"button",nativeOn:{click:function(e){return t.zoomToFit(e)}}})],1)],1)],2),t._v(" "),n("section",{staticClass:"modals"},[t.showSaveModal?n("SaveAsModal",{attrs:{saveWhat:t.thingWereSaving,dataToDownload:t.dataToDownload},on:{close:function(){t.showSaveModal=!1,t.thingWereSaving=""}}}):t.showGroundPropsModal?n("Settings",{on:{close:function(e){t.showGroundPropsModal=!1}}}):t._e()],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("span")])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showInstanceEditor?n("EditBar",{attrs:{row:t.componentInstance,columns:t.visibleColumns,updateRow:t.modifyComponentInstance,destroy:t.destroyComponent}}):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editable-table"},[n("table",{staticClass:"table",attrs:{cellspacing:"0"}},[n("thead",{attrs:{cellspacing:"0"}},[n("tr",[n("th",{staticClass:"select"}),t._v(" "),t._l(t.visibleColumns,function(e){return n("th",{attrs:{"data-column":e.name},on:{click:function(n){t.sortBy(e.name)}}},[n("span",[t._v(t._s(e.displayName))]),t._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:e.name===t.sortKey&&t.sortDescending,expression:"col.name === sortKey && sortDescending"}],attrs:{viewBox:"0 0 10 3",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M0 .5l5 5 5-5H0z"}})]),t._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:e.name===t.sortKey&&!t.sortDescending,expression:"col.name === sortKey && !sortDescending"}],attrs:{viewBox:"0 0 10 3",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M0 5.5l5-5 5 5H0z"}})])])}),t._v(" "),n("th",{staticClass:"destroy"})],2)]),t._v(" "),n("tbody",{attrs:{cellspacing:"0"}},t._l(t.sortedRows,function(e){return n("tr",{key:e.id,class:{selected:t.selectedItemId===e.id}},[n("td",{staticClass:"select",on:{click:function(n){n.stopPropagation(),t.selectRow(e)}}},[n("input",{attrs:{type:"radio"},domProps:{checked:t.selectedItemId===e.id}})]),t._v(" "),t._l(t.visibleColumns,function(i){return n("td",{key:i.name,attrs:{"data-column":i.name}},[n("generic-input",{attrs:{col:i,row:e,onChange:t.updateRow.bind(null,e.id,i.name)}})],1)}),t._v(" "),n("td",{staticClass:"destroy",attrs:{title:"delete"},on:{click:function(n){n.stopPropagation(),t.deleteRow(e)}}},[n("Delete",{staticClass:"button"})],1)],2)}))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;
return n("input",{ref:"imageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg,image/png,image/svg,image/gif",id:"upload-image-input"},on:{change:t.uploadImage}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"expandable-drawer":!0,expanded:t.expanded}},[n("p",{staticClass:"title",on:{click:function(e){t.expanded=!t.expanded}}},[t._v("\n    "+t._s(t.caret)+" "+t._s(t.title)+"\n  ")]),t._v(" "),t.expanded?n("p",[t._t("default")],2):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{id:"pattern-defs"}},[n("defs",[t._l(t.modifiers,function(e,i){return[n("pattern",{attrs:{id:"circles-2"+i,patternUnits:"userSpaceOnUse",width:"5",height:"5"}},[n("rect",{attrs:{width:"5",height:"5",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("circle",{attrs:{cx:"1.5",cy:"1.5",r:"1.5",fill:e}})]),t._v(" "),n("pattern",{attrs:{id:"circles-5"+i,patternUnits:"userSpaceOnUse",width:"9",height:"9"}},[n("rect",{attrs:{width:"9",height:"9",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("circle",{attrs:{cx:"3",cy:"3",r:"3",fill:e}})]),t._v(" "),n("pattern",{attrs:{id:"circles-8"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("circle",{attrs:{cx:"4.5",cy:"4.5",r:"4.5",fill:e}})]),t._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-1"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:e,"stroke-width":"1"}})]),t._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-4"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:e,"stroke-width":"3"}})]),t._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-6"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:e}}),t._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:"white","stroke-width":"1"}})]),t._v(" "),n("pattern",{attrs:{id:"dots-5"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("rect",{attrs:{x:"0",y:"0",width:"5",height:"5",fill:e}})]),t._v(" "),n("pattern",{attrs:{id:"dots-8"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("rect",{attrs:{x:"0",y:"0",width:"8",height:"8",fill:e}})]),t._v(" "),n("pattern",{attrs:{id:"crosshatch"+i,patternUnits:"userSpaceOnUse",width:"8",height:"8"}},[n("rect",{attrs:{width:"8",height:"8",fill:"#fff","fill-opacity":"0.7"}}),t._v(" "),n("path",{attrs:{d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":"0.5",stroke:e,"stroke-opacity":"0.8"}})]),t._v(" "),n("pattern",{attrs:{id:"vertical-line"+i,patternUnits:"userSpaceOnUse",width:"4",height:"49"}},[n("rect",{attrs:{width:"4",height:"50",fill:"#fff","fill-opacity":"0.8"}}),t._v(" "),n("rect",{attrs:{width:"2",height:"50",fill:"#fff","fill-opacity":"0.5"}}),t._v(" "),n("rect",{attrs:{x:"2",width:"1",height:"50",fill:e,"fill-opacity":"0.5"}})])]})],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"layout-navigation"}},[n("nav",{attrs:{id:"navigation"}},[n("section",{attrs:{id:"selections"}}),t._v(" "),n("div",{attrs:{id:"list"}},[n("Library",{attrs:{objectTypes:["stories"],mode:"stories",compact:"stories"!==t.libraryExpanded},on:{toggleCompact:function(e){t.libraryExpanded="stories"!==t.libraryExpanded&&"stories"}}}),t._v(" "),n("Library",{attrs:{objectTypes:t.objectTypesForTab,mode:t.subselectionType,searchAvailable:!0,compact:"subselection"!==t.libraryExpanded},on:{changeMode:function(e){t.subselectionType=e},toggleCompact:function(e){t.libraryExpanded="subselection"!==t.libraryExpanded&&"subselection"}}})],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"library-select"},[n("div",{staticClass:"rows"},t._l(t.rows,function(e){return n("div",{key:e.id,class:{active:t.selectedItemId===e.id},attrs:{"data-id":e.id},on:{click:function(n){t.selectItem(e)}}},[n("span",{style:{"background-color":e.color}}),t._v("\n        "+t._s(e.name)+"\n        "),n("a",{staticClass:"destroy",attrs:{title:"delete"},on:{click:function(n){n.stopPropagation(),t.destroyItem(e)}}},[n("Delete",{staticClass:"button"})],1)])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"inspector"}},[n("section",{staticClass:"list",attrs:{id:"geometry-list"}},[t._l(t.currentStoryGeometry.faces,function(e){return t.currentSpace||t.currentShading?t._e():[n("header",[n("h3",[t._v("Face "+t._s(e.id))])]),t._v(" "),t._l(e.edgeRefs,function(e){return n("div",{staticClass:"list-item"},[t._v("\n        edge "+t._s(e.edge_id)+" "+t._s(e.reverse?"reversed ":"")+"\n        "),n("br"),t._v("startpoint "+t._s(t.startpoint(e))+"\n        "),n("br"),t._v("endpoint "+t._s(t.endpoint(e))+"\n      ")])})]}),t._v(" "),t.currentSubSelectionFace?[n("header",[n("h3",[t._v("Face "+t._s(t.currentSubSelectionFace.id)+" on "+t._s(t.currentSpace?t.currentSpace.name:t.currentShading.name))])]),t._v(" "),t._l(t.currentSubSelectionFace.edgeRefs,function(e){return n("div",{staticClass:"list-item"},[t._v("\n        edge "+t._s(e.edge_id)+" "+t._s(e.reverse?"reversed ":"")+"\n        "),n("br"),t._v("startpoint "+t._s(t.startpoint(e))+"\n        "),n("br"),t._v("endpoint "+t._s(t.endpoint(e))+"\n      ")])})]:t._e()],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editable-select-list",class:{expanded:!t.compact},attrs:{"data-object-type":t.selectedObjectType}},[n("div",{staticClass:"controls"},[n("div",{staticClass:"control-group"},[t.objectTypes.length>1?n("PrettySelect",{attrs:{options:t.objectTypes,value:t.selectedObjectType},on:{change:function(e){return t.$emit("selectObjectType",e)}}}):n("span",[t._v(t._s(t.objectTypes[0].display||t.objectTypes[0].displayName))]),t._v(" "),t.addRow?n("a",{staticClass:"add-new",attrs:{title:"Create new"},on:{click:t.addRow}},[n("AddNew",{staticClass:"button"})],1):t._e()],1),t._v(" "),n("div",{staticClass:"control-group"},[n("a",{attrs:{title:t.compact?"expand":"contract"},on:{click:t.toggleCompact}},[n("DoubleArrows",{staticClass:"button",attrs:{transform:t.compact?"":"scale(-1, 1)"}})],1)])]),t._v(" "),n("div",{staticClass:"input-text search-spot"},[t.searchAvailable?n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-bar",attrs:{placeholder:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}):t._e()]),t._v(" "),t.compact?n("LibrarySelect",{attrs:{rows:t.searchedRows,selectItem:t.selectRow,destroyItem:t.destroyRow,selectedItemId:t.selectedRowId}}):n("EditableTable",{attrs:{selectRow:t.selectRow,selectedItemId:t.selectedRowId,columns:t.visibleColumns,rows:t.searchedRows,deleteRow:t.destroyRow,updateRow:t.editRow}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isChrome?t._e():n("p",{staticClass:"non-chrome-warning"},[t._v("\n  Warning. This web-app is currently only tested against recent versions of Chrome. \n")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"render-by"},[n("PrettySelect",{attrs:{label:"View By",options:t.renderableOptions,value:t.currentMode},on:{change:function(e){t.currentMode=e}}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-select"},[t.label?n("label",[t._v(t._s(t.label))]):t._e(),t._v(" "),n("select",{attrs:{disabled:t.disabled},on:{change:function(e){t.$emit("change",e.target.value)}}},t._l(t.normalizedOpts,function(e){return n("option",{domProps:{value:e.val,selected:e.val===t.value}},[t._v(t._s(e.display))])})),t._v(" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[n("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info"},[n("InfoIcon",{staticClass:"button"}),t._v(" "),n("span",{staticClass:"tooltip-text"},[t._t("default")],2)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("EditableSelectList",{attrs:{selectedObjectType:t.mode,objectTypes:t.objectTypesDisplay,rows:t.rows,columns:t.columns,selectedRowId:t.selectedObject&&t.selectedObject.id,selectRow:function(e){t.selectedObject=e},addRow:t.addRowPermitted&&t.createObject,editRow:t.modifyObject,destroyRow:t.destroyObject,searchAvailable:t.searchAvailable,compact:t.compact},on:{toggleCompact:function(e){return t.$emit("toggleCompact",e)},selectObjectType:t.changeMode}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"gridParent",class:{"reduce-ticks":t.reduceTicks},style:{"pointer-events":"Drag"===t.currentTool||"Map"===t.currentTool?"none":"auto"},attrs:{id:"grid"}},[n("svg",{ref:"grid",attrs:{id:"svg-grid"}},[n("g",{staticClass:"axis axis--x"}),t._v(" "),n("g",{staticClass:"axis axis--y"}),t._v(" "),n("g",{staticClass:"images",attrs:{"data-transform-plz":""}}),t._v(" "),n("g",{staticClass:"polygons",attrs:{"data-transform-plz":""}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"tool_"+t.tool.toLowerCase(),attrs:{id:"app"}},[n("toolbar",{class:{"disabled-component":"Map"===t.tool}}),t._v(" "),n("div",{class:{"nav-on-top":t.navigationExpanded},attrs:{id:"layout-main"}},[n("navigation",{class:{"disabled-component":"Map"===t.tool},on:{expanded:function(e){t.navigationExpanded=e}}}),t._v(" "),n("main",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.error||t.success,expression:"error || success"}],class:{error:t.error,success:t.success},attrs:{id:"alert-text"}},[n("p",[t._v(t._s(t.error||t.success))])]),t._v(" "),n("canvas-view"),t._v(" "),n("grid-view")],1)],1),t._v(" "),n("ImageUpload"),t._v(" "),n("Textures")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[n("div",{staticClass:"overlay"}),t._v(" "),n("div",{staticClass:"modal"},[t._m(0),t._v(" "),n("NonChromeWarning"),t._v(" "),n("div",{staticClass:"content"},[n("p",[n("a",{staticClass:"quickstart-action new-floorplan",on:{click:function(e){t.mapEnabled=!1,t.mapVisible=!1,t.$emit("close")}}},[n("div",{staticClass:"title"},[t._v("New")]),t._v(" "),n("QuickstartIconNewFloorplan"),t._v(" "),n("div",{staticClass:"explanation"},[t._v("Create a new floorplan")])],1)]),t._v(" "),n("p",[n("a",{staticClass:"quickstart-action",attrs:{disabled:!t.online},on:{click:function(e){t.mapEnabled=!0,t.tool="Map",t.$emit("close")}}},[n("div",{staticClass:"title"},[t._v("New With Map")]),t._v(" "),n("QuickstartIconNewMapFloorplan"),t._v(" "),n("div",{staticClass:"explanation"},[t._v("Create a new floorplan with a map")])],1)]),t._v(" "),n("p",[n("a",{staticClass:"quickstart-action open-floorplan",attrs:{id:"import"},on:{click:function(e){t.$refs.importInput.click()}}},[n("div",{staticClass:"title"},[t._v("Open")]),t._v(" "),n("QuickstartIconOpenFloorplan"),t._v(" "),n("div",{staticClass:"explanation"},[t._v("Open an existing floorplan")])],1)]),t._v(" "),n("input",{ref:"importInput",attrs:{id:"importInput",type:"file"},on:{change:t.importFloorplanAsFile}})])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h2",[t._v("Quickstart")])])}]}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.4 17.7V5H.6v13h18.2l-.4-.3zM1.6 6h15.8v11L13 13.7l-2.3 1.7L7 11.5 1.8 17h-.2V6z",fill:"#fff"}}),_c("circle",{attrs:{cx:"9.7",cy:"5.4",fill:"#39b54a",r:"5"}}),_c("path",{attrs:{d:"M11.5 4.5h-1.2V3.3c0-.3-.2-.5-.5-.5h-.6c-.3 0-.5.2-.5.5v1.2H7.5c-.3 0-.5.2-.5.5v.6c0 .2.2.4.5.4h1.2v1.2c0 .3.2.5.5.5h.6c.3 0 .5-.2.5-.5V6h1.2c.3 0 .5-.2.5-.5V5c-.1-.3-.3-.5-.5-.5z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10.5",cy:"10",fill:"#39b54a",r:"7.9"}}),_c("path",{attrs:{d:"M13.6 8.8h-1.9V6.9c0-.4-.3-.8-.8-.8H10c-.4 0-.8.3-.8.8v1.9H7.3c-.4 0-.8.3-.8.8v.9c0 .4.3.8.8.8h1.9v1.9c0 .4.3.8.8.8h.9c.4 0 .8-.3.8-.8v-1.9h1.9c.4 0 .8-.3.8-.8v-1c-.1-.4-.4-.7-.8-.7z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM12.9 5.1c0-.9-.7-1.7-1.7-1.7-.9 0-1.7.7-1.7 1.7 0 .9.7 1.7 1.7 1.7.9 0 1.7-.8 1.7-1.7zm5.3 15.5h-2.9v1.1h7v-1.1h-1.7v-7.3h1.7v-1.1h-9.7v1.1h5.6v7.3zM6 16.7v.1c0 .3.2.5.5.5h1.6v1.5h.3v1l-2 .6v.5h.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1l1.6-.2v.1h.1v.6h.2v.4H9v-1h.1v-.1l1.5.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1h.2v-.5l-2-.5v-1h.3v-1.5h1.9c.3 0 .5-.2.5-.5v-.1c0-.2-.1-.3-.2-.4h1.3l-.8 4c-.1.5.3 1.1.8 1.2.6.1 1.1-.2 1.2-.8l1.1-5.3v-.4c-.1-.6-.5-1-1.1-1h-3.2l.4-1.9h3.9c.2 0 .3 0 .5-.1h4.2v-.5c.1 0 .1-.1.2-.1l.5.2 1.9-5-.6-.2-1.9 4.9h-.1c-.1 0-.2.1-.2.2H16v-.1c0-.5-.4-.9-.9-.9h-3.5l.2-1c.2-.9-.4-1.7-1.3-1.9l-.5-.1c-.8-.4-1.6.1-1.8 1L7.7 11l-.1.7V10c0-.3-.2-.5-.5-.5h-.5c-.3 0-.6.2-.6.5v3.8c0 .3.2.5.5.5v1.8c-.3.1-.5.3-.5.6zm1-1c.1.2.3.4.5.5H7v-.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-8.5-.2H6v-19h13v19zm-12.1-.9H18v-17H6.9v17z"}}),_c("path",{attrs:{d:"M11.8 15.9h5.8v4.3h-5.8zm0-5.7h5.8v4.3h-5.8zm0-5.8h5.8v4.3h-5.8z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM20.6 6.6c0-.1-.1-.2-.1-.3-.1.1-.1.2-.2.2-.7.8-1.3 1.7-2 2.5-.4.5-1 .6-1.5.2-.1-.1-.2-.2-.4-.3-.2-.2-.3-.4-.4-.7 0-.3.1-.6.3-.8.7-.8 1.3-1.7 2-2.5.1-.1.1-.2.2-.2-.1 0-.2 0-.3-.1-1.2-.2-2.5.3-3.4 1.3-.8 1-1 2.4-.6 3.6-.6.8-1.3 1.7-1.9 2.5L9.2 7.7c.2-.1.4-.3.6-.5 1.9-1.4 2.4-.2 2.9-.8.5-.6-2-2.2-4.1-.7-.1.2-.3.4-.5.5-.3-.2-.7-.3-1 0-.2.2-.3.5-.2.8-.6.5-1.1.8-1.3 1l-.1-.1c-.2-.3-.6-.3-.8-.1l-.7.5c-.3.2-.4.5-.2.8L5 10.8c.2.3.6.3.9.1l.7-.5c.3-.2.3-.6.1-.9.2-.2.7-.5 1.3-.9l3.4 4.7-.1.1c-.2.1-.3.3-.3.5-1.2 1.5-2.4 3.1-3.6 4.6-.2.3-.4.7-.3 1.1 0 .4.2.7.5 1 .1.1.2.2.4.3.6.5 1.5.4 2-.3.9-1.2 1.9-2.4 2.8-3.6l2.3 3.5c.3.4.8.4 1.1.2l2.2-1.6c.4-.3.4-.8.2-1.1l-3.4-4.1c.6-.7 1.1-1.5 1.7-2.2 1.2.2 2.4-.3 3.2-1.4.8-1.1 1-2.5.5-3.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM15.6 10.3l5.4 5.2L10.2 17zm-6.5 6.8l6-7.4-7.4-4-5.9 7.4z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM3 2.9v18h21v-18H3zm14.6 4H8.8l-2.6-2h14.1l-2.7 2zm-.6 2v6h-7v-6h7zm-9 .6v5.6l-3 2.6V7l3 2.5zm1.6 7.4h8.2l2.6 2H6.9l2.7-2zm9.4-1.8V8.8l3-2.6v11.4l-3-2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-6.4-8.9h-1.5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm-15.3 0H4.3c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm6.9-6.3c-.3 0-.5-.2-.5-.5V4.8c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm0 14.8c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm4.9-4.1l1.1 1m0 .5c-.1 0-.2 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.1.1-.3.1-.4.1zM6.8 7l1.1 1.1m0 .5c-.1 0-.3 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.2 0-.3.1-.4.1zm9.5-.7l1-1m-1 1.5c-.1 0-.3-.1-.4-.2-.2-.2-.2-.5 0-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.3.2zm-10.9 10l1.1-1m-1.1 1.5c-.1 0-.3-.1-.4-.2-.1-.1-.1-.5.1-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.4.2z"}}),_c("ellipse",{attrs:{cx:"12.8",cy:"12.9",rx:"4.8",ry:"4.6"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M6 2.9v19h13v-19H6zm12 1v8H7v-8h11zm-11 17v-8h11v8H7zM27.5 22l-3.3-5.5h6.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M17 4.2l-5.1-2.9v5.8zm-8.9 0L3 1.3v5.8z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[_c("path",{attrs:{d:"M17.6 12V0h-12v12h12zM16 1.6v8.8H7.2V1.6H16zM3.2 13.6H1.6V16H4v-1.6h-.8zM1.6 5.6h1.6v-.8H4V3.2H1.6zM12.8 14.4H12V16h2.4v-2.4h-1.6zM5.6 14.4h1.6V16H5.6zM8.8 14.4h1.6V16H8.8zM1.6 10.4h1.6V12H1.6zM1.6 7.2h1.6v1.6H1.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 99.999"}},[_c("path",{attrs:{d:"M31.001 54.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4zM31.001 35.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4z"}}),_c("path",{attrs:{d:"M95.001 70.007h-13V31.192c0-1.85-.853-3.594-2.31-4.73L53.812 6.269a5.999 5.999 0 0 0-7.36-.018l-26.12 20.193a6.003 6.003 0 0 0-2.33 4.748V70.006h-13v4h3v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v14.99c0 3.312 2.687 6 6 6h52c3.313 0 6-2.688 6-6v-14.99h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h3v-3.999zm-71-38.815l26.12-20.193 25.88 20.193V69.998h-52V31.192z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{staticStyle:{"text-indent":"0","text-transform":"none","block-progression":"tb"},attrs:{d:"M20.3 8.5c-2.96 0-5.4 2.44-5.4 5.4v52.2c0 2.96 2.44 5.4 5.4 5.4h59.4c2.96 0 5.4-2.44 5.4-5.4V13.9c0-2.96-2.44-5.4-5.4-5.4zm0 3.6h59.4c1.028 0 1.8.772 1.8 1.8v37.04L70.166 39.607c-.684-.677-1.934-.65-2.588.056L56.244 51.784 38.666 34.206a1.814 1.814 0 0 0-2.475-.056L18.5 50.294V13.9c0-1.028.772-1.8 1.8-1.8zm35.1 3.6c-4.95 0-9 4.05-9 9s4.05 9 9 9 9-4.05 9-9-4.05-9-9-9zm0 3.6c3.004 0 5.4 2.396 5.4 5.4 0 3.004-2.396 5.4-5.4 5.4a5.373 5.373 0 0 1-5.4-5.4c0-3.004 2.396-5.4 5.4-5.4zM37.344 37.975l17.69 17.69c.684.678 1.934.65 2.588-.055l11.334-12.122L81.5 56.03V66.1c0 1.028-.772 1.8-1.8 1.8H20.3c-1.028 0-1.8-.772-1.8-1.8V55.188z",overflow:"visible",color:"#000"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.6 18.4c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.8-.9-2.9 1.1-.2 1.5-.2 2.8-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("path",{attrs:{d:"M19.9 7.6c-.5-.7-1-.9-1.3-.6-.2.1-.3.4-.4.8 0 .3-.2.6-.4.8-.5.4-1.3.3-2-.7v-.1c-.7-1-.6-1.9-.1-2.2.2-.2.5-.2.9-.2.4.1.7 0 .9-.1.3-.2.3-.7-.2-1.4-.1-.2-.3-.4-.5-.6-1-1-1.5-1.2-2.5-1.8-.1.1-.1.2-.2.4-.4.8-.6 1.2-1.6 2.1-.2.2-.4.4-.6.5-.9.6-1.4.5-1.6.2-.1-.2-.2-.5-.1-.9.1-.3 0-.7-.2-.9-.3-.4-1.1-.6-2.1.1h-.1c-1 .8-1.1 1.6-.8 2.1.2.2.4.4.8.4s.7.2.8.4c.3.4.2.8-.6 1.4-.2.1-.4.3-.7.4-1.3.7-1.7.7-2.9.9.2 1.1.2 1.6.9 2.9.1.3.3.5.4.7.5.7 1 .9 1.3.6.2-.1.3-.4.4-.8 0-.3.2-.6.4-.8.6-.3 1.4-.2 2.2.8v.1c.7 1 .6 1.8.1 2.2-.2.2-.6.2-.9.2-.4-.1-.7 0-.9.1-.3.2-.3.7.2 1.4.1.2.3.4.5.6 1 1 1.5 1.2 2.5 1.8l9.7-7.1c-.2-1.2-.2-1.7-.8-3-.2-.2-.3-.5-.5-.7zm-4.5.5c.3.4.7.7 1 .9.4.2.8.2 1.1.1.3-.1.5-.2.7-.5.2-.2.3-.5.3-.8 0-.3.2-.5.2-.5.1 0 .3.1.7.6.1.2.3.4.4.6.5 1 .6 1.5.8 2.2 0 .1 0 .2.1.3l-9.3 6.8c-.1 0-.2-.1-.2-.1-.7-.4-1.1-.6-1.9-1.4-.2-.2-.4-.4-.5-.6-.4-.5-.4-.8-.3-.8 0-.1.2-.1.6-.1.3.1.6 0 .9-.1.3-.1.5-.3.7-.6.2-.3.3-.7.2-1.1-.1-.4-.2-.8-.6-1.3v-.1c-.3-.3-.7-.6-1.1-.7-.4-.2-.8-.2-1.1-.1-.6.2-1 .7-1 1.3 0 .3-.2.5-.2.5-.1 0-.3-.1-.7-.6-.1-.2-.3-.4-.4-.6-.5-1-.6-1.5-.8-2.3V9h.1c.8-.2 1.4-.3 2.5-.9 1-.5 1.5-1 1.6-1.6.1-.3 0-.6-.2-.8-.2-.3-.6-.5-1.1-.5-.2 0-.4-.1-.5-.3-.1-.1-.1-.3-.1-.6.1-.2.2-.6.7-.9.5-.3.9-.5 1.3-.4.2 0 .3.1.4.2.1.2.1.4.1.6-.1.5 0 .9.2 1.2.2.2.4.4.7.4.5 0 1.2-.3 2-1.1.9-.9 1.2-1.4 1.6-2.1 0 0 0-.1.1-.1 0 0 .1 0 .1.1.7.4 1.1.6 1.9 1.4.2.2.4.4.5.6.4.5.4.8.3.8 0 .1-.2.1-.6.1-.6-.1-1.2.1-1.5.6-.2.3-.3.7-.2 1.1 0 .4.2.8.5 1.3z",fill:"#878787"}}),_c("path",{attrs:{d:"M11.7 18.1c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.7-1-2.9 1.1-.2 1.6-.2 2.9-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("ellipse",{attrs:{cx:"18.9",cy:"18.6",fill:"#fff",rx:"6.6",ry:"6.6",transform:"rotate(-45.001 18.912 18.561)"}}),_c("path",{attrs:{d:"M16.4 20.9l5.2.4-.4-5.2-1.5 1.5-2.5-2.5-1.8 1.8 2.5 2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{attrs:{d:"M64.433 16.857l-1.932.693-1.527.913-1.024 1.091-.477 1.122v1.138l.489 1.084L60.997 24l1.55.95 1.937.688 2.186.331h2.301l2.192-.368 1.944-.69 1.512-.914 1.029-1.096.49-1.117-.016-1.139-.491-1.122-1.027-1.06-1.558-.955-1.937-.689-2.186-.331h-2.3z"}}),_c("path",{attrs:{d:"M75.752 25.386c-.034.03-.057.066-.097.09L73.962 26.5c-.04.023-.083.036-.124.053-.015.006-.024.019-.04.024l-2.107.749c-.03.01-.06.008-.09.016-.021.005-.04.02-.062.023l-2.343.395a.936.936 0 0 1-.149.012h-2.442-.001a.842.842 0 0 1-.134-.01l-2.342-.356c-.025-.004-.043-.019-.067-.023-.033-.009-.066-.007-.1-.018l-2.106-.748c-.017-.007-.027-.02-.043-.026-.043-.018-.087-.03-.128-.055l-1.731-1.063c-.038-.023-.06-.059-.094-.087-.03-.024-.066-.036-.094-.065l-.294-.314v1.202l.492 1.123 1.027 1.093 1.548.914 1.95.694 2.185.367 2.302-.038 2.195-.333 1.932-.686 1.509-.947 1.035-1.103.492-1.124v-1.16l-.293.312c-.027.03-.063.041-.093.065zM43.926 2.813c.022-.002.04-.015.063-.015l1.358-.022-1.588-.838-1.612 1.145 1.715-.273c.022-.004.043.004.064.002z"}}),_c("path",{attrs:{d:"M77.758 19.894l.087.197c.035.08.046.17.055.258.004.03.02.061.02.093l.018 1.515v4.408c-.002.06-.024.12-.038.18-.012.056-.014.118-.037.17v.005l-.63 1.437a.9.9 0 0 1-.16.243c-.003.004-.004.01-.009.013l-1.22 1.3c-.026.028-.061.04-.091.064-.032.025-.052.059-.087.081l-1.694 1.063c-.041.026-.087.04-.13.058-.019.008-.03.022-.047.028l-2.106.749c-.034.011-.068.01-.101.018-.024.005-.042.02-.066.023l-2.344.355a.788.788 0 0 1-.111.009l-.01.001-2.44.04H66.6a.916.916 0 0 1-.148-.013l-2.342-.394c-.024-.003-.042-.019-.063-.024-.03-.007-.059-.005-.09-.015l-2.106-.75c-.016-.005-.025-.018-.042-.023-.037-.017-.077-.027-.114-.05l-1.733-1.022c-.04-.024-.065-.062-.1-.091-.032-.025-.07-.038-.098-.069l-1.22-1.3c-.004-.004-.005-.01-.009-.013a.886.886 0 0 1-.16-.242l-.63-1.437-.001-.006c-.023-.053-.024-.113-.037-.17-.013-.06-.037-.12-.037-.18V20.491c0-.067.024-.134.04-.202.012-.05.011-.104.03-.15l.612-1.438c.021-.051.06-.087.091-.131.028-.044.045-.093.082-.132l1.22-1.3c.03-.03.068-.045.101-.071.033-.027.055-.062.093-.085l1.713-1.023c.025-.016.055-.016.08-.029.029-.013.048-.035.077-.046l2.091-.749c.026-.01.054-.004.08-.011s.048-.025.075-.03l2.342-.393c.026-.005.05.004.075.002s.049-.015.075-.015h1.356L55.183 7.97l.1.229.001.005c.023.054.025.114.038.17.013.06.035.12.036.18l.001.006V14.468c0 .067-.025.135-.041.203-.012.05-.012.102-.03.148h-.001l-.61 1.438a.88.88 0 0 1-.16.245c-.004.004-.005.01-.009.013l-1.2 1.299c-.027.03-.065.042-.096.067-.035.029-.059.068-.1.093l-1.733 1.043c-.035.022-.074.032-.111.049-.016.006-.026.019-.042.025l-2.088.768c-.031.013-.065.01-.096.018-.025.007-.046.022-.072.027l-2.342.374a.832.832 0 0 1-.141.012h-2.423a.84.84 0 0 1-.142-.012l-2.343-.374c-.023-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.125-.748c-.017-.006-.028-.019-.044-.026-.045-.019-.09-.032-.132-.058l-1.713-1.063c-.033-.02-.052-.054-.08-.077-.03-.022-.064-.034-.091-.061l-1.22-1.26c-.006-.005-.007-.013-.013-.018a.888.888 0 0 1-.166-.247l-.63-1.438c-.034-.08-.044-.167-.056-.255-.003-.031-.02-.063-.02-.095l-.019-1.515.002-.009-.002-.009.02-2.896v-.007l-.02-1.47.002-.012c0-.057.021-.115.034-.172.011-.06.015-.124.038-.179.001-.003 0-.007.002-.01l.134-.307-12.603 8.952 1.71-.274c.026-.004.048.005.073.003.025-.002.045-.014.07-.014h2.402c.025 0 .047.012.07.014.025.002.048-.006.072-.003l2.344.375c.026.004.046.02.072.027.026.006.052 0 .077.01l2.126.729c.031.01.054.035.083.05.03.013.062.015.09.03l1.732 1.044c.038.022.06.057.093.085.033.027.074.043.103.075l1.202 1.299c.034.037.048.083.075.124.026.04.063.07.084.116l.65 1.437c.002.004 0 .008.002.011.024.055.028.117.04.177.013.057.034.115.035.172l.002.011v5.912c0 .06-.024.12-.038.18-.012.057-.014.118-.037.17v.006l-.63 1.438a.906.906 0 0 1-.16.241c-.003.005-.004.01-.009.015l-1.2 1.28c-.028.028-.064.04-.095.065-.033.027-.056.064-.094.087l-1.712 1.043c-.038.023-.08.035-.119.052-.015.007-.025.02-.04.025l-2.107.768c-.033.011-.065.01-.097.017-.024.006-.044.021-.07.026l-2.344.374a.84.84 0 0 1-.14.012H24.612h-.002a.821.821 0 0 1-.14-.012l-2.363-.374c-.022-.004-.04-.018-.06-.023-.032-.007-.064-.005-.094-.016l-2.087-.728c-.016-.005-.026-.019-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.024-.062-.06-.097-.088-.03-.025-.067-.037-.095-.067l-1.202-1.28c-.002-.003-.003-.008-.007-.011a.896.896 0 0 1-.158-.239l-.65-1.456c0-.003 0-.006-.002-.007-.024-.056-.028-.122-.04-.182-.012-.057-.034-.113-.034-.17l-.002-.008V22.403c0-.051.021-.1.03-.151.012-.068.016-.139.042-.202l.131-.309-9.362 6.651L49.24 50.924c.3-.107.624-.05.868.154l36.973-26.26-9.322-4.924zm-19.27 15.875V40.16c0 .054-.021.099-.03.15-.011.066-.013.132-.039.198l-.002.002-.608 1.454a.895.895 0 0 1-.168.254c-.005.006-.007.014-.012.019l-1.22 1.28c-.026.027-.06.038-.089.06-.03.024-.048.058-.083.08l-1.712 1.082c-.046.029-.095.045-.143.064-.017.006-.027.02-.044.025l-2.107.73c-.027.009-.056.006-.083.014-.02.004-.035.018-.055.02l-2.343.413a.843.843 0 0 1-.155.015H47.173h-.001a.843.843 0 0 1-.156-.015l-2.344-.413c-.018-.003-.033-.016-.052-.02-.028-.007-.056-.005-.083-.014l-2.125-.729c-.017-.005-.026-.019-.042-.024-.045-.02-.092-.032-.134-.058l-1.713-1.043c-.038-.023-.062-.06-.095-.09-.03-.022-.065-.035-.092-.063l-1.22-1.299c-.003-.002-.004-.007-.006-.01a.881.881 0 0 1-.159-.235l-.65-1.439c-.001-.003 0-.007-.002-.01-.024-.055-.027-.117-.04-.177-.013-.057-.035-.115-.036-.173l-.002-.01V34.29l.001-.005c0-.06.024-.12.037-.18.013-.057.014-.118.038-.17v-.006l.63-1.437c.02-.046.057-.077.084-.118.03-.046.045-.096.084-.137l1.2-1.28c.03-.03.068-.045.1-.07.031-.025.053-.06.089-.083l1.713-1.043c.028-.018.062-.019.092-.033.03-.015.05-.038.082-.049l2.107-.729c.024-.008.049-.003.073-.01.022-.006.041-.02.065-.025l2.342-.413c.027-.005.054.004.08.002.027-.003.05-.016.076-.016h2.422c.025 0 .047.012.071.014.024.002.046-.006.07-.003l2.362.374c.026.004.047.02.072.027.027.006.055 0 .082.01l2.106.73c.034.012.057.037.09.053.032.016.066.018.096.037l1.713 1.082c.032.02.051.053.079.077.03.023.065.035.092.063l1.22 1.28c.036.037.052.085.08.127.027.04.064.07.085.116l.65 1.398.003.014c.026.056.03.119.044.179.012.057.033.114.035.17l.002.016v1.516z"}}),_c("path",{attrs:{d:"M55.144 32.278l-1.532-.969-1.936-.67-2.207-.349h-2.277l-2.19.387-1.95.675-1.526.928-1.012 1.079-.492 1.122v1.133l.505 1.119 1.033 1.066 1.536.954 1.959.689 2.19.349h2.274l2.187-.386 1.953-.693 1.53-.915 1.024-1.089.475-1.122v-1.135l-.501-1.08zM50.831 77.08L87.893 50.7V26.449L50.831 52.772zM37.424 11.011l1.029 1.096 1.526.93 1.97.675 2.183.386 2.276-.037 2.197-.351 1.92-.67 1.544-.966 1.012-1.078.478-1.14V8.752l-.49-1.12-1.031-1.08-1.53-.931-1.95-.675-2.181-.385-2.296.037-2.198.351-1.94.67-1.523.947-1.014 1.098-.492 1.12.014 1.099z"}}),_c("path",{attrs:{d:"M56.32 39.188c-.036.029-.06.066-.1.09l-1.713 1.025c-.038.022-.08.034-.12.051-.015.006-.024.02-.04.024l-2.108.748c-.028.01-.056.008-.086.016-.02.005-.038.019-.058.022l-2.343.413a.843.843 0 0 1-.156.015h-2.422a.829.829 0 0 1-.14-.012l-2.345-.373c-.022-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.126-.748c-.017-.006-.028-.019-.044-.026-.044-.019-.09-.032-.131-.058l-1.713-1.063c-.034-.021-.054-.055-.084-.08-.028-.021-.062-.033-.088-.06l-.324-.333v1.207l.509 1.126 1.032 1.099 1.526.93 1.971.675 2.19.386h2.27l2.19-.386 1.943-.672 1.53-.968 1.031-1.079.475-1.136v-1.15l-.275.293c-.028.027-.065.04-.095.064zM37.42 15.433l1.032 1.066 1.534.952 1.959.69 2.19.35h2.28l2.184-.35 1.926-.708 1.55-.933 1.007-1.09.478-1.125v-1.166l-.255.272c-.026.028-.062.04-.092.064-.031.025-.053.06-.088.083l-1.732 1.083c-.044.027-.091.04-.136.06-.016.006-.027.02-.044.026l-2.088.729c-.03.01-.062.009-.094.016-.02.006-.039.019-.061.023l-2.342.374a.88.88 0 0 1-.118.01l-.009.002-2.422.038h-.015a.826.826 0 0 1-.156-.014l-2.342-.413c-.02-.004-.034-.016-.053-.02-.028-.007-.055-.005-.082-.014l-2.126-.73c-.016-.005-.026-.018-.042-.024-.045-.018-.091-.031-.134-.057l-1.712-1.043c-.04-.024-.063-.06-.096-.09-.03-.023-.065-.035-.092-.063l-.313-.333.015 1.216.49 1.12zM19.002 25.907l1.545.932 1.929.672 2.216.389h2.265l2.19-.387 1.943-.671 1.528-.966 1.017-1.084.492-1.123v-1.093l-.51-1.128-1.014-1.098-1.54-.927-1.966-.673-2.192-.351h-2.262l-2.192.35-1.935.67-1.531.968-1.032 1.082-.473 1.116v1.118l.507 1.124zM5.707 54.46L49.03 77.333V52.85L5.707 29.997z"}}),_c("path",{attrs:{d:"M19.002 30.337l1.545.932 1.925.671 2.21.35h2.282l2.186-.349 1.94-.707 1.534-.934 1.012-1.078.492-1.123v-1.2l-.274.293c-.027.027-.06.038-.09.062-.031.026-.052.06-.087.083l-1.713 1.082c-.045.03-.094.045-.143.064-.016.006-.027.02-.043.025l-2.107.729c-.028.01-.056.007-.083.014-.02.004-.035.018-.054.02l-2.344.415a.836.836 0 0 1-.156.014h-2.422a.889.889 0 0 1-.155-.014l-2.362-.414c-.022-.003-.038-.018-.059-.022-.027-.007-.055-.005-.082-.014l-2.087-.729c-.016-.005-.026-.018-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.023-.062-.06-.097-.088-.03-.024-.067-.037-.095-.067l-.295-.314v1.201l.508 1.141 1.014 1.08z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{
d:"M11.6 8.3l3.3 4 3.4-4h-2.1V4.7h-2.5v3.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M26 14.4c-.3-1.2-1.7-.4-1.7-.5l-4.2 1c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-4.2c.5-.4.5-1 .2-1.5-.4-.5-1-.5-1.5-.2l-6.6 4.2c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-5.8c.5-.4.5-1.4.2-1.9-.4-.5-1-.5-1.5-.2L16.9 11c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l3.9-5.5c.5-.4.8-1 .5-1.5-.4-.5-1.3-.5-1.8-.2L15 9l-2.7 2.1c-.1.1-.3.1-.3 0s-.1-.1 0-.2l.6-4.5c.1-.6-.3-1.1-.9-1.2-.6-.1-1.1.3-1.2.9 0 0-1.2 5.7-1.3 6.7-.1.9.4 1.7.5 1.9l4.6 5.9c.4.5 1.3.6 1.9.1l3.5-2.7.6-.5 5.2-1.9c.4-.4.6-.7.5-1.2z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.4 26.8H52v28.7H11.4zm13 28.6V41.2m15.7-.2V26.8m5.3 14.1H52m-40.6-1.5H18",fill:"none",stroke:"#878787","stroke-miterlimit":"10","stroke-width":"3.252"}}),_c("path",{attrs:{d:"M43.3 13.6c0-6.8-5.5-12.3-12.3-12.3-6.8 0-12.3 5.4-12.3 12.2 0 1.4.3 3 .7 4L31 50.4l10.7-30.6c1-1.9 1.6-4 1.6-6.2z",fill:"#39b54a"}}),_c("path",{attrs:{d:"M36.4 9.6h-3.1V6.5c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2v-3.1h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c0-.7-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 52.6H9V20.7h43.9v31.9zm-40.7-3.2h37.4V24H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 36.8h3.3V51H22zm15.7-14.4H41v14.2h-3.3zm6.9 12.5h6.6v3.3h-6.6zm-34-1.5h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"30.2",cy:"20.6",fill:"#39b54a",r:"12.9"}}),_c("path",{attrs:{d:"M34.9 18.1h-3.1V15c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2V22h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c.1-.6-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 54.3H9V22.4h43.9v31.9zm-40.7-3.2h37.4V25.7H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 38.5h3.3v14.2H22zM37.7 24H41v14.2h-3.3zM10.6 35.1h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"31.8",cy:"19.5",fill:"#fff",r:"13.5"}}),_c("path",{attrs:{d:"M24.1 19.3l6.8 8.2 6.9-8.2h-4.3v-7.2h-5.2v7.2z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.2 13.2L14.8 4.6V10H7.1c-1.4 0-2.5 1.3-2.5 2.9v.5c0 1.6 1.1 2.9 2.5 2.9h7.7v5.3l10.4-8.4z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{d:"M11.6 8.7l3.3-4 3.4 4h-2.1v3.6h-2.5V8.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M14.3 15.2c.8.4 1.6.6 2.6.4-.1.1-.1.2-.2.2L14 18.5c-1.2 1.2-2.7 1.8-4.4 1.3-3.1-.9-3.9-4.6-1.7-7 .9-1 1.9-1.9 2.8-2.8.4-.4.8-.8 1.2-1.1 1.6-1.2 3.9-1.2 5.3 0 .6.5.7 1.2.3 1.7-.4.5-1.1.5-1.7 0-.9-.7-2-.6-2.9.3-1.2 1.1-2.3 2.3-3.4 3.4-.2.2-.3.3-.4.5-.3.5-.4 1-.3 1.5.2 1.1 1.4 1.7 2.4 1.3.4-.2.8-.4 1.2-.7.7-.5 1.2-1.1 1.9-1.7-.1 0 0 0 0 0z",fill:"#aaa"}}),_c("path",{attrs:{d:"M16.7 7.2c-1-.2-1.8-.3-2.6-.5l.2-.2 2.8-2.8c1.7-1.6 4.1-1.7 5.7-.3 1.8 1.5 1.9 4.2.3 6-1.2 1.4-2.6 2.6-3.9 3.9-1.6 1.5-4 1.5-5.6.2-.2-.2-.4-.5-.5-.8-.1-.5.1-.9.5-1.1.4-.2.8-.2 1.2.1 1.3.9 2.2.8 3.3-.3l3.2-3.2c.4-.5.7-1.1.7-1.8-.1-1.4-1.6-2.2-2.9-1.5-.3.2-.5.4-.8.6-.5.6-1.1 1.2-1.6 1.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4 3v16h22V3H4zm8 14v-6h-2v6H6v-6h2V9H6V5h12v6h2V5h4v5h-2v2h2v5H12z",fill:"#b2b2b2"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M13.1 18.4H1.5l9.7-14.8h11.6z",fill:"#aaa"}}),_c("path",{attrs:{d:"M18.8 18.4H7.2l9.7-14.8h11.6z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 21.5c-3.5 0-6.3-3.1-6.3-7.1 0-4 5.6-10.7 5.9-11L18 3l.4.5c.2.3 5.9 7 5.9 11 0 3.9-2.8 7-6.3 7zm0-16.9c-1.3 1.6-5.3 6.8-5.3 9.9 0 3.5 2.3 6.1 5.3 6.1s5.3-2.6 5.3-6.1c0-3.1-4-8.3-5.3-9.9z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.6 6.9l-4 4.9-7.9-9.3-3.5 2.7 8.6 10.1-5.3 6.5h23.8l3.2-6.6-14.9-8.3zm11 14h-21l3.9-4.7.6.8 6 3.6-2.4-6.3-1.3-1.5L19 8.4l13.3 7.5-2.7 5z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M16.3 7.9l-4.7-5.4L8 5.1l2.4 2.8H8v13h21v-13H16.3zM9 8.9h2.3l6.6 7.7 5.6 3.3H9v-11zm19 11h-4.2l-2.3-6-4.3-5H28v11z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 512 512"}},[_c("g",{attrs:{transform:"matrix(.8 0 0 .8 1.6 0)"}},[_c("title",[_v("eraser")]),_c("path",{attrs:{d:"M509.42 69.18a12.3 12.3 0 0 0-9.77-4.81H254.73a12.18 12.18 0 0 0-6.16 1.72l-.42-.37L41.63 284l-2.19 2.46.26.31a10.6 10.6 0 0 0-1 2.51L.41 432.16a12.31 12.31 0 0 0 11.91 15.46h245c3.92 0 7.42-1.67 11-5.28l201.45-213.4a20.06 20.06 0 0 0 3.55-6.22l36.93-137.87 1.36-5a12.37 12.37 0 0 0-2.19-10.67zM279.55 304.74l-31.71 118.33H28.31L60 304.74h219.55zM473.06 88.93L292.19 280.14h-213L260 88.93h213z"}})])])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 2.7l2.2 3.1h-4.4zM7.3 12l3.2-2.2v4.4zM18 21.9l-2.2-3.2h4.4zM28.7 12l-3.2 2.2V9.8z",fill:"#fff"}}),_c("path",{attrs:{d:"M9.5 11.5h17.1v1H9.5z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.5 3.7h1v17.1h-1z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4.7 13.2L15 21.7v-5.3h7.7c1.4 0 2.5-1.3 2.5-2.9V13c0-1.6-1.1-2.9-2.5-2.9H15V4.6L4.7 13.2z",fill:"#bf0049"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M20.3 2.4c-4 0-7.2 3.2-7.2 7.1 0 1.6.5 3.1 1.5 4.3l-6.1 6s-.1 2 1.8 1.8c.2-.2 6.2-6.1 6.2-6.1 1.1.7 2.5 1.1 3.9 1.1 4 0 7.2-3.2 7.2-7.1 0-3.9-3.3-7.1-7.3-7.1zm0 13.2c-3.4 0-6.2-2.7-6.2-6s2.8-6 6.2-6c3.4 0 6.2 2.7 6.2 6 0 3.2-2.8 6-6.2 6z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.1 8.4h1.8V6.7c0-.4.3-.7.7-.7h.9c.4 0 .7.3.7.7v1.8H23c.4 0 .7.3.7.7v.8c0 .4-.3.7-.7.7h-1.8v1.8c0 .4-.3.7-.7.7h-.9c-.4 0-.7-.3-.7-.7v-1.8h-1.8c-.4 0-.7-.3-.7-.7v-.8c0-.4.4-.8.7-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M21.4 13.8c.9-1.2 1.4-2.6 1.4-4.2 0-3.9-3.2-7-7.1-7-3.9 0-7.1 3.1-7.1 7s3.2 7 7.1 7c1.4 0 2.7-.4 3.9-1.1 0 0 5.9 5.7 6.1 6 1.9.2 1.8-1.8 1.8-1.8l-6.1-5.9zM9.7 9.6c0-3.3 2.7-5.9 6.1-5.9 3.3 0 6.1 2.7 6.1 5.9 0 3.3-2.7 5.9-6.1 5.9-3.4 0-6.1-2.7-6.1-5.9z",fill:"#fff"}}),_c("path",{attrs:{d:"M18.9 8.5h-6.4c-.4 0-.8.4-.8.8v1c0 .4.4.8.8.8h6.4c.4 0 .8-.4.8-.8v-1c0-.4-.3-.8-.8-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"}},[_c("path",{attrs:{d:"M201.896 183.169l-53.23-53.23a71.682 71.682 0 0 1-18.728 18.727l53.23 53.23a9 9 0 0 0 12.729 0l6-6a9 9 0 0 0 0-12.727z"}}),_c("path",{attrs:{d:"M153.668 89.768c0-35.234-28.666-63.9-63.901-63.9-35.234 0-63.9 28.666-63.9 63.9 0 35.234 28.666 63.9 63.9 63.9 35.236 0 63.9-28.666 63.9-63.9zm-63.9 48.6c-26.84 0-48.6-21.76-48.6-48.6s21.76-48.6 48.6-48.6c26.841 0 48.6 21.76 48.6 48.6s-21.759 48.6-48.6 48.6z"}}),_c("path",{attrs:{d:"M63 117h54V63H63v54zm10.8-43.2h32.4v32.4H73.8V73.8z"}})])}}},,function(t,e){t.exports={XMLHttpRequest:XMLHttpRequest}}]);
//# sourceMappingURL=app.63ff0ccddfae2f714e1e.js.map