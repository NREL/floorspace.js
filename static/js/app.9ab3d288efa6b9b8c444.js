webpackJsonp([2,0],[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i(316);var r=i(79),o=n(r),a=i(284),s=n(a),d=i(304),l=n(d),c=i(640),u=n(c),f=i(121),p=n(f),m=i(247),h=n(m);o.default.component("pretty-select",p.default),o.default.component("generic-input",h.default),window.eventBus=new o.default,window.application=new o.default({store:s.default,el:"#app",template:"<App/>",components:{App:u.default}}),l.default.init(s.default)},,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.map(function(e){return[e.x,e.y]});return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push(t[0]),W.polygon([t])}function a(e,t){var i=e[0],n=$.default.findIndex(t,$.default.pick(i,["x","y"]));if(n===-1)return!1;var r=$.default.map([].concat((0,z.default)(t.slice(n)),(0,z.default)(t.slice(0,n))),function(e){return $.default.pick(e,["x","y"])});return $.default.isEqualWith(e,r,function(e,t){return $.default.isMatch(e,t)})}function s(e){return e.length<=3?e:$.default.isEqual(e[0],e[e.length-1])?e.slice(0,-1):e}function d(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;var i=s(e),n=s(t);return a(i,n)||a(i,[].concat((0,z.default)(n)).reverse())}function l(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function c(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"expand",r=e[1]-e[0],o=t[1]-t[0],a=o*i,s=r/i,d=a-r,l=s-o;return d>0==("expand"===n)?{xExtent:[e[0]-d/2,e[1]+d/2],yExtent:t}:{xExtent:e,yExtent:[t[0]-l/2,t[1]+l/2]}}function u(e){var t=e.start,i=e.end,n=i.x-t.x,r=i.y-t.y;return 0===n?.5*Math.PI:Math.atan(r/n)}function f(e,t){var i=u(e)-u(t),n=Math.min(Math.abs(i),Math.PI-i);return n<.05*Math.PI}function p(e){var t=e.dx,i=e.dy;if(0===t&&0===i)return{dx:0,dy:0};var n=Math.sqrt(t*t+i*i);return{dx:t/n,dy:i/n}}function m(e,t){var i=void 0,n=void 0;return e.x!==t.x?(n=1,i=(e.y-t.y)/(e.x-t.x)):e.y!==t.y?(i=1,n=(e.x-t.x)/(e.y-t.y)):i=n=1,p({dx:i,dy:n})}function h(e,t){var i=t.x-e.x,n=t.y-e.y;return p({dx:i,dy:n})}function g(e,t){var i=t.p1,n=i.x,r=i.y,o=t.p2,a=o.x,s=o.y,d=e.x-n,l=e.y-r,c=a-n,u=s-r,f=d*c+l*u,p=c*c+u*u||2,m=f/p;return m<=0?t.p1:m>1?t.p2:{x:n+m*c,y:r+m*u}}function y(e,t){var i=t.start,n=t.end,r=g(e,{p1:i,p2:n});return{dist:l(e,r),proj:r}}function v(e,t,i){var n=[e.x,e.y],r=n[0],o=n[1],a=[t.x,t.y],s=a[0],d=a[1],l=i.x,c=i.y;return Math.abs((d-o)*(l-s)-(c-d)*(s-r))<1e-5}function _(e){for(var t=e.start,i=e.end,n=e.spacing,r=e.width,o=l(t,i),a=[],s=h(t,i),d=r/2;d+r/2<o;){var c=s.dx*d,u=s.dy*d;a.push({x:t.x+c,y:t.y+u,distFromStart:d}),d+=r+(n||1)}if(0===a.length)return[];var f=(l(a[a.length-1],i)-r/2)/2,p=l(t,i),m=s.dx*f,g=s.dy*f;return a.map(function(e){return{x:e.x+m,y:e.y+g,alpha:(e.distFromStart+f)/p}})}function w(e){for(var t=1;t<e.length-1;t++){var i=e[t-1],n=e[t],r=e[t+1];if(v(i,n,r)){var o=$.default.reject([(i.x-n.x)/(r.x-n.x),(i.y-n.y)/(r.y-n.y)],isNaN)[0];if(!(o>1||o<0))return w([].concat((0,z.default)(e.slice(0,t)),(0,z.default)(e.slice(t+1))))}}return e}function x(e,t){if(!t||K!==e.edges||X!==e.vertices){var i=e.vertices.reduce(function(e,t){return e[t.id]=t,e},{});Y={},Z=e.edges.map(function(e){var t=(0,D.default)({},e,{v1:i[e.v1],v2:i[e.v2]});return Y[e.id]=t,t}),t&&(K=e.edges,X=e.vertices,J=i)}return[Z,Y,J]}function b(e){return 2===e.length&&$.default.isNumber(e[0])&&$.default.isNumber(e[1])}function S(e){return e.length>=1&&$.default.every(e,b)}function C(e){return e.length>=1&&$.default.every(e,S)}function M(e,t){var i=function(e){var t=e.x,i=e.y;return[t,i]};return q.inRing(i(e),t.map(i))}function O(e){var t=$.default.cloneDeep(e),i={},n=(0,R.default)(e.vertices).map(function(e){return e.id});return n.forEach(function(e){var n=t.vertices.find(function(t){return t.id===e}),r=U.default.generate();i[e]=r,n.id=r;var o=t.vertices.findIndex(function(e){return e.id===r});t.vertices[o]=n}),t.edges.forEach(function(e){var t=U.default.generate();i[e.id]=t,e.id=t,e.v1=i[e.v1],e.v2=i[e.v2]}),t.faces.forEach(function(e){e.edgeRefs.forEach(function(e){e.edge_id=i[e.edge_id]});var t=U.default.generate();i[e.id]=t,e.id=t}),{clonedGeometry:t,idMap:i}}Object.defineProperty(t,"__esModule",{value:!0});var T=i(322),R=r(T),I=i(6),D=r(I),P=i(53),j=r(P),E=i(30),z=r(E);t.ringEquals=d,t.distanceBetweenPoints=l,t.fitToAspectRatio=c,t.edgeDirection=u,t.haveSimilarAngles=f,t.unitPerpVector=m,t.unitVector=h,t.projectionOfPointToLine=g,t.pointDistanceToSegment=y,t.ptsAreCollinear=v,t.repeatingWindowCenters=_,t.cleanInvalidPoly=w,t.vertInRing=M,t.replaceIdsForCloning=O;var k=i(3),$=r(k),F=i(179),W=n(F),G=i(254),N=r(G),L=i(629),V=i(252),A=r(V),B=i(126),H=i(51),U=r(H),q={setOperation:function(e,t,i){var n=o(t).geometry.coordinates,r=o(i).geometry.coordinates,a="union"===e?L.union:"intersection"===e?L.intersection:"difference"===e?L.difference:null;if(null===a)throw new Error('invalid operation "'+e+'". expected union, intersection, or difference');var d=a(n,r);return null===d||0===d.length?[]:d.length>1?{error:"no split faces"}:d[0].length>1?{error:"no holes"}:s(d[0][0].map(function(e){var t=(0,j.default)(e,2),i=t[0],n=t[1];return{x:i,y:n}}))},intersection:function(e,t){return this.setOperation("intersection",e,t)},union:function(e,t){return this.setOperation("union",e,t)},difference:function(e,t){return this.setOperation("difference",e,t)},areaOfSelection:function(e){return e.length<3?0:(0,N.default)(e)},splittingVerticesForEdgeId:function(e,t,i,n){var r=this,o=x(t,!0)[2];n||(n=t.vertices);var a=o[e.v1];a||(a=t.vertices.find(function(t){return t.id===e.v1}));var s=o[e.v2];s||(s=t.vertices.find(function(t){return t.id===e.v2}));var d=(0,D.default)({},e,{v1:a,v2:s});return d.v1&&d.v2?n.filter(function(e){var t=d.v1.id===e.id||d.v2.id===e.id,n=d.v1.x===e.x&&d.v1.y===e.y,o=d.v2.x===e.x&&d.v2.y===e.y,a=t||n||o;if(a)return!1;var s=r.projectionOfPointToLine(e,{p1:d.v1,p2:d.v2}),l=r.distanceBetweenPoints(e,s),c=l<=i/20;return c}):[]},projectionOfPointToLine:g,distanceBetweenPoints:l,intersectionOfLines:function(e,t,i,n){var r=1e-7,o=function(e,t,i){return e-r<=t&&t<=i+r},a=((e.x*t.y-e.y*t.x)*(i.x-n.x)-(e.x-t.x)*(i.x*n.y-i.y*n.x))/((e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x)),s=((e.x*t.y-e.y*t.x)*(i.y-n.y)-(e.y-t.y)*(i.x*n.y-i.y*n.x))/((e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x));if(isNaN(a)||isNaN(s)||this.distanceBetweenPoints({x:a,y:s},e)<r||this.distanceBetweenPoints({x:a,y:s},t)<r||this.distanceBetweenPoints({x:a,y:s},i)<r||this.distanceBetweenPoints({x:a,y:s},n)<r)return!1;if(e.x>=t.x){if(!o(t.x,a,e.x))return!1}else if(!o(e.x,a,t.x))return!1;if(e.y>=t.y){if(!o(t.y,s,e.y))return!1}else if(!o(e.y,s,t.y))return!1;if(i.x>=n.x){if(!o(n.x,a,i.x))return!1}else if(!o(i.x,a,n.x))return!1;if(i.y>=n.y){if(!o(n.y,s,i.y))return!1}else if(!o(i.y,s,n.y))return!1;return{x:a,y:s}},vertexForId:function(e,t){return t.vertices.find(function(t){return t.id===e})},vertexForCoordinates:function(e,t){var i=this;return t.vertices.find(function(t){return i.distanceBetweenPoints(t,e)<1e-5})},verticesForFaceId:function(e,t){var i=this;return t.faces.find(function(t){return t.id===e}).edgeRefs.map(function(e){var n=i.edgeForId(e.edge_id,t),r=e.reverse?n.v2:n.v1;return i.vertexForId(r,t)})},edgeForId:function(e,t){return t.edges.find(function(t){return t.id===e})},edgesForVertexId:function(e,t){return t.edges.filter(function(t){return t.v1===e||t.v2===e})},edgesForFaceId:function(e,t){var i=this;return t.faces.find(function(t){return t.id===e}).edgeRefs.map(function(e){return i.edgeForId(e.edge_id,t)})},faceForId:function(e,t){return t.faces.find(function(t){return t.id===e})},facesForVertexId:function(e,t){var i=this;return t.faces.filter(function(n){return n.edgeRefs.find(function(n){var r=i.edgeForId(n.edge_id,t);return r.v1===e||r.v2===e})})},facesForEdgeId:function(e,t){return t.faces.filter(function(t){return t.edgeRefs.find(function(t){return t.edge_id===e})})},pointInFace:function(e,t){var i=o(t),n=W.point([e.x,e.y]);return(0,A.default)(n,i)},ptsAreCollinear:v,syntheticRectangleSnaps:function(e,t,i){var n=(t.x+i.x)/2,r=(t.y+i.y)/2;return[].concat((0,z.default)(e.map(function(e){var t=e.x,i=e.y;return{y:i,x:t+2*(n-t),synthetic:!0,originalPt:{x:t,y:i}}})),(0,z.default)(e.map(function(e){var t=e.x,i=e.y;return{x:t,y:i+2*(r-i),synthetic:!0,originalPt:{x:t,y:i}}})))},edgeDirection:u,haveSimilarAngles:f,pointDistanceToSegment:y,exceptFace:function(e,t){return t?(0,D.default)({},e,{faces:$.default.reject(e.faces,{id:t})}):e},denormalize:function(e){var t=x(e),i=(0,j.default)(t,2),n=i[0],r=i[1],o=e.faces.map(function(e){return{id:e.id,edges:e.edgeRefs.map(function(e){var t=e.edge_id,i=e.reverse;return(0,D.default)({},r[t],{edge_id:t,reverse:i})}),get vertices(){return(0,B.dropConsecutiveDups)($.default.flatMap(this.edges,function(e){return e.reverse?[e.v2,e.v1]:[e.v1,e.v2]}),function(e){return e.id})}}});return(0,D.default)({},e,{edges:n,faces:o})},normalize:function(e){var t=$.default.uniqBy([].concat((0,z.default)(e.edges),(0,z.default)($.default.flatMap(e.faces,function(e){return e.edges}))),"id"),i=$.default.uniqBy([].concat((0,z.default)(e.vertices),(0,z.default)($.default.flatMap(t,function(e){return[e.v1,e.v2]}))),"id");return{id:e.id,vertices:i.map(function(e){return $.default.pick(e,["id","x","y"])}),edges:t.map(function(e){return{id:e.id,v1:e.v1.id,v2:e.v2.id}}),faces:e.faces.map(function(e){return{id:e.id,edgeRefs:e.edges.map(function(e){return{edge_id:e.id,reverse:e.reverse}})}})}}},K=null,X=null,Y=null,Z=null,J=null;q.inside=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!b(e))throw new Error("point does not have correct coords: "+e);if(!C(t))throw new Error("polygon does not have correct coords: "+t);var n=q.bboxOfRing(t[0]);if(n&&q.inBBox(e,n)===!1)return!1;for(var r=!1,o=0;o<t.length&&!r;o++)if(q.inRing(e,t[0],i)){for(var a=!1,s=1;s<t.length&&!a;)q.inRing(e,t[s],!i)&&(a=!0),s++;a||(r=!0)}return r},q.bboxOfRing=function(e){return[$.default.min($.default.map(e,0)),$.default.min($.default.map(e,1)),$.default.max($.default.map(e,0)),$.default.max($.default.map(e,1))]},q.inRing=function(e,t,i){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,o=t.length-1;r<t.length;o=r++){var a=t[r][0],s=t[r][1],d=t[o][0],l=t[o][1],c=e[1]*(a-d)+s*(d-e[0])+l*(e[0]-a)===0&&(a-e[0])*(d-e[0])<=0&&(s-e[1])*(l-e[1])<=0;if(c)return!i;var u=s>e[1]!=l>e[1]&&e[0]<(d-a)*(e[1]-s)/(l-s)+a;u&&(n=!n)}return n},t.default=q},,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.assignableProperties=["building_units","thermal_zones","space_types","construction_sets","pitched_roofs","building_types"],n=t.componentTypes=["window_definitions","daylighting_control_definitions","door_definitions"],r=(t.libraryTypes=[].concat(i,n),t.textures=["circles-2","circles-5","circles-8","diagonal-stripe-1","diagonal-stripe-4","diagonal-stripe-6","dots-5","dots-8","vertical-line","crosshatch"],{modes:{stories:"Story",images:"Image",spaces:"Space",shading:"Shading",building_units:"Building Unit",building_types:"Building Type",thermal_zones:"Thermal Zone",space_types:"Space Type",pitched_roofs:"Pitched Roof",construction_sets:"Construction Set",window_definitions:"Window Definitions",daylighting_control_definitions:"Daylighting Control Definitions"},componentTypes:n,assignableProperties:i,palette:{shading:"#E8E3E5",neutral:"#bbc3c7",colors:["#aa4499","#88ccee","#332288","#117733","#999933","#ddcc77","#cc6677","#882255","#44aa99","#6699cc","#661100","#aa4466"]}});t.default=r},,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(70),o=n(r),a=i(3),s=n(a),d=i(95),l=n(d),c=i(51),u=n(c),f={map:l.default,displayNameForKey:function(e,t){return this.map[e].keymap[t]?this.map[e].keymap[t].private?null:this.map[e].keymap[t].displayName:t},valueForKey:function(e,t,i,n){return this.map[i].keymap[n]&&this.map[i].keymap[n].get?this.map[i].keymap[n].get(e,t):e[n]},setValueForKey:function(e,t,i,n,r){var a={success:!0};if(this.map[i].keymap[n]&&this.map[i].keymap[n].converter&&(r=this.map[i].keymap[n].converter(r,this.map[i].keymap[n])),this.map[i].keymap[n]&&this.map[i].keymap[n].validator){var s=this.map[i].keymap[n].validator(e,t,r,i);if(a.success=s.success,!s.success)return a.error=s.error,a}return"stories"===i?t.dispatch("models/updateStoryWithData",(0,o.default)({story:e},n,r)):"spaces"===i?t.dispatch("models/updateSpaceWithData",(0,o.default)({space:e},n,r)):"shading"===i?t.dispatch("models/updateShadingWithData",(0,o.default)({shading:e},n,r)):"images"===i?t.dispatch("models/updateImageWithData",(0,o.default)({image:e},n,r)):"window_definitions"===i?t.dispatch("models/updateWindowDefinitionWithData",(0,o.default)({object:e},n,r)):t.dispatch("models/updateObjectWithData",(0,o.default)({object:e},n,r)),a},inputTypeForKey:function(e,t){return this.map[e].keymap[t]&&!this.map[e].keymap[t].readonly?this.map[e].keymap[t].input_type:null},selectOptionsForKey:function(e,t,i,n){return this.map[i].keymap[n]&&!this.map[i].keymap[n].readonly&&"select"===this.map[i].keymap[n].input_type?this.map[i].keymap[n].select_data(e,t):[]},libraryObjectWithId:function(e,t){var i;for(var n in e.library)e.library.hasOwnProperty(n)&&!i&&e.library[n].find(function(e){return e.id===t})&&(i=e.library[n].find(function(e){return e.id===t}),i.type=n);if(!i&&e.stories.find(function(e){return e.id===t})&&(i=e.stories.find(function(e){return e.id===t}),i.type="story"),!i)for(var r=0;r<e.stories.length;r++){var o=e.stories[r];!i&&o.spaces.find(function(e){return e.id===t})&&(i=o.spaces.find(function(e){return e.id===t}),i.type="space"),!i&&o.shading.find(function(e){return e.id===t})&&(i=o.shading.find(function(e){return e.id===t}),i.type="shading"),!i&&o.images.find(function(e){return e.id===t})&&(i=o.images.find(function(e){return e.id===t}),i.type="image")}return i},modelForFace:function(e,t){for(var i=0;i<e.stories.length;i++){var n=e.stories[i],r=n.shading.find(function(e){return e.face_id===t}),o=n.spaces.find(function(e){return e.face_id===t});if(r)return r.type="shading",r;if(o)return o.type="space",o}},generateName:function(e,t,i){var n=this.modelsForType(e,t),r=l.default[t].displayName+" ";if(i){var o=e.stories.findIndex(function(e){return e.id===i.id})+1;r=r.concat(o+" - ")}for(var a="",s=1;!a;)a=r+s,n.find(function(e){return e.name===a})&&(a=""),s+=1;return a},modelsForType:function(e,t){switch(t){case"stories":return e.stories;case"shading":case"spaces":case"images":return e.stories.reduce(function(e,i){return e.concat(i[t])},[]);default:return e.library[t]}},spaceTypesForBuilding:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={};return"SecondarySchool"==e?(n.Auditorium="Auditorium",n.Cafeteria="Cafeteria",n.Classroom="Classroom",n["Computer Room"]="ComputerRoom",n.Corridor="Corridor",n.Gym="Gym",n.Kitchen="Kitchen",n.Library="Library",n.Lobby="Lobby",n.Mechanical="Mechanical",n.Office="Office",n.Restroom="Restroom",["DOE Ref Pre-1980","DOE Ref 1980-2004","ComStock DOE Ref Pre-1980","ComStock DOE Ref 1980-2004"].indexOf(t)!==-1&&(n.Corridor="Corridor",n["Gym - audience"]="Gym - audience")):"PrimarySchool"==e?(n.Cafeteria="Cafeteria",n.Classroom="Classroom",n["Computer Room"]="ComputerRoom",n.Corridor="Corridor",n.Gym="Gym",n.Kitchen="Kitchen",n.Library="Library",n.Lobby="Lobby",n.Mechanical="Mechanical",n.Office="Office",n.Restroom="Restroom",["DOE Ref Pre-1980","DOE Ref 1980-2004","ComStock DOE Ref Pre-1980","ComStock DOE Ref 1980-2004"].indexOf(t)===-1&&(n["Computer Room"]="ComputerRoom")):"SmallOffice"==e?i?n["Whole Building - Sm Office"]="WholeBuilding - Sm Office":(n["Small Office - Breakroom"]="SmallOffice - Breakroom",n["Small Office - ClosedOffice"]="SmallOffice - ClosedOffice",n["Small Office - Conference"]="SmallOffice - Conference",n["Small Office - Corridor"]="SmallOffice - Corridor",n["Small Office - Elec/Mech Room"]="SmallOffice - Elec/MechRoom",n["Small Office - Lobby"]="SmallOffice - Lobby",n["Small Office - OpenOffice"]="SmallOffice - OpenOffice",n["Small Office - Restroom"]="SmallOffice - Restroom",n["Small Office - Stair"]="SmallOffice - Stair",n["Small Office - Storage"]="SmallOffice - Storage",n["Small Office - Classroom"]="SmallOffice - Classroom",n["Small Office - Dining"]="SmallOffice - Dining",n["Whole Building - Sm Office"]="WholeBuilding - Sm Office"):"MediumOffice"==e?i?n["Whole Building - Md Office"]="WholeBuilding - Md Office":(n["Medium Office - Breakroom"]="MediumOffice - Breakroom",n["Medium Office - ClosedOffice"]="MediumOffice - ClosedOffice",n["Medium Office - Conference"]="MediumOffice - Conference",n["Medium Office - Corridor"]="MediumOffice - Corridor",n["Medium Office - Elec/Mech Room"]="MediumOffice - Elec/MechRoom",n["Medium Office - Lobby"]="MediumOffice - Lobby",n["Medium Office - OpenOffice"]="MediumOffice - OpenOffice",n["Medium Office - Restroom"]="MediumOffice - Restroom",n["Medium Office - Stair"]="MediumOffice - Stair",n["Medium Office - Storage"]="MediumOffice - Storage",n["Medium Office - Classroom"]="MediumOffice - Classroom",n["Medium Office - Dining"]="MediumOffice - Dining",n["Whole Building - Md Office"]="WholeBuilding - Md Office"):"LargeOffice"==e?(i&&(n["Whole Building - Lg Office"]="WholeBuilding - Lg Office"),n["Break Room"]="BreakRoom",n["Closed Office"]="ClosedOffice",n.Conference="Conference",n.Corridor="Corridor",n["Elec/Mech Room"]="Elec/MechRoom",n["IT Room"]="IT_Room",n.Lobby="Lobby",n["Open Office"]="OpenOffice",n["Print Room"]="PrintRoom",n.Restroom="Restroom",n.Stair="Stair",n.Storage="Storage",n.Vending="Vending",n["Whole Building - Lg Office"]="WholeBuilding - Lg Office",["DOE Ref Pre-1980","DOE Ref 1980-2004","ComStock DOE Ref Pre-1980","ComStock DOE Ref 1980-2004"].indexOf(t)===-1&&(i?(n["Office - Large Data Center"]="OfficeLarge Data Center",n["Office - Large Main Data Center"]="OfficeLarge Main Data Center"):(n["Office - Large Data Center"]="OfficeLarge Data Center",n["Office - Large Main Data Center"]="OfficeLarge Main Data Center"))):"SmallHotel"==e?(n.Corridor="Corridor",n["Elec/Mech Room"]="Elec/MechRoom",n["Elevator Core"]="ElevatorCore",n.Exercise="Exercise",n["Guest Lounge"]="GuestLounge",n.Laundry="Laundry",n.Mechanical="Mechanical",n.Meeting="Meeting",n.Office="Office",n["Public Restroom"]="PublicRestroom",n["Staff Lounge"]="StaffLounge",n.Stair="Stair",n.Storage="Storage",["DOE Ref Pre-1980","DOE Ref 1980-2004","ComStock DOE Ref Pre-1980","ComStock DOE Ref 1980-2004"].indexOf(t)!==-1?n["Guest Room"]="GuestRoom":(n["Guest Room 123O cc"]="GuestRoom123Occ",n["Guest Room 123V ac"]="GuestRoom123Vac")):"LargeHotel"==e?(n.Banquet="Banquet",n.Basement="Basement",n.Cafe="Cafe",n.Corridor="Corridor",n["Guest Room"]="GuestRoom",n.Kitchen="Kitchen",n.Laundry="Laundry",n.Lobby="Lobby",n.Mechanical="Mechanical",n.Retail="Retail",n.Storage="Storage"):"Warehouse"==e?(n.Bulk="Bulk",n.Fine="Fine",n.Office="Office"):"RetailStandalone"==e?(n["Back Space"]="Back_Space",n.Entry="Entry",n["Point of Sale"]="Point_of_Sale",n.Retail="Retail"):"RetailStripmall"==e?(n["Strip mall - type 1"]="Strip mall - type 1",n["Strip mall - type 2"]="Strip mall - type 2",n["Strip mall - type 3"]="Strip mall - type 3"):"QuickServiceRestaurant"==e?(n.Dining="Dining",n.Kitchen="Kitchen"):"FullServiceRestaurant"==e?(n.Dining="Dining",n.Kitchen="Kitchen"):"MidriseApartment"==e?(n.Apartment="Apartment",n.Corridor="Corridor",n.Office="Office"):"HighriseApartment"==e?(n.Apartment="Apartment",n.Corridor="Corridor",n.Office="Office"):"Hospital"==e?(n.Basement="Basement",n.Corridor="Corridor",n.Dining="Dining",n["ER Exam"]="ER_Exam",n["ER Nurse Station"]="ER_NurseStn",n["ER Trauma"]="ER_Trauma",n["ER Triage"]="ER_Triage",n["ICU Nurse Station"]="ICU_NurseStn",n["ICU Open"]="ICU_Open",n["ICU Patient Room"]="ICU_PatRm",n.Kitchen="Kitchen",n.Lab="Lab",n.Lobby="Lobby",n["Nurse Station"]="NurseStn",n.Office="Office",n.OR="OR",n["Patient Corridor"]="PatCorridor",n["Patient Room"]="PatRoom",n["Physical Therapy"]="PhysTherapy",n.Radiology="Radiology"):"Outpatient"==e?(n.Anesthesia="Anesthesia",n.BioHazard="BioHazard",n.Cafe="Cafe",n["Clean Work"]="CleanWork",n.Conference="Conference",n["Dressing Room"]="DresingRoom",n["Elec/Mech Room"]="Elec/MechRoom",n["Elevator Pump Room"]="ElevatorPumpRoom",n.Exam="Exam",n.Hall="Hall",n["IT Room"]="IT_Room",n.Janitor="Janitor",n.Lobby="Lobby",n["Locker Room"]="LockerRoom",n.Lounge="Lounge",n["Med Gas"]="MedGas",n.MRI="MRI",n["MRI Control"]="MRI_Control",n["Nurse Station"]="NurseStation",n.Office="Office",n.OR="OR",n.PACU="PACU",n["Physical Therapy"]="PhysicalTherapy",n.PreOp="PreOp",n["Procedure Room"]="ProcedureRoom",n.Reception="Reception",n["Soil Work"]="Soil Work",n.Stair="Stair",n.Toilet="Toilet",n.Undeveloped="Undeveloped",n.Xray="Xray"):"SuperMarket"==e?(n.Bakery="Bakery",n.Deli="Deli",n["Dry Storage"]="DryStorage",n.Office="Office",n.Produce="Produce",n.Sales="Sales",n.Corridor="Corridor",n.Dining="Dining",n["Elec/Mech Room"]="Elec/MechRoom",n.Meeting="Meeting",n.Restroom="Restroom",n.Vestibule="Vestibule"):"Laboratory"==e?(n.Office="Office",n["Open Lab"]="Open lab",n["Equipment Corridor"]="Equipment corridor",n["Lab with Fume Hood"]="Lab with fume hood"):"LargeDataCenterHighITE"==e?n["Standalone Data Center"]="StandaloneDataCenter":"LargeDataCenterLowITE"==e?n["Standalone Data Center"]="StandaloneDataCenter":"SmallDataCenterHighITE"==e?n["Computer Room"]="ComputerRoom":"SmallDataCenterLowITE"==e?n["Computer Room"]="ComputerRoom":"Asm"==e?(n.Auditorium="Auditorium",n["Office General"]="OfficeGeneral"):"ECC"==e?(n.Classroom="Classroom",n["Computer Room Classroom"]="CompRoomClassRm",n.Shop="Shop",n.Dining="Dining",n.Kitchen="Kitchen",n["Office General"]="OfficeGeneral"):"EPr"==e?(n.Classroom="Classroom",n["Corridor Stairway"]="CorridorStairway",n.Dining="Dining",n.Gymnasium="Gymnasium",n.Kitchen="Kitchen"):"ERC"==e?n.Classroom="Classroom":"ESe"==e?(n.Classroom="Classroom",n["Computer Room Classroom"]="CompRoomClassRm",n["Corridor Stairway"]="CorridorStairway",n.Dining="Dining",n.Gymnasium="Gymnasium",n.Kitchen="Kitchen",n["Office General"]="OfficeGeneral"):"EUn"==e?(n.Dining="Dining",n.Classroom="Classroom",n["Office General"]="OfficeGeneral",n["Computer Room Classroom"]="CompRoomClassRm",n.Kitchen="Kitchen",n["Corridor Stairway"]="CorridorStairway",n.FacMaint="FacMaint",n["Dormitory Room"]="DormitoryRoom"):"Gro"==e?(n["Grocery Sales"]="GrocSales",n["Ref Walk In Cool"]="RefWalkInCool",n["Office General"]="OfficeGeneral",n["Ref Food Prep"]="RefFoodPrep",n["Ref Walk In Freeze"]="RefWalkInFreeze",n["Ind Load Dock"]="IndLoadDock"):"Hsp"==e?(n["Hsp Surg Outpt Lab"]="HspSurgOutptLab",n.Dining="Dining",n.Kitchen="Kitchen",n["Office General"]="OfficeGeneral",n["Patient Room"]="PatientRoom"):"Htl"==e?(n.Dining="Dining",n["Bar Casino"]="BarCasino",n["Hotel Lobby"]="HotelLobby",n["Office General"]="OfficeGeneral",n["Guest Rm Corrid"]="GuestRmCorrid",n.Laundry="Laundry",n["Guest Rm Occ"]="GuestRmOcc",n["Guest Rm Un Occ"]="GuestRmUnOcc",n.Kitchen="Kitchen"):"MBT"==e?(n["Computer Room Classroom"]="CompRoomData",n.Laboratory="Laboratory",n["Corridor Stairway"]="CorridorStairway",n.Conference="Conference",n.Dining="Dining",n["Office Open"]="OfficeOpen",n.Kitchen="Kitchen"):"MFm"==e?(n["Res Living"]="ResLiving",n["Res Public Area"]="ResPublicArea"):"MLI"==e?(n["Stock Room"]="StockRoom",n.Work="Work"):"Mtl"==e?(n["Office General"]="OfficeGeneral",n["Guest Rm Corrid"]="GuestRmCorrid",n.Laundry="Laundry",n["Guest Rm Occ"]="GuestRmOcc",n["Guest Rm Un Occ"]="GuestRmUnOcc"):"Nrs"==e?(n["Corridor Stairway"]="CorridorStairway",n.Dining="Dining",n.Kitchen="Kitchen",n["Office General"]="OfficeGeneral",n["Patient Room"]="PatientRoom"):"OfL"==e?(n["Lobby Waiting"]="LobbyWaiting",n["Office Small"]="OfficeSmall",n["Office Open"]="OfficeOpen",n["Mech Elec Room"]="MechElecRoom"):"OfS"==e?(n.Hall="Hall",n["Office Small"]="OfficeSmall"):"RFF"==e?(n.Dining="Dining",n.Kitchen="Kitchen",n["Lobby Waiting"]="LobbyWaiting",n.Restroom="Restroom"):"RSD"==e?(n.Restroom="Restroom",n.Dining="Dining",n["Lobby Waiting"]="LobbyWaiting",n.Kitchen="Kitchen"):"Rt3"==e?n["Retail Sales"]="RetailSales":"RtL"==e?(n["Office General"]="OfficeGeneral",n.Work="Work",n["Stock Room"]="StockRoom",n["Retail Sales"]="RetailSales",n.Kitchen="Kitchen"):"RtS"==e?(n["Retail Sales"]="RetailSales",n["Stock Room"]="StockRoom"):"SCn"==e?n["Warehouse Cond"]="WarehouseCond":"SUn"==e?n["Warehouse Un Cond"]="WarehouseUnCond":"WRf"==e&&(n["Ind Load Dock"]="IndLoadDock",n["Office General"]="OfficeGeneral",n["Ref Stor Freezer"]="RefStorFreezer",n["Ref Stor Cooler"]="RefStorCooler"),n},replaceIdsUpdateInfoForCloning:function(e,t){var i=s.default.cloneDeep(e);return i.doors=i.doors.map(function(e){var i=u.default.generate();return t[e.id]=i,e.id=i,e}),i.windows=i.windows.map(function(e){var i=u.default.generate();return t[e.id]=i,e.id=i,e}),i.spaces=i.spaces.map(function(e){var i=u.default.generate();return t[e.id]=i,e.id=i,e.name="",e.face_id=t[e.face_id],e}),i.shading=i.shading.map(function(e){var i=u.default.generate();return t[e.id]=i,e.id=i,e.name="",e.face_id=t[e.face_id],e}),{clonedStory:i}},replaceSpaceNamesForCloning:function(e,t,i){var n=this;i.spaces=i.spaces.map(function(r){return r.name=n.generateName(e,t,i),r})}};t.default=f},,,,,function(e,t){"use strict";function i(e){var t=(r[e]||0)+1;return r[e]=t,e+" - "+t}Object.defineProperty(t,"__esModule",{value:!0}),t.genName=i;var n=1;t.default={setId:function(e){n=e},generate:function(){return function(){return String(n++)}}()};var r={}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return f.default.modes[e]}function o(e,t){var i=c.default.find(e.windows,{id:t});if(i)return(0,d.default)({},i,{type:"windows"});var n=c.default.find(c.default.flatMap(e.spaces,function(e){return e.daylighting_controls}),{id:t});if(n)return(0,d.default)({},n,{type:"daylighting_controls"});var r=c.default.find(e.doors,{id:t});return r?(0,d.default)({},r,{type:"doors"}):null}function a(e,t){var i=void 0,n=void 0;return u.assignableProperties.some(function(r){return(n=c.default.find(e[r],{id:t}))&&(i=r),!!n}),n?(0,d.default)({},n,{type:i}):null}Object.defineProperty(t,"__esModule",{value:!0});var s=i(6),d=n(s);t.displayNameForMode=r,t.componentInstanceById=o,t.spacePropertyById=a;var l=i(3),c=n(l),u=i(24),f=n(u),p={displayNameForMode:r,config:f.default};t.default=p},,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(52),a=r(o),s=i(6),d=r(s),l=i(30),c=r(l),u=i(3),f=r(u),p=i(124),m=r(p),h=i(46),g=r(h),y=i(299),v=r(y),_=i(295),w=n(_),x=i(24),b={building_units:{displayName:"Building Unit",definitionName:"BuildingUnit",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}],init:m.default.BuildingUnit},building_types:{displayName:"Building Type",definitionName:"BuildingType",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}],init:m.default.BuildingType},thermal_zones:{displayName:"Thermal Zone",definitionName:"ThermalZone",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}],init:m.default.ThermalZone},door_definitions:{displayName:"Door",definitionName:"DoorDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"height",displayName:"Height",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"width",displayName:"Width",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"door_type",displayName:"Type",input_type:"select",select_data:function(){var e=["Door","Glass Door","Overhead Door"];return f.default.zipObject(e,e)},validator:v.default.oneOf("Door","Glass Door","Overhead Door")},{name:"texture",displayName:"Texture",input_type:"texture",validator:v.default.oneOf.apply(v.default,(0,c.default)(x.textures))}],init:m.default.DoorDefinition},window_definitions:{displayName:"Window",definitionName:"WindowDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"window_definition_mode",displayName:"Mode",input_type:"select",select_data:function(){var e=["Single Window","Repeating Windows","Window to Wall Ratio"];return f.default.zipObject(e,e)},validator:v.default.oneOf("Single Window","Repeating Windows","Window to Wall Ratio")},{name:"wwr",displayName:"Window to Wall ratio",input_type:"text",validator:v.default.halfOpenInterval(0,1),converter:w.number,numeric:!0,enabled:function(e){return"Window to Wall Ratio"===e.window_definition_mode}},{name:"height",displayName:"Height",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0,enabled:function(e){return"Single Window"===e.window_definition_mode||"Repeating Windows"===e.window_definition_mode}},{name:"width",displayName:"Width",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0,enabled:function(e){return"Single Window"===e.window_definition_mode||"Repeating Windows"===e.window_definition_mode}},{name:"sill_height",displayName:"Sill Height",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"window_spacing",displayName:"Spacing",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0,enabled:function(e){return"Repeating Windows"===e.window_definition_mode}},{name:"window_type",displayName:"Window Type",input_type:"select",select_data:function(){var e=["Fixed","Operable"];return f.default.zipObject(e,e)},validator:v.default.oneOf("Fixed","Operable")},{name:"overhang_projection_factor",displayName:"Overhang Projection Factor",input_type:"text",validator:v.default.gt0orNull,converter:w.gt0orNull,numeric:!0},{name:"fin_projection_factor",displayName:"Fin Projection Factor",input_type:"text",validator:v.default.gt0orNull,converter:w.gt0orNull,numeric:!0},{name:"texture",displayName:"Texture",input_type:"texture",validator:v.default.oneOf.apply(v.default,(0,c.default)(x.textures)),enabled:function(e){return"Window to Wall Ratio"===e.window_definition_mode}},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(e,t){return f.default.chain(t.models.stories).flatMap("windows").filter({window_definition_id:e.id}).value().length}}],init:m.default.WindowDefn},space_types:{displayName:"Space Type",definitionName:"SpaceType",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}],init:m.default.SpaceType},construction_sets:{displayName:"Construction Set",definitionName:"ConstructionSet",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}],init:m.default.ConstructionSet},daylighting_control_definitions:{displayName:"Daylighting Control",definitionName:"DaylightingControlDefinition",
columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"height",displayName:"Height",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"illuminance_setpoint",displayName:"Illuminance Setpoint (lux)",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(e,t){return f.default.chain(t.models.stories).flatMap("spaces").flatMap("daylighting_controls").filter({daylighting_control_definition_id:e.id}).value().length}}],init:m.default.DaylightingControlDefn},stories:{displayName:"Story",definitionName:"Story",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"handle",readonly:!0,private:!0},{name:"geometry_id",readonly:!0,private:!0},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",converter:w.number,numeric:!0,validator:v.default.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",converter:w.number,numeric:!0,validator:v.default.number},{name:"floor_to_ceiling_height",displayName:"Floor To Ceiling Height",input_type:"text",converter:w.number,numeric:!0,validator:v.default.gt0},{name:"multiplier",displayName:"Multiplier",input_type:"text",converter:w.number,numeric:!0,validator:v.default.gt0},{name:"spaces",displayName:"Spaces",readonly:!0,numeric:!0,get:function(e,t){return e.spaces.length}},{name:"shading",displayName:"Shading",readonly:!0,numeric:!0,get:function(e,t){return e.shading.length}},{name:"images",readonly:!0,private:!0},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}]},spaces:{displayName:"Space",definitionName:"Space",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"daylighting_controls",displayName:"Daylighting Controls",readonly:!0,private:!0,get:function(e,t){return e.daylighting_controls.map(function(e){return e.name}).join(", ")}},{name:"story",displayName:"Story",readonly:!0,get:function(e,t){var i=t.models.stories.find(function(t){return~t.spaces.map(function(e){return e.id}).indexOf(e.id)});return i.name}},{name:"building_unit_id",displayName:"Building Unit",input_type:"select",select_data:function(e,t){var i={"(none)":null};return t.models.library.building_units.forEach(function(e){i[e.name]=e.id}),i},get:function(e,t){var i=t.models.library.building_units.find(function(t){return t.id===e.building_unit_id});return i?i.name:null},editable:!0,type:"building_units"},{name:"building_type_id",displayName:"Building Type",input_type:"select",select_data:function(e,t){var i={"(none)":null};return t.models.library.building_types.forEach(function(e){i[e.name]=e.id}),i},get:function(e,t){var i=t.models.library.building_types.find(function(t){return t.id===e.building_type_id});return i?i.name:null},editable:!0,type:"thermal_zones"},{name:"space_type_id",displayName:"Space Type",input_type:"select",select_data:function(e,t){var i={"(none)":null};return t.models.library.space_types.forEach(function(e){i[e.name]=e.id}),(0,d.default)({},i,g.default.spaceTypesForBuilding(e.building_type_id,e.template))},get:function(e,t){var i=t.models.library.space_types.find(function(t){return t.id===e.space_type_id});return i?i.name:null},editable:!0,type:"space_types"},{name:"template",displayName:"Template",input_type:"text"},{name:"thermal_zone_id",displayName:"Thermal Zone",input_type:"select",select_data:function(e,t){var i={"(none)":null};return t.models.library.thermal_zones.forEach(function(e){i[e.name]=e.id}),i},get:function(e,t){var i=t.models.library.thermal_zones.find(function(t){return t.id===e.thermal_zone_id});return i?i.name:null}},{name:"construction_set_id",displayName:"Construction Set",input_type:"select",select_data:function(e,t){var i={"(none)":null};return t.models.library.construction_sets.forEach(function(e){i[e.name]=e.id}),i},get:function(e,t){var i=t.models.library.construction_sets.find(function(t){return t.id===e.construction_set_id});return i?i.name:null},editable:!0,type:"construction_sets"},{name:"pitched_roof_id",displayName:"Pitched Roof",input_type:"select",select_data:function(e,t){return(0,d.default)({"(none)":null},f.default.fromPairs(t.models.library.pitched_roofs.map(function(e){return[e.name,e.id]})))},get:function(e,t){var i=f.default.find(t.models.library.pitched_roofs,{id:e.pitched_roof_id});return i?i.name:null},editable:!0,type:"pitched_roofs"},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",numeric:!0,validator:v.default.number,converter:w.number},{name:"floor_to_ceiling_height",displayName:"Floor to Ceiling Height",input_type:"text",numeric:!0,validator:v.default.number,converter:w.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",numeric:!0,validator:v.default.number,converter:w.number},{name:"floor_offset",displayName:"Floor Offset",input_type:"text",numeric:!0,validator:v.default.number,converter:w.number},{name:"open_to_below",displayName:"Open To Below",input_type:"select",select_data:function(){return{False:!1,True:!0}},converter:w.bool},{name:"color",displayName:"Color",input_type:"color",validator:v.default.color}]},shading:{displayName:"Shading",definitionName:"Shading",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"color",readonly:!0,private:!0}]},images:{displayName:"Image",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:v.default.name},{name:"width",displayName:"Width",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0},{name:"height",displayName:"Height",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0},{name:"z",displayName:"z",input_type:"text",validator:v.default.number,private:!0},{name:"scale",displayName:"Scale",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0,get:function(e){return e.width/e.naturalWidth}},{name:"opacity",displayName:"opacity",input_type:"text",validator:v.default.closedInterval(0,1),converter:w.number,numeric:!0},{name:"x",displayName:"x",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0},{name:"y",displayName:"y",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0},{name:"src",readonly:!0,private:!0}]},windows:{displayName:"Window",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"window_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.window_definitions.map(function(e){return[e.name,e.id]}))}}]},daylighting_controls:{displayName:"Daylighting Control",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"daylighting_control_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.daylighting_control_definitions.map(function(e){return[e.name,e.id]}))}}]},doors:{displayName:"Door",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"door_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.door_definitions.map(function(e){return[e.name,e.id]}))}}]},pitched_roofs:{displayName:"Pitched Roof",columns:[{name:"id",displayName:"ID",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"pitched_roof_type",displayName:"Type",input_type:"select",select_data:function(){var e=["Gable","Hip","Shed"];return f.default.zipObject(e,e)},validator:v.default.oneOf("Gable","Hip","Shed")},{name:"pitch",displayName:"Pitch",input_type:"text",validator:v.default.gt0,converter:w.number,numeric:!0},{name:"shed_direction",displayName:"Shed Direction",input_type:"text",validator:v.default.number,converter:w.number,numeric:!0},{name:"color",displayName:"Color",input_type:"color"}],init:m.default.PitchedRoof}};(0,a.default)(b).forEach(function(e){b[e].keymap=f.default.zipObject(f.default.map(b[e].columns,"name"),b[e].columns),b[e].columns.forEach(function(t){f.default.has(b[e],"definitionName")&&f.default.get(p.allowableTypes,b[e].definitionName)&&f.default.includes(p.allowableTypes[b[e].definitionName][t.name],"null")&&(t.nullable=!0),f.default.has(b[e],"definitionName")&&(0,p.getDefaults)(b[e].definitionName)&&f.default.has((0,p.getDefaults)(b[e].definitionName),t.name)&&(t.default=(0,p.getDefaults)(b[e].definitionName)[t.name])})}),t.default=b},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){i(620);var n=i(8)(i(277),i(684),"data-v-8f6e6820",null);e.exports=n.exports},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=t.x,n=t.y;return[{x:Math.floor(i/e)*e,y:Math.floor(n/e)*e},{x:(Math.floor(i/e)+1)*e,y:Math.floor(n/e)*e},{x:Math.floor(i/e)*e,y:(Math.floor(n/e)+1)*e},{x:(Math.floor(i/e)+1)*e,y:(Math.floor(n/e)+1)*e}].map(function(e){return(0,w.default)({},e,{type:"grid"})})}function o(e,t,i){return e.filter(function(e){return(0,S.distanceBetweenPoints)(i,e)<=t}).map(function(e){return(0,w.default)({},e,{type:"vertex"})})}function a(e,t,i){var n=[].concat((0,v.default)(r(t,i)),(0,v.default)(o(e,t,i))).map(function(e){return(0,w.default)({},e,{dist:(0,S.distanceBetweenPoints)(e,i),dx:i.x-e.x,dy:i.y-e.y})});return b.default.orderBy(n,["dist","origin","type"],["asc","asc","desc"])}function s(e,t,i){var n=i.width,r=i.spacing,o=i.window_definition_mode,a=i.texture;if("Window to Wall Ratio"===o||"Repeating Windows"===o)return{edge_id:e.id,center:{x:(e.v1.x+e.v2.x)/2,y:(e.v1.y+e.v2.y)/2},edge_start:e.v1,alpha:.5,start:e.v1,end:e.v2,window_definition_mode:o,width:n,spacing:r,texture:a};var s=(0,S.edgeDirection)({start:e.v1,end:e.v2}),d=n*Math.cos(s)/2,l=n*Math.sin(s)/2,c=e.v2.x===e.v1.x?(t.y-e.v1.y)/(e.v2.y-e.v1.y):(t.x-e.v1.x)/(e.v2.x-e.v1.x);return{edge_id:e.id,center:t,edge_start:e.v1,alpha:c,start:{x:t.x-d,y:t.y-l},end:{x:t.x+d,y:t.y+l},window_definition_mode:o}}function d(e,t){var i=void 0,n=void 0,r=1/0,o=!0,a=!1,s=void 0;try{for(var d,l=(0,g.default)(e);!(o=(d=l.next()).done);o=!0){var c=d.value,u=(0,S.pointDistanceToSegment)(t,{start:c.v1,end:c.v2});if(u.dist<r){if(0===u.dist)return(0,w.default)({},c,u);r=u.dist,i=c,n=u}}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return i?(0,w.default)({},i,n):void 0}function l(e,t){var i=e.map(function(e){var i="Single Window"===e.window_definition_mode?{dist:(0,S.distanceBetweenPoints)(t,e.center),proj:e.center}:(0,S.pointDistanceToSegment)(t,e);return(0,w.default)({},e,i,{v1:e.start,v2:e.end})});return b.default.minBy(i,"dist")}function c(e,t,i,n){var r=d(e,t);return!r||r.dist>n?null:s(r,r.proj,i)}function u(e,t,i,n,r){var o=d(e,t);if(!o||o.dist>n)return null;var a=(0,S.distanceBetweenPoints)(o.v1,o.proj),l=Math.round(a/r)*r,c=o.v2.x-o.v1.x,u=o.v2.y-o.v1.y,f=Math.sqrt(c*c+u*u),p={x:o.v1.x+l*(c/f),y:o.v1.y+l*(u/f)};return s(o,p,i)}function f(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"grid-strict"===e?u.apply(void 0,i):c.apply(void 0,i)}function p(e,t,i,n){var r="grid-strict"===e?[]:[i];return b.default.chain(a(r,n,i)).map(function(e){return(0,w.default)({},e,{face_id:b.default.find(t,function(t){return(0,S.vertInRing)(e,t.vertices)})})}).filter("face_id").map(function(e){return(0,w.default)({},e,{face_id:e.face_id.id})}).first().value()}function m(e,t){var i=t.alpha||.5;return{x:e.v1.x+i*(e.v2.x-e.v1.x),y:e.v1.y+i*(e.v2.y-e.v1.y)}}Object.defineProperty(t,"__esModule",{value:!0});var h=i(96),g=n(h),y=i(30),v=n(y),_=i(6),w=n(_);t.gridSnapTargets=r,t.vertexSnapTargets=o,t.snapTargets=a,t.expandWindowAlongEdge=s,t.findClosestEdge=d,t.findClosestWindow=l,t.snapWindowToEdge=f,t.snapToVertexWithinFace=p,t.windowLocation=m;var x=i(3),b=n(x),S=i(15)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(51),o=n(r),a=i(15);n(a);t.default={Vertex:function(e,t){return{id:o.default.generate(),x:e,y:t}},Edge:function(e,t){return{id:o.default.generate(),v1:e,v2:t}},Face:function(e){return{id:o.default.generate(),edgeRefs:e}},Geometry:function(){return{id:o.default.generate(),vertices:[],edges:[],faces:[]}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.allowableTypes=t.getDefaults=void 0;var r=i(6),o=n(r),a=i(3),s=n(a),d=i(51),l=n(d),c=i(306),u=n(c),f=i(307),p=n(f),m=i(24),h=n(m),g=i(244),y=n(g),v=i(125),_=function(e){var t=function t(i){return s.default.has(i,"default")?i[e]:"null"===i.type?null:"array"===i.type?[]:"object"===i.type?s.default.mapValues(i.properties,t):s.default.has(i,e)?i[e]:null};return t},w=function(e){return s.default.mapValues(y.default.definitions,_(e))},x=w("default");if("ip"!==x.Project.config.units)throw new Error("Expected default units to be ip. Code changes are required to change the default units");var b=s.default.mapValues(x,function(e,t){return(0,v.getConverter)(t,"ip","si")(e)}),S=t.getDefaults=function(e){return s.default.cloneDeep("ip"===s.default.get(window,"application.$store.state.project.config.units","ip")?x[e]:b[e])};t.allowableTypes=w("type");t.default={Story:function(e){return(0,o.default)({},S("Story"),{id:l.default.generate(),name:e,color:(0,u.default)("story")})},Space:function(e){return(0,o.default)({},S("Space"),{id:l.default.generate(),name:e,color:(0,u.default)("space"),type:"space"})},Shading:function(e){return(0,o.default)({},S("Shading"),{id:l.default.generate(),name:e,color:h.default.palette.shading})},Image:function(e,t){return{id:l.default.generate(),src:t,name:e,visible:!0,height:0,width:0,x:0,y:0,z:0,r:0,opacity:.6,naturalWidth:0,naturalHeight:0}},BuildingUnit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:l.default.generate(),color:(0,u.default)("building_unit"),name:e.name,handle:e.handle||null}},ThermalZone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ThermalZone"),{id:l.default.generate(),color:(0,u.default)("thermal_zone"),name:e.name})},SpaceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("SpaceType"),{id:l.default.generate(),color:(0,u.default)("space_type"),name:e.name})},ConstructionSet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ConstructionSet"),{id:l.default.generate(),name:e.name,color:(0,u.default)("construction_set")})},WindowDefn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("WindowDefinition"),{id:l.default.generate(),name:e.name,wwr:null,window_spacing:null,texture:(0,p.default)("window_definition")})},DaylightingControlDefn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DaylightingControlDefinition"),{id:l.default.generate(),name:e.name})},DoorDefinition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DoorDefinition"),{id:l.default.generate(),name:e.name,texture:(0,p.default)("door_definition")})},PitchedRoof:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("PitchedRoof"),{id:l.default.generate(),name:e.name,color:(0,u.default)("pitched_roof")})},BuildingType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return(0,o.default)({},S("BuildingType"),{id:l.default.generate(),name:t,color:(0,u.default)("building_type")})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertLibrary=t.convertState=t.convertSchema=t.getConverter=t.conversionFactor=t.units=void 0;var r=i(187),o=n(r),a=i(6),s=n(a),d=i(3),l=n(d),c=i(244),u=n(c),f=i(24),p=i(314),m=n(p),h=function e(t){if(l.default.has(t,"si_units"))return l.default.pick(t,["si_units","ip_units"]);if("object"===t.type){var i=l.default.pickBy(l.default.mapValues(t.properties,e),l.default.identity);return l.default.isEmpty(i)?null:i}return"array"===t.type&&l.default.get(t,"items.$ref")?{arrayOf:t.items.$ref.replace("#/definitions/","")}:t.$ref?{$ref:t.$ref.replace("#/definitions/","")}:null},g=(0,s.default)({$schema:l.default.pickBy(l.default.mapValues(u.default.properties,h),l.default.identity)},l.default.pickBy(l.default.mapValues(u.default.definitions,h),l.default.identity));g.$state=l.default.pickBy({application:g.Application,project:g.Project,geometry:{arrayOf:"Geometry"},models:{stories:{arrayOf:"Story"},library:l.default.fromPairs(f.libraryTypes.map(function(e){return[e,g.$schema[e]]}))}},l.default.identity);var y=t.units=(0,m.default)(g),v={"m -> ft":3.280839895,"ft -> m":.3048,"fc -> lux":10.7639,"lux -> fc":.092903},_=t.conversionFactor=function(e,t){var i=v[e+" -> "+t];if(!i)throw new Error("Unable to find conversion from "+e+" to "+t);return i},w=t.getConverter=function e(t,i,n){if(!l.default.includes(["si","ip"],i))throw new Error("expected fromSystem to be 'si' or 'ip'. received "+i);if(!l.default.includes(["si","ip"],n))throw new Error("expected toSystem to be 'si' or 'ip'. received "+n);if(i===n)return l.default.identity;var r=i+"_units",a=n+"_units",s=l.default.get(y,t);if(!s||l.default.has(s,"si_units")&&s.si_units===s.ip_units)return l.default.identity;if(l.default.has(s,"si_units")){var d=_(s[r],s[a]);return function(e){return("undefined"==typeof e?"undefined":(0,o.default)(e))===(0,o.default)(0)?e*d:e}}if(s.$ref)return e(s.$ref,i,n);if(s.arrayOf){var c=e(s.arrayOf,i,n);return function(e){return e.map(c)}}if(l.default.isObject(s)){var u=l.default.mapValues(s,function(r,o){return e(t+"."+o,i,n)});return function(e){return l.default.mapValues(e,function(e,t){return(u[t]||l.default.identity)(e)})}}throw new Error("Path "+t+" did not lead to a useful spot in 'units'")},x=t.convertSchema=function(e,t,i){return w("$schema",t,i)(e)};t.convertState=function(e,t,i){return w("$state",t,i)(e)},t.convertLibrary=x},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i;return function(){for(var n=this,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(i),i=setTimeout(function(){i=null,e.apply(n,o)},t)}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default,i={};return e.filter(function(e){var n=t(e);return!i[n]&&(i[n]=!0,!0)})}function a(e){return f.default.flatten(e.map(function(t,i){return e.slice(i+1).map(function(e){return[t,e]})}))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default;return e.filter(function(i,n){return 0===n||t(i)!==t(e[n-1])})}function d(e){for(var t=[],i=e.parentNode.firstChild;i;i=i.nextSibling)1===i.nodeType&&i!==e&&t.push(i);return t}Object.defineProperty(t,"__esModule",{value:!0});var l=i(42),c=n(l);t.debounce=r,t.uniq=o,t.allPairs=a,t.dropConsecutiveDups=s,t.getSiblings=d;var u=i(3),f=n(u)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10",cy:"10",fill:"#bf0049",r:"5.6"}}),_c("path",{attrs:{d:"M10.8 9.9L12.7 8c.2-.2.2-.6 0-.8-.2-.2-.6-.2-.8 0L10 9 8.1 7.1c-.2-.2-.6-.2-.8 0s-.3.7-.1.9l1.9 1.9-1.9 1.9c-.2.2-.2.6 0 .8.1.1.3.2.4.2s.3-.1.4-.2l1.9-1.9 1.9 1.9c.1.1.3.2.4.2s.3-.1.4-.2c.2-.2.2-.6 0-.8l-1.8-1.9z",fill:"#fff"}})])}}},,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(79),o=n(r);t.default=new o.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeEvents=void 0;var r=i(180),o=n(r);t.ResizeEvents=o.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(705),o=n(r),a=i(711),s=n(a),d=i(703),l=n(d),c=i(722),u=n(c),f=i(710),p=n(f),m=i(715),h=n(m),g=i(716),y=n(g),v=i(713),_=n(v),w=i(714),x=n(w),b=i(719),S=n(b),C=i(718),M=n(C),O=i(720),T=n(O),R=i(721),I=n(R),D=i(717),P=n(D),j=i(702),E=n(j),z=i(700),k=n(z),$=i(704),F=n($),W=i(725),G=n(W),N=i(723),L=n(N),V=i(724),A=n(V),B=i(706),H=n(B),U=i(690),q=n(U),K=i(701),X=n(K),Y=i(698),Z=n(Y),J=i(697),Q=n(J),ee=i(693),te=n(ee),ie=i(694),ne=(n(ie),i(692)),re=n(ne),oe=i(696),ae=n(oe),se=i(695),de=n(se),le=i(707),ce=n(le),ue=i(708),fe=n(ue),pe=i(709),me=n(pe),he=i(251),ge=n(he),ye=i(712),ve=n(ye),_e={name:"ComponentIcon",props:["which"],template:'\n    <ComponentsWindow v-if="which === \'window_definitions\'" class="button" />\n    <ComponentsDaylighting v-else-if="which === \'daylighting_control_definitions\'" class="button" />\n  ',components:{ComponentsWindow:Z.default,ComponentsDaylighting:Q.default}},we={name:"AssignSpacePropIcon",props:["which"],template:'\n    <AssignBldgModule v-if="which === \'building_units\'" class="button" />\n    <AssignThermalZone v-else-if="which === \'thermal_zones\'" class="button" />\n    <AssignActivity v-else-if="which === \'space_types\'" class="button" />\n    <AssignRoof v-else-if="which === \'pitched_roofs\'" class="button" />\n  ',components:{AssignBldgModule:te.default,AssignThermalZone:ae.default,AssignActivity:re.default,AssignRoof:de.default}};t.default={"open-floorplan-svg":o.default,"save-floorplan-svg":s.default,"import-library-svg":l.default,"undo-svg":u.default,"redo-svg":p.default,"tab-floorplan-svg":h.default,"tab-shading-svg":y.default,"tab-assign-svg":_.default,"tab-components-svg":x.default,"tool-color-svg":P.default,"tool-draw-rectangle-svg":S.default,"tool-draw-polygon-svg":M.default,"tool-erase-svg":T.default,"tool-move-size-svg":I.default,"tool-image-svg":E.default,"tool-fill-svg":k.default,"tool-component-svg":F.default,"zoom-in-svg":L.default,"zoom-out-svg":A.default,"pan-svg":H.default,"add-image":q.default,ZoomToFitSvg:G.default,ComponentIcon:_e,AssignSpacePropIcon:we,QuickstartIconNewMapFloorplan:ce.default,QuickstartIconNewFloorplan:fe.default,QuickstartIconOpenFloorplan:me.default,InfoIcon:ge.default,SettingsGear:ve.default,GroundPropertiesIcon:X.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=(0,h.default)(e);!(n=(a=s.next()).done);n=!0){var d=a.value,l=!0,c=!1,u=void 0;try{for(var f,p=(0,h.default)(d.edges);!(l=(f=p.next()).done);l=!0){var m=f.value;if(m.id===t){i.push(d);break}}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}function o(e,t){var i=_.default.denormalize(e.geometry.find(function(e){return e.id===t})),n=e.models.stories.find(function(e){return e.geometry_id===t}),o=n.spaces.map(function(e){return{daylighting_controls:e.daylighting_controls.map(function(e){return(0,p.default)({},e,{vertex:y.default.find(i.vertices,{id:e.vertex_id})})}),space_id:e.id,face_id:e.face_id}});return{geometry_id:t,story_id:n.id,windows:n.windows.map(function(e){var t=y.default.find(i.edges,{id:e.edge_id}),n=r(i.faces,e.edge_id);return(0,p.default)({},e,{originalLoc:(0,w.windowLocation)(t,e),originalFaceIds:y.default.map(n,"id")})}),doors:n.doors.map(function(e){var t=y.default.find(i.edges,{id:e.edge_id}),n=r(i.faces,e.edge_id);return(0,p.default)({},e,{originalLoc:(0,w.windowLocation)(t,e),originalFaceIds:y.default.map(n,"id")})}),perFaceComponents:o}}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.geometry_id,o=t.story_id,a=t.windows,s=t.doors,d=t.perFaceComponents,c=_.default.denormalize(y.default.find(e.rootState.geometry,{id:n})),f=y.default.find(e.rootState.models.stories,{id:o}),p=c.faces.filter(function(e){return y.default.find(f.spaces,{face_id:e.id})}),m=e.rootState.project.grid.spacing;e.dispatch("models/destroyAllComponents",{story_id:o},{root:!0});var h=y.default.flatMap(p,"edges"),g=function(t,n){var a=[];t.forEach(function(e){var t=i[e.originalFaceIds[0]]||{dx:0,dy:0},s=t.dx,d=t.dy,c={x:e.originalLoc.x+s,y:e.originalLoc.y+d},f=(0,w.snapWindowToEdge)("nonstrict",h,c,{width:1},m/4);if(f){var g=r(p,f.edge_id).map(function(e){return e.id});e.originalFaceIds.length!==g.length||e.originalFaceIds.length>1&&y.default.intersection((0,u.default)(i),e.originalFaceIds)||a.push((0,l.default)({story_id:o,edge_id:f.edge_id,alpha:f.alpha},n.toLowerCase()+"_definition_id",e.window_definition_id||e.door_definition_id))}}),e.dispatch("models/create"+n+"s",a,{root:!0})};g(a,"Window"),g(s,"Door"),d.forEach(function(t){var n=t.face_id,r=t.daylighting_controls;r.forEach(function(t){var r=i[n]||{dx:0,dy:0},a=r.dx,s=r.dy,d={x:t.vertex.x+a,y:t.vertex.y+s},l=(0,w.snapToVertexWithinFace)("nonstrict",p,d,m/4);l&&e.dispatch("models/createDaylightingControl",{daylighting_control_definition_id:t.daylighting_control_definition_id,x:l.x,y:l.y,story_id:o,face_id:l.face_id},{root:!0})})})}function s(){for(var e=void 0,t=void 0,i=void 0,n=void 0,r=arguments.length,s=Array(r),d=0;d<r;d++)s[d]=arguments[d];if(3===s.length)e=s[0],t=s[1],i=s[2],n={};else{if(4!==s.length)throw new Error("usage: withPreservedComponents(context, geometry_id, action [,movementsByFaceId])");e=s[0],t=s[1],n=s[2],i=s[3]}var l=o(e.rootState,t);i(),a(e,l,n)}Object.defineProperty(t,"__esModule",{value:!0});var d=i(70),l=n(d),c=i(52),u=n(c),f=i(6),p=n(f),m=i(96),h=n(m);t.withPreservedComponents=s;var g=i(3),y=n(g),v=i(15),_=n(v),w=i(122)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(300),o=n(r),a=i(302),s=n(a),d=i(301),l=n(d);t.default={namespaced:!0,state:{config:{units:"ip",unitsEditable:!0,language:"EN-US"},north_axis:0,ground:{floor_offset:0,azimuth_angle:0,tilt_slope:0},grid:{visible:!0,spacing:5},view:{min_x:-250,min_y:-150,max_x:250,max_y:150},map:{initialized:!1,enabled:!0,visible:!0,latitude:39.7653,longitude:-104.9863,zoom:4.5,rotation:0,elevation:0},previous_story:{visible:!0},show_import_export:!0},actions:o.default,mutations:s.default,getters:l.default}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",version:"0.7.0",description:"Comment describing your JSON Schema",type:"object",properties:{version:{description:"File format version",type:"string"},application:{$ref:"#/definitions/Application"},project:{$ref:"#/definitions/Project"},stories:{type:"array",items:{$ref:"#/definitions/Story"}},building_units:{type:"array",items:{$ref:"#/definitions/BuildingUnit"}},thermal_zones:{type:"array",items:{$ref:"#/definitions/ThermalZone"}},space_types:{type:"array",items:{$ref:"#/definitions/SpaceType"}},construction_sets:{type:"array",items:{$ref:"#/definitions/ConstructionSet"}},window_definitions:{type:"array",items:{$ref:"#/definitions/WindowDefinition"}},door_definitions:{type:"array",items:{$ref:"#/definitions/DoorDefinition"}},daylighting_control_definitions:{type:"array",items:{$ref:"#/definitions/DaylightingControlDefinition"}},pitched_roofs:{type:"array",items:{$ref:"#/definitions/PitchedRoof"}}},required:["version","application","project","stories","building_units","thermal_zones","space_types","construction_sets","window_definitions","door_definitions","daylighting_control_definitions","pitched_roofs"],definitions:{Application:{description:"Reserved for application data, not for external use",type:"object"},Project:{description:"Information that applies to the entire project",type:"object",properties:{config:{type:"object",properties:{units:{type:["string","null"],enum:["ip","si"],default:"ip"},language:{type:["string","null"],default:"EN-US"}},required:["units","language"]},north_axis:{description:"Angle between building north and true north in degrees (clockwise is positive)",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},ground:{type:"object",properties:{floor_offset:{description:"Specifies the vertical offset between the building floor and the ground plane. Use a value < 0 for buildings with below-grade spaces, or a value > 0 for, e.g., buildings on piers.",type:["number","null"],default:0,si_units:"m",ip_units:"ft"},azimuth_angle:{description:"Direction of the ground plane, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},tilt_slope:{description:"Slope of the ground plane from horizontal. For example, a value of 1 implies a 45-deg angle.",type:["number","null"],default:0}},required:["floor_offset","azimuth_angle","tilt_slope"]},grid:{type:"object",properties:{visible:{type:["boolean","null"]},spacing:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["visible","spacing"]},view:{type:"object",properties:{min_x:{type:["number","null"],si_units:"m",ip_units:"ft"},min_y:{type:["number","null"],si_units:"m",ip_units:"ft"},max_x:{type:["number","null"],si_units:"m",ip_units:"ft"},max_y:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["min_x","min_y","max_x","max_y"]},map:{type:"object",properties:{visible:{type:["boolean","null"]},latitude:{type:["number","null"]},longitude:{type:["number","null"]},zoom:{type:["number","null"]},elevation:{type:["number","null"],si_units:"m",ip_units:"ft"},enabled:{type:["boolean","null"]},initialized:{type:["boolean","null"]},rotation:{type:["number","null"],si_units:"deg",ip_units:"deg"}},required:["visible","latitude","longitude","zoom","elevation","enabled","initialized","rotation"]},previous_story:{type:"object",properties:{visible:{type:["boolean","null"]}},required:["visible"]},show_import_export:{type:["boolean","null"]}},required:["config","north_axis","ground","grid","view","map","previous_story","show_import_export"]},Geometry:{type:"object",properties:{id:{type:"string"},vertices:{type:"array",items:{$ref:"#/definitions/Vertex"}},edges:{type:"array",items:{$ref:"#/definitions/Edge"}},faces:{type:"array",items:{$ref:"#/definitions/Face"}}},required:["id","vertices","edges","faces"]},Vertex:{type:"object",properties:{id:{type:"string"},x:{type:"number",si_units:"m",ip_units:"ft"},y:{type:"number",si_units:"m",ip_units:"ft"},edge_ids:{type:"array",items:{type:"string"}}},required:["id","x","y","edge_ids"]},Edge:{type:"object",properties:{id:{type:"string"},vertex_ids:{type:"array",minItems:2,maxItems:2,uniqueItems:!0,items:{type:"string"}},face_ids:{type:"array",minItems:1,maxItems:2,items:{type:"string"}}},required:["id","vertex_ids","face_ids"]},Face:{type:"object",properties:{id:{type:"string"},edge_ids:{type:"array",minItems:3,items:{type:"string"}},edge_order:{type:"array",minItems:3,items:{type:"number",enum:[0,1]}}},required:["id","edge_ids","edge_order"]},Story:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},image_visible:{type:["boolean","null"],default:!0},below_floor_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{type:["number","null"],minimum:0,default:8,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},multiplier:{type:["integer","null"],
minimum:1,multipleOf:1,default:1},color:{$ref:"#/definitions/HexColor"},geometry:{$ref:"#/definitions/Geometry"},images:{type:"array"},spaces:{type:"array",items:{$ref:"#/definitions/Space"}},shading:{type:"array",items:{$ref:"#/definitions/Shading"}},windows:{type:"array",items:{type:"object",properties:{window_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:'Distance along edge to center point of window, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1).  Does not apply if window_definition_mode is "Window to Wall Ratio". Will be an array of such values if window_definition_mode is "Repeating Windows".',type:["array","number","null"],minimum:0,maximum:1,items:{type:"number",minimum:0,maximum:1}}},required:["window_definition_id","edge_id","alpha"]}},doors:{type:"array",items:{type:"object",properties:{door_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:"Distance along edge to center point of door, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1). ",type:"number",minimum:0,maximum:1}},required:["door_definition_id","edge_id","alpha"]}}},required:["id","handle","name","image_visible","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","multiplier","color","geometry","images","spaces","shading","windows","doors"]},Space:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]},building_unit_id:{type:["string","null"]},thermal_zone_id:{type:["string","null"]},space_type_id:{type:["string","null"]},construction_set_id:{type:["string","null"]},pitched_roof_id:{type:["string","null"]},daylighting_controls:{type:"array",items:{type:"object",properties:{daylighting_control_definition_id:{type:"string"},vertex_id:{type:"string"}},required:["daylighting_control_definition_id","vertex_id"]}},below_floor_plenum_height:{description:"If provided, overrides the story below_floor_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{description:"If provided, overrides the story floor_to_ceiling_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{description:"If provided, overrides the story above_ceiling_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_offset:{description:"If provided, specifies the vertical offset between the space floor and the story floor.",type:["number","null"],si_units:"m",ip_units:"ft"},open_to_below:{description:"If true, defines a space that is open to below (has no floor).",type:["boolean","null"]},building_type_id:{description:"Standard space type",type:["string","null"]},template:{description:"Template for the space to follow",type:["string","null"]}},required:["id","handle","name","face_id","building_unit_id","thermal_zone_id","space_type_id","construction_set_id","pitched_roof_id","daylighting_controls","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","floor_offset","open_to_below","building_type_id","template"]},Shading:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]}},required:["id","handle","name","face_id"]},ThermalZone:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},SpaceType:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},BuildingUnit:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},ConstructionSet:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]}},required:["id","handle","name"]},WindowDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},window_definition_mode:{type:"string",enum:["Single Window","Repeating Windows","Window to Wall Ratio"],default:"Single Window"},wwr:{description:'Target window to wall ratio, only used if window_definition_mode is "Window to Wall Ratio"',type:["number","null"],minimum:0,maximum:1,exclusiveMaximum:!0,default:.2},sill_height:{description:"Vertical distance from the floor to the window sill. In drawing units.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},window_spacing:{description:'Spacing between windows.  Only used if window_definition_mode is  "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},height:{description:'Vertical height of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},width:{description:'Horizontal width of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:2,si_units:"m",ip_units:"ft"},window_type:{type:"string",enum:["Fixed","Operable"],default:"Fixed"},overhang_projection_factor:{description:"Projection factor for overhangs, set to null for no overhang.  Overhang depth = overhang_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},fin_projection_factor:{description:"Projection factor for fins, set to null for no overhang. Projection factor for overhangs, set to null for no overhang.  Fin depth = fin_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},texture:{description:'Internal attribute representing how this window group is displayed. Applies only if window_definition_mode is "Window to Wall Ratio".',type:["string","null"],default:null}},required:["id","name","window_definition_mode","wwr","sill_height","window_spacing","height","width","window_type","overhang_projection_factor","fin_projection_factor"]},DoorDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},height:{description:"Vertical height of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:6.67,si_units:"m",ip_units:"ft"},width:{description:"Horizontal width of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},door_type:{type:"string",enum:["Door","Glass Door","Overhead Door"],default:"Door"}},required:["id","name","height","width","door_type"]},DaylightingControlDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},illuminance_setpoint:{description:"Setpoint for daylighting control.",type:"number",default:300,si_units:"lux",ip_units:"fc"},height:{description:"Vertical distance of sensor above floor.  In drawing units.",type:"number",default:3,si_units:"m",ip_units:"ft"}},required:["id","name","illuminance_setpoint","height"]},PitchedRoof:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},pitched_roof_type:{type:"string",enum:["Gable","Hip","Shed"],default:"Gable"},pitch:{description:"Pitch of roof. A value of 6, for example, implies a 6 in 12 pitch (or 26.57 degrees).",type:"number",minimum:0,default:6},shed_direction:{description:"Direction of shed roof, from low edge to high edge, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},color:{$ref:"#/definitions/HexColor"}},required:["id","name","pitched_roof_type","pitch","shed_direction","color"]},HexColor:{type:["string","null"],pattern:"^#[a-fA-F0-9]{6}$"}}}},,,function(e,t,i){i(604);var n=i(8)(i(263),i(664),"data-v-14ece691",null);e.exports=n.exports},function(e,t,i){i(606);var n=i(8)(i(270),i(666),null,null);e.exports=n.exports},function(e,t,i){i(605);var n=i(8)(i(272),i(665),"data-v-20be75f3",null);e.exports=n.exports},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("switch",[_c("g",[_c("path",{attrs:{d:"M82.992 97.5h-49.23a3.853 3.853 0 0 1-3.852-3.852V23.101a3.853 3.853 0 0 1 3.852-3.851h49.23a3.853 3.853 0 0 1 3.852 3.851v70.548a3.853 3.853 0 0 1-3.852 3.851zm-45.379-7.703H79.14V26.952H37.613v62.845z"}}),_c("path",{attrs:{d:"M25.834 80.751h-8.826a3.854 3.854 0 0 1-3.852-3.852V6.352A3.853 3.853 0 0 1 17.008 2.5h50.523a3.853 3.853 0 0 1 3.852 3.852v8.826H63.68v-4.975H20.859v62.845h4.975v7.703z"}})])])])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"}},[_c("title",[_v("Artboard 10")]),_c("path",{attrs:{d:"M50 18a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm4 49h-8V47h8zm0-26h-8v-8h8z"}})])}}},,,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(177),d=i(657),l=n(d),c=i(648),u=n(c),f=i(641),p=n(f),m=i(662),h=n(m),g=i(649),y=n(g),v=i(248),_=n(v),w=i(651),x=n(w),b=i(661),S=n(b);t.default={name:"app",data:function(){return{error:null,success:null,navigationExpanded:!1}},beforeCreate:function(){this.$store.dispatch("models/initStory")},mounted:function(){var e=this;window.eventBus.$on("error",function(t){e.error=t,setTimeout(function(){e.error=null},5e3)}),window.eventBus.$on("success",function(t){e.success=t,setTimeout(function(){e.success=null},5e3)}),window.eventBus.$on("reload-grid",function(){document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}),document.addEventListener("keydown",function(t){e.$store.timetravel&&(90===t.keyCode&&(t.ctrlKey||t.metaKey)?(t.shiftKey?e.$store.timetravel.redo():e.$store.timetravel.undo(),t.preventDefault()):89==t.keyCode&&(t.ctrlKey||t.metaKey)&&(e.$store.timetravel.redo(),t.preventDefault()))})},computed:(0,o.default)({},(0,a.mapState)({tool:function(e){return e.application.currentSelections.tool}})),components:{"grid-view":u.default,"canvas-view":p.default,"inspector-view":x.default,navigation:l.default,toolbar:h.default,ImageUpload:y.default,Textures:S.default,PortalTarget:s.PortalTarget,ColorPickerModal:_.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(642),s=n(a),d=i(29);t.default={name:"app",data:function(){return{}},computed:(0,o.default)({},(0,d.mapState)({mapEnabled:function(e){return e.project.map.enabled},mapVisible:function(e){return e.project.map.visible},northAxis:function(e){return e.project.north_axis}})),components:{"map-view":s.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(181),d=i(654),l=n(d),c=i(627)("AIzaSyDIja3lnhq63SxukBm9_mA-jn5R0Bj9RN8",["places"]),u=i(628),f=i(78);t.default={name:"map-view",data:function(){return{view:null,map:null,startResolution:null,autocomplete:null,mapModalVisible:!window.api||window.api.config.showMapDialogOnStart,showGrid:!1}},mounted:function(){this.showGrid=this.gridVisible,this.initAutoComplete(),this.loadMap(),s.ResizeEvents.$on("resize",this.updateMapView),window.eventBus.$on("boundsResolved",this.clearStartResolution)},beforeDestroy:function(){s.ResizeEvents.$off("resize",this.updateMapView),window.eventBus.$off("boundsResolved",this.clearStartResolution)},methods:{clearStartResolution:function(){this.startResolution=null,this.updateMapView()},initAutoComplete:function(){var e=this;c().then(function(t){var i=new t.places.Autocomplete(e.$refs.addressSearch);i.addListener("place_changed",function(){var t=i.getPlace();t.geometry&&(e.latitude=t.geometry.location.lat(),e.longitude=t.geometry.location.lng(),e.updateMapView())})})},loadMap:function(){var e=this;window.ol=u,this.$refs.map.innerHTML="",this.view=new u.View,this.map=new u.Map({layers:[new u.layer.Tile({source:new u.source.OSM})],target:"map",view:this.view}),this.view.on("propertychange",function(t){"rotation"===t.key&&(e.rotation=e.view.getRotation())}),this.updateMapView(),_.defer(function(){return e.updateMapView()})},updateMapView:function(){console.log("updateMapView"),this.map.updateSize();var e=u.proj.fromLonLat([this.longitude,this.latitude]),t=this.unAdjustedResolution,i=this.unAdjustedDelta.y,n=this.unAdjustedDelta.x;if(this.view.getCenter()){this.startResolution=this.startResolution||u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter());var r=1/u.proj.getPointResolution(this.view.getProjection(),1,this.view.getCenter());t*=r,i*=r,n*=r}e[0]+=i,e[1]+=n,this.view.setResolution(t),this.view.setCenter(e),this.view.setRotation(this.rotation)},finishSetup:function(){var e=u.proj.transform(this.view.getCenter(),"EPSG:3857","EPSG:4326");this.longitude=e[0],this.latitude=e[1];var t=u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter()),i=this.startResolution/t;console.log("scaling to "+this.startResolution+" / "+t+" == "+i),window.eventBus.$emit("scaleTo",i),this.rotation=this.view.getRotation(),this.$store.dispatch("project/setMapInitialized",{initialized:!0}),this.tool="Rectangle",f.select("#reticle").remove(),this.gridVisible=this.showGrid},showReticle:function(){if("Map"===this.tool){this.gridVisible=!1;var e=100,t=this.$refs.map.clientWidth/2,i=this.$refs.map.clientHeight/2;f.select("#reticle").selectAll("#reticle path").data([[{x:t,y:i-e},{x:t,y:i+e}],[{x:t-e,y:i},{x:t+e,y:i}]]).enter().append("path").attr("stroke-width","1").attr("stroke","gray").attr("d",f.line().x(function(e){return e.x}).y(function(e){return e.y}))}}},computed:(0,o.default)({},(0,a.mapState)({projectView:function(e){return e.project.view},min_x:function(e){return e.project.view.min_x},max_x:function(e){return e.project.view.max_x},min_y:function(e){return e.project.view.min_y},max_y:function(e){return e.project.view.max_y},units:function(e){return e.project.config.units},mapInitialized:function(e){return e.project.map.initialized}}),{mPerFt:function(){return u.proj.METERS_PER_UNIT["us-ft"]},unAdjustedResolutionMeters:function(){return(this.max_x-this.min_x)/this.$refs.map.clientWidth},unAdjustedResolution:function(){return"ip"===this.units?this.mPerFt*this.unAdjustedResolutionMeters:this.unAdjustedResolutionMeters},gridCenterMeters:function(){return{x:(this.min_x+this.max_x)/2,y:(this.min_y+this.max_y)/2}},gridCenter:function(){var e=this;return"ip"===this.units?_.mapValues(this.gridCenterMeters,function(t){return t*e.mPerFt}):this.gridCenterMeters},unAdjustedDelta:function(){var e=this.gridCenter.x*Math.cos(this.rotation)-this.gridCenter.y*Math.sin(this.rotation),t=this.gridCenter.y*Math.cos(this.rotation)+this.gridCenter.x*Math.sin(this.rotation);return{x:t,y:e}},gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(e){this.$store.dispatch("project/setGridVisible",{visible:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}},latitude:{get:function(){return this.$store.state.project.map.latitude},set:function(e){this.$store.dispatch("project/setMapLatitude",{latitude:e})}},longitude:{get:function(){return this.$store.state.project.map.longitude},set:function(e){this.$store.dispatch("project/setMapLongitude",{longitude:e})}},rotation:{get:function(){return this.$store.state.project.map.rotation},set:function(e){this.$store.dispatch("project/setMapRotation",{rotation:e})}}}),watch:{units:function(){this.updateMapView()},projectView:{handler:function(){this.updateMapView()},deep:!0}},components:{MapModal:l.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(95),s=n(a),d=i(29),l=i(644),c=n(l);t.default={computed:(0,o.default)({},(0,d.mapGetters)({componentInstance:"application/currentComponentInstance",currentStory:"application/currentStory",currentComponent:"application/currentComponent"}),{instanceType:function(){return this.componentInstance&&this.componentInstance.type},columns:function(){return this.componentInstance?s.default[this.instanceType].columns:[]},visibleColumns:function(){return _.reject(this.columns,"private")},showInstanceEditor:function(){return this.instanceType&&this.currentComponent.type.replace(/_definitions$/,"s")===this.instanceType}}),methods:{destroyComponent:function(){if("windows"===this.instanceType)this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:this.componentInstance});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:this.componentInstance});else{if("doors"!==this.instanceType)throw new Error("Unrecognized component type "+this.instanceType);this.$store.dispatch("models/destroyDoor",{story_id:this.currentStory.id,object:this.componentInstance})}},modifyComponentInstance:function(e,t,i){if("windows"===this.instanceType)this.$store.dispatch("models/modifyWindow",{id:e,key:t,value:i,story_id:this.currentStory.id});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/modifyDaylightingControl",{id:e,key:t,value:i,story_id:this.currentStory.id});else{if("doors"!==this.instanceType)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDoor",{id:e,key:t,value:i,story_id:this.currentStory.id})}}},components:{EditBar:c.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(247),o=n(r),a=i(178),s=n(a);t.default={props:["row","columns","updateRow","destroy"],components:{GenericInput:o.default,Delete:s.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(646),o=n(r),a=i(653),s=n(a),d=i(121),l=n(d),c=i(699),u=n(c),f=i(691),p=n(f);t.default={name:"EditableSelectList",props:["columns","rows","addRow","editRow","destroyRow","selectRow","selectedRowId","objectTypes","selectedObjectType","searchAvailable","compact","duplicateRow"],data:function(){return{search:""}},computed:{visibleColumns:function(){return _.reject(this.columns,"private")},searchedRows:function(){var e=this;return this.rows.filter(function(t){return _.chain(t).omit(["color"]).values().compact().some(function(t){return t.toLowerCase&&t.toLowerCase().includes(e.search.toLowerCase())}).value()})}},methods:{toggleCompact:function(){this.$emit("toggleCompact",!this.compact)}},watch:{rows:function(e,t){e===t&&e.length>t.length&&this.selectRow(_.maxBy(this.rows,function(e){return+e.id}))}},components:{EditableTable:o.default,LibrarySelect:s.default,PrettySelect:l.default,DoubleArrows:u.default,AddNew:p.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),o=n(r),a=i(727);i(626);var s=i(178),d=n(s),l=i(250),c=n(l);t.default={name:"EditableTable",props:["columns","rows","deleteRow","updateRow","selectRow","selectedItemId","duplicateRow"],data:function(){return{sortKey:function(e){return+e.id},sortDescending:!1,wrapperScrollLeft:0}},computed:{visibleColumns:function(){return o.default.reject(this.columns,"private")},sortedRows:function(){var e=o.default.sortBy(this.rows,this.sortKey);return this.sortDescending&&e.reverse(),e}},methods:{sortBy:function(e){this.sortKey===e?this.sortDescending?this.sortDescending=!1:this.sortKey=void 0:(this.sortKey=e,this.sortDescending=!0)}},components:{Delete:d.default,Copy:c.default,RecycleScroller:a.RecycleScroller}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["title"],data:function(){return{expanded:!1}},computed:{caret:function(){return this.expanded?"▼":"►"}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(53),o=n(r),a=i(3),s=n(a),d=i(660),l=n(d),c=i(248),u=n(c),f=i(312);t.default={name:"GenericInput",props:["col","row","onChange"],data:function(){return{showColorModal:!1}},methods:{blurOnEnter:function(e){13===e.keyCode&&this.$el.blur(),27==e.keyCode&&(this.$el.value=this.row[this.col.name],this.$el.blur())},openColorModal:function(){colorPickerModalService.openModal(this.row[this.col.name],this.onChange)}},computed:{selectData:function(){return s.default.toPairs(this.col.select_data(this.row,this.$store.state)).map(function(e){var t=(0,o.default)(e,2),i=t[0],n=t[1];return{val:n,display:i}})},rootState:function(){return this.$store.state},disabled:function(){return!!this.col.enabled&&!this.col.enabled(this.row)},colorStyles:function(){var e=this.row[this.col.name];if(!e||!e.slice)return{color:"#fff",background:"#000"};var t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return{color:(0,f.brightness)(t,i,n)<123?"#fff":"#000",background:e}},value:function(){try{return this.col.get(this.row,this.rootState)}catch(e){return this.row[this.col.name]}}},components:{TextureSelect:l.default,ColorPickerModal:u.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(30),o=n(r),a=i(6),s=n(a),d=i(29),l=i(126),c=i(313),u=n(c),f=i(283),p=n(f),m=i(15),h=n(m),g=i(46),y=n(g),v=i(80),w=n(v),x=i(181),b=i(282),S=n(b),C=i(122),M=i(78);t.default={name:"grid",data:function(){var e=this,t=function(t){return e.rwuToGrid(t,"x")},i=function(t){return e.rwuToGrid(t,"y")};return(0,s.default)({points:[],axis:{x:null,y:null},axis_generator:{x:null,y:null},reduceTicks:!1,componentFacingSelection:null,transform:{k:1,x:0,y:0},transformAtLastRender:M.zoomIdentity,lastMousePosition:null,handleMouseMove:null},(0,S.default)({xScale:t,yScale:i,selectImage:function(t){e.currentImage=t},updateImage:function(e){return window.application.$store.dispatch("models/updateImageWithData",e)}}),{crosshatchModifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}})},mounted:function(){this.handleMouseMove=(0,u.default)(this.highlightSnapTarget,100),this.renderGrid(),this.renderGrid=(0,l.debounce)(this.renderGrid,5),this.$refs.grid.addEventListener("reloadGrid",this.reloadGridAndScales),window.addEventListener("keyup",this.escapeAction),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$on("resize",this.reloadGridAndScales),window.eventBus.$on("zoomToFit",this.zoomToFit),window.eventBus.$on("scaleTo",this.scaleTo)},beforeDestroy:function(){this.$refs.grid.removeEventListener("reloadGrid",this.reloadGridAndScales),window.removeEventListener("keyup",this.escapeAction),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$off("resize",this.reloadGridAndScales),window.eventBus.$off("zoomToFit",this.zoomToFit),window.eventBus.$off("scaleTo",this.scaleTo)},computed:(0,s.default)({},(0,d.mapState)({currentMode:function(e){return e.application.currentSelections.mode},modeTab:function(e){return e.application.currentSelections.modeTab},currentTool:function(e){return e.application.currentSelections.tool},snapMode:function(e){return e.application.currentSelections.snapMode},previousStoryVisible:function(e){return e.project.previous_story.visible},gridVisible:function(e){return e.project.grid.visible},units:function(e){return e.project.config.units},spacing:function(e){return e.project.grid.spacing},scaleX:function(e){return e.application.scale.x},scaleY:function(e){return e.application.scale.y},windowDefs:function(e){return e.models.library.window_definitions},doorDefs:function(e){return e.models.library.door_definitions},windowWidths:function(e){return _.sumBy(e.models.library.window_definitions,"width")},allVertices:function(e){return _.flatMap(e.geometry,"vertices")}}),(0,d.mapGetters)({currentStory:"application/currentStory",currentStoryGeometry:"application/currentStoryGeometry",denormalizedGeometry:"application/currentStoryDenormalizedGeom",currentSpace:"application/currentSpace",currentShading:"application/currentShading",currentComponent:"application/currentComponent",currentComponentInstance:"application/currentComponentInstance",currentSpaceProperty:"application/currentSpaceProperty"}),{spacePropertyKey:function(){switch(this.currentSpaceProperty.type){case"building_units":return"building_unit_id";case"building_types":return"building_type_id";case"thermal_zones":return"thermal_zone_id";case"space_types":return"space_type_id";case"pitched_roofs":return"pitched_roof_id";case"construction_sets":return"construction_set_id";default:throw new Error("unrecognized space property type "+this.currentSpaceProperty.type)}},windowAndDoorDefs:function(){return[].concat((0,o.default)(this.windowDefs),(0,o.default)(this.doorDefs.map(function(e){return(0,s.default)({},e,{window_definition_mode:"Single Window"})})))},currentImage:{get:function(){return this.$store.getters["application/currentImage"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentComponentInstanceId:{get:function(){return"components"===this.$store.state.application.currentSelections.modeTab&&this.$store.state.application.currentSelections.component_instance_id},set:function(e){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:e})}},min_x:{get:function(){return this.$store.state.project.view.min_x},set:function(e){this.$store.dispatch("project/setViewMinX",{min_x:e})}},min_y:{get:function(){return this.$store.state.project.view.min_y},set:function(e){this.$store.dispatch("project/setViewMinY",{min_y:e})}},max_x:{get:function(){return this.$store.state.project.view.max_x},set:function(e){this.$store.dispatch("project/setViewMaxX",{max_x:e})}},max_y:{get:function(){return this.$store.state.project.view.max_y},set:function(e){this.$store.dispatch("project/setViewMaxY",{max_y:e})}},dimensions:{get:function(){return{min_x:this.$store.state.project.view.min_x,max_x:this.$store.state.project.view.max_x,min_y:this.$store.state.project.view.min_y,max_y:this.$store.state.project.view.max_y}},set:function(e){this.$store.dispatch("project/setDimensions",e)}},previousStory:function(){var e=this,t=this.$store.state.models.stories.findIndex(function(t){return t===e.currentStory});return 0===t?null:this.$store.state.models.stories[t-1]},previousStoryGeometry:function(){var e=this;return this.previousStory?this.$store.state.geometry.find(function(t){return t.id===e.previousStory.geometry_id}):null},previousStoryPolygons:function(){return this.previousStoryVisible&&this.previousStoryGeometry?this.polygonsFromGeometry(this.previousStoryGeometry,{previous_story:!0}):[]},images:function(){var e=this;return this.currentStory.images.map(function(t){return(0,s.default)({},t,{current:"Image"===e.currentTool&&e.currentImage&&e.currentImage.id===t.id,clickable:"Image"===e.currentTool&&(!e.currentImage||e.currentImage.id!==t.id)})})},polygons:function(){var e=this.polygonsFromGeometry(this.currentStoryGeometry);return this.previousStoryPolygons?this.previousStoryPolygons.concat(e):e},walls:function(){var e=_.keyBy(this.currentStoryGeometry.edges,"id"),t=_.keyBy(this.currentStoryGeometry.vertices,"id");return _.chain(this.currentStoryGeometry.faces).flatMap(function(e){return _.map(e.edgeRefs,"edge_id")}).sortBy(_.identity).groupBy(_.identity).mapValues("length").map(function(i,n){var r=e[n];return{id:n,start:t[r.v1],end:t[r.v2],interior:i>1}}).value()},daylightingControlLocs:function(){var e=this;return _.flatten(this.currentStory.spaces.map(function(t){return t.daylighting_controls.map(function(i){return(0,s.default)({},i,h.default.vertexForId(i.vertex_id,e.currentStoryGeometry),{id:i.id,type:"daylighting_controls",face_id:t.face_id})})}))},spaceFaces:function(){var e=this;return this.denormalizedGeometry.faces.filter(function(t){return _.find(e.currentStory.spaces,{face_id:t.id})})},spaceEdges:function(){return _.flatMap(this.spaceFaces,"edges")},visibleVerts:function(){var e=this;return this.allVertices.filter(function(t){return e.min_x<=t.x&&t.x<=e.max_x&&e.min_y<=t.y&&t.y<=e.max_y})},redraw:function(){var e=this.currentMode,t=this.polygons,i=this.images,n=this.windowDefs,r=this.doorDefs,o=this.currentSpace,a=this.currentShading;return{currentMode:e,polygons:t,images:i,windowDefs:n,doorDefs:r,currentSpace:o,currentShading:a}}}),watch:{gridVisible:function(){this.showOrHideAxes()},spacing:function(){this.updateGrid()},units:function(){this.reloadGridAndScales()},redraw:{handler:function(){this.draw()},deep:!0},currentTool:function(){this.points=[],this.draw(),this.clearHighlights(),"Image"===this.currentTool&&this.currentStory.images.length?this.currentImage&&_.includes(_.map(this.currentStory.images,"id"),this.currentImage.id)||(this.currentImage=this.currentStory.images[0]):_.includes(_.map(this.currentStory.spaces,"id"),this.currentSubSelection.id)||(this.currentSubSelection=this.currentStory.spaces[0])},currentSpace:function(){this.points=[]},currentShading:function(){this.points=[]},transform:function(e,t){e.k<.5?M.select("#svg-grid").selectAll(".polygon-text").style("display","none"):M.select("#svg-grid").selectAll(".polygon-text").style("display","initial")}},methods:(0,s.default)({},p.default,{windowCenterLocs:function(e){var t=this;return this.currentStory.windows.map(function(e){return{w:e,e:_.find(t.denormalizedGeometry.edges,{id:e.edge_id})}}).map(function(i){var n=i.w,r=i.e,o=t.denormalizeWindowOrDoor(r,n),a=(0,m.pointDistanceToSegment)(e,o),d=a.proj;return(0,s.default)({},o,{id:n.id,type:"windows"},d)})},doorCenterLocs:function(e){var t=this;return this.currentStory.doors.map(function(e){return{w:e,e:_.find(t.denormalizedGeometry.edges,{id:e.edge_id})}}).map(function(i){var n=i.w,r=i.e,o=t.denormalizeWindowOrDoor(r,n),a=(0,m.pointDistanceToSegment)(e,o),d=a.proj;return(0,s.default)({},o,{id:n.id,type:"doors"},d)})},currentComponentTypeLocs:function(e){if("window_definitions"===this.currentComponentType)return this.windowCenterLocs(e);if("daylighting_control_definitions"===this.currentComponentType)return this.daylightingControlLocs;if("door_definitions"===this.currentComponentType)return this.doorCenterLocs(e);throw new Error("unrecognized componentType: "+this.currentComponentType)},denormalizeWindowOrDoor:function(e,t){var i=(t.edge_id,t.alpha),n=t.window_definition_id,r=t.door_definition_id,o=_.find(this.windowAndDoorDefs,{id:n||r}),a=(0,C.windowLocation)(e,{alpha:i});return(0,s.default)({},(0,C.expandWindowAlongEdge)(e,a,o),{window_definition_mode:o.window_definition_mode,windowOrDoor:o.window_definition_mode?"window":"door",width:o.width,spacing:o.window_spacing,texture:o.texture})},windowsOnFace:function(e){var t=this;return _.flatMap(e.edges,function(e){return _.filter(t.currentStory.windows,{edge_id:e.id}).map(function(i){return(0,s.default)({},t.denormalizeWindowOrDoor(e,i),{
selected:i.id===t.currentComponentInstanceId,facingSelection:i.id===t.componentFacingSelection})})})},doorsOnFace:function(e){var t=this;return _.flatMap(e.edges,function(e){return _.filter(t.currentStory.doors,{edge_id:e.id}).map(function(i){return(0,s.default)({},t.denormalizeWindowOrDoor(e,i),{windowOrDoor:"door",selected:i.id===t.currentComponentInstanceId,facingSelection:i.id===t.componentFacingSelection})})})},polygonsFromGeometry:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.default.denormalize(e),r=n.faces.map(function(n){var r=y.default.modelForFace(t.$store.state.models,n.id),o=n.vertices.slice(0,-1),a=(0,s.default)({face_id:n.id,name:r.name,modelType:r.type,color:r.color,points:o,labelPosition:t.polygonLabelPosition(o),windows:t.windowsOnFace(n),doors:t.doorsOnFace(n),current:"Apply Property"!==t.currentTool&&t.currentSpace&&n.id===t.currentSpace.face_id||"Apply Property"!==t.currentTool&&t.currentShading&&n.id===t.currentShading.face_id||"Apply Property"===t.currentTool&&t.currentSpaceProperty&&r[t.spacePropertyKey]===t.currentSpaceProperty.id,daylighting_controls:(r.daylighting_controls||[]).map(function(i){return(0,s.default)({},h.default.vertexForId(i.vertex_id,e),{selected:i.id===t.currentComponentInstanceId,facingSelection:i.id===t.componentFacingSelection})})},i);if(!o.length)return null;if("space"===r.type)if("thermal_zones"===t.currentMode){var d=y.default.libraryObjectWithId(t.$store.state.models,r.thermal_zone_id);a.color=d?d.color:w.default.config.palette.neutral}else if("space_types"===t.currentMode){var l=y.default.libraryObjectWithId(t.$store.state.models,r.space_type_id);a.color=l?l.color:w.default.config.palette.neutral}else if("building_units"===t.currentMode){var c=y.default.libraryObjectWithId(t.$store.state.models,r.building_unit_id);a.color=c?c.color:w.default.config.palette.neutral}else if("building_types"===t.currentMode){var u=y.default.libraryObjectWithId(t.$store.state.models,r.building_type_id);a.color=u?u.color:w.default.config.palette.neutral}else if("pitched_roofs"===t.currentMode){var f=y.default.libraryObjectWithId(t.$store.state.models,r.pitched_roof_id);a.color=f?f.color:w.default.config.palette.neutral}else if("construction_sets"===t.currentMode){var p=y.default.libraryObjectWithId(t.$store.state.models,r.construction_set_id);a.color=p?p.color:w.default.config.palette.neutral}else if("spaces"!==t.currentMode)throw new Error("unknown assignable property: "+t.currentMode);return a});return _.sortBy(_.compact(r),"current")}})}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(46),d=n(s);t.default={name:"ImageUpload",mounted:function(){window.eventBus.$on("uploadImage",this.promptUpload.bind(this))},computed:(0,o.default)({},(0,a.mapState)({pxPerRWU:function(e){var t=e.application.scale.x,i=t.pixels,n=t.rwuRange;return i/(n[1]-n[0])},max_y:function(e){return e.project.view.max_y},min_y:function(e){return e.project.view.min_y},min_x:function(e){return e.project.view.min_x},max_x:function(e){return e.project.view.max_x}}),(0,a.mapGetters)({currentStory:"application/currentStory"})),methods:{promptUpload:function(){this.$refs.imageInput.click()},uploadImage:function(e){for(var t=e.target.files,i=this,n=function(e){var n=t[e],r=new FileReader;r.addEventListener("load",function(){var e=new Image;e.onload=function(){var t=e.height/i.pxPerRWU/4,n=e.width/i.pxPerRWU/4;i.$store.dispatch("models/createImageForStory",{story_id:i.currentStory.id,src:e.src,name:d.default.generateName(i.$store.state.models,"images",i.currentStory),height:t,width:n,x:(i.min_x+i.max_x)/2,y:(i.min_y+i.max_y)/2,naturalHeight:e.height,naturalWidth:e.width}),i.$refs.imageInput.value=""},e.src=r.result},!1),n&&r.readAsDataURL(n)},r=0;r<t.length;r++)n(r)}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(251),o=n(r);t.default={name:"Info",components:{InfoIcon:o.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(15),d=n(s);t.default={name:"inspector",data:function(){return{geometryInspector:!0,storyInspector:!1}},methods:{startpoint:function(e){var t=this.edgeForId(e.edge_id);if(e.reverse){var i=this.vertexForId(t.v2);return"v2 "+i.id+" ("+i.x+", "+i.y+")"}var n=this.vertexForId(t.v1);return"v1 "+n.id+" ("+n.x+", "+n.y+")"},endpoint:function(e){var t=this.edgeForId(e.edge_id);if(!e.reverse){var i=this.vertexForId(t.v2);return i.id+" (v2) ("+i.x+", "+i.y+")"}var n=this.vertexForId(t.v1);return n.id+" (v1) ("+n.x+", "+n.y+")"},edgeForId:function(e){return d.default.edgeForId(e,this.currentStoryGeometry)},vertexForId:function(e){return d.default.vertexForId(e,this.currentStoryGeometry)}},computed:(0,o.default)({},(0,a.mapGetters)({currentStory:"application/currentStory",currentSubSelectionFace:"application/currentSubSelectionFace",currentStoryGeometry:"application/currentStoryGeometry",currentSpace:"application/currentSpace",currentShading:"application/currentShading"}))}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return"stories"===e?"currentStory":_.includes(b.componentTypes,e)?"currentComponentDef":_.includes(b.assignableProperties,e)?"currentSpaceProperty":_.includes(["windows","daylighting_controls"],e)?"currentComponentInstance":"currentSubSelection"}Object.defineProperty(t,"__esModule",{value:!0});var o=i(328),a=n(o),s=i(327),d=n(s),l=i(42),c=n(l),u=i(6),f=n(u),p=i(29),m=i(95),h=n(m),g=i(645),y=n(g),v=i(46),w=n(v),x=i(15),b=i(24);t.default={name:"Library",props:["objectTypes","mode","searchAvailable","compact","addNewOnHotkey"],mounted:function(){document.body.addEventListener("keyup",this.hotkeyAddNew)},beforeDestroy:function(){document.body.removeEventListener("keyup",this.hotkeyAddNew)},computed:(0,f.default)({},(0,p.mapGetters)({currentStoryGeom:"application/currentStoryGeometry"}),{objectTypesDisplay:function(){return this.objectTypes.map(function(e){return{val:e,display:h.default[e].displayName}})},columns:function(){return h.default[this.mode]?h.default[this.mode].columns:[]},currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentSpaceProperty:{get:function(){return this.$store.getters["application/currentSpaceProperty"]},set:function(e){this.$store.dispatch("application/setCurrentSpacePropertyId",{id:e.id})}},currentComponentDef:{get:function(){return this.$store.getters["application/currentComponentDefinition"]},set:function(e){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:e.id})}},currentComponentInstance:{get:function(){return this.$store.getters["application/currentComponentInstance"]},set:function(e){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:e.id})}},selectedObject:{get:function(){return this[this.keyForCurrentMode]},set:function(e){this[this.keyForCurrentMode]=e}},keyForCurrentMode:function(){return r(this.mode)}},(0,p.mapState)({stories:function(e){return e.models.stories},modeTab:function(e){return e.application.currentSelections.modeTab}}),{spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},windows:function(){return this.currentStory.windows},daylighting_controls:function(){return _.flatMap(this.currentStory.spaces,function(e){return e.daylighting_controls})},rows:function(){return _.includes(["stories","spaces","shading","images","windows","daylighting_controls"],this.mode)?this[this.mode]:this.$store.state.models.library[this.mode]},componentInstanceMode:function(){return _.includes(["windows","daylighting_controls"],this.mode)},addRowPermitted:function(){return"stories"!==this.mode||"floorplan"===this.modeTab},renderByMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}}}),watch:{rows:function(){this.selectedObject&&_.includes(_.map(this.rows,"id"),this.selectedObject.id)||!(this.rows.length>0)||(this.selectedObject=this.rows[0])},mode:function(e,t){"currentSpaceProperty"===r(e)?this.renderByMode=this.mode:"currentSpaceProperty"===r(t)&&(this.renderByMode="spaces")}},methods:{hotkeyAddNew:function(e){this.addNewOnHotkey&&this.addRowPermitted&&e.ctrlKey&&"a"===e.key&&this.createObject()},changeMode:function(e){if(!_.includes(this.objectTypes,e))throw new Error("Unable to find "+e+" in options "+(0,c.default)(this.objectTypes));this.$emit("changeMode",e)},modifyObject:function(e,t,i){if(this.componentInstanceMode)return this.modifyComponentInstance(e,t,i);var n=_.find(this.rows,{id:e}),r=w.default.setValueForKey(n,this.$store,this.mode,t,i);r.success||window.eventBus.$emit("error",r.error)},modifyComponentInstance:function(e,t,i){if("windows"===this.mode)this.$store.dispatch("models/modifyWindow",{id:e,key:t,value:i,story_id:this.currentStory.id});else{if("daylighting_controls"!==this.mode)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDaylightingControl",{id:e,key:t,value:i,story_id:this.currentStory.id})}},createObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duplicate,i=void 0!==t&&t;if(i){var n=this.currentStory.floor_to_ceiling_height;this.$store.dispatch("models/initStory"),this.$store.dispatch("models/updateStoryWithData",{story:this.currentStory,floor_to_ceiling_height:n}),this.$store.dispatch("application/setCurrentTool",{tool:"Rectangle"})}else switch(this.mode){case"stories":return void this.$store.dispatch("models/initStory");case"spaces":this.$store.dispatch("models/initSpace",{story:this.currentStory});break;case"shading":this.$store.dispatch("models/initShading",{story:this.currentStory});break;case"images":window.eventBus.$emit("uploadImage");break;case"windows":case"daylighting_controls":window.eventBus.$emit("error","Create components by clicking where you would like it to be");break;default:this.$store.dispatch("models/createObjectWithType",{type:this.mode})}this.selectLatest()},duplicateRow:function(e){var t=this;return(0,d.default)(a.default.mark(function i(){var n,r;return a.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!t.stories.find(function(e){return e.id===t.selectedObject.id})){i.next=4;break}t.cloneStory(t.selectedObject),i.next=11;break;case 4:return t.createObject(),i.next=7,t.$nextTick();case 7:for(n=e.name;_.find(t.rows,{name:n});)r=n.match(/\((\d+)\)/),n=r?n.slice(0,r.index)+"("+(+r[1]+1)+")":n+" (2)";t.modifyObject(t.selectedObject.id,"name",n),t.columns.forEach(function(i){var n=i.name,r=i.readonly,o=i.private;"id"!==n&&"name"!==n&&"color"!==n&&(r||o||t.selectedObject[n]!==e[n]&&t.modifyObject(t.selectedObject.id,n,e[n]))});case 11:case"end":return i.stop()}},i,t)}))()},selectLatest:function(){var e=_.maxBy(this.rows,function(e){return+e.id});e&&(this.selectedObject=e)},cloneStory:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id});var t=(0,x.replaceIdsForCloning)(this.currentStoryGeom),i=t.clonedGeometry,n=t.idMap;this.createObject({duplicate:!0});var r=w.default.replaceIdsUpdateInfoForCloning(e,n,this.state,this.currentStory),o=r.clonedStory;this.destroyDuplicateSpaces(),this.$store.dispatch("models/cloneStory",o),this.$store.dispatch("geometry/cloneStoryGeometry",i);for(var a=this.currentStory.shading.length-1;a>=0;a--)this.$store.dispatch("models/destroyShading",{shading:this.currentStory.shading[a],story:this.currentStory})},destroyDuplicateSpaces:function(){this.$store.dispatch("models/destroySpace",{space:this.currentStory.spaces[0],story:this.currentStory})},destroyObject:function(e){var t=this;switch(this.mode){case"stories":return void this.$store.dispatch("models/destroyStory",{story:e});case"spaces":this.$store.dispatch("models/destroySpace",{space:e,story:this.$store.state.models.stories.find(function(i){return i[t.mode].find(function(t){return t.id===e.id})})});break;case"shading":this.$store.dispatch("models/destroyShading",{shading:e,story:this.$store.state.models.stories.find(function(i){return i[t.mode].find(function(t){return t.id===e.id})})});break;case"images":this.$store.dispatch("models/destroyImage",{image:e,story:this.$store.state.models.stories.find(function(i){return i[t.mode].find(function(t){return t.id===e.id})})});break;case"window_definitions":this.$store.dispatch("models/destroyWindowDef",{object:e});break;case"daylighting_control_definitions":this.$store.dispatch("models/destroyDaylightingControlDef",{object:e});break;case"door_definitions":this.$store.dispatch("models/destroyDoorDef",{object:e});break;case"windows":this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:e});break;case"daylighting_controls":this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:e});break;default:this.$store.dispatch("models/destroyObject",{object:e})}}},components:{EditableSelectList:y.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(178),o=n(r),a=i(250),s=n(a);t.default={name:"LibrarySelect",props:["rows","selectedItemId","selectItem","destroyItem","duplicateRow"],components:{Delete:o.default,Copy:s.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(726),o=n(r),a=i(177);t.default={name:"ColorPickerModal",props:["value"],computed:{color:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},mounted:function(){document.addEventListener("keydown",this.closeOnEsc)},beforeDestroy:function(){document.removeEventListener("keydown",this.closeOnEsc)},methods:{closeOnEsc:function(e){27===e.keyCode&&this.$emit("close")}},components:{Portal:a.Portal,Swatches:o.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(182),s=n(a),d=i(658),l=n(d);t.default={name:"MapModal",data:function(){return{address:""}},computed:{online:function(){return!window.api||!window.api.config||window.api.config.online},mapEnabled:{get:function(){return this.$store.state.project.map.enabled},set:function(e){this.$store.dispatch("project/setMapEnabled",{enabled:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}}},methods:{importFloorplanAsFile:function(e){var t=this,i=e.target.files[0],n=new FileReader;n.addEventListener("load",function(){t.importFloorplan(n.result)},!1),i&&n.readAsText(i)},importFloorplan:function(e){this.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:JSON.parse(e)}),this.$emit("close")}},components:(0,o.default)({},s.default,{NonChromeWarning:l.default})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ModalBase",props:["title"],methods:{close:function(){this.$emit("close")}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(42),o=n(r),a=i(249),s=n(a);t.default={name:"SaveAsModal",props:["saveWhat","dataToDownload"],mounted:function(){this.$refs.downloadName.focus()},methods:{downloadFile:function(){var e=document.createElement("a"),t=new Blob([(0,o.default)(this.dataToDownload)],{type:"text/json;charset=utf-8"});e.setAttribute("href",URL.createObjectURL(t)),e.setAttribute("download",this.$refs.downloadName.value+".json"),e.click(),console.log("exporting:\n"+(0,o.default)(this.dataToDownload)),this.$emit("close")}},components:{ModalBase:s.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(249),d=n(s),l=i(650),c=n(l),u=i(647),f=n(u);t.default={name:"Settings",computed:(0,o.default)({},(0,a.mapState)({ground:function(e){return e.project.ground},mapEnabled:function(e){return e.project.map.enabled}}),{floor_offset:{get:function(){return this.ground.floor_offset},set:function(e){this.$store.dispatch("project/modifyGround",{key:"floor_offset",val:e})}},azimuth_angle:{get:function(){return this.ground.azimuth_angle},set:function(e){this.$store.dispatch("project/modifyGround",{key:"azimuth_angle",val:e})}},tilt_slope:{get:function(){return this.ground.tilt_slope},set:function(e){this.$store.dispatch("project/modifyGround",{key:"tilt_slope",val:e})}},northAxis:{get:function(){return this.$store.state.project.north_axis+"°"},set:function(e){this.$store.dispatch("project/setNorthAxis",{north_axis:e})}}}),components:{ModalBase:d.default,Info:c.default,ExpandableDrawer:f.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(3),s=n(a),d=i(29),l=i(180),c=n(l),u=i(652),f=n(u);t.default={name:"navigation",data:function(){return{libraryExpanded:!1}},computed:(0,o.default)({},(0,d.mapGetters)({currentComponent:"application/currentComponent"}),(0,d.mapState)({modeTab:function(e){return e.application.currentSelections.modeTab}}),{currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e?e.id:null})}},spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},objectTypesForTab:function(){switch(this.modeTab){case"floorplan":return["spaces","shading","images"];case"shading":return["shading"];case"components":return["window_definitions","daylighting_control_definitions","door_definitions"];case"assign":return["building_units","building_types","thermal_zones","space_types","construction_sets","pitched_roofs"]}},mode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}},subselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(e){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:e})}}}),methods:{resetSize:function(){this.libraryExpanded},setWidthForOpenLibrary:function(){this.$emit("expanded",!!this.libraryExpanded),c.default.$emit("resize")}},watch:{libraryExpanded:function(){this.setWidthForOpenLibrary()},objectTypesForTab:function(e){s.default.includes(e,this.subselectionType)||("assign"===this.modeTab?this.subselectionType="thermal_zones":this.subselectionType=e[0])}},components:{Library:f.default}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{isChrome:function(){var e=window.chrome||window.qt,t=window.navigator,i=t.vendor,n=t.userAgent.indexOf("OPR")>-1,r=t.userAgent.indexOf("Edge")>-1,o=t.userAgent.match("CriOS");return!o&&(null!==e&&"undefined"!=typeof e&&"Google Inc."===i&&n===!1&&r===!1)}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(30),o=n(r),a=i(3),s=n(a);t.default={name:"PrettySelect",props:["options","value","label","disabled","editable","space_id","type","type_id"],computed:{normalizedOpts:function(){var e=this,t=function(t){return e.editable?[].concat((0,o.default)(t),[{val:"Create New",display:"Create New"}]):t};if(s.default.isArray(this.options)){if(!this.options.length)return t([]);if(s.default.has(this.options[0],"val")&&s.default.has(this.options[0],"display"))return t(this.options);if(s.default.isString(this.options[0]))return t(this.options.map(function(e){return{val:e,display:e}}))}return console.warn("unrecognized options structure",this.options),this.options}},methods:{handleChange:function(e){"Create New"===e.target.value?(e.stopPropagation(),e.preventDefault(),this.$refs.select.value=this.value,this.$store.dispatch("models/createObjectWithTypeAndSelect",{type:this.type,type_id:this.type_id,space_id:this.space_id})):this.$emit("change",e.target.value)}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(80),o=i(121),a=n(o);t.default={computed:{renderableProperties:function(){return["spaces","building_units","thermal_zones","space_types","construction_sets","pitched_roofs"]},renderableOptions:function(){return this.renderableProperties.map(function(e){return{display:(0,r.displayNameForMode)(e),val:e}})},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}}},components:{PrettySelect:a.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(79),o=(n(r),i(177)),a=i(24),s=i(3);n(s);t.default={name:"TextureSelect",props:["value","label","disabled"],data:function(){return{open:!1}},computed:{textures:function(){return a.textures}},methods:{choose:function(e){this.$emit("change",e),this.open=!1},ulStyle:function(){var e=this.$el&&this.$el.getBoundingClientRect();return e?{left:e.left+"px",top:e.top+e.height-17+"px",width:e.width+"px"}:{}}},components:{Portal:o.Portal}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(30),o=n(r),a=i(185),s=n(a),d=i(52),l=n(d),c=i(3),u=n(c),f=i(24);t.default={name:"Textures",data:function(){return{modifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}}},mounted:function(){this.loadCssStyles(),this.checkTexturesList()},methods:{loadCssStyles:function(){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=this.styles:e.appendChild(document.createTextNode(this.styles)),document.head.appendChild(e)},checkTexturesList:function(){var e=u.default.difference(f.textures,u.default.map(this.patterns,"id")),t=u.default.difference(u.default.map(this.patterns,"id"),f.textures);e.length&&console.error("[warning]: Textures were added to Textures.vue, but not to appconfig.js.\n  This will cause those textures not to be used. The following are missing from appconfig:\n  "+e),t.length&&console.error("[warning]: Textures were added to appconfig.js, but not to Textures.vue.\n  Those textures will not be visible. The following are missing from Textures.vue:\n  "+t)}},computed:{modSuffixes:function(){return u.default.filter((0,l.default)(this.modifiers),u.default.identity)},patterns:function(){var e=this;return u.default.reject((0,s.default)(this.$el.querySelectorAll("pattern")),function(t){return e.modSuffixes.some(function(e){return u.default.endsWith(t.getAttribute("id"),e)})})},cssStyles:function(){return this.patterns.map(function(e){var t=e.getAttribute("id"),i=e.getAttribute("width"),n=e.getAttribute("height"),r=e.innerHTML,o="<svg xmlns='http://www.w3.org/2000/svg' width='"+i+"' height='"+n+"'>"+r+"</svg>";return"\n            .texture-"+t+' {\n              background-image: url("data:image/svg+xml;base64,'+btoa(o)+'");\n              background-repeat: repeat;\n            }'})},windowStyles:function(){return u.default.map(this.patterns,function(e){return e.getAttribute("id")}).map(function(e){return'\n            #grid svg .polygons .window .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+');\n            }\n            #grid svg .polygons .window .facing-selection .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+'-facing-selection);\n            }\n            #grid svg .polygons .window .selected .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+'-selected);\n            }\n            #grid svg .highlight .window .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+"-highlight);\n            }\n          "})},styles:function(){return[].concat((0,o.default)(this.cssStyles),(0,o.default)(this.windowStyles)).join("\n")}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(29),s=i(655),d=n(s),l=i(656),c=n(l),u=i(121),f=n(u),p=i(80),m=n(p),h=i(182),g=n(h),y=i(659),v=n(y),w=i(643),x=n(w),b=i(24),S=n(b);t.default={name:"toolbar",data:function(){return{componentTypes:{daylighting_control_definitions:"Daylighting Control Definitions",window_definitions:"Window Definitions"},showSaveModal:!1,thingWereSaving:"",visibleComponentType:null,showGroundPropsModal:!1}},methods:{setImageTool:function(){this.tool="Image",0===this.currentStory.images.length&&window.eventBus.$emit("uploadImage")},zoomToFit:function(){window.eventBus.$emit("zoomToFit")},exportData:function(){return this.thingWereSaving="Floorplan",this.showSaveModal=!0,this.$store.getters.exportData},importDataAsFile:function(e,t){var i=this,n=e.target.files[0],r=new FileReader;r.addEventListener("load",function(){var e=void 0;try{e=JSON.parse(r.result)}catch(e){return void window.eventBus.$emit("error","Invalid JSON")}"library"===t?i.$store.dispatch("importLibrary",{data:e}):"floorplan"===t&&i.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:e})},!1),n&&r.readAsText(n)},undo:function(){this.$store.timetravel.undo()},redo:function(){this.$store.timetravel.redo()},updateUnits:function(e){this.allowSettingUnits?this.rwUnits=e:window.eventBus.$emit("error","Units must be set before any geometry is drawn.")},displayNameForMode:function(e){return m.default.displayNameForMode(e)}},computed:(0,o.default)({latestCreatedCompId:function(){return _.chain(this.allComponents).map("defs").flatten().map("id").map(Number).max().value()+""},allComponents:function(){var e=this;return b.componentTypes.map(function(t){return{defs:e.$store.state.models.library[t],name:S.default.modes[t],type:t}})},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition}},(0,a.mapGetters)({currentSpaceProperty:"application/currentSpaceProperty",currentStory:"application/currentStory"}),(0,a.mapState)({mapEnabled:function(e){return e.project.map.enabled},timetravelInitialized:function(e){return e.timetravelInitialized},showImportExport:function(e){return e.project.show_import_export},allowSettingUnits:function(e){return!1}}),{currentSubselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(e){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:e})}},availableTools:function(){var e=[];switch(this.modeTab){case"floorplan":e=["Rectangle","Polygon","Eraser","Select","Image"];break;case"shading":e=["Rectangle","Polygon","Eraser","Select"];break;case"components":e=["Place Component"];break;case"assign":e=["Apply Property"]}return!this.previousStoryVisible||"floorplan"!==this.modeTab&&"shading"!==this.currentMode||e.push("Fill"),e},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}},modeTab:{get:function(){return this.$store.state.application.currentSelections.modeTab},set:function(e){this.$store.dispatch("application/setCurrentModeTab",{modeTab:e})}},gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(e){this.$store.dispatch("project/setGridVisible",{visible:e})}},mapVisible:{get:function(){return this.$store.state.project.map.visible},set:function(e){this.$store.dispatch("project/setMapVisible",{visible:e})}},previousStoryVisible:{get:function(){return this.$store.state.project.previous_story.visible},set:function(e){this.$store.dispatch("project/setPreviousStoryVisible",{visible:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}},spacing:{get:function(){return this.$store.state.project.grid.spacing},set:function(e){this.$store.dispatch("project/setSpacing",{spacing:e})}},currentComponent:{get:function(){return this.$store.getters["application/currentComponent"]},set:function(e){e&&e.definition&&e.definition.id&&this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:e.definition.id})}},rwUnits:{get:function(){return"ip"===this.$store.state.project.config.units?"ft":"m"},set:function(e){this.$store.dispatch("project/setUnits",{units:"ft"===e?"ip":"si"})}},snapMode:{get:function(){return this.$store.state.application.currentSelections.snapMode},set:function(e){this.$store.dispatch("application/setCurrentSnapMode",{snapMode:e})}},dataToDownload:function(){return this.$store.getters.exportData}}),watch:{modeTab:function(){"assign"===this.modeTab&&this.currentSpaceProperty?this.currentMode=this.currentSpaceProperty.type:this.currentMode="spaces"},tool:function(e){this.availableTools.indexOf(e)===-1&&"Map"!==e&&(this.tool=this.availableTools[0]),"Image"===this.tool&&"images"!==this.currentSubselectionType?this.currentSubselectionType="images":"Image"!==this.tool&&"images"===this.currentSubselectionType&&(this.currentSubselectionType="spaces")},availableTools:function(){_.includes(this.availableTools,this.tool)||(this.tool=this.availableTools[0])},currentSubselectionType:function(e){"images"===e&&"Image"!==this.tool?this.tool="Image":"images"!==e&&"Image"===this.tool&&(this.tool=this.availableTools[0])},latestCreatedCompId:function(){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:this.latestCreatedCompId})}},components:(0,o.default)({PrettySelect:f.default,SaveAsModal:d.default,Settings:c.default,RenderByDropdown:v.default,ComponentInstanceEditBar:x.default},g.default)}},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.xScale,i=e.yScale,n=e.edge,r=e.offset,o=(0,T.unitPerpVector)(n.start,n.end),a=o.dx,s=o.dy;return[[t(n.start.x)+r*a,i(n.start.y)+r*s],[t(n.start.x)-r*a,i(n.start.y)-r*s],[t(n.end.x)-r*a,i(n.end.y)-r*s],[t(n.end.x)+r*a,i(n.end.y)+r*s],[t(n.start.x)+r*a,i(n.start.y)+r*s]]}function a(e,t,i,n){C.select(i).selectAll(".single-window, .repeating-windows").remove();var r=C.select(i).selectAll(".window-wall-ratio").data([n]),a=r.enter().append("g").attr("class","window-wall-ratio");a.append("path").attr("class","hatch");var s=C.line(),d=r.merge(a);d.classed("selected",function(e){return e.selected}),d.classed("facing-selection",function(e){return e.facingSelection}),d.select(".hatch").attr("d",s(o({edge:n,xScale:e,yScale:t,offset:8}))).attr("data-texture",n.texture||"diagonal-stripes-4")}function s(e,t,i,n){var r=C.select(i).selectAll(".door").data([n]),a=r.enter().append("g").attr("class","door");a.append("path").attr("class","hatch");var s=C.line(),d=r.merge(a);d.exit().remove(),
d.classed("selected",function(e){return e.selected}),d.classed("facing-selection",function(e){return e.facingSelection}),d.select(".hatch").attr("d",s(o({edge:n,xScale:e,yScale:t,offset:8}))).attr("data-texture",n.texture)}function d(e,t,i,n){C.select(i).selectAll(".window-wall-ratio, .repeating-windows").remove();var r=C.select(i).selectAll(".single-window").data([n]),o=r.enter().append("g").attr("class","single-window");o.append("line").attr("class","pane"),o.append("circle"),o.append("line").attr("class","start-linecap"),o.append("line").attr("class","end-linecap");var a=r.merge(o);a.classed("selected",function(e){return e.selected}),a.classed("facing-selection",function(e){return e.facingSelection}),a.select("line.pane").attr("x1",function(t){return e(t.start.x)}).attr("y1",function(e){return t(e.start.y)}).attr("x2",function(t){return e(t.end.x)}).attr("y2",function(e){return t(e.end.y)}),a.each(function(i){var n=(0,T.unitPerpVector)(i.start,i.end),r=n.dx,o=n.dy,a=6,s=C.select(this);s.select(".start-linecap").attr("x1",e(i.start.x)+a*r).attr("y1",t(i.start.y)+a*o).attr("x2",e(i.start.x)-a*r).attr("y2",t(i.start.y)-a*o),s.select(".end-linecap").attr("x1",e(i.end.x)+a*r).attr("y1",t(i.end.y)+a*o).attr("x2",e(i.end.x)-a*r).attr("y2",t(i.end.y)-a*o),(i.selected||i.facingSelection)&&s.raise()}),a.select("circle").attr("cx",function(t){return e(t.center.x)}).attr("cy",function(e){return t(e.center.y)}).attr("r","2")}function l(e,t,i,n){var r=n.start,a=n.end,s=n.width,l=n.spacing;C.select(i).selectAll(".window-wall-ratio, .single-window").remove();var c=C.select(i).selectAll(".repeating-windows").data([n]),u=c.enter().append("g").attr("class","repeating-windows");u.append("path").attr("class","box"),u.append("g").attr("class","sub-windows");var f=C.line(),p=c.merge(u);p.classed("selected",function(e){return e.selected}),p.classed("facing-selection",function(e){return e.facingSelection}),p.select(".box").attr("d",f(o({edge:n,xScale:e,yScale:t,offset:6})));var m=(0,T.unitVector)(r,a),h=(0,T.repeatingWindowCenters)({start:r,end:a,spacing:l,width:s}),g=m.dx*s,y=m.dy*s,v=h.map(function(e){return(0,b.default)({},n,{center:e,start:{x:e.x-g/2,y:e.y-y/2},end:{x:e.x+g/2,y:e.y+y/2}})}),_=p.select(".sub-windows").selectAll(".sub-window").data(v);_.exit().remove(),_.merge(_.enter().append("g").attr("class","sub-window")).each(function(i){d(e,t,this,i)})}function c(){function e(e){e.exit().remove(),e.merge(e.enter().append("g").attr("class","window")).each(function(e){if("door"===e.windowOrDoor)s(t,i,this,e);else if("Single Window"===e.window_definition_mode)d(t,i,this,e);else if("Window to Wall Ratio"===e.window_definition_mode)a(t,i,this,e);else{if("Repeating Windows"!==e.window_definition_mode)throw new Error("unexpected window_definition_mode: "+e.window_definition_mode);l(t,i,this,e)}})}var t=O.default.identity,i=O.default.identity;return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e}function u(){function e(e){e.exit().remove();var o=e.enter().append("g").attr("class","distance-measure").attr("transform",function(e){var t=(0,T.unitPerpVector)(e.start,e.end),i=t.dx,r=t.dy,o=n*i,a=n*r;return"translate("+o+", "+a+")"});o.append("line"),o.append("text"),o.append("path").attr("class","start"),o.append("path").attr("class","end");var a=e.merge(o);a.select("text").attr("x",function(e){return(1-r)*t(e.start.x)+r*t(e.end.x)}).attr("y",function(e){return(1-r)*i(e.start.y)+r*i(e.end.y)}).attr("dominant-baseline","text-before-edge").attrs(function(e){var t=(0,T.unitPerpVector)(e.start,e.end),i=t.dx,n=t.dy,r=4;return{dx:i*r,dy:n*r}}).text(function(e){var t=(0,T.distanceBetweenPoints)(e.start,e.end),i=Math.round(100*t)/100;return""+i}),a.select("line").attrs(function(e){var n=(0,T.unitVector)(e.start,e.end),r=n.dx,o=n.dy,a=11.5,s=r*a,d=o*a;return{x1:t(e.start.x)+s,y1:i(e.start.y)-d,x2:t(e.end.x)-s,y2:i(e.end.y)+d}});var s="M -6,-2 V 2 L0,0 Z",d=function(e){var t=180*(0,T.edgeDirection)(e)/Math.PI,i=e.start.x===e.end.x?e.start.y>e.end.y?0:180:e.start.x>e.end.x?0:180;return i-t};a.select("path.start").attr("transform",function(e){return"translate("+t(e.start.x)+", "+i(e.start.y)+") scale(2) rotate("+d(e)+")"}).attr("d",s),a.select("path.end").attr("transform",function(e){return"translate("+t(e.end.x)+", "+i(e.end.y)+") scale(2) rotate("+(180+d(e))+")"}).attr("d",s)}var t=O.default.identity,i=O.default.identity,n=20,r=1;return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e.lineOffset=function(t){return arguments.length?(n=t,e):n},e.labelPosition=function(t){return arguments.length?((t<0||t>1)&&console.warn("Expected labelPosition to be in [0, 1] (got "+t+")"),r=t,e):r},e}function f(){function e(e){n.xScale(t).yScale(i),e.exit().remove(),e.merge(e.enter().append("g").classed("window-guideline component-guideline",!0)).selectAll(".distance-measure").data(e.merge(e.enter()).data().map(function(e){return{start:e.edge_start,end:e.center}})).filter(function(e){return"Single Window"===e.window_definition_mode}).call(n)}var t=O.default.identity,i=O.default.identity,n=u();return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e}function p(){function e(e){e.exit().remove();var n=e.enter().append("g").attr("class","daylighting-control");n.append("circle").attr("class","bg"),n.append("path").attr("class","quadrants");var r=e.merge(n);r.classed("selected",function(e){return e.selected}),r.classed("facing-selection",function(e){return e.facingSelection}),r.select("circle.bg").attr("cx",function(e){return t(e.x)}).attr("cy",function(e){return i(e.y)}).attr("r",10),r.select("path.quadrants").attr("d",function(e){var n=t(e.x),r=i(e.y),o=10;return"M"+n+" "+r+" L"+(n+o)+" "+r+" A "+o+" "+o+" 0 0 1 "+n+" "+(r+o)+" L "+n+" "+(r-o)+" A "+o+" "+o+" 0 0 0 "+(n-o)+" "+r+" Z"}),r.each(function(e){(e.selected||e.facingSelection)&&C.select(this).raise()})}var t=O.default.identity,i=O.default.identity;return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e}function m(){function e(e){n.xScale(t).yScale(i),e.exit().remove();var r=e.enter().append("g").classed("daylighting-control-guideline component-guideline",!0),o=O.default.flatMap(e.merge(e.enter()).data(),function(e){var t=(0,T.unitVector)(e.nearestEdge.v1,e.nearestEdge.v2),i={start:e.loc,end:e.nearestEdge.proj},n=(i.end.x-i.start.x)*t.dx+(i.end.y-i.start.y)*t.dy,r={start:i.start,end:{x:i.start.x+n*t.dx,y:i.start.y+n*t.dy}},o={start:r.end,end:i.end};return[i,o,r].filter(function(e){var t=e.start,i=e.end;return(0,T.distanceBetweenPoints)(t,i)>.01})}),a=e.merge(r);a.selectAll(".distance-measure").data(o).call(n)}var t=O.default.identity,i=O.default.identity,n=u().lineOffset(0).labelPosition(.5);return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e}function h(e,t,i){var n=Math.sqrt(e*e+t*t),r=e/n,o=t/n,a=Math.PI*i/180,s={x:r*Math.cos(a)-o*Math.sin(a),y:r*Math.sin(a)+o*Math.cos(a)};return O.default.minBy(I,function(e){return(0,T.distanceBetweenPoints)(e.vec,s)}).cursor}function g(){function e(e){var o=(t(100)-t(0))/100,a=void 0,s=void 0,d=void 0,l=void 0,c=function(e){var t=d-a,i=l-s,n=-1*e.r*Math.PI/180;return{dx:t*Math.cos(n)-i*Math.sin(n),dy:t*Math.sin(n)+i*Math.cos(n)}},u=C.drag().on("start",function(){C.event.sourceEvent.stopPropagation();var e=C.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=l=void 0}).on("drag",function(e){var t=C.mouse(document.querySelector("#grid svg")),i=(0,w.default)(t,2);d=i[0],l=i[1];var n=c(e),r=n.dx,o=n.dy;C.select(this).attr("transform","translate("+r+", "+o+")")}).on("end",function(e){if("undefined"!=typeof d){var t=c(e);t.dx,t.dy;n({image:e,x:e.x+(d-a)/o,y:e.y-(l-s)/o})}}),f=function(e){var n={x:t(e.x),y:i(e.y)},r={x:n.x+(n.x-a),y:n.y+(n.y-s)},o={x:a-r.x,y:s-r.y},c=(0,T.distanceBetweenPoints)({x:d,y:l},r),u=(0,T.distanceBetweenPoints)({x:a,y:s},r),f={x:c*o.x/u,y:c*o.y/u},p=c/u,m={x:(f.x-o.x)/2,y:(f.y-o.y)/2},h=C.zoomIdentity.translate(m.x,m.y).scale(p);return h},p=C.drag().on("start",function(){C.event.sourceEvent.stopPropagation();var e=C.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=l=void 0}).on("drag",function(e){var t=C.mouse(document.querySelector("#grid svg")),i=(0,w.default)(t,2);d=i[0],l=i[1],C.select(this.parentNode.parentNode).attr("transform",f(e))}).on("end",function(e){if("undefined"!=typeof d){var t=f(e);n({image:e,width:e.width*t.k,height:e.height*t.k,x:e.x+t.x/o,y:e.y-t.y/o})}}),m=function(e){var n={x:t(e.x),y:i(e.y)},r=(0,T.edgeDirection)({start:n,end:{x:a,y:s}}),o=(0,T.edgeDirection)({start:n,end:{x:d,y:l}});return 180*(o-r)/Math.PI+180*(t(e.x)>d!=t(e.x)>a)},g=C.drag().on("start",function(){C.event.sourceEvent.stopPropagation();var e=C.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=l=void 0}).on("drag",function(e){var t=C.mouse(document.querySelector("#grid svg")),i=(0,w.default)(t,2);d=i[0],l=i[1],C.select(this.parentNode.parentNode).attr("transform","rotate("+m(e)+")")}).on("end",function(e){if("undefined"!=typeof d){var t=m(e);n({image:e,r:t+e.r})}});e.exit().remove();var y=e.enter().append("g").attr("class","image-group"),v=y.append("g").attr("class","moveable-wrapper");v.append("image");var _=v.append("g").attr("class","controls");_.append("line").attr("class","rotation-to-center"),_.append("circle").attr("class","rotation-handle"),["tl","tr","bl","br"].forEach(function(e){return _.append("circle").attr("class","corner "+e)});var x=e.merge(y);x.attr("transform",function(e){return"translate("+t(e.x)+", "+i(e.y)+") rotate("+e.r+")"}),x.select("image").attr("x",function(e){return-1*o*e.width/2}).attr("y",function(e){return-1*o*e.height/2}).attr("width",function(e){return o*e.width}).attr("height",function(e){return o*e.height}).attr("opacity",function(e){return e.opacity}).attr("xlink:href",function(e){return e.src}),x.select(".moveable-wrapper").attr("transform","translate(0,0)").style("cursor",function(e){return e.current?"move":e.clickable?"pointer":null}).style("pointer-events",function(e){return e.current?"auto":"none"}),x.select(".controls").attr("display",function(e){return e.current?"":"none"}),x.each(function(e){var t=C.select(this);e.clickable?t.on("click",function(e){C.event.stopPropagation(),r(e)}):t.on("click",null),e.current?(t.select(".moveable-wrapper").call(u),t.select(".controls .center").attr("cx",0).attr("cy",0).attr("r",3),t.select(".controls .rotation-handle").attr("cx",0).attr("cy",o*e.height*.7).attr("r",5).style("cursor",D).call(g),t.select(".controls .rotation-to-center").attr("x1",0).attr("y1",o*e.height/2).attr("x2",0).attr("y2",o*e.height*.7-5),O.default.forIn({tl:[-1,-1],tr:[1,-1],bl:[-1,1],br:[1,1]},function(i,n){var r=(0,w.default)(i,2),a=r[0],s=r[1];t.select(".controls ."+n).attr("cx",a*o*e.width/2).attr("cy",s*o*e.height/2).attr("r",5).style("cursor",h(a,s,e.r)).call(p)})):t.select(".moveable-wrapper, .rotation-handle, .corner").on(".drag",null)})}var t=O.default.identity,i=O.default.identity,n=O.default.identity,r=O.default.identity;return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e.updateImage=function(t){return arguments.length?(n=t,e):n},e.selectImage=function(t){return arguments.length?(r=t,e):r},e}function y(){function e(e){e.exit().remove();var t=e.enter().append("path").attr("class","wall"),i=e.merge(t);i.attr("d",function(e){return n([e.start,e.end])}).attr("class",function(e){return"wall "+(e.interior?"interior":"exterior")}).attr("data-edge-id",function(e){return e.id})}var t=O.default.identity,i=O.default.identity,n=C.line().x(function(e){return t(e.x)}).y(function(e){return i(e.y)});return e.xScale=function(i){return arguments.length?(t=i,e):t},e.yScale=function(t){return arguments.length?(i=t,e):i},e}function v(e){var t=e.xScale,i=e.yScale,n=e.updateImage,r=e.selectImage;return{drawWindow:c().xScale(t).yScale(i),drawWindowGuideline:f().xScale(t).yScale(i),drawDaylightingControl:p().xScale(t).yScale(i),drawDaylightingControlGuideline:m().xScale(t).yScale(i),drawImage:g().xScale(t).yScale(i).updateImage(n).selectImage(r),drawWall:y().xScale(t).yScale(i)}}Object.defineProperty(t,"__esModule",{value:!0});var _=i(53),w=r(_),x=i(6),b=r(x);t.drawWindow=c,t.drawWindowGuideline=f,t.drawDaylightingControl=p,t.drawDaylightingControlGuideline=m,t.drawImage=g,t.drawWall=y,t.default=v;var S=i(78),C=n(S);i(599);var M=i(3),O=r(M),T=i(15),R=1/Math.sqrt(2),I=[{vec:{x:1,y:0},cursor:"ew-resize"},{vec:{x:-1,y:0},cursor:"ew-resize"},{vec:{x:0,y:1},cursor:"ns-resize"},{vec:{x:0,y:-1},cursor:"ns-resize"},{vec:{x:R,y:R},cursor:"nwse-resize"},{vec:{x:-1*R,y:-1*R},cursor:"nwse-resize"},{vec:{x:R,y:-1*R},cursor:"nesw-resize"},{vec:{x:-1*R,y:R},cursor:"nesw-resize"}],D="url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="25.6" height="25.6" viewBox="0 0 25.6 25.6">  <path transform="scale(0.5)" d="M25.6,44.8c7.9406,0,14.4-6.4594,14.4-14.4s-6.4594-14.4-14.4-14.4v9.6L9.6,12.8L25.6,0v9.6c11.4688,0,20.8,9.3313,20.8,20.8s-9.3313,20.8-20.8,20.8S4.8,41.8688,4.8,30.4h6.4C11.2,38.3406,17.6594,44.8,25.6,44.8z"/></svg>')+") 12.8 12.8, pointer"},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,i){return b.default.range(Math.ceil(e/i)*i,t,i)}function a(e,t){return new v.zoomIdentity.constructor(t.k/e.k,(t.x/t.k-e.x/e.k)*t.k,(t.y/t.k-e.y/e.k)*t.k)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(42),d=r(s),l=i(53),c=r(l),u=i(30),f=r(u),p=i(6),m=r(p),h=i(70),g=r(h),y=i(78),v=n(y),_=i(630),w=r(_),x=i(3),b=r(x),S=i(122),C=i(15),M=r(C),O=i(46),T=r(O);t.default={gridClicked:function(){"Eraser"!==this.currentTool&&("Rectangle"!==this.currentTool&&"Polygon"!==this.currentTool||!this.currentSpace&&!this.currentShading)||this.addPoint(),"Place Component"===this.currentTool&&this.placeOrSelectComponent(),"Image"===this.currentTool&&this.deselectImages(),"Apply Property"===this.currentTool&&this.assignProperty()},assignProperty:function(){var e=this;if(this.currentSpaceProperty){var t=v.mouse(this.$refs.grid),i={x:t[0],y:t[1]},n=this.gridPointToRWU(i),r=this.currentStory.spaces.find(function(t){var i=b.default.find(e.denormalizedGeometry.faces,{id:t.face_id});return!!i&&M.default.pointInFace(n,i.vertices)});r&&this.$store.dispatch("models/updateSpaceWithData",(0,g.default)({space:r},this.spacePropertyKey,this.currentSpaceProperty.id))}},deselectImages:function(){this.$store.dispatch("application/setCurrentSubSelectionId",this.currentStory.spaces[0])},componentToSelect:function(){var e=v.mouse(this.$refs.grid),t={x:e[0],y:e[1]},i=this.gridPointToRWU(t),n=b.default.minBy(this.currentComponentTypeLocs(i),function(e){return(0,C.distanceBetweenPoints)(e,i)}),r=n&&(0,C.distanceBetweenPoints)(n,i);return!n||r>this.spacing/2?null:n},handleKeyDown:function(e){8!==e.keyCode&&46!==e.keyCode||b.default.includes(["input","textarea"],document.activeElement.tagName.toLowerCase())||this.deleteElement()},deleteElement:function(){"components"===this.modeTab&&this.removeSelectedComponent()},removeSelectedComponent:function(){var e=this.currentComponentInstance;if(e){var t={story_id:this.currentStory.id,object:{id:e.id}};"windows"===e.type?this.$store.dispatch("models/destroyWindow",t):"daylighting_controls"===e.type?this.$store.dispatch("models/destroyDaylightingControl",t):"doors"===e.type?this.$store.dispatch("models/destroyDoor",t):console.error("unrecognized component to remove: "+e)}},placeOrSelectComponent:function(){var e=!v.event.shiftKey&&this.componentToSelect();if(e)return void(this.currentComponentInstanceId=e.id);if("daylighting_control_definitions"===this.currentComponentType)this.placeDaylightingControl();else{if("window_definitions"!==this.currentComponentType&&"door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.placeWindowOrDoor()}},highlightComponentToSelect:function(){if(v.event.shiftKey)return null;var e=this.componentToSelect();if(this.componentFacingSelection=e&&e.id,e)if("windows"===e.type||"doors"===e.type)this.highlightWindowGuideline(e);else{if("daylighting_controls"!==e.type)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDaylightingControlGuideline(e)}else;return e},placeWindowOrDoor:function(){var e,t=v.mouse(this.$refs.grid),i={x:t[0],y:t[1]},n=this.gridPointToRWU(i),r=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,n,this.currentComponentDefinition,2*this.spacing,this.spacing),o="window_definitions"===this.currentComponentType?"Window":"Door";if(r){var a=(e={story_id:this.currentStory.id,edge_id:r.edge_id},(0,g.default)(e,o.toLowerCase()+"_definition_id",this.currentComponentDefinition.id),(0,g.default)(e,"alpha",r.alpha),e);this.$store.dispatch("models/create"+o,a)}},raiseOrLowerImages:function(){"Image"===this.currentTool?v.select("#grid svg .images").raise():v.select("#grid svg .images").lower()},placeDaylightingControl:function(){var e=v.mouse(this.$refs.grid),t={x:e[0],y:e[1]},i={x:this.gridToRWU(t.x,"x"),y:this.gridToRWU(t.y,"y")},n=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,i,this.spacing);if(n){var r=(0,m.default)({story_id:this.currentStory.id,face_id:n.face_id,daylighting_control_definition_id:this.currentComponentDefinition.id},n);this.$store.dispatch("models/createDaylightingControl",r)}},addPoint:function(){var e=v.mouse(this.$refs.grid),t={x:e[0],y:e[1]},i=this.findSnapTarget(t);if("vertex"===i.type&&i.origin&&"Polygon"===this.currentTool)return void this.savePolygonFace();var n="edge"===i.type?i.projection:i;this.points.push(n),this.drawPoints(),"Eraser"===this.currentTool&&2===this.points.length&&this.eraseRectangularSelection(),"Rectangle"===this.currentTool&&2===this.points.length&&this.saveRectangularFace()},highlightSnapTarget:function(e){if("Eraser"===this.currentTool||"Place Component"===this.currentTool&&this.currentComponentDefinition||("Rectangle"===this.currentTool||"Polygon"===this.currentTool)&&(this.currentSpace||this.currentShading)){this.clearHighlights();var t=void 0;if(v.event instanceof MouseEvent){var i=v.mouse(this.$refs.grid);t={x:i[0],y:i[1]}}else t=this.lastMousePosition;if(t){if("Place Component"===this.currentTool)return void this.highlightComponentToPlaceOrSelect(t);var n=this.findSnapTarget(t),r="edge"===n.type?n.projection:n,o=n.synthetic?n.originalPt:r;this.drawGuideLines(e,r),"vertex"===n.type?v.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",5).attr("ry",5).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"):v.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",3).attr("ry",3).classed("gridpoint",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),"edge"===n.type&&"Eraser"!==this.currentTool&&v.select("#grid svg").append("line").attr("x1",this.rwuToGrid(n.v1GridCoords.x,"x")).attr("y1",this.rwuToGrid(n.v1GridCoords.y,"y")).attr("x2",this.rwuToGrid(n.v2GridCoords.x,"x")).attr("y2",this.rwuToGrid(n.v2GridCoords.y,"y")).attr("stroke-width",1).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),this.lastMousePosition=t}}},clearHighlights:function(){v.selectAll("#grid .highlight, #grid .gridpoint, #grid .guideline").remove(),this.componentFacingSelection=null},clearComponentHighlights:function(){v.selectAll("#grid .highlight, #grid .component-guideline").remove(),this.componentFacingSelection=null},highlightComponentToPlaceOrSelect:function(e){this.highlightComponentToSelect()||this.highlightComponentToPlace(e)},highlightComponentToPlace:function(e){if("window_definitions"===this.currentComponentType)this.highlightWindow(e);else if("daylighting_control_definitions"===this.currentComponentType)this.highlightDaylightingControl(e);else{if("door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDoor(e)}},highlightWindow:function(e){var t=this.gridPointToRWU(e),i=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,t,this.currentComponentDefinition,2*this.spacing,this.spacing);i&&("Single Window"!==this.currentComponentDefinition.window_definition_mode&&b.default.filter(this.windowCenterLocs(t),{edge_id:i.edge_id}).filter(function(e){return"Single Window"!==e.window_definition_mode}).length||(v.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,m.default)({},i,{window_definition_mode:this.currentComponentDefinition.window_definition_mode,width:this.currentComponentDefinition.width,spacing:this.currentComponentDefinition.window_spacing,texture:this.currentComponentDefinition.texture})]).call(this.drawWindow),this.highlightWindowGuideline(i)))},highlightDoor:function(e){var t=this.gridPointToRWU(e),i=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,t,this.currentComponentDefinition,2*this.spacing,this.spacing);i&&(v.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,m.default)({},i,{window_definition_mode:null,windowOrDoor:"door",width:this.currentComponentDefinition.width,texture:this.currentComponentDefinition.texture})]).call(this.drawWindow),this.highlightWindowGuideline(i))},highlightWindowGuideline:function(e){v.select("#grid svg").append("g").classed("guideline",!0).selectAll(".window-guideline").data([e]).call(this.drawWindowGuideline)},highlightDaylightingControl:function(e){var t=this.gridPointToRWU(e),i=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,t,this.spacing);i&&(v.select("#grid svg").append("g").classed("highlight",!0).selectAll(".daylighting-control").data([i]).call(this.drawDaylightingControl),this.highlightDaylightingControlGuideline(i))},highlightDaylightingControlGuideline:function(e){var t=b.default.find(this.denormalizedGeometry.faces,{id:e.face_id}),i=this.windowsOnFace(t),n=(0,S.findClosestWindow)(i,e)||(0,S.findClosestEdge)(t.edges,e);v.select("#grid svg").append("g").classed("guideline",!0).selectAll(".daylighting-control-guideline").data([{loc:e,nearestEdge:n}]).call(this.drawDaylightingControlGuideline)},drawGuideLines:function(e,t){var i=this;if(this.points.length){this.eraseGuidelines();var n=void 0,r=void 0;"Polygon"===this.currentTool?(n=[t,this.points[this.points.length-1]],r=[n]):"Rectangle"!==this.currentTool&&"Eraser"!==this.currentTool||(n=[this.points[0],{x:t.x,y:this.points[0].y},t,{x:this.points[0].x,y:t.y},this.points[0]],r=[[n[0],n[1]],[n[1],n[2]]]);var o="Polygon"===this.currentTool?[].concat((0,f.default)(this.points),[t,this.points[0]]):n,a=[o,this.points],s=v.select("#grid svg");if(s.selectAll(".guideline-line").append("path").datum(n).attr("fill","none").classed("guideline guideline-line",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",v.line().x(function(e){return i.rwuToGrid(e.x,"x")}).y(function(e){return i.rwuToGrid(e.y,"y")})).lower(),s.selectAll(".guideline-area").data(a).enter().append("polygon").attr("points",function(e){return e.map(function(e){return[i.rwuToGrid(e.x,"x"),i.rwuToGrid(e.y,"y")].join(",")}).join(" ")}).classed("guideline guideline-area guideLine",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("fill",function(){return"Eraser"===i.currentTool?"none":i.currentSpace?i.currentSpace.color:i.currentShading?i.currentShading.color:null}),"Eraser"!==this.currentTool){if(s.selectAll(".guideline-text").data(r).enter().append("text").attr("x",function(e){return i.rwuToGrid(e[0].x,"x")+(i.rwuToGrid(e[1].x,"x")-i.rwuToGrid(e[0].x,"x"))/2}).attr("y",function(e){return i.rwuToGrid(e[0].y,"y")+(i.rwuToGrid(e[1].y,"y")-i.rwuToGrid(e[0].y,"y"))/2}).attr("dx",-1.25*(this.transform.k>1?1:this.transform.k)+"em").attr("data-transform-plz","").text(function(e){var t=i.distanceBetweenPoints(e[0],e[1]);return t?t.toFixed(2):""}).classed("guideline guideline-text guideline-dist",!0).attr("font-family","sans-serif").attr("fill","red").style("font-size","1em"),o.length>3){var d=o.map(function(e){var t=e.x,i=e.y;return{x:t,y:i,X:t,Y:i}}),l=this.polygonLabelPosition(d),c=l.x,u=l.y,p=l.area,m=p?p.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"",h=m+" "+("ip"===this.units?"ft":"m")+"²";if(null===c||null===u)return;s.append("text").attr("x",this.rwuToGrid(c,"x")).attr("y",this.rwuToGrid(u,"y")).text(h).classed("guideline guideline-text guideline-area-text guideLine",!0).attr("data-transform-plz","").attr("text-anchor","middle").attr("font-family","sans-serif").attr("fill","red").style("font-size","1em").raise()}v.selectAll(".vertical, .horizontal").lower()}}},eraseGuidelines:function(){v.selectAll("#grid .guideline").remove()},escapeAction:function(e){"Escape"!==e.code&&27!==e.which||(this.points=[],this.clearHighlights(),v.selectAll("#grid .point-path").remove())},savePolygonFace:function(){this.clearHighlights(),v.selectAll("#grid .point-path").remove();var e={points:[].concat((0,f.default)(this.points))};this.currentSpace?e.model_id=this.currentSpace.id:this.currentShading&&(e.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",e),this.points=[]},saveRectangularFace:function(){this.clearHighlights(),v.selectAll("#grid .point-path").remove();var e={};e.points=[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}],this.currentSpace?e.model_id=this.currentSpace.id:this.currentShading&&(e.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",e),this.points=[]},eraseRectangularSelection:function(){this.clearHighlights(),v.selectAll("#grid .point-path").remove();var e={points:[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}]};this.$store.dispatch("geometry/eraseSelection",e),this.points=[]},drawPoints:function(){var e=this;v.selectAll("#grid .point-path").remove();var t=v.select("#grid svg").selectAll("ellipse.point-path").data(this.points);t.merge(t.enter().append("ellipse").attr("class","point-path")).classed("origin",function(e,t){return 0===t}).attr("data-transform-plz","").attr("cx",function(t){return e.rwuToGrid(t.x,"x")}).attr("cy",function(t){return e.rwuToGrid(t.y,"y")}).attr("rx",function(e,t){return 0===t?7:2}).attr("ry",function(e,t){return 0===t?7:2}).attr("vector-effect","non-scaling-stroke").attr("fill",function(e,t){return 0===t?"none":""}),v.select("#grid svg").append("path").attr("class","point-path").datum(this.points).attr("fill","none").attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",v.line().x(function(t){return e.rwuToGrid(t.x,"x")}).y(function(t){return e.rwuToGrid(t.y,"y")})).lower(),v.selectAll(".vertical, .horizontal").lower()},registerDrag:function(){var e=v.select("#grid svg").selectAll("polygon");this.deregisterD3Events(e),"Select"===this.currentTool?this.registerSelectEvents(e):"Fill"===this.currentTool&&this.registerFillEvents(e)},deregisterD3Events:function(e){e.on(".drag",null).on("click",null)},registerFillEvents:function(e){var t=this;e.on("click",function(e){(t.currentSpace||t.currentShading)&&(t.points=[].concat((0,f.default)(e.points)),t.savePolygonFace())})},registerSelectEvents:function(e){var t=this,i=void 0,n=void 0,r=v.drag().on("start",function(e){var r=v.mouse(t.$refs.grid),o=(0,c.default)(r,2);i=o[0],n=o[1],e.previous_story||(t.currentSubSelection=T.default.modelForFace(t.$store.state.models,e.face_id))}).on("drag",function(e){if(!e.previous_story){var r=v.mouse(t.$refs.grid),o=(0,c.default)(r,2),a=o[0],s=o[1];v.select("#poly-"+e.face_id).attr("transform",function(){return"translate("+(a-i)+", "+(s-n)+")"})}}).on("end",function(e){if(!e.previous_story){var r=v.mouse(t.$refs.grid),o=(0,c.default)(r,2),a=o[0],s=o[1];t.$store.dispatch("geometry/moveFaceByOffset",{face_id:e.face_id,dx:t.gridToRWU(a,"x")-t.gridToRWU(i,"x"),dy:t.gridToRWU(s,"y")-t.gridToRWU(n,"y")})}});e.call(r)},drawPolygons:function(){var e=this;this.recalcScales();var t=v.select("#grid svg .polygons").selectAll("g.poly").data(this.polygons,function(e){return e.face_id});t.exit().remove();var i=t.enter().append("g").attr("class","poly");i.append("polygon"),i.append("text").attr("class","polygon-text"),i.append("g").attr("class","windows"),i.append("g").attr("class","doors"),i.append("g").attr("class","daylighting-controls"),t=i.merge(t).classed("current",function(e){return e.current}).classed("previousStory",function(e){return e.previous_story}).classed("poly",!0).attr("data-model-type",function(e){return e.modelType}).attr("id",function(e){return"poly-"+e.face_id}).attr("transform",null),t.select("polygon").attr("id",function(e){return"face-"+e.face_id}).attr("points",function(t){return t.points.map(function(t){return[e.rwuToGrid(t.x,"x"),e.rwuToGrid(t.y,"y")].join(",")}).join(" ")}).attr("fill",function(e){return e.color}).attr("vector-effect","non-scaling-stroke"),t.select("text").attr("id",function(e){return"text-"+e.face_id}).attr("x",function(t){return e.rwuToGrid(t.labelPosition.x,"x")}).attr("y",function(t){return e.rwuToGrid(t.labelPosition.y,"y")}).text(function(e){return e.name}).attr("text-anchor","middle").style("font-size","14px").style("font-weight","bold").attr("font-family","sans-serif").attr("fill","red").classed("polygon-text",!0),t.select(".windows").selectAll(".window").data(function(e){return e.windows}).call(this.drawWindow),t.select(".doors").selectAll(".window").data(function(e){return e.doors}).call(this.drawWindow),t.select(".daylighting-controls").selectAll(".daylighting-control").data(function(e){return e.daylighting_controls}).call(this.drawDaylightingControl),this.registerDrag(),t.order()},drawWalls:function(){v.select("#grid svg .walls").selectAll(".wall").data(this.walls,function(e){return e.id}).call(this.drawWall)},drawImages:function(){v.select("#grid svg .images").selectAll(".image-group").data(this.images,function(e){return e.id}).call(this.drawImage)},draw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.zoomEnd;this.transformAtLastRender=(0,m.default)({},this.transform),v.selectAll("[data-transform-plz]").attr("transform",""),this.drawPolygons(),this.drawWalls(),this.drawImages(),this.raiseOrLowerImages();var i=t&&this.points.length>0;i&&(this.highlightSnapTarget(),this.drawPoints())},findSnapTarget:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.edge_component,r={x:this.gridToRWU(e.x,"x"),y:this.gridToRWU(e.y,"y")};if("grid-strict"===this.snapMode)return this.strictSnapTargets(r)[0];if("grid-verts-edges"===this.snapMode){var o=this.gridPointToRWU(e),a=[].concat((0,f.default)((0,S.vertexSnapTargets)(this.currentStoryGeometry.vertices,this.spacing,o)),(0,f.default)(this.snappingEdgeData(o)),(0,f.default)((0,S.gridSnapTargets)(this.spacing,o)),(0,f.default)(this.polygonOriginPoint())).map(function(e){var t="edge"===e.type?1.4:1;return(0,m.default)({},e,{dist:t*(0,C.distanceBetweenPoints)(e,o),dx:o.x-e.x,dy:o.y-e.y})}),s=b.default.orderBy(a,["dist","origin","type"],["asc","asc","desc"]);return s[0]||(0,m.default)({type:"gridpoint"},o)}if(n){var d=this.snappingEdgeData(r);return d[0]||(0,m.default)({type:"gridpoint"},r)}var l=this.snappingVertexData(r);if(l)return l;var c=this.snappingEdgeData(r);if(c.length>0)return c[0];if(this.gridVisible){var u=this.rwuToGrid(this.spacing+this.min_x,"x"),p=this.rwuToGrid(this.max_y-this.spacing,"y"),h={type:"gridpoint",x:this.round(e.x,u)-.5,
y:this.round(e.y,p)-.5};return h.x=Math.abs(e.x-(h.x-u))>Math.abs(e.x-h.x)?h.x:h.x-u,h.y=Math.abs(e.y-(h.y-p))>Math.abs(e.y-h.y)?h.y:h.y-p,h}if(this.points.length){var g,y=[-180,-90,0,90,180],v=this.points[this.points.length-1],_=Math.atan2(v.y-e.y,v.x-e.x)*(180/Math.PI);if(y.some(function(i){if(Math.abs(_-i)<t.$store.getters["project/angleTolerance"]){if(i===-180||0===i||180===i)return{x:e.x,y:t.rotatePoint(v,e,i-_).y};if(i===-90||90===i)return{x:t.rotatePoint(v,e,i-_).x,y:e.y}}}),g)return(0,m.default)({type:"gridpoint"},g)}return(0,m.default)({type:"gridpoint"},e)},polygonOriginPoint:function(){return this.points.length>=3&&"Polygon"===this.currentTool?[(0,m.default)({},this.points[0],{origin:!0,type:"vertex"})]:[]},strictSnapTargets:function(e){var t=[].concat((0,f.default)(this.currentStoryGeometry.vertices),(0,f.default)(this.previousStoryGeometry?this.previousStoryGeometry.vertices:[]),(0,f.default)(this.polygonOriginPoint()));return(0,S.snapTargets)(t,this.spacing,e)},snappingVertexData:function(e){var t=this,i=[].concat((0,f.default)(this.currentStoryGeometry.vertices));if(this.previousStoryGeometry&&(i=i.concat(JSON.parse((0,d.default)(this.previousStoryGeometry.vertices)))),this.points.length>=3&&"Polygon"===this.currentTool&&i.push((0,m.default)({},this.points[0],{origin:!0})),1===this.points.length&&"Rectangle"===this.currentTool&&(i=i.concat(M.default.syntheticRectangleSnaps(i,this.points[0],e))),!i.length)return null;var n=i.reduce(function(i,n){var r=t.distanceBetweenPoints(i,e),o=t.distanceBetweenPoints(n,e);return r<o?i:n});return this.distanceBetweenPoints(n,e)<this.$store.getters["project/snapTolerance"]?(0,m.default)({},n,{type:"vertex"}):void 0},snappingEdgeData:function(e){var t=this,i=[].concat((0,f.default)(this.currentStoryGeometry.edges));if(this.previousStoryGeometry&&(i=i.concat(this.previousStoryGeometry.edges.map(function(e){return(0,m.default)({},e,{previous_story:!0})}))),0===i.length)return[];var n=b.default.map(i,function(i){var n=i.previous_story?t.previousStoryGeometry:t.currentStoryGeometry,r=M.default.vertexForId(i.v1,n),o=M.default.vertexForId(i.v2,n),a=(0,C.projectionOfPointToLine)(e,{p1:r,p2:o}),s=(0,C.distanceBetweenPoints)(a,e);return(0,m.default)({},i,{projection:a,dist:s,v1Coords:r,V2Coords:o})}),r=b.default.minBy(n,"dist");return r.dist<this.$store.getters["project/snapTolerance"]?[{snappingEdge:r,dist:r.dist,type:"edge",projection:r.projection,v1GridCoords:r.v1Coords,v2GridCoords:r.V2Coords,x:r.projection.x,y:r.projection.y}]:[]},distanceBetweenPoints:function(e,t){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(i*i+n*n)},round:function(e,t){var i,n=e<0?-1:1;return e=Math.abs(e),i=e%t<t/2?e-e%t:e+t-e%t,i*=n},rotatePoint:function(e,t,i){var n=i*Math.PI/180,r=Math.cos(n),o=Math.sin(n),a=t.x-e.x,s=t.y-e.y;return{x:r*a-o*s+e.x,y:o*a+r*s+e.y}},resolveBounds:function(){var e=[this.min_x,this.max_x],t=[this.min_y,this.max_y],i=function(e){var t=(0,c.default)(e,2),i=t[0],n=t[1],r=(n-i)/20;return[i-r,n+r]};this.visibleVerts.length&&(e=i(v.extent(this.allVertices,function(e){return e.x})),t=i(v.extent(this.allVertices,function(e){return e.y})));var n=this.$refs.gridParent.clientWidth,r=this.$refs.gridParent.clientHeight,o=(0,C.fitToAspectRatio)(e,t,n/r,"expand"),a=o.xExtent,s=o.yExtent;this.dimensions={min_x:a[0],max_x:a[1],min_y:s[0],max_y:s[1]},b.default.defer(function(){window.eventBus.$emit("boundsResolved")})},nullTransform:function(){v.select(this.$refs.grid).call(this.zoomBehavior.transform,v.zoomIdentity)},renderGrid:function(){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight;this.resolveBounds(),this.$store.dispatch("application/setScaleX",{scaleX:{pixels:e,rwuRange:[this.min_x,this.max_x]}}),this.$store.dispatch("application/setScaleY",{scaleY:{pixels:t,rwuRange:[this.min_y,this.max_y]}}),this.calcGrid(),this.nullTransform(),this.draw()},reloadGridAndScales:function(){this.zoomXScale=null,this.zoomYScale=null,this.resolveBounds(),this.renderGrid()},recalcScales:function(){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight;this.xScale=v.scaleLinear().domain([this.min_x,this.max_x]).range([0,e]),this.yScale=v.scaleLinear().domain([this.min_y,this.max_y]).range([t,0]),this.zoomXScale=this.zoomXScale||this.xScale.copy(),this.zoomYScale=this.zoomYScale||this.yScale.copy()},calcGrid:function(){var e=this;this.recalcScales();var t=this.$refs.gridParent.clientWidth,i=this.$refs.gridParent.clientHeight,n=v.select("#grid svg"),r=1,o="14px";n.attr("height",i).attr("width",t),this.axis.x=n.selectAll("g.axis--x").data([void 0]),this.axis.x=this.axis.x.merge(this.axis.x.enter().append("g").attr("class","axis axis--x")).attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.axis.y=n.selectAll("g.axis--y").data([void 0]),this.axis.y=this.axis.y.merge(this.axis.y.enter().append("g").attr("class","axis axis--y")).attr("class","axis axis--y").attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.updateGrid(),this.zoomBehavior=v.zoom().scaleExtent([0,1/0]).on("zoom",function(){var t=v.event.transform;e.transform=(0,m.default)({},t);var i=t.rescaleX(e.zoomXScale),n=t.rescaleY(e.zoomYScale),r=i.domain(),o=n.domain();e.dimensions={min_x:r[0],max_x:r[1],min_y:o[0],max_y:o[1]},e.axis_generator.x.scale(i),e.axis_generator.y.scale(n),e.updateGrid(),e.padTickY(-12),e.translateEntities(),e.clearComponentHighlights()}).on("end",function(){e._lastTransform!==v.event.transform&&(e._lastTransform=v.event.transform,e.draw({zoomEnd:!0}))}),n.call(this.zoomBehavior),n.on("mousemove",this.handleMouseMove).on("click",this.gridClicked)},transformTo:function(e){v.select(this.$refs.grid).call(this.zoomBehavior.transform,e)},zoomBy:function(e){var t=this.transform.k*e;v.select(this.$refs.grid).transition().duration(400).call(this.zoomBehavior.transform,v.zoomIdentity.scale(t))},zoomToFit:function(){var e,t=this,i=this.$refs.grid.clientWidth,n=this.$refs.grid.clientHeight;if(this.allVertices.length){var r=v.extent(this.allVertices,function(e){return t.zoomXScale(e.x)}),o=v.extent(this.allVertices,function(e){return t.zoomYScale(e.y)}),a=r[1]-r[0],s=o[1]-o[0],d=(r[0]+r[1])/2,l=(o[0]+o[1])/2,c=.9/Math.max(a/i,s/n),u=[i/2-c*d,n/2-c*l],f=v.select("#grid svg"),p=(e=v.zoomIdentity).translate.apply(e,u).scale(c);f.call(this.zoomBehavior.transform,p)}},scaleTo:function(e){var t,i=this.$refs.grid.clientWidth,n=this.$refs.grid.clientHeight,r=(this.zoomXScale(this.max_x)+this.zoomXScale(this.min_x))/2,o=(this.zoomYScale(this.max_y)+this.zoomYScale(this.min_y))/2,a=[i/2-e*r,n/2-e*o];v.select(this.$refs.grid).call(this.zoomBehavior.transform,(t=v.zoomIdentity).translate.apply(t,a).scale(e))},translateEntities:function(){v.selectAll("[data-transform-plz]").attr("transform",a(this.transformAtLastRender,v.event.transform))},showOrHideAxes:function(){this.axis.x.style("visibility",this.gridVisible?"visible":"hidden"),this.axis.y.style("visibility",this.gridVisible?"visible":"hidden")},updateGrid:function(){if(this.axis.x&&this.axis.y){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight,i=this.max_x-this.min_x,n=this.max_y-this.min_y,r=o(this.min_x,this.max_x,this.spacing),a=o(this.min_y,this.max_y,this.spacing);this.reduceTicks=a.length>250||r.length>250,this.axis_generator.x=this.axis_generator.x||v.axisBottom(this.xScale),this.axis_generator.x.tickSize(t).tickPadding(-20).tickFormat(this.reduceTicks?b.default.identity:this.formatTickX.bind(this,Math.floor(10*(e/t)))),this.axis_generator.y=this.axis_generator.y||v.axisRight(this.yScale),this.axis_generator.y.tickSize(e).tickPadding(-25).tickFormat(this.reduceTicks?b.default.identity:this.formatTickY.bind(this,10)),this.reduceTicks?(this.axis_generator.x.tickValues(null).ticks(5*(i/n)),this.axis_generator.y.tickValues(null).ticks(5)):(this.axis_generator.x.ticks(null).tickValues(r),this.axis_generator.y.ticks(null).tickValues(a)),this.axis.y.call(this.axis_generator.y),this.axis.x.call(this.axis_generator.x)}},rwuToGrid:function(e,t){var i=void 0;return"x"===t?i=this.xScale:"y"===t&&(i=this.yScale),i(e)},gridToRWU:function(e,t){var i=void 0;"x"===t?i=this.xScale:"y"===t&&(i=this.yScale);var n=i.invert(e);return Math.round(1e11*n)/1e11},gridPointToRWU:function(e){return{x:this.gridToRWU(e.x,"x"),y:this.gridToRWU(e.y,"y")}},rwuPointToGrid:function(e){return{x:this.rwuToGrid(e.x,"x"),y:this.rwuToGrid(e.y,"y")}},polygonLabelPosition:function(e){var t=[e.map(function(e){return[e.x,e.y]})],i=Math.abs(Math.round(M.default.areaOfSelection(e))),n=i?(0,w.default)(t,1):[null,null],r=(0,c.default)(n,2),o=r[0],a=r[1];return{x:o,y:a,area:i}},formatTickX:function(e,t){var i=this.max_x-this.min_x,n=this.spacing,r=Math.ceil(i/e/n)*n;return 0===r||t%r===0?t:""},formatTickY:function(e,t){var i=this.max_y-this.min_y,n=this.spacing,r=Math.ceil(i/e/n)*n;return 0===r||t%r===0?t:""},padTickY:function(e){var t=Math.abs(this.min_y),i=Math.abs(this.max_y),n=(t<i?i:t).toFixed(0).length,r=e*n;this.axis.y.call(this.axis_generator.y.tickPadding(r))}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(79),o=n(r),a=i(29),s=n(a),d=i(287),l=n(d),c=i(184),u=n(c),f=i(292),p=n(f),m=i(297),h=n(m),g=i(305),y=n(g),v=i(308),_=n(v),w=i(309),x=n(w),b=i(125),S=i(303),C=n(S);o.default.use(s.default);var M=new s.default.Store({strict:!1,modules:{application:l.default,project:u.default,geometry:p.default,models:h.default},getters:{exportData:y.default},actions:{importFloorplan:_.default,importLibrary:x.default,changeUnits:function(e,t){var i=t.newUnits,n=e.state.project.config.units;console.log("moving from "+n+" to "+i),"ip"!==n&&"si"!==n&&console.error('Expected data.project.config.units to be "ip" or "si", received "'+n+'"'),"ip"!==i&&"si"!==i&&console.error('Expected oldUnits to be "ip" or "si", received "'+i+'"'),e.commit("changeUnits",(0,b.convertState)(e.state,n,i)),e.dispatch("project/setUnits",{units:i})}},mutations:C.default});t.default=M},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),o=n(r),a=i(24),s=i(80);t.default={setCurrentStoryId:function(e,t){var i=t.id;e.rootState.models.stories.map(function(e){return e.id}).indexOf(i)!==-1&&e.commit("setCurrentStoryId",{id:i})},setCurrentSubSelectionId:function(e,t){var i=t.id;e.getters.currentStory&&(e.getters.currentStory.spaces.find(function(e){return e.id===i})||e.getters.currentStory.shading.find(function(e){return e.id===i})||e.getters.currentStory.images.find(function(e){return e.id===i}))&&e.commit("setCurrentSubSelectionId",{id:i})},setCurrentComponentId:function(e,t){var i=t.id;e.getters.currentStory&&(e.getters.currentStory.windows.find(function(e){return e.id===i})||e.getters.currentStory.daylighting_controls.find(function(e){return e.id===i}))&&e.commit("setCurrentComponentId",{id:i})},setCurrentComponentDefinitionId:function(e,t){var i=t.id;if(e.rootState.models.library.daylighting_control_definitions.find(function(e){return e.id===i})||e.rootState.models.library.window_definitions.find(function(e){return e.id===i})||e.rootState.models.library.door_definitions.find(function(e){return e.id===i}))e.commit("setCurrentComponentDefinitionId",{id:i});else if("undefined"!==i)throw new Error("unable to set component definition -- couldn't find one with id "+i)},setCurrentComponentInstanceId:function(e,t){var i=t.id;(0,s.componentInstanceById)(e.getters.currentStory,i)?e.commit("setCurrentComponentInstanceId",t):console.error("unable to find an instance with that id on the current story")},setCurrentSnapMode:function(e,t){var i=t.snapMode;if(!o.default.includes(["grid-strict","grid-verts-edges"],i))throw new Error("Unknown grid mode "+i);e.commit("setCurrentSnapMode",{snapMode:i})},setCurrentModeTab:function(e,t){var i=t.modeTab;e.commit("setCurrentModeTab",{modeTab:i})},setCurrentSubselectionType:function(e,t){var i=t.subselectionType;e.commit("setCurrentSubselectionType",{subselectionType:i})},setCurrentTool:function(e,t){var i=t.tool;e.state.tools.indexOf(i)!==-1&&e.commit("setCurrentTool",{tool:i})},setCurrentMode:function(e,t){var i=t.mode;"spaces"===i||o.default.includes(a.assignableProperties,i)?e.commit("setCurrentMode",{mode:i}):console.error("unrecognized view-by option: "+i)},setCurrentSpacePropertyId:function(e,t){var i=t.id;!i||(0,s.spacePropertyById)(e.rootState.models.library,i)?e.commit("setCurrentSpacePropertyId",{id:i}):console.error("unable to find space property with id: "+i)},setScaleX:function(e,t){var i=t.scaleX;e.commit("setScaleX",{scaleX:i})},setScaleY:function(e,t){var i=t.scaleY;e.commit("setScaleY",{scaleY:i})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),o=n(r),a=i(15),s=n(a),d=i(80);t.default={currentStory:function(e,t,i){return console.log("trying to get currentStory",i.models.stories),i.models.stories.find(function(t){return t.id===e.currentSelections.story_id})},currentSubSelection:function(e,t){var i=t.currentStory;if(!i)return null;var n=e.currentSelections.subselection_ids[i.id];return i.spaces.find(function(e){return e.id===n})||i.shading.find(function(e){return e.id===n})||i.images.find(function(e){return e.id===n})},currentSubSelectionType:function(e,t){var i=t.currentStory;if(!i)return null;var n=e.currentSelections.subselection_ids[i.id];return i.spaces.find(function(e){return e.id===n})?"spaces":i.shading.find(function(e){return e.id===n})?"shading":i.images.find(function(e){return e.id===n})?"images":null},currentSpace:function(e,t){return"spaces"===t.currentSubSelectionType?t.currentSubSelection:null},currentShading:function(e,t){return"shading"===t.currentSubSelectionType?t.currentSubSelection:null},currentImage:function(e,t){return"images"===t.currentSubSelectionType?t.currentSubSelection:null},currentComponent:function(e,t,i){var n=e.currentSelections.component_definition_id,r=void 0,a=void 0;return(a=i.models.library.window_definitions.find(function(e){return e.id===n}))?r="window_definitions":(a=i.models.library.daylighting_control_definitions.find(function(e){return e.id===n}))?r="daylighting_control_definitions":(a=o.default.find(i.models.library.door_definitions,{id:n}))&&(r="door_definitions"),{type:r,definition:a}},currentComponentDefinition:function(e,t){return t.currentComponent.definition},currentComponentInstance:function(e,t){var i=e.currentSelections.component_instance_id;return i?(0,d.componentInstanceById)(t.currentStory,i):null},currentSpaceProperty:function(e,t,i){var n=e.currentSelections.space_property_id,r=i.models.library;return(0,d.spacePropertyById)(r,n)},currentStoryGeometry:function(e,t,i){var n=t.currentStory;return n?i.geometry.find(function(e){return e.id===n.geometry_id}):null},currentStoryDenormalizedGeom:function(e,t){var i=t.currentStoryGeometry;return i?s.default.denormalize(i):null},currentSubSelectionFace:function(e,t){return t.currentSubSelection&&t.currentSubSelection.face_id?t.currentStoryGeometry.faces.find(function(e){return e.id===t.currentSubSelection.face_id}):null}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(285),o=n(r),a=i(288),s=n(a),d=i(286),l=n(d),c=i(78);t.default={namespaced:!0,state:{currentSelections:{story:null,story_id:null,subselection_ids:{},component_id:null,component_definition_id:null,component_instance_id:null,space_property_id:null,tool:"Rectangle",mode:"spaces",snapMode:"grid-strict",modeTab:"floorplan",subselectionType:"spaces"},modes:["spaces","shading","building_units","thermal_zones","pitched_roofs","space_types","images"],tools:["Pan","Drag","Rectangle","Polygon","Eraser","Select","Map","Fill","Place Component","Image","Apply Property"],scale:{x:c.scaleLinear().range([0,0]).domain([0,0]),y:c.scaleLinear().range([0,0]).domain([0,0])}},actions:o.default,mutations:s.default,getters:l.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(70),o=n(r),a=i(6),s=n(a);t.default={setCurrentStoryId:function(e,t){e.currentSelections.story_id=t.id},setCurrentSubSelectionId:function(e,t){var i=e.currentSelections.story_id;return i?void(e.currentSelections.subselection_ids=(0,s.default)({},e.currentSelections.subselection_ids,(0,o.default)({},i,t.id))):void console.error("expected a story to be selected, in order to set a subselection")},setCurrentComponentId:function(e,t){e.currentSelections.component_id=t.id},setCurrentComponentDefinitionId:function(e,t){e.currentSelections.component_definition_id=t.id},setCurrentComponentInstanceId:function(e,t){e.currentSelections.component_instance_id=t.id},setCurrentSpacePropertyId:function(e,t){e.currentSelections.space_property_id=t.id},setCurrentSnapMode:function(e,t){e.currentSelections.snapMode=t.snapMode},setCurrentModeTab:function(e,t){e.currentSelections.modeTab=t.modeTab},setCurrentSubselectionType:function(e,t){e.currentSelections.subselectionType=t.subselectionType},setCurrentTool:function(e,t){e.currentSelections.tool=t.tool},setCurrentMode:function(e,t){e.currentSelections.mode=t.mode},setScaleX:function(e,t){e.scale.x=t.scaleX},setScaleY:function(e,t){e.scale.y=t.scaleY}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return m.default.vertexForCoordinates(t,e)||f.default.Vertex(t.x,t.y)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),a=n(o),s=i(70),d=n(s);t.getOrCreateVertex=r;var l=i(3),c=n(l),u=i(123),f=n(u),p=i(15),m=n(p),h=i(290),g=n(h),y=i(183);t.default={initGeometry:function(e,t){var i=t.story_id,n=new f.default.Geometry;e.commit("initGeometry",{geometry:n}),e.dispatch("models/updateStoryWithData",{story:e.rootState.models.stories.find(function(e){return e.id===i}),geometry_id:n.id},{root:!0})},destroyGeometry:function(e,t){var i=e.commit;i("destroyGeometry",{id:t})},eraseSelection:function(e,t){var i=t.points,n=e.rootGetters["application/currentStoryGeometry"].id;(0,y.withPreservedComponents)(e,n,function(){var t=(0,h.eraseSelection)(i,e);t||window.eventBus.$emit("error","Operation cancelled - no split faces")}),e.dispatch("trimGeometry",{geometry_id:n})},moveFaceByOffset:function(e,t){var i=t.face_id,n=t.dx,r=t.dy,o=e.rootGetters["application/currentStoryGeometry"],a=m.default.faceForId(i,o),s=m.default.verticesForFaceId(a.id,o).map(function(e){return{x:e.x+n,y:e.y+r}}),l=(0,h.newGeometriesOfOverlappedFaces)(s,m.default.exceptFace(o,i));if(l.error)return window.eventBus.$emit("error","Operation cancelled - "+l.error),void window.eventBus.$emit("reload-grid");var c=(0,h.validateFaceGeometry)(s,o);if(!c.success)return window.eventBus.$emit("error",c.error),void window.eventBus.$emit("reload-grid");var u=(0,d.default)({},i,{dx:n,dy:r});(0,y.withPreservedComponents)(e,o.id,u,function(){l.forEach(function(t){return e.dispatch("replaceFacePoints",t)}),e.dispatch("replaceFacePoints",{geometry_id:o.id,face_id:i,vertices:c.vertices,edges:c.edges,dx:n,dy:r})}),e.dispatch("trimGeometry",{geometry_id:o.id})},createFaceFromPoints:g.default,destroyFaceAndDescendents:function(e,t){var i=t.geometry_id,n=t.face,r=e.state.find(function(e){return e.id===i}),o=n.edgeRefs.map(function(e){var t=m.default.edgeForId(e.edge_id,r),i=e.reverse?t.v2:t.v1;return m.default.vertexForId(i,r)}).filter(function(e){return m.default.facesForVertexId(e.id,r).length<2}),a=n.edgeRefs.filter(function(e){return m.default.facesForEdgeId(e.edge_id,r).length<2});e.commit("destroyGeometry",{id:n.id}),a.forEach(function(t){return e.commit("destroyGeometry",{id:t.edge_id})}),o.forEach(function(t){return e.commit("destroyGeometry",{id:t.id})})},replaceFacePoints:function(e,t){var i=t.geometry_id,n=t.face_id,r=t.vertices,o=t.edges,s=c.default.find(e.state,{id:i}),d=e.rootState.project.grid.spacing,l=c.default.chain(r).map(function(e){var t=c.default.find(s.vertices,function(t){return(0,p.distanceBetweenPoints)(t,e)<d/20});return t?e.id===t.id?null:[e.id,t.id]:null}).compact().fromPairs().value(),u=r.map(function(e){return(0,a.default)({},e,{id:l[e.id]||e.id})}),f=o.map(function(e){return(0,a.default)({},e,{v1:l[e.v1]||e.v1,v2:l[e.v2]||e.v2})});f.forEach(function(e){var t=c.default.find(s.edges,{v1:e.v1,v2:e.v2})||c.default.find(s.edges,{v1:e.v2,v2:e.v1});t&&e.id!==t.id&&(e.id=t.id,e.reverse=t.v1!==e.v1)}),e.commit("replaceFacePoints",{geometry_id:i,vertices:u,edges:f,face_id:n})},trimGeometry:function(e,t){var i=e.rootState,n=e.commit,r=t.geometry_id,o=c.default.find(i.models.stories,{geometry_id:r}),a=c.default.flatMap(o.spaces,function(e){return c.default.map(e.daylighting_controls,"vertex_id")});n("trimGeometry",{geometry_id:r,vertsReferencedElsewhere:a})},cloneStoryGeometry:function(e,t){var i=e.rootGetters["application/currentStoryGeometry"];e.commit("updateClonedGeometry",{newGeom:t,currentStoryId:i.id})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=t.model_id,n=t.points;if(!((0,L.uniq)(n).length<3)){var r=e.rootGetters["application/currentStoryGeometry"],a=N.default.libraryObjectWithId(e.rootState.models,i),d=a.face_id?W.default.faceForId(a.face_id,r):null,l=void 0;if(d){var c=W.default.verticesForFaceId(d.id,r);if(l=W.default.setOperation("union",c,n),l.error)return void window.eventBus.$emit("error","Operation cancelled - "+l.error)}else l=n;var u=g(l,e.rootGetters["application/currentStoryGeometry"],e.rootGetters["project/snapTolerance"]);if(!u.success)return window.eventBus.$emit("error",u.error),void console.error(u.error);var f=o(l,W.default.exceptFace(r,d&&d.id));if(f.error)return void window.eventBus.$emit("error","Operation cancelled - "+f.error);var p=u.edges.slice(),m=u.vertices.slice();(0,V.withPreservedComponents)(e,r.id,function(){var t=r.edges.length,i=r.vertices.length;f.forEach(function(t){return e.dispatch("replaceFacePoints",t)}),p=p.concat(r.edges.slice(t)),m=m.concat(r.vertices.slice(i)),s(u,a,e,d),e.dispatch("trimGeometry",{geometry_id:r.id}),w(e,p,m)})}}function o(e,t){if(e.length<3||!W.default.areaOfSelection(e))return!1;var i=W.default.denormalize(t),n=i.faces.filter(function(t){var i=W.default.intersection(t.vertices,e);return i.error||i.length>0}),r=n.map(function(t){return W.default.difference(t.vertices,e)}),o=z.default.find(r,"error");if(o)return o;var a=r.map(function(e){return g(e,t)}),s=z.default.find(a,"error");return s?s:z.default.zip(n,a).map(function(e){var i=(0,j.default)(e,2),n=i[0],r=i[1],o=r.vertices,a=r.edges;return{geometry_id:t.id,face_id:n.id,vertices:o,edges:a}})}function a(e,t){var i=t.rootGetters["application/currentStoryGeometry"];if(e.length<3||!W.default.areaOfSelection(e))return!1;var n=o(e,i);if(n.error)return window.eventBus.$emit("error","Operation cancelled - "+n.error),!1;var r=i.edges.length,a=i.vertices.length;n.forEach(function(e){return t.dispatch("replaceFacePoints",e)});var s=i.edges.slice(r),d=i.vertices.slice(a);return w(t,s,d),!0}function s(e,t,i,n){var r,o=e.vertices,a=e.edges,s=i.rootGetters["application/currentStoryGeometry"],d=n||new $.default.Face([]);i.dispatch("replaceFacePoints",{face_id:d.id,geometry_id:s.id,vertices:o,edges:a}),i.dispatch("space"===t.type?"models/updateSpaceWithData":"models/updateShadingWithData",(r={},(0,D.default)(r,t.type,t),(0,D.default)(r,"face_id",d.id),r),{root:!0})}function d(e,t,i){var n=i.find(function(i){return i.v1===e.id&&i.v2===t.id||i.v2===e.id&&i.v1===t.id});return n&&(0,R.default)({},n,{reverse:n.v1===t.id})}function l(e){return function(t){var i=(0,j.default)(t,2),n=i[0],r=i[1];return d(n,r,e)||new $.default.Edge(n.id,r.id)}}function c(e,t){return e.length?z.default.zip(e,[].concat((0,O.default)(e.slice(1)),[e[0]])).map(l(t)):[]}function u(e){this.message=e}function f(e){if(e.length<3)throw new u("can't make a polygon with fewer than three vertices: "+(0,C.default)(e))}function p(e){e.forEach(function(t){if(z.default.find(e,{x:t.x,y:t.y}).length>=2)throw new u("Duplicate vertex at ("+t.x+", "+t.y+")")})}function m(e,t){t.forEach(function(t){var i=t.v1,n=t.v2,r=z.default.find(e,{id:i}),o=z.default.find(e,{id:n});e.forEach(function(e){if(e.id!==i&&e.id!==n&&W.default.ptsAreCollinear(r,o,e)){var t=z.default.reject([(e.x-r.x)/(o.x-r.x),(e.y-r.y)/(o.y-r.y)],isNaN)[0];if(!(t>1||t<0))throw new u("An edge is being touched by a vertex on the same face at ("+e.x+", "+e.y+")")}})})}function h(e,t){var i=e.reduce(function(e,t){return e[t.id]=t,e},{});(0,L.allPairs)(t).forEach(function(e){var t=(0,j.default)(e,2),n=t[0],r=t[1],o=i[n.v1],a=i[n.v2],s=i[r.v1],d=i[r.v2],l=W.default.intersectionOfLines(o,a,s,d);if(l)throw new u("Self intersection at "+l.x+", "+l.y)})}function g(e,t){if(0===e.length)return{success:!0,vertices:[],edges:[]};if(e.length<=2)return{success:!1,error:"need at least 3 points to make a face"};var i=e.map(function(e){return W.default.vertexForCoordinates(e,t)||new $.default.Vertex(e.x,e.y)});i=(0,L.dropConsecutiveDups)(i);var n=c(i,t.edges);try{f(i),p(i),m(i,n),h(i,n)}catch(e){if(e instanceof u)return{success:!1,error:e.message};throw e}return{success:!0,vertices:i,edges:n}}function y(e,t){return z.default.zip(e.slice(0,-1),e.slice(1)).map(l(t))}function v(e,t,i){var n=W.default.facesForEdgeId(t,e),r=n.map(function(n){var r=z.default.find(n.edgeRefs,{edge_id:t}).reverse,o=i.map(function(e){var t=e.id,i=e.reverse;return{id:t,reverse:!i!=!r}});return r&&o.reverse(),{type:"replaceEdgeRef",geometry_id:e.id,edge_id:t,face_id:n.id,newEdges:o}});return r}function _(e,t,i,n){function r(e,t,i){if(0===i.length)return!1;var n=W.default.vertexForId(t.v1,e),r=W.default.vertexForId(t.v2,e);i=z.default.sortBy(i,function(e){return(0,F.distanceBetweenPoints)(e,n)}),i=[n].concat((0,O.default)(i),[r]);var a=y(i,[].concat((0,O.default)(e.edges),o)),s=v(e,t.id,a);return o.push.apply(o,(0,O.default)(a)),{edgeToDelete:t.id,newEdges:a,replaceEdgeRefs:s}}var o=[];if(i&&n){var a={};return i.forEach(function(i){var n=W.default.splittingVerticesForEdgeId(i,e,t),o=r(e,i,n);o&&(a[o.edgeToDelete]=o)}),e.edges.forEach(function(i){var o=W.default.splittingVerticesForEdgeId(i,e,t,n),s=r(e,i,o);s&&(a[s.edgeToDelete]=s)}),(0,b.default)(a).map(function(e){var t=(0,j.default)(e,2),i=(t[0],t[1]);return i})}return e.edges.map(function(i){var n=W.default.splittingVerticesForEdgeId(i,e,t);return r(e,i,n)}).filter(function(e){return e})}function w(e,t,i){var n=e.rootGetters["application/currentStoryGeometry"],r=e.rootState.project.grid.spacing,o=_(n,r,t,i);o.forEach(function(t){return e.commit((0,R.default)({type:"splitEdge",geometry_id:n.id},t))})}Object.defineProperty(t,"__esModule",{value:!0});var x=i(186),b=n(x),S=i(42),C=n(S),M=i(30),O=n(M),T=i(6),R=n(T),I=i(70),D=n(I),P=i(53),j=n(P);t.default=r,t.newGeometriesOfOverlappedFaces=o,t.eraseSelection=a,t.findExistingEdge=d,t.matchOrCreateEdges=c,t.errOnTooFewVerts=f,t.errOnDuplicateVerts=p,t.errOnVertexIntersectsEdge=m,t.errOnEdgeIntersectsEdge=h,t.validateFaceGeometry=g,t.edgesToSplit=_;var E=i(3),z=n(E),k=i(123),$=n(k),F=i(15),W=n(F),G=i(46),N=n(G),L=i(126),V=i(183);u.prototype=new Error},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),o=n(r),a=i(15),s=n(a),d=i(311),l=n(d);t.default={denormalized:function(e){return e.map(function(e){return s.default.denormalize(e)})},errors:function(e,t){return o.default.flatMap(t.denormalized,l.default)},exportData:function(e,t,i,n){return e.map(function(e){return{id:e.id,vertices:e.vertices.map(function(t){return{id:t.id,x:Number(t.x),y:Number(t.y),edge_ids:s.default.edgesForVertexId(t.id,e).map(function(e){return e.id})}}),edges:e.edges.map(function(t){return{id:t.id,vertex_ids:[t.v1,t.v2],face_ids:s.default.facesForEdgeId(t.id,e).map(function(e){return e.id})}}),faces:e.faces.map(function(e){return{id:e.id,edge_ids:e.edgeRefs.map(function(e){return e.edge_id}),edge_order:e.edgeRefs.map(function(e){return e.reverse?0:1})}})}})}}},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(289),a=r(o),s=i(293),d=n(s),l=i(291),c=r(l);t.default={namespaced:!0,state:[],actions:a.default,mutations:d,getters:c.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=t.geometry_id,n=t.vertsReferencedElsewhere,r=M.default.find(e,{id:i}),o=new S.default(M.default.flatMap(r.faces,function(e){return M.default.map(e.edgeRefs,"edge_id")})),a=M.default.flatMap(r.edges.filter(function(e){return o.has(e.id)}),function(e){return[e.v1,e.v2]}),s=new S.default([].concat((0,x.default)(n||[]),(0,x.default)(a))),d=r.edges.filter(function(e){return o.has(e.id)}),l=r.vertices.filter(function(e){return s.has(e.id)}),c=M.default.difference([].concat((0,x.default)(o)),M.default.map(d,"id"));c.length&&console.error("An edge is referenced by a face, but does not exist!",(0,_.default)(r));var u=M.default.difference(a,M.default.map(l,"id"));u.length&&console.error("A vertex is referenced by a face, but does not exist!",(0,_.default)(r)),r.vertices=l,r.edges=d,r.faces=r.faces.filter(function(e){return e.edgeRefs.length>0})}function o(e,t){var i=t.geometry;e.push(i)}function a(e,t){var i=t.geometry_id,n=t.vertex;e.find(function(e){return e.id===i}).vertices.push(n)}function s(e,t){var i=t.geometry_id,n=t.face;e.find(function(e){return e.id===i}).faces.push(n)}function d(e,t){for(var i=t.id,n=0;n<e.length;n++){var r=e[n];if(r.id===i){e.splice(e.findIndex(function(e){return e.id===i}),1);break}if(~r.faces.map(function(e){return e.id}).indexOf(i)){r.faces.splice(r.faces.findIndex(function(e){return e.id===i}),1);break}if(~r.edges.map(function(e){return e.id}).indexOf(i)){r.edges.splice(r.edges.findIndex(function(e){return e.id===i}),1),r.faces.forEach(function(e){e.edgeRefs.forEach(function(t){i===t.edge_id&&e.edgeRefs.splice(e.edgeRefs.findIndex(function(e){return e.edge_id===i}),1)})});break}if(~r.vertices.map(function(e){return e.id}).indexOf(i)){r.vertices.splice(r.vertices.findIndex(function(e){return e.id===i}),1);break}}}function l(e,t){var i=t.geometry_id,n=t.face_id,r=t.edgeRef,o=e.find(function(e){return e.id===i}),a=o.faces.find(function(e){return e.id===n}),s=o.edges.find(function(e){return e.id===r.edge_id});s&&a.edgeRefs.push(r)}function c(e,t){var i=t.geometry_id,n=t.face_id,r=t.edgeRefs,o=e.find(function(e){return e.id===i}),a=o.faces.find(function(e){return e.id===n});a.edgeRefs=r.filter(function(e){return o.edges.find(function(t){return t.id===e.edge_id})})}function u(e,t){var i=t.geometry_id,n=t.face_id,r=t.edge_id,o=e.find(function(e){return e.id===i}),a=o.faces.find(function(e){return e.id===n});a.edgeRefs.splice(a.edgeRefs.findIndex(function(e){return e.edge_id===r}),1)}function f(e,t){var i,n=t.geometry_id,r=t.face_id,o=t.edge_id,a=t.newEdges,s=e.find(function(e){return e.id===n}),d=s.faces.find(function(e){return e.id===r}),l=M.default.findIndex(d.edgeRefs,{edge_id:o});(i=d.edgeRefs).splice.apply(i,[l,1].concat((0,x.default)(a.map(function(e){var t=e.id,i=e.reverse;return{edge_id:t,reverse:i}}))))}function p(e,t){var i=t.geometry_id,n=t.vertices,r=M.default.find(e,{id:i});n.forEach(function(e){return M.default.find(r.vertices,{id:e.id})||r.vertices.push(e)})}function m(e,t){var i=t.geometry_id,n=t.edges,r=M.default.find(e,{id:i});n.forEach(function(e){return M.default.find(r.edges,{id:e.id})||r.edges.push(e)})}function h(e,t){var i=t.geometry_id,n=t.edgeToDelete,r=t.newEdges,o=t.replaceEdgeRefs;m(e,{geometry_id:i,edges:r}),o.forEach(function(t){return f(e,t)}),d(e,{id:n})}function g(e,t){var i=t.geometry_id,n=t.vertices,r=t.edges,o=t.face_id,a=M.default.find(e,{
id:i});p(e,{geometry_id:i,vertices:n}),m(e,{geometry_id:i,edges:r,vertices:n});var s=M.default.find(a.faces,{id:o});s||(s={id:o,edgeRefs:[]},a.faces.push(s)),s.edgeRefs=r.map(function(e){return{edge_id:e.id,reverse:!!e.reverse}})}function y(e,t){var i=e.find(function(e){return e.id===t.currentStoryId});i.edges=t.newGeom.edges,i.faces=t.newGeom.faces,i.vertices=t.newGeom.vertices}Object.defineProperty(t,"__esModule",{value:!0});var v=i(42),_=n(v),w=i(30),x=n(w),b=i(324),S=n(b);t.trimGeometry=r,t.initGeometry=o,t.createVertex=a,t.createFace=s,t.destroyGeometry=d,t.createEdgeRef=l,t.setEdgeRefsForFace=c,t.destroyEdgeRef=u,t.replaceEdgeRef=f,t.ensureVertsExist=p,t.ensureEdgesExist=m,t.splitEdge=h,t.replaceFacePoints=g,t.updateClonedGeometry=y;var C=i(3),M=n(C)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(81),s=n(a),d=i(52),l=n(d),c=i(3),u=n(c),f=i(95),p=n(f),m=i(124),h=n(m),g=i(51),y=n(g),v=i(123),_=n(v),w=i(46),x=n(w),b=i(15),S=n(b);t.default={initStory:function(e){var t=x.default.generateName(e.state,"stories"),i=new h.default.Story(t);e.commit("initStory",{story:i}),e.dispatch("geometry/initGeometry",{story_id:i.id},{root:!0}),e.dispatch("initSpace",{story:i}),e.dispatch("initShading",{story:i}),e.dispatch("selectStory",{story:i})},initSpace:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=x.default.generateName(e.state,"spaces",i),r=new h.default.Space(n);e.commit("initSpace",{story:i,space:r})},initShading:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=x.default.generateName(e.state,"shading",i),r=new h.default.Shading(n);e.commit("initShading",{story:i,shading:r})},destroyStory:function(e,t){var i=e.state.stories,n=i.findIndex(function(e){return e.id===t.story.id}),r=i[n];e.commit("destroyStory",{story:r}),e.dispatch("geometry/destroyGeometry",r.geometry_id,{root:!0}),0===i.length?e.dispatch("initStory"):e.dispatch("selectStory",{story:i[n-1]})},destroySpace:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=i.spaces.find(function(e){return e.id===t.space.id});e.commit("destroySpace",{space:n,story:i});var r=e.rootGetters["application/currentStoryGeometry"],o=r.faces.find(function(e){return e.id===n.face_id});if(o){var a=r.edges.filter(function(e){return o.edgeRefs.map(function(e){return e.edge_id}).includes(e.id)});a.forEach(function(t){var n=i.windows.filter(function(e){return e.edge_id===t.id});n.forEach(function(t){return e.dispatch("destroyWindow",{story_id:i.id,object:t})})}),e.dispatch("geometry/destroyFaceAndDescendents",{face:o,geometry_id:r.id},{root:!0})}},destroyShading:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=i.shading.find(function(e){return e.id===t.shading.id});e.commit("destroyShading",{shading:n,story:i});var r=e.rootGetters["application/currentStoryGeometry"].faces.find(function(e){return e.id===n.face_id});r&&e.dispatch("geometry/destroyFaceAndDescendents",{face:r,geometry_id:e.rootGetters["application/currentStoryGeometry"].id},{root:!0})},destroyImage:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=i.images.find(function(e){return e.id===t.image.id});e.commit("destroyImage",{image:n,story:i})},destroyWindowDef:function(e,t){e.commit("destroyWindowsByDefinition",t.object),e.commit("destroyObject",t)},destroyDaylightingControlDef:function(e,t){e.commit("destroyDaylightingControlsByDefinition",t.object),e.commit("destroyObject",t)},destroyDoorDef:function(e,t){e.commit("destroyDoorsByDefinition",t.object),e.commit("destroyObject",t)},destroyObject:function(e,t){e.commit("destroyObject",{object:t.object})},updateStoryWithData:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story.id}),n=(0,l.default)(p.default.stories.keymap),r={};for(var o in t)t.hasOwnProperty(o)&&~n.indexOf(o)&&(r[o]=t[o]);r.story=i,e.commit("updateStoryWithData",r)},updateSpaceWithData:function(e,t){var i=e.getters.allSpaces.find(function(e){return e.id===t.space.id}),n=(0,l.default)(i),r={};for(var o in t)t.hasOwnProperty(o)&&~n.indexOf(o)&&(r[o]=t[o]);r.space=i,e.commit("updateSpaceWithData",r)},updateShadingWithData:function(e,t){var i=e.getters.allShading.find(function(e){return e.id===t.shading.id}),n=(0,l.default)(i),r={};for(var o in t)t.hasOwnProperty(o)&&~n.indexOf(o)&&(r[o]=t[o]);r.shading=i,e.commit("updateShadingWithData",r)},updateImageWithData:function(e,t){var i=e.getters.allImages.find(function(e){return e.id===t.image.id}),n=u.default.difference((0,l.default)(i),["src","naturalWidth","naturalHeight"]);t.scale&&(t.height=t.scale*i.naturalHeight,t.width=t.scale*i.naturalWidth);var r=u.default.pick(t,n);r.image=i,e.commit("updateImageWithData",r)},updateWindowDefinitionWithData:function(e,t){var i=e.state,n=e.dispatch,r=t.object.id,o=u.default.pick((0,m.getDefaults)("WindowDefinition"),["height","width","window_spacing","wwr"]);if("Window to Wall Ratio"===t.window_definition_mode)(0,s.default)(t,o,{height:null,width:null,window_spacing:null});else if("Repeating Windows"===t.window_definition_mode)(0,s.default)(t,o,{wwr:null});else if("Single Window"===t.window_definition_mode)(0,s.default)(t,o,{wwr:null,window_spacing:null});else if(t.window_definition_mode)throw new Error("unrecognized window_definition_mode: "+t.window_definition_mode);if(u.default.includes(["Window to Wall Ratio","Repeating Windows"],t.window_definition_mode)){var a=u.default.flatMap(i.stories,function(e){return u.default.chain(e.windows).filter({window_definition_id:r}).groupBy("edge_id").values().flatMap(u.default.tail).map(function(t){return{story_id:e.id,object:{id:t.id}}}).value()});a.forEach(function(e){return n("destroyWindow",e)})}n("updateObjectWithData",t)},updateObjectWithData:function(e,t){var i=x.default.libraryObjectWithId(e.state,t.object.id);t.object=i,e.commit("updateObjectWithData",t)},createImageForStory:function(e,t){var i=e.state.stories.find(function(e){return e.id===t.story_id}),n=x.default.generateName(e.state,"images",i),r=new h.default.Image(n,t.src);r.height=t.height,r.width=t.width,r.x=t.x,r.y=t.y,r.naturalWidth=t.naturalWidth,r.naturalHeight=t.naturalHeight,e.commit("createImageForStory",{story_id:i.id,image:r})},createObjectWithType:function(e,t){var i=t.type,n=x.default.generateName(e.state,i),r=new x.default.map[i].init({name:n});e.commit("initObject",{type:i,object:r})},createObjectWithTypeAndSelect:function(e,t){var i=t.space_id,n=t.type,r=t.type_id,o=x.default.generateName(e.state,n),a=new x.default.map[n].init({name:o});e.commit("initObjectWithSelection",{space_id:i,type:n,type_id:r,object:a})},selectStory:function(e,t){var i=t.story;e.dispatch("application/setCurrentStoryId",{id:i.id},{root:!0})},cloneStory:function(e,t){var i=e.rootGetters["application/currentStory"];e.commit("cloneObjectArray",{storyInfo:t,currentStory:i})},createWindow:function(e,t){var i=t.story_id,n=t.edge_id,r=t.window_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:i}),d=u.default.find(e.state.library.window_definitions,{id:r}),l=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),c=l&&u.default.find(l.edges,{id:n});if(!s)throw new Error("Story not found");if(!d)throw new Error("Window Definition not found");if(!l)throw new Error("Geometry not found");if(!c)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");var f=u.default.filter(s.windows,{edge_id:n}).map(function(t){return(0,o.default)({},t,{window_definition_mode:u.default.find(e.state.library.window_definitions,{id:t.window_definition_id}).window_definition_mode})}),p=void 0;p="Single Window"===d.window_definition_mode?u.default.reject(f,{window_definition_mode:"Single Window"}):f,p.forEach(function(t){return e.commit("destroyWindow",{story_id:i,object:{id:t.id}})}),e.commit("createWindow",(0,o.default)({},t,{id:y.default.generate(),name:(0,g.genName)(d.name)}))},createWindows:function(e,t){var i=[],n=[];t.forEach(function(t){var r=t.story_id,a=t.edge_id,s=t.window_definition_id,d=t.alpha,l=u.default.find(e.state.stories,{id:r}),c=u.default.find(e.state.library.window_definitions,{id:s}),f=l&&u.default.find(e.rootState.geometry,{id:l.geometry_id}),p=f&&u.default.find(f.edges,{id:a});if(!l)throw new Error("Story not found");if(!c)throw new Error("Window Definition not found");if(!f)throw new Error("Geometry not found");if(!p)throw new Error("Edge not found");if(d<0||d>1)throw new Error("Alpha must be between 0 and 1");var m=u.default.filter(l.windows,{edge_id:a}).map(function(t){return(0,o.default)({},t,{window_definition_mode:u.default.find(e.state.library.window_definitions,{id:t.window_definition_id}).window_definition_mode})}),h=void 0;h="Single Window"===c.window_definition_mode?u.default.reject(m,{window_definition_mode:"Single Window"}):m,h.forEach(function(e){return i.push({story_id:r,object:{id:e.id}})}),n.push((0,o.default)({},t,{id:y.default.generate(),name:(0,g.genName)(c.name)}))}),e.commit("destroyWindows",i),e.commit("createWindows",n)},createDoor:function(e,t){var i=t.story_id,n=t.edge_id,r=t.door_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:i}),d=u.default.find(e.state.library.door_definitions,{id:r}),l=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),c=l&&u.default.find(l.edges,{id:n});if(!s)throw new Error("Story not found");if(!d)throw new Error("Door Definition not found");if(!l)throw new Error("Geometry not found");if(!c)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");e.commit("createDoor",(0,o.default)({},t,{id:y.default.generate(),name:(0,g.genName)(d.name)}))},createDoors:function(e,t){var i=t.map(function(t){var i=t.story_id,n=t.edge_id,r=t.door_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:i}),d=u.default.find(e.state.library.door_definitions,{id:r}),l=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),c=l&&u.default.find(l.edges,{id:n});if(!s)throw new Error("Story not found");if(!d)throw new Error("Door Definition not found");if(!l)throw new Error("Geometry not found");if(!c)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");return(0,o.default)({},t,{id:y.default.generate(),name:(0,g.genName)(d.name)})});e.commit("createDoors",i)},createDaylightingControl:function(e,t){var i=t.story_id,n=t.face_id,r=t.daylighting_control_definition_id,a=t.x,s=t.y,d=u.default.find(e.state.stories,{id:i}),l=u.default.find(e.state.library.daylighting_control_definitions,{id:r}),c=d&&u.default.find(e.rootState.geometry,{id:d.geometry_id}),f=c&&u.default.find(c.faces,{id:n}),p=c&&(S.default.vertexForCoordinates({x:a,y:s},c)||_.default.Vertex(a,s));if(!d)throw new Error("Story not found");if(!l)throw new Error("Daylighting Control Definition not found");if(!c)throw new Error("Geometry not found");if(!f)throw new Error("Face not found");if(!p.id)throw new Error("Unable to find or create vertex");e.commit("geometry/ensureVertsExist",{geometry_id:c.id,vertices:[p]},{root:!0}),e.commit("createDaylightingControl",(0,o.default)({},t,{vertex_id:p.id,id:y.default.generate(),name:(0,g.genName)(l.name)}))},destroyDaylightingControl:function(e,t){var i=e.commit;i("destroyDaylightingControl",t)},destroyWindow:function(e,t){var i=e.commit;i("destroyWindow",t)},destroyWindows:function(e,t){var i=e.commit;i("destroyWindows",t)},destroyDoor:function(e,t){var i=e.commit;i("destroyDoor",t)},destroyDoors:function(e,t){var i=e.commit;i("destroyDoors",t)},modifyDaylightingControl:function(e,t){var i=e.commit;i("modifyDaylightingControl",t)},modifyWindow:function(e,t){var i=e.commit;i("modifyWindow",t)},modifyDoor:function(e,t){var i=e.commit;i("modifyDoor",t)},destroyAllComponents:function(e,t){var i=e.commit,n=t.story_id;i("dropDaylightingControls",{story_id:n}),i("dropWindows",{story_id:n}),i("dropDoors",{story_id:n})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return""===e||null===e?c.default.has(t,"default")?t.default:t.nullable?null:0:+e}function o(e){return("undefined"==typeof e?"undefined":(0,d.default)(e))===(0,d.default)(!0)?e:"true"===e.toLowerCase()}function a(e){return+e||null}Object.defineProperty(t,"__esModule",{value:!0});var s=i(187),d=n(s);t.number=r,t.bool=o,t.gt0orNull=a;var l=i(3),c=n(l)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(30),o=n(r),a=i(52),s=n(a),d=i(6),l=n(d);t.default={allSpaces:function(e,t,i,n){return i.models.stories.reduce(function(e,t){return e.concat(t.spaces)},[])},allShading:function(e,t,i,n){return i.models.stories.reduce(function(e,t){return e.concat(t.shading)},[])},allImages:function(e,t,i,n){return i.models.stories.reduce(function(e,t){return e.concat(t.images)},[])},all:function(e,t,i,n){var r=(0,l.default)({},i.models.library,{stories:i.models.stories,spaces:t.allSpaces,shading:t.allShading,images:t.allImages});return(0,s.default)(r).reduce(function(e,t){return e.push.apply(e,(0,o.default)(r[t])),e},[])}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(294),o=n(r),a=i(298),s=n(a),d=i(296),l=n(d);t.default={namespaced:!0,state:{stories:[],library:{building_units:[],thermal_zones:[],space_types:[],building_types:[{id:"SecondarySchool",name:"Secondary School"},{id:"PrimarySchool",name:"Primary School"},{id:"SmallOffice",name:"Small Office"},{id:"MediumOffice",name:"Medium Office"},{id:"LargeOffice",name:"Large Office"},{id:"SmallHotel",name:"Small Hotel"},{id:"LargeHotel",name:"Large Hotel"},{id:"Warehouse",name:"Warehouse"},{id:"RetailStandalone",name:"Retail Standalone"},{id:"RetailStripmall",name:"Retail Stripmall"},{id:"QuickServiceRestaurant",name:"Quick Service Restaurant"},{id:"FullServiceRestaurant",name:"Full Service Restaurant"},{id:"MidriseApartment",name:"Midrise Apartment"},{id:"HighriseApartment",name:"Highrise Apartment"},{id:"Hospital",name:"Hospital"},{id:"Outpatient",name:"Outpatient"},{id:"SuperMarket",name:"Super Market"},{id:"Laboratory",name:"Laboratory"},{id:"LargeDataCenterLowITE",name:"Large Data Center Low ITE"},{id:"LargeDataCenterHighITE",name:"Large Data Center High ITE"},{id:"SmallDataCenterLowITE",name:"Small Data Center Low ITE"},{id:"SmallDataCenterHighITE",name:"Small Data Center High ITE"}],construction_sets:[],window_definitions:[],daylighting_control_definitions:[],pitched_roofs:[],door_definitions:[]}},actions:o.default,mutations:s.default,getters:l.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(53),o=n(r),a=i(186),s=n(a),d=i(6),l=n(d),c=i(81),u=n(c),f=i(96),p=n(f),m=i(3),h=n(m),g=i(46),y=n(g);t.default={initStory:function(e,t){e.stories.push(t.story)},initSpace:function(e,t){t.story.spaces.push(t.space)},initShading:function(e,t){t.story.shading.push(t.shading)},initObject:function(e,t){e.library[t.type].push(t.object)},initObjectWithSelection:function(e,t){e.library[t.type].push(t.object);var i=!0,n=!1,r=void 0;try{for(var o,a=(0,p.default)(e.stories);!(i=(o=a.next()).done);i=!0){var s=o.value,d=!0,l=!1,c=void 0;try{for(var u,f=(0,p.default)(s.spaces);!(d=(u=f.next()).done);d=!0){var m=u.value;if(m.id===t.space_id)return void(m[t.type_id]=t.object.id)}}catch(e){l=!0,c=e}finally{try{!d&&f.return&&f.return()}finally{if(l)throw c}}}}catch(e){n=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}},destroySpace:function(e,t){t.story.spaces.splice(t.story.spaces.findIndex(function(e){return e.id===t.space.id}),1)},destroyShading:function(e,t){t.story.shading.splice(t.story.shading.findIndex(function(e){return e.id===t.shading.id}),1)},destroyImage:function(e,t){t.story.images.splice(t.story.images.findIndex(function(e){return e.id===t.image.id}),1)},destroyStory:function(e,t){e.stories.splice(e.stories.findIndex(function(e){return e.id===t.story.id}),1)},destroyObject:function(e,t){var i=t.object.id;e.library=h.default.mapValues(e.library,function(e){return h.default.reject(e,{id:i})})},updateStoryWithData:function(e,t){var i=t.story;delete t.story,(0,u.default)(i,t)},createImageForStory:function(e,t){var i=e.stories.find(function(e){return e.id===t.story_id});i.images.push(t.image)},updateSpaceWithData:function(e,t){var i=t.space;if(t.building_type_id&&i.building_unit_id)e.stories=e.stories.map(function(e){return(0,l.default)({},e,{spaces:e.spaces.map(function(e){return e.building_unit_id===i.building_unit_id?(0,l.default)({},e,{building_type_id:t.building_type_id}):e})})});else if(t.building_unit_id){var n=!1,r=!0,o=!1,a=void 0;try{for(var s,d=(0,p.default)(e.stories);!(r=(s=d.next()).done);r=!0){var c=s.value,f=!0,m=!1,h=void 0;try{for(var g,y=(0,p.default)(c.spaces);!(f=(g=y.next()).done);f=!0){var v=g.value;if(v.building_unit_id===t.building_unit_id){t=(0,l.default)({},t,{building_type_id:v.building_type_id}),n=!0;break}}}catch(e){m=!0,h=e}finally{try{!f&&y.return&&y.return()}finally{if(m)throw h}}if(n)break}}catch(e){o=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}}(0,u.default)(i,t),delete i.space},updateShadingWithData:function(e,t){var i=t.shading;(0,u.default)(i,t),delete i.shading},updateImageWithData:function(e,t){var i=t.image;(0,u.default)(i,t),delete i.image},updateObjectWithData:function(e,t){var i=t.object;(0,u.default)(i,t),delete i.object},createWindow:function(e,t){var i=t.story_id,n=t.edge_id,r=t.window_definition_id,o=t.alpha,a=t.id,s=t.name,d=h.default.find(e.stories,{id:i});d.windows.push({window_definition_id:r,edge_id:n,alpha:o,id:a,name:s})},createWindows:function(e,t){var i={};t.forEach(function(e){var t=e.story_id,n=e.edge_id,r=e.window_definition_id,o=e.alpha,a=e.id,s=e.name,d={window_definition_id:r,edge_id:n,alpha:o,id:a,name:s};i[t]?i[t].push(d):i[t]=[d]}),(0,s.default)(i).forEach(function(t){var i=(0,o.default)(t,2),n=i[0],r=i[1],a=h.default.find(e.stories,{id:n});a.windows=a.windows.concat(r)})},createDoor:function(e,t){var i=t.story_id,n=t.edge_id,r=t.door_definition_id,o=t.alpha,a=t.id,s=h.default.find(e.stories,{id:i});s.doors.push({door_definition_id:r,edge_id:n,alpha:o,id:a,name:name})},createDoors:function(e,t){var i={};t.forEach(function(e){var t=e.story_id,n=e.edge_id,r=e.door_definition_id,o=e.alpha,a=e.id,s={door_definition_id:r,edge_id:n,alpha:o,id:a,name:name};i[t]?i[t].push(s):i[t]=[s]}),(0,s.default)(i).forEach(function(t){var i=(0,o.default)(t,2),n=i[0],r=i[1],a=h.default.find(e.stories,{id:n});a.doors=a.doors.concat(r)})},dropWindows:function(e,t){var i=t.story_id,n=h.default.find(e.stories,{id:i});n.windows=[]},dropDoors:function(e,t){var i=t.story_id,n=h.default.find(e.stories,{id:i});n.doors=[]},createDaylightingControl:function(e,t){var i=t.story_id,n=t.face_id,r=t.daylighting_control_definition_id,o=t.vertex_id,a=t.name,s=t.id,d=h.default.find(e.stories,{id:i}),l=h.default.find(d.spaces,{face_id:n});l.daylighting_controls.push({daylighting_control_definition_id:r,vertex_id:o,id:s,name:a})},dropDaylightingControls:function(e,t){var i=t.story_id,n=h.default.find(e.stories,{id:i});n.spaces=n.spaces.map(function(e){return 0===e.daylighting_controls.length?e:(0,u.default)({},e,{daylighting_controls:[]})})},destroyWindowsByDefinition:function(e,t){var i=t.id;e.stories.forEach(function(e){e.windows=h.default.reject(e.windows,{window_definition_id:i})})},destroyDaylightingControlsByDefinition:function(e,t){var i=t.id;e.stories.forEach(function(e){e.spaces.forEach(function(e){e.daylighting_controls=h.default.reject(e.daylighting_controls,{daylighting_control_definition_id:i})})})},destroyDoorsByDefinition:function(e,t){var i=t.id;e.stories.forEach(function(e){e.doors=h.default.reject(e.doors,{door_definition_id:i})})},destroyDaylightingControl:function(e,t){var i=t.story_id,n=t.object.id,r=h.default.find(e.stories,{id:i});r.spaces.forEach(function(e){e.daylighting_controls=h.default.reject(e.daylighting_controls,{id:n})})},modifyDaylightingControl:function(e,t){var i=t.story_id,n=t.id,r=t.key,o=t.value,a=h.default.find(e.stories,{id:i});a.spaces.some(function(e){var t=h.default.find(e.daylighting_controls,{id:n});return!!t&&(t[r]=o,!0)})},destroyWindow:function(e,t){var i=t.story_id,n=t.object.id,r=h.default.find(e.stories,{id:i});r.windows=h.default.reject(r.windows,{id:n})},destroyWindows:function(e,t){var i={};t.forEach(function(e){var t=e.story_id,n=e.object.id;i[t]?i[t].push(n):i[t]=[n]}),(0,s.default)(i).forEach(function(t){var i=(0,o.default)(t,2),n=i[0],r=i[1],a=h.default.find(e.stories,{id:n});a.windows=a.windows.filter(function(e){return r.indexOf(e.id)===-1})})},destroyDoor:function(e,t){var i=t.story_id,n=t.object.id,r=h.default.find(e.stories,{id:i});r.doors=h.default.reject(r.doors,{id:n})},destroyDoors:function(e,t){var i={};t.forEach(function(e){var t=e.story_id,n=e.object.id;i[t]?i[t].push(n):i[t]=[n]}),(0,s.default)(i).forEach(function(t){var i=(0,o.default)(t,2),n=i[0],r=i[1],a=h.default.find(e.stories,{id:n});a.doors=a.doors.filter(function(e){return r.indexOf(e.id)===-1})})},modifyWindow:function(e,t){var i=t.story_id,n=t.id,r=t.key,o=t.value,a=h.default.find(e.stories,{id:i}),s=h.default.find(a.windows,{id:n});s[r]=o},modifyDoor:function(e,t){var i=t.story_id,n=t.id,r=t.key,o=t.value,a=h.default.find(e.stories,{id:i}),s=h.default.find(a.doors,{id:n});s[r]=o},cloneObjectArray:function(e,t){var i=e.stories.find(function(e){return e.id===t.currentStory.id});i.spaces=t.storyInfo.spaces,y.default.replaceSpaceNamesForCloning(e,"spaces",t.currentStory),i.shading=t.storyInfo.shading,i.doors=t.storyInfo.doors,i.images=t.storyInfo.images,i.windows=t.storyInfo.windows}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),o=n(r);t.default={name:function(e,t,i,n){var r=t.getters["models/all"];switch(n){case"stories":r=t.state.models.stories;break;case"spaces":r=t.getters["models/allSpaces"];break;case"shading":r=t.getters["models/allShading"];break;case"images":r=t.getters["models/allImages"];break;default:r=t.state.models.library[n]}var o="";return r.filter(function(t){return t.name===i&&t.id!==e.id}).length?o="Names must be unique.":""===i&&(o="Names must be at least 1 characters long."),o?{success:!1,error:o}:{success:!0}},number:function(e,t,i,n){var r="";return isNaN(i)&&(r="Value must be numeric."),r?{success:!1,error:r}:{success:!0}},oneOf:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,i,n,r){return o.default.includes(t,n)?{success:!0}:{success:!1,error:"Expected one of "+t+", got "+n}}},gt0:function(e,t,i,n){return i>0?{success:!0}:{success:!1,error:"Expected value to be greater than zero"}},closedInterval:function(e,t){return function(i,n,r,o){return r<e||r>t?{success:!1,error:"Must be between "+e+" and "+t}:{success:!0}}},halfOpenInterval:function(e,t){return function(i,n,r,o){return r<e||r>=t?{success:!1,error:"Must be greater than or equal "+e+" and less than "+t}:{success:!0}}},gt0orNull:function(e,t,i,n){return null===i||""===i||i>0?{success:!0}:{success:!1,error:"If provided, value must be greater than 0"}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(52),o=n(r),a=i(3),s=n(a),d=i(310),l=n(d);t.default={setUnits:function(e,t){var i=e.commit,n=e.dispatch,r=e.rootState;if("m"===t.units||"ft"===t.units)throw new Error('units must be "ip" or "si"');"ip"!==t.units&&"si"!==t.units||(i("setUnits",t),r.models.stories.forEach(function(e){return n("models/destroyStory",{story:e},{root:!0})}))},setLanguage:function(e,t){"EN-US"===t.language&&e.commit("setLanguage",t)},setNorthAxis:function(e,t){var i=t.north_axis;i>360||i<0||(e.commit("setConfigNorthAxis",{north_axis:i}),e.commit("setMapRotation",{rotation:i*Math.PI/180}))},setMapVisible:function(e,t){"boolean"==typeof t.visible&&e.commit("setMapVisible",t)},setMapEnabled:function(e,t){"boolean"==typeof t.enabled&&e.commit("setMapEnabled",t)},setMapInitialized:function(e,t){"boolean"==typeof t.initialized&&e.commit("setMapInitialized",t)},setGridVisible:function(e,t){"boolean"==typeof t.visible&&e.commit("setGridVisible",t)},setSpacing:function(e,t){e.commit("setSpacing",t)},setViewMinX:function(e,t){e.commit("setViewMinX",t)},setViewMinY:function(e,t){e.commit("setViewMinY",t)},setViewMaxX:function(e,t){var i=new l.default(t);i.validateInt("max_x"),i.validateMin("max_x",e.state.view.min_x),e.commit("setViewMaxX",i.validatedPayload)},setViewMaxY:function(e,t){var i=new l.default(t);i.validateInt("max_y"),i.validateMin("max_y",e.state.view.min_y),e.commit("setViewMaxY",i.validatedPayload)},setDimensions:function(e,t){var i=new l.default(t);i.validateInt("max_y"),i.validateMin("max_y",e.state.view.min_y),i.validateInt("max_x"),i.validateMin("max_x",e.state.view.min_x),e.commit("setDimensions",t)},setZoom:function(e,t){e.commit("setMapZoom",t)},setMapLatitude:function(e,t){var i=new l.default(t);i.validateFloat("latitude"),i.validateMax("latitude",180),i.validateMin("latitude",-180),e.commit("setMapLatitude",i.validatedPayload)},setMapLongitude:function(e,t){var i=new l.default(t);i.validateFloat("longitude"),i.validateMax("longitude",180),i.validateMin("longitude",-180),e.commit("setMapLongitude",i.validatedPayload)},setMapZoom:function(e,t){var i=new l.default(t);i.validateFloat("zoom"),e.commit("setMapZoom",{zoom:t.zoom})},setMapRotation:function(e,t){e.commit("setConfigNorthAxis",{north_axis:t.rotation/(2*Math.PI)*360}),e.commit("setMapRotation",{rotation:t.rotation})},setPreviousStoryVisible:function(e,t){e.commit("setPreviousStoryVisible",{visible:t.visible})},setShowImportExport:function(e,t){e.commit("setShowImportExport",t)},zoomToFit:function(e,t){t.geometry_id,t.widthOverHeight;e.commit("setView",{xExtent:xExtent,yExtent:yExtent})},modifyGround:function(e,t){var i=e.state,n=e.commit,r=t.key,a=t.val,d=+a;return isNaN(d)&&(d=0),s.default.includes((0,o.default)(i.ground),r)?"tilt_angle"===r&&(d<0||d>=90)?void window.eventBus.$emit("error","Tilt Angle must be in [0, 90)"):void n("modifyGround",{key:r,value:d}):void console.error('unrecognized ground property "'+r+'"')}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={snapTolerance:function(e){var t=.025*Math.abs(e.view.max_x-e.view.min_x);return e.grid.visible?.5*e.grid.spacing:t},angleTolerance:function(){return 20}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(81),o=n(r);t.default={setUnits:function(e,t){"units"in t&&(e.config.units=t.units),"editable"in t&&(e.config.unitsEditable=t.editable)},setLanguage:function(e,t){"language"in t&&(e.config.language=t.language)},setConfigNorthAxis:function(e,t){"north_axis"in t&&(e.north_axis=t.north_axis)},setGridVisible:function(e,t){"visible"in t&&(e.grid.visible=t.visible)},setSpacing:function(e,t){e.grid.spacing=t.spacing},setViewMinX:function(e,t){"min_x"in t&&(e.view.min_x=t.min_x)},setViewMinY:function(e,t){"min_y"in t&&(e.view.min_y=t.min_y)},setViewMaxX:function(e,t){"max_x"in t&&(e.view.max_x=t.max_x)},setViewMaxY:function(e,t){"max_y"in t&&(e.view.max_y=t.max_y)},setDimensions:function(e,t){e.view=(0,o.default)({},e.view,t)},setMapEnabled:function(e,t){"enabled"in t&&(e.map.enabled=t.enabled)},setMapInitialized:function(e,t){"initialized"in t&&(e.map.initialized=t.initialized)},setMapVisible:function(e,t){"visible"in t&&(e.map.visible=t.visible)},setMapLatitude:function(e,t){"latitude"in t&&(e.map.latitude=t.latitude)},setMapLongitude:function(e,t){"longitude"in t&&(e.map.longitude=t.longitude)},setMapZoom:function(e,t){"zoom"in t&&(e.map.zoom=t.zoom)},setMapRotation:function(e,t){"rotation"in t&&(e.map.rotation=t.rotation)},setPreviousStoryVisible:function(e,t){"visible"in t&&(e.previous_story.visible=t.visible)},setShowImportExport:function(e,t){e.show_import_export=t},modifyGround:function(e,t){var i=t.key,n=t.value;e.ground[i]=n}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(81),o=n(r),a=i(3),s=n(a),d=i(184),l=n(d);t.default={importState:function(e,t){e.project=(0,o.default)(l.default.state,t.project),e.application=t.application,e.models=t.models,e.geometry=t.geometry},importLibrary:function(e,t){e.models.library=t},changeUnits:function(e,t){s.default.keys(e).forEach(function(i){e[i]=t[i]})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),o=n(r),a=i(42),s=n(a),d=i(3),l=n(d),c=function(e){return(0,s.default)(e)},u=["application/setScaleX","application/setCurrentTool","application/setScaleY","project/setSpacing","project/setViewMinX","project/setViewMinY","project/setViewMaxX","project/setViewMaxY","project/setDimensions","application/clearSubSelections","application/setCurrentStoryId","application/setCurrentStory","application/setCurrentSpace","application/setCurrentShading","application/setCurrentImage","application/setCurrentSpacePropertyId","application/setCurrentSubSelectionType","project/setPreviousStoryVisible","project/setGridVisible","project/setMapLatitude","project/setMapLongitude","project/setMapRotation"],f=["importFloorplan","project/setMapEnabled","project/setMapInitialized"],p=function(e){return e};t.default={store:null,pastTimetravelStates:[],futureTimetravelStates:[],currentlyInBatch:!1,triggeringAction:"(none)",init:function(e){var t=this;this.store=e,e.timetravel=this,this.pastTimetravelStates=[],this.futureTimetravelStates=[],this.store.replaceState((0,o.default)({},e.state,{timetravelInitialized:!0}));var i=e.replaceState;e.replaceState=function(){window.api&&window.api.config.onChange();for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];r.application.scale=this.state.application.scale,r.project.view=this.state.project.view,r.project.grid=this.state.project.grid,r.project.previous_story=this.state.project.previous_story,i.apply(this,t)};var n=e.commit;e.commit=function(){window.api&&window.api.config.onChange();for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.apply(this,t)};var r=e.dispatch;e.dispatch=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var o=i[0];l.default.includes(u,o)||(t.maybeSaveCheckpoint(o),console.log("dispatching action:",i[0])),r.apply(this,i)}},maybeSaveCheckpoint:function(e){var t=this;this.currentlyInBatch||this.saveCheckpoint(e),this.currentlyInBatch=!0,clearTimeout(this.resetBatchFlag),this.resetBatchFlag=setTimeout(function(){t.currentlyInBatch=!1},0)},saveCheckpoint:function(e){this.pastTimetravelStates.push({triggeringAction:this.triggeringAction,state:c(this.store.state)}),this.triggeringAction=e,console.warn("saving state"),this.futureTimetravelStates=[],this.potentiallyRollbackCheckpoint(e)},potentiallyRollbackCheckpoint:function(e){var t=this.pastTimetravelStates,i=this.store;return l.default.includes(f,e)?(this.pastTimetravelStates=[],void(this.futureTimetravelStates=[])):void l.default.defer(function(){for(;t.length>0&&l.default.isEqual(c(i.state),t[t.length-1].state);)console.log("current state matches previous, so rolling back",t[t.length-1].triggeringAction),t.pop()})},undo:function(){if(this.pastTimetravelStates.length){var e=this.pastTimetravelStates.pop(),t=e.state,i=e.triggeringAction,n=JSON.parse(t),r=this.triggeringAction;this.futureTimetravelStates.push({triggeringAction:this.triggeringAction,state:c(this.store.state)}),this.triggeringAction=i,this.store.replaceState(n),console.log("undo",n),window.eventBus.$emit("success","undo "+r)}},redo:function(){if(this.futureTimetravelStates.length){var e=this.futureTimetravelStates.pop(),t=e.state,i=e.triggeringAction,n=JSON.parse(t);
this.pastTimetravelStates.push({state:c(this.store.state),triggeringAction:this.triggeringAction}),this.triggeringAction=i,this.store.replaceState(n),window.eventBus.$emit("success","redo "+i),console.log("redo",n)}},logTimetravel:function(){console.log("past:",this.pastTimetravelStates.map(function(e){return p(e)})),console.log("current",p(this.store.state)),console.log("future:",this.futureTimetravelStates.map(function(e){return p(e)}))}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e?4===e.length?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e:null}function o(e){return m.default.isArray(e)?e.map(o):m.default.isObject(e)?m.default.mapValues(e,function(e,t){return("id"===t||t.indexOf("_id")>=0)&&m.default.isNumber(e)?String(e):"color"===t?r(e):o(e)}):e}function a(e,t,i){var n=m.default.chain(i).filter({window_definition_mode:"Repeating Windows"}).map(function(e){return[e.id,e]}).fromPairs().value();return e.map(function(e){var i=n[e.window_definition_id];if(i){var r=m.default.find(t.edges,{id:e.edge_id}),o=(0,y.repeatingWindowCenters)({start:m.default.find(t.vertices,{id:r.vertex_ids[0]}),end:m.default.find(t.vertices,{id:r.vertex_ids[1]}),spacing:i.window_spacing,width:i.width});return(0,f.default)({},e,{alpha:m.default.map(o,"alpha")})}return e})}function s(e,t,i){return e.map(function(e){var n=JSON.parse((0,c.default)(m.default.find(t,{id:e.geometry_id})||{edges:[],vertices:[],faces:[]}));return(0,f.default)({},e,{spaces:e.spaces,geometry:n,windows:a(e.windows,n,i),geometry_id:void 0})})}function d(e,t){var i=(0,f.default)({application:e.application,project:e.project,stories:s(e.models.stories,t["geometry/exportData"],e.models.library.window_definitions)},e.models.library,{version:g.default});return o(i)}Object.defineProperty(t,"__esModule",{value:!0});var l=i(42),c=n(l),u=i(6),f=n(u);t.default=d;var p=i(3),m=n(p),h=i(315),g=n(h),y=i(15)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return s[e]=(s[e]||0)+1,a.default.palette.colors[s[e]%a.default.palette.colors.length]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=i(24),a=n(o),s={}},function(e,t,i){"use strict";function n(e){return o[e]=(o[e]||0)+1,r.textures[o[e]%r.textures.length]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=i(24),o={}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.config.north_axis&&(e.north_axis=e.north_axis||e.config.north_axis,delete e.config.north_axis),e.config.units="ft"===e.config.units?"ip":"m"===e.config.units?"si":e.config.units,e}function o(e){return e&&e.length?e.map(function(e){return(0,f.default)({handle:null},e)}):[]}function a(e){return e&&e.length?e.map(function(e){return(0,f.default)({},(0,y.getDefaults)("WindowDefinition"),{window_definition_mode:e.window_definition_type||(0,y.getDefaults)("WindowDefinition").window_definition_mode},e,{window_definition_type:void 0})}):[]}function s(e){return e.map(function(e){var t=e.multiplier>=1?e.multiplier:(0,y.getDefaults)("Story").multiplier;return(0,f.default)({},(0,y.getDefaults)("Story"),e,{spaces:e.spaces.map(function(e){return(0,f.default)({},(0,y.getDefaults)("Space"),e)}),shading:o(e.shading),multiplier:t})})}function d(e,t){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;m.default.isObject(e)?(0,c.default)(e).forEach(function(n){return i(e[n],t,n)}):m.default.isArray(e)?e.forEach(function(e){return i(e,t)}):t(n,e)}window.api&&(window.versionNumber=0);var n=t.options||{},d=t.data.stories.map(function(e){var t=e.geometry.faces.map(function(e){var t=e.edge_ids.map(function(t,i){return{edge_id:t,reverse:!e.edge_order[i]}});return{id:e.id,edgeRefs:t}}),i=e.geometry.edges.map(function(e){return{id:e.id,v1:e.vertex_ids[0],v2:e.vertex_ids[1]}});return{id:e.geometry.id,faces:t,edges:i,vertices:e.geometry.vertices}}),l=t.data.stories.map(function(e){var t=(0,f.default)({geometry_id:e.geometry.id},e);return delete t.geometry,t}),u=0;i(t,function(e,t){e&&"id"===e&&+t>u&&(u=+t)}),u+=1,g.default.setId(u),e.commit("importState",{project:r(t.data.project),application:e.state.application,models:{stories:s(l),library:{building_units:o(t.data.building_units),building_types:o(t.data.building_types),thermal_zones:o(t.data.thermal_zones),space_types:o(t.data.space_types),construction_sets:o(t.data.construction_sets),window_definitions:a(t.data.window_definitions),daylighting_control_definitions:t.data.daylighting_control_definitions||[],pitched_roofs:(t.data.pitched_roofs||[]).map(function(e){return(0,f.default)({shed_direction:null},e)}),door_definitions:o(t.data.door_definitions)}},geometry:d}),m.default.defer(function(){e.dispatch("application/setCurrentStoryId",{id:l[0].id},{root:!0}),l.forEach(function(t){return e.dispatch("geometry/trimGeometry",{geometry_id:t.geometry_id})}),n.noReloadGrid||m.default.defer(function(){return window.eventBus.$emit("zoomToFit")})}),n.noReloadGrid||document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}Object.defineProperty(t,"__esModule",{value:!0});var l=i(52),c=n(l),u=i(6),f=n(u);t.default=d;var p=i(3),m=n(p),h=i(51),g=n(h),y=i(124)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=0;l.libraryTypes.forEach(function(n){if(t.data[n]&&t.data[n].length){var r=e.state.models.library[n].map(function(e){return/_\d+[\w\s]?$/.test(e.name)?e.name.split("_").slice(0,-1).join("_"):e.name});t.data[n]=t.data[n].map(function(e){var t=e;t.id=d.default.generate();var n=r.filter(function(t){return t===e.name}).length;return n&&(t.name+="_"+n),i+=1,t})}});var n=e.state.project.config.units,r=a.default.get(t,"data.project.config.units"),o="ft"===r?"ip":"m"===r?"si":r;"ip"!==o&&"si"!==o&&(console.warn('Expected data.project.config.units to be "ip" or "si", received "'+r+'"'),console.warn("unable to determine units of library -- using project units"),o=n);var s=(0,c.convertLibrary)(t.data,o,n);window.eventBus.$emit("success","Imported "+i+" object"+(1!==i?"s":"")),e.commit("importLibrary",a.default.fromPairs(["building_units","thermal_zones","space_types","construction_sets","window_definitions","daylighting_control_definitions","pitched_roofs"].map(function(t){return[t,e.state.models.library[t].concat(s[t]||[])]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=i(3),a=n(o),s=i(51),d=n(s),l=i(24),c=i(125)},function(e,t){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];return{invalidKeys:i,validatedPayload:t,validateLength:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n in e&&i.indexOf(n)===-1&&(n in e&&e[n].length>=r?t[n]=e[n]:(delete t[n],i.push(n)))},validateMin:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n in e&&i.indexOf(n)===-1&&(e[n]>r?t[n]=e[n]:(delete t[n],i.push(n)))},validateMax:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n in e&&i.indexOf(n)===-1&&(n in e&&e[n]<r?t[n]=e[n]:(delete t[n],i.push(n)))},validateFloat:function(n){n in e&&i.indexOf(n)===-1&&(n in e&&!isNaN(parseFloat(e[n]))?t[n]=parseFloat(e[n]):(delete t[n],i.push(n)))},validateInt:function(n){n in e&&i.indexOf(n)===-1&&(n in e&&!isNaN(parseInt(e[n]))?t[n]=parseInt(e[n]):(delete t[n],i.push(n)))},validateBoolean:function(n){n in e&&i.indexOf(n)===-1&&(n in e?t[n]=!!e[n]:(delete t[n],i.push(n)))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"list of vertices",i=[];return e.map(function(e,t,i){return[i[0===t?i.length-1:t-1],i[t],i[(t+1)%i.length]]}).forEach(function(e){var n=(0,f.default)(e,3),r=n[0],o=n[1],a=n[2];(0,h.ptsAreCollinear)(r,o,a)&&(0,h.distanceBetweenPoints)(r,o)>(0,h.distanceBetweenPoints)(r,a)&&i.push(t+" has a backwards section ("+(0,c.default)(r)+" -> "+(0,c.default)(o)+" -> "+(0,c.default)(a)+")")}),i}function o(e){return r(e.vertices,"face "+e.id)}function a(e){var t=[],i=function(e){return e.x+":"+e.y},n=m.default.fromPairs(e.vertices.map(function(e){return[i(e),e.id]})),r=function(e){return Math.min(+e.v1.id,+e.v2.id)+":"+Math.max(+e.v1.id,+e.v2.id)},a=m.default.fromPairs(e.edges.map(function(e){return[r(e),e.id]}));return e.vertices.forEach(function(e){e.id!==n[i(e)]&&t.push("vertex "+e.id+" is a duplicate of "+n[i(e)])}),e.edges.forEach(function(e){e.v1.id!==e.v2.id&&i(e.v1)!==i(e.v2)||t.push("edge "+e.id+" is of length zero"),e.id!==a[r(e)]&&t.push("edge "+e.id+" is a duplicate of "+a[r(e)])}),e.faces.map(o).forEach(function(e){return t.push.apply(t,(0,d.default)(e))}),t}Object.defineProperty(t,"__esModule",{value:!0});var s=i(30),d=n(s),l=i(42),c=n(l),u=i(53),f=n(u);t.checkVertexList=r,t.checkFace=o,t.default=a;var p=i(3),m=n(p),h=i(15)},function(e,t){"use strict";function i(e,t,i){return(299*e+587*t+114*i)/1e3}Object.defineProperty(t,"__esModule",{value:!0}),t.brightness=i},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){function n(t){var i=h,n=g,r=d.event;return l.event=y,y=h=g=void 0,b=t,_=e.apply(n,i),l.event=r,_}function r(e){return b=e,w=setTimeout(c,t),S?n(e):_}function o(e){var i=e-x,n=e-b,r=t-i;return C?Math.min(r,v-n):r}function a(e){var i=e-x,n=e-b;return void 0===x||i>=t||i<0||C&&n>=v}function c(){var e=s.default.now();return a(e)?u(e):void(w=setTimeout(c,o(e)))}function u(e){return w=void 0,M&&h?n(e):(y=h=g=void 0,_)}function f(){void 0!==w&&clearTimeout(w),b=0,y=h=x=g=w=void 0}function p(){return void 0===w?_:u(s.default.now())}function m(){var e=s.default.now(),i=a(e);if(h=arguments,g=this,x=e,y=d.event,i){if(void 0===w)return r(x);if(C)return w=setTimeout(c,t),n(x)}return void 0===w&&(w=setTimeout(c,t)),_}var h,g,y,v,_,w,x,b=0,S=!1,C=!1,M=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=s.default.toNumber(t)||0,s.default.isObject(i)&&(S=!!i.leading,C="maxWait"in i,v=C?Math.max(s.default.toNumber(i.maxWait)||0,t):v,M="trailing"in i?!!i.trailing:M),m.cancel=f,m.flush=p,m}function o(e,t){return r(e,t,{leading:!0,trailing:!0,maxWait:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(3),s=n(a),d=i(78),l=i(69)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return c.default.forOwn(e,function(e){c.default.isObject(e)&&r(e)}),(0,d.default)(e)||(0,a.default)(e),e}Object.defineProperty(t,"__esModule",{value:!0});var o=i(320),a=n(o),s=i(321),d=n(s);t.default=r;var l=i(3),c=n(l)},function(e,t){"use strict";e.exports="0.7.0"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,function(e,t,i){i(623),i(624);var n=i(8)(i(255),i(688),"data-v-c1b60834",null);e.exports=n.exports},function(e,t,i){i(603);var n=i(8)(i(256),i(663),"data-v-031586be",null);e.exports=n.exports},function(e,t,i){i(611);var n=i(8)(i(257),i(671),"data-v-3d99eee3",null);e.exports=n.exports},function(e,t,i){var n=i(8)(i(258),i(673),null,null);e.exports=n.exports},function(e,t,i){i(608);var n=i(8)(i(259),i(668),"data-v-306f4abb",null);e.exports=n.exports},function(e,t,i){i(618);var n=i(8)(i(260),i(681),"data-v-746cecc8",null);e.exports=n.exports},function(e,t,i){i(613);var n=i(8)(i(261),i(674),null,null);e.exports=n.exports},function(e,t,i){var n=i(8)(i(262),i(676),null,null);e.exports=n.exports},function(e,t,i){i(622);var n=i(8)(i(264),i(687),"data-v-a8e9dfbe",null);e.exports=n.exports},function(e,t,i){var n=i(8)(i(265),i(675),null,null);e.exports=n.exports},function(e,t,i){i(621);var n=i(8)(i(266),i(685),"data-v-987d60e8",null);e.exports=n.exports},function(e,t,i){i(617);var n=i(8)(i(267),i(680),"data-v-73ec12ee",null);e.exports=n.exports},function(e,t,i){var n=i(8)(i(268),i(686),null,null);e.exports=n.exports},function(e,t,i){i(616);var n=i(8)(i(269),i(679),"data-v-6bbb2c29",null);e.exports=n.exports},function(e,t,i){i(625);var n=i(8)(i(271),i(689),"data-v-d56d6c28",null);e.exports=n.exports},function(e,t,i){i(610);var n=i(8)(i(273),i(670),"data-v-3c3490f3",null);e.exports=n.exports},function(e,t,i){i(607);var n=i(8)(i(274),i(667),null,null);e.exports=n.exports},function(e,t,i){i(615);var n=i(8)(i(275),i(678),"data-v-64bc751c",null);e.exports=n.exports},function(e,t,i){i(619);var n=i(8)(i(276),i(682),null,null);e.exports=n.exports},function(e,t,i){var n=i(8)(i(278),i(683),null,null);e.exports=n.exports},function(e,t,i){i(609);var n=i(8)(i(279),i(669),"data-v-309036ee",null);e.exports=n.exports},function(e,t,i){i(614);var n=i(8)(i(280),i(677),null,null);e.exports=n.exports},function(e,t,i){i(612);var n=i(8)(i(281),i(672),"data-v-40563b8d",null);e.exports=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"canvas",attrs:{id:"canvas"}},[i("svg",{attrs:{id:"north_axis",height:"1792",viewBox:"0 0 1792 1792",width:"1792",xmlns:"http://www.w3.org/2000/svg",transform:"rotate("+e.northAxis+")"}},[i("path",{attrs:{d:"M1277 493q-9 19-29 19h-224v1248q0 14-9 23t-23 9H800q-14 0-23-9t-9-23V512H544q-21 0-29-19t5-35L870 74q10-10 23-10 14 0 24 10l355 384q13 16 5 35z"}})]),e._v(" "),e.mapEnabled?i("map-view",{directives:[{name:"show",rawName:"v-show",value:e.mapVisible,expression:"mapVisible"}]}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.col.readonly||!e.col.input_type?i("span",{class:{numeric:e.col.numeric}},[e._v("\n  "+e._s(e.value)+"\n")]):"text"===e.col.input_type?i("input",{class:{numeric:e.col.numeric},attrs:{disabled:e.disabled,placeholder:e.col.nullable&&null===e.row[e.col.name]?"(none)":null},domProps:{value:e.value},on:{keydown:e.blurOnEnter,blur:function(t){e.onChange(t.target.value),e.$forceUpdate()}}}):"color"===e.col.input_type?i("div",{staticClass:"color-wrapper"},[i("input",{staticClass:"input-color",style:e.colorStyles,attrs:{disabled:e.disabled,readonly:""},domProps:{value:e.row[e.col.name]},on:{click:function(t){e.showColorModal=!0}}}),e._v(" "),e.showColorModal?i("ColorPickerModal",{attrs:{value:e.row[e.col.name]},on:{close:function(t){e.showColorModal=!1},change:e.onChange}}):e._e()],1):"select"===e.col.input_type?i("pretty-select",{attrs:{options:e.selectData,value:e.row[e.col.name],disabled:e.disabled,editable:e.col.editable,type:e.col.type,type_id:e.col.name,space_id:e.row.id},on:{change:function(t){return e.onChange(t)}}}):"texture"===e.col.input_type?i("TextureSelect",{attrs:{value:e.row[e.col.name],disabled:e.disabled},on:{change:function(t){return e.onChange(t)}}}):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("aside",[i("div",{staticClass:"overlay",on:{click:e.close}}),e._v(" "),i("div",{staticClass:"modal"},[i("span",[i("svg",{staticClass:"close-button",attrs:{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},on:{click:e.close}},[i("path",{attrs:{d:"M137.05 128l75.476-75.475c2.5-2.5 2.5-6.55 0-9.05s-6.55-2.5-9.05 0L128 118.948 52.525 43.474c-2.5-2.5-6.55-2.5-9.05 0s-2.5 6.55 0 9.05L118.948 128l-75.476 75.475c-2.5 2.5-2.5 6.55 0 9.05 1.25 1.25 2.888 1.876 4.525 1.876s3.274-.624 4.524-1.874L128 137.05l75.475 75.476c1.25 1.25 2.888 1.875 4.525 1.875s3.275-.624 4.525-1.874c2.5-2.5 2.5-6.55 0-9.05L137.05 128z"}})])]),e._v(" "),i("header",[i("h2",[e._v(e._s(e.title))])]),e._v(" "),i("div",{staticClass:"content"},[e._t("default")],2)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"modal"}},[i("Portal",{attrs:{to:"color-picker"}},[i("div",{staticClass:"color-picker-modal"},[i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper",on:{click:function(t){return e.$emit("close")}}},[i("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"modal-body"},[i("swatches",{attrs:{inline:"","show-fallback":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)])])])])])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalBase",{staticClass:"settings-modal",attrs:{title:"Settings"},on:{close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"settings"},[i("p",[i("label",{staticClass:"input-text"},[e._v("\n        North Axis\n        "),i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.northAxis,expression:"northAxis",modifiers:{number:!0,lazy:!0}}],attrs:{type:"text",disabled:e.mapEnabled},domProps:{value:e.northAxis},on:{change:function(t){e.northAxis=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),i("ExpandableDrawer",{staticClass:"ground-props-drawer",attrs:{title:"Ground Properties"}},[i("p",[i("label",{staticClass:"input-text"},[e._v("\n          Floor Offset\n          "),i("Info",[e._v("\n            Specifies the vertical offset between the building floor and the ground plane.\n            Use a value < 0 for buildings with below-grade spaces, or a value > 0 for,\n            e.g., buildings on piers.\n          ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.floor_offset,expression:"floor_offset"}],attrs:{type:"text"},domProps:{value:e.floor_offset},on:{input:function(t){t.target.composing||(e.floor_offset=t.target.value)}}})],1)]),e._v(" "),i("p",[i("label",{staticClass:"input-text"},[e._v("\n          Azimuth Angle\n          "),i("Info",[e._v("\n            Direction of the ground plane, in clockwise degrees from the\n            positive y-axis when viewed from above.\n          ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.azimuth_angle,expression:"azimuth_angle"}],attrs:{type:"text"},domProps:{value:e.azimuth_angle},on:{input:function(t){t.target.composing||(e.azimuth_angle=t.target.value)}}})],1)]),e._v(" "),i("p",[i("label",{staticClass:"input-text"},[e._v("\n          Tilt Slope\n          "),i("Info",[e._v("\n            Slope of the ground plane from horizontal. For example, a value of 1 implies a 45° angle.\n          ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tilt_slope,expression:"tilt_slope"}],attrs:{type:"text"},domProps:{value:e.tilt_slope},on:{input:function(t){t.target.composing||(e.tilt_slope=t.target.value)}}})],1)])]),e._v(" "),i("button",{staticClass:"button",on:{click:function(t){return e.$emit("close")}}},[e._v("Okay")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"edit-bar"},[e._l(e.columns,function(t){return i("span",{key:t.name,attrs:{"data-column":t.name}},[i("GenericInput",{attrs:{col:t,row:e.row,onChange:e.updateRow.bind(null,e.row.id,t.name)}})],1)}),e._v(" "),i("span",{staticClass:"destroy",on:{click:function(t){return e.destroy()}}},[i("Delete",{staticClass:"button"})],1)],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"input-select"},[e.disabled?e._e():i("button",{class:"texture-"+e.value,on:{click:function(t){e.open=!e.open},blur:function(t){e.open=!1}}},[i("span",{staticClass:"svg-background"}),e._v(" "),i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[i("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])]),e._v(" "),e.open?i("Portal",{attrs:{to:"texture-options"}},[i("ul",{style:e.ulStyle()},e._l(e.textures,function(t){return i("li",{key:t,class:(n={selected:t===e.value},n["texture-"+t]=!0,n),on:{mousedown:function(i){return e.choose(t)}}});var n}),0)]):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalBase",{attrs:{title:"Save "+e.saveWhat+" as"},on:{close:function(t){return e.$emit("close")}}},[i("span",{staticClass:"input-text"},[i("input",{ref:"downloadName",attrs:{type:"text",id:"download-name",spellcheck:"false"},domProps:{value:e.saveWhat.toLowerCase()},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.downloadFile.apply(null,arguments)}}}),e._v("\n    .json\n    "),i("button",{staticClass:"download-button",on:{click:e.downloadFile}},[e._v("Download")])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"map-container"}},[i("div",{ref:"map",style:{"pointer-events":"Map"===e.tool?"all":"none"},attrs:{id:"map"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===e.tool,expression:"tool === 'Map'"}],attrs:{id:"autocomplete"}},[i("span",{staticClass:"input-text"},[i("input",{ref:"addressSearch",attrs:{type:"text",placeholder:"Search for a location"}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===e.tool,expression:"tool === 'Map'"}],attrs:{id:"help-text"}},[i("p",[e._v("Drag the map and/or search to set desired location.  Use alt+shift to rotate the north axis. Click 'Done' when finished.")]),e._v(" "),i("button",{on:{click:e.finishSetup}},[e._v("Done")])]),e._v(" "),e.mapModalVisible&&!e.mapInitialized?i("map-modal",{on:{close:function(t){e.mapModalVisible=!1,e.showReticle()}}}):e._e(),e._v(" "),i("svg",{attrs:{id:"reticle"}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{attrs:{id:"toolbar"}},[i("section",{attrs:{id:"top"}},[i("div",{attrs:{id:"navigation-head"}},[e.showImportExport?i("div",{staticClass:"import-export-buttons"},[i("input",{ref:"importLibrary",attrs:{type:"file"},on:{change:function(t){return e.importDataAsFile(t,"library")}}}),e._v(" "),i("input",{ref:"importInput",attrs:{type:"file"},on:{change:function(t){return e.importDataAsFile(t,"floorplan")}}}),e._v(" "),i("div",{attrs:{title:"open floorplan"}},[i("open-floorplan-svg",{staticClass:"button",attrs:{id:"import"},nativeOn:{click:function(t){return e.$refs.importInput.click()}}})],1),e._v(" "),i("div",{attrs:{title:"save floorplan"}},[i("save-floorplan-svg",{staticClass:"button",attrs:{id:"export"},nativeOn:{click:function(t){return e.exportData.apply(null,arguments)}}})],1),e._v(" "),i("div",{attrs:{title:"import library"}},[i("import-library-svg",{staticClass:"button",nativeOn:{click:function(t){return e.$refs.importLibrary.click()}}})],1)]):e._e(),e._v(" "),i("div",{attrs:{id:"undo-redo"}},[i("div",{attrs:{title:"undo"}},[i("undo-svg",{staticClass:"button",class:{disabled:!e.timetravelInitialized},nativeOn:{click:function(t){return e.undo.apply(null,arguments)}}})],1),e._v(" "),i("div",{attrs:{title:"redo"}},[i("redo-svg",{staticClass:"button",class:{disabled:!e.timetravelInitialized},attrs:{disabled:!e.timetravelInitialized},nativeOn:{click:function(t){return e.redo.apply(null,arguments)}}})],1)])]),e._v(" "),i("ul",{attrs:{id:"mode-tabs"}},[i("li",{staticClass:"tab",class:{active:"floorplan"===e.modeTab},attrs:{"data-modetab":"floorplan"},on:{click:function(t){e.modeTab="floorplan"}}},[i("span",[e._v("\n          Floorplan\n          "),i("tab-floorplan-svg",{staticClass:"icon"})],1)]),e._v(" "),i("li",{staticClass:"tab",class:{active:"assign"===e.modeTab},on:{click:function(t){e.modeTab="assign"}}},[i("span",[e._v("\n          Assignments\n          "),i("tab-assign-svg",{staticClass:"icon"})],1)]),e._v(" "),i("li",{staticClass:"tab",class:{active:"components"===e.modeTab},attrs:{"data-modetab":"components"},on:{click:function(t){e.modeTab="components"}}},[i("span",[e._v("\n          Components\n          "),i("tool-component-svg",{staticClass:"icon"})],1)]),e._v(" "),e._m(0)]),e._v(" "),i("div",{attrs:{id:"grid-settings"}},[i("div",{staticClass:"input-checkbox"},[i("label",[e._v("Story Below")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.previousStoryVisible,expression:"previousStoryVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.previousStoryVisible)?e._i(e.previousStoryVisible,null)>-1:e.previousStoryVisible},on:{change:function(t){var i=e.previousStoryVisible,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);n.checked?a<0&&(e.previousStoryVisible=i.concat([o])):a>-1&&(e.previousStoryVisible=i.slice(0,a).concat(i.slice(a+1)))}else e.previousStoryVisible=r}}})]),e._v(" "),e.mapEnabled?i("div",{staticClass:"input-checkbox"},[i("label",[e._v("map")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mapVisible,expression:"mapVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.mapVisible)?e._i(e.mapVisible,null)>-1:e.mapVisible},on:{change:function(t){var i=e.mapVisible,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);n.checked?a<0&&(e.mapVisible=i.concat([o])):a>-1&&(e.mapVisible=i.slice(0,a).concat(i.slice(a+1)))}else e.mapVisible=r}}})]):e._e(),e._v(" "),i("div",{staticClass:"input-checkbox"},[i("label",[e._v("grid")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.gridVisible,expression:"gridVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.gridVisible)?e._i(e.gridVisible,null)>-1:e.gridVisible},on:{change:function(t){var i=e.gridVisible,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);n.checked?a<0&&(e.gridVisible=i.concat([o])):a>-1&&(e.gridVisible=i.slice(0,a).concat(i.slice(a+1)))}else e.gridVisible=r}}})]),e._v(" "),i("div",{staticClass:"input-number"},[i("label",[e._v("spacing")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.spacing,expression:"spacing",modifiers:{number:!0,lazy:!0}}],domProps:{value:e.spacing},on:{change:function(t){e.spacing=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e.allowSettingUnits?e._e():i("label",[e._v(e._s(e.rwUnits))])]),e._v(" "),e.allowSettingUnits?i("PrettySelect",{ref:"unitsSelect",attrs:{options:["ft","m"],value:e.rwUnits},on:{change:e.updateUnits}}):e._e(),e._v(" "),i("div",{attrs:{title:"settings"},on:{click:function(t){e.showGroundPropsModal=!0}}},[i("SettingsGear",{staticClass:"button"})],1)],1)]),e._v(" "),i("section",{class:e.modeTab,attrs:{id:"bottom"}},["floorplan"===e.modeTab?[i("div",{attrs:{id:"instructions"}},[e._v("Draw a floorplan and import images")]),e._v(" "),i("div",{staticClass:"tools-list tools",attrs:{id:"drawing-tools"}},[i("div",{class:{active:"Rectangle"===e.tool},attrs:{"data-tool":"Rectangle",title:"Rectangle"},on:{click:function(t){e.tool="Rectangle"}}},[i("tool-draw-rectangle-svg",{staticClass:"button"})],1),e._v(" "),i("div",{class:{active:"Polygon"===e.tool},attrs:{"data-tool":"Polygon",title:"Polygon"},on:{click:function(t){e.tool="Polygon"}}},[i("tool-draw-polygon-svg",{staticClass:"button"})],1),e._v(" "),i("div",{class:{active:"Fill"===e.tool},attrs:{"data-tool":"Fill",title:"Fill"},on:{click:function(t){e.tool="Fill"}}},[i("tool-fill-svg",{staticClass:"button"})],1),e._v(" "),i("div",{class:{active:"Eraser"===e.tool},attrs:{"data-tool":"Eraser",title:"Eraser"},on:{click:function(t){e.tool="Eraser"}}},[i("tool-erase-svg",{staticClass:"button"})],1),e._v(" "),i("div",{class:{active:"Image"===e.tool},attrs:{"data-tool":"Image",title:"Image"},on:{click:e.setImageTool}},[i("tool-image-svg",{staticClass:"button"})],1)])]:e._e(),e._v(" "),"components"===e.modeTab?[i("div",{attrs:{id:"instructions"}},[e.currentComponentDefinition?i("span",[e._v("Click to place a "+e._s(e.currentComponentDefinition.name))]):i("span",[e._v("Add fenestration, daylighting, and PV")])]),e._v(" "),i("ComponentInstanceEditBar")]:e._e(),e._v(" "),"assign"===e.modeTab?[i("div",{attrs:{id:"instructions"}},[e._v("Assign thermal zones, etc, to spaces")])]:e._e(),e._v(" "),i("div",{attrs:{id:"grid-tools"}},[i("RenderByDropdown"),e._v(" "),i("div",{attrs:{title:"zoom to fit"}},[i("ZoomToFitSvg",{staticClass:"button",nativeOn:{click:function(t){return e.zoomToFit.apply(null,arguments)}}})],1)],1)],2),e._v(" "),i("section",{staticClass:"modals"},[e.showSaveModal?i("SaveAsModal",{attrs:{saveWhat:e.thingWereSaving,dataToDownload:e.dataToDownload},on:{close:function(){e.showSaveModal=!1,e.thingWereSaving=""}}}):e.showGroundPropsModal?i("Settings",{on:{close:function(t){e.showGroundPropsModal=!1}}}):e._e()],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("span")])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showInstanceEditor?i("EditBar",{attrs:{row:e.componentInstance,columns:e.visibleColumns,updateRow:e.modifyComponentInstance,destroy:e.destroyComponent}}):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editable-table"},[i("RecycleScroller",{staticClass:"scroller",attrs:{id:"recycle-scroller",items:e.sortedRows,"item-size":70},nativeOn:{scroll:function(t){e.wrapperScrollLeft=t.target.scrollLeft}},scopedSlots:e._u([{key:"before",fn:function(){return[i("div",{staticClass:"flex-row fixed",style:{"-webkit-transform":"translateX("+-e.wrapperScrollLeft+"px)",transform:"translateX("+-e.wrapperScrollLeft+"px)","clip-path":"polygon("+e.wrapperScrollLeft+"px 0%, 100% 0%, 100% 100%, "+e.wrapperScrollLeft+"px 100%)"},attrs:{id:"fixedHeader"}},[i("div",{staticClass:"checkbox-header"}),e._v(" "),e._l(e.visibleColumns,function(t){return i("div",{key:t.name,staticClass:"headers",class:{active:e.sortKey===t.name},attrs:{fixed:t.fixed,id:t.displayName.replace(/\s/g,""),"data-column":t.name,prop:t.name,label:t.displayName,"class-name":"column__"+t.name,"min-width":t.width||165},on:{click:function(i){return e.sortBy(t.name)}}},[e._v("\n          "+e._s(t.displayName)+"\n          "),e.sortKey!==t.name||e.sortKey===t.name&&e.sortDescending?i("i",{staticClass:"icon-chevron-down"}):e._e(),e._v(" "),e.sortKey!==t.name||e.sortDescending?e._e():i("i",{staticClass:"icon-chevron-up"})])})],2)]},proxy:!0},{key:"default",fn:function(t){var n=t.item;return[i("div",{staticClass:"cell table-data flex-row table-first-column"},[i("div",{staticClass:"select",on:{click:function(t){return t.stopPropagation(),e.selectRow(n)}}},[i("input",{attrs:{type:"radio"},domProps:{checked:e.selectedItemId===n.id}})]),e._v(" "),i("generic-input",{attrs:{col:e.visibleColumns[0],row:n,onChange:e.updateRow.bind(null,n.id,e.visibleColumns[0].name)}})],1),e._v(" "),i("div",{key:n.id,staticClass:"flex-row",attrs:{fixed:n.fixed,"data-column":n.name,prop:n.name,label:n.displayName,"class-name":"column__"+n.name,"min-width":n.width||154}},[e._l(e.visibleColumns.slice(1),function(t){return i("div",{key:t.name,staticClass:"cell table-data",attrs:{"data-column":t.name,prop:t.name,label:t.displayName}},[i("generic-input",{attrs:{col:t,row:n,onChange:e.updateRow.bind(null,n.id,t.name)}})],1)}),e._v(" "),i("div",[i("div",{staticClass:"duplicate",attrs:{title:"duplicate"},on:{click:function(t){return t.stopPropagation(),e.duplicateRow(n)}}},[i("Copy",{staticClass:"button"})],1)]),e._v(" "),i("div",[i("div",{staticClass:"destroy",attrs:{title:"destroy"
},on:{click:function(t){return t.stopPropagation(),e.deleteRow(n)}}},[i("Delete",{staticClass:"button"})],1)])],2)]}}])})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("input",{ref:"imageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg,image/png,image/svg,image/gif",id:"upload-image-input"},on:{change:e.uploadImage}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"expandable-drawer":!0,expanded:e.expanded}},[i("p",{staticClass:"title",on:{click:function(t){e.expanded=!e.expanded}}},[e._v("\n    "+e._s(e.caret)+" "+e._s(e.title)+"\n  ")]),e._v(" "),e.expanded?i("p",[e._t("default")],2):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{id:"pattern-defs"}},[i("defs",[e._l(e.modifiers,function(t,n){return[i("pattern",{attrs:{id:"circles-2"+n,patternUnits:"userSpaceOnUse",width:"5",height:"5"}},[i("rect",{attrs:{width:"5",height:"5",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("circle",{attrs:{cx:"1.5",cy:"1.5",r:"1.5",fill:t}})]),e._v(" "),i("pattern",{attrs:{id:"circles-5"+n,patternUnits:"userSpaceOnUse",width:"9",height:"9"}},[i("rect",{attrs:{width:"9",height:"9",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("circle",{attrs:{cx:"3",cy:"3",r:"3",fill:t}})]),e._v(" "),i("pattern",{attrs:{id:"circles-8"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("circle",{attrs:{cx:"4.5",cy:"4.5",r:"4.5",fill:t}})]),e._v(" "),i("pattern",{attrs:{id:"diagonal-stripe-1"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:t,"stroke-width":"1"}})]),e._v(" "),i("pattern",{attrs:{id:"diagonal-stripe-4"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:t,"stroke-width":"3"}})]),e._v(" "),i("pattern",{attrs:{id:"diagonal-stripe-6"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:t}}),e._v(" "),i("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:"white","stroke-width":"1"}})]),e._v(" "),i("pattern",{attrs:{id:"dots-5"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("rect",{attrs:{x:"0",y:"0",width:"5",height:"5",fill:t}})]),e._v(" "),i("pattern",{attrs:{id:"dots-8"+n,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[i("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("rect",{attrs:{x:"0",y:"0",width:"8",height:"8",fill:t}})]),e._v(" "),i("pattern",{attrs:{id:"crosshatch"+n,patternUnits:"userSpaceOnUse",width:"8",height:"8"}},[i("rect",{attrs:{width:"8",height:"8",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),i("path",{attrs:{d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":"0.5",stroke:t,"stroke-opacity":"0.8"}})]),e._v(" "),i("pattern",{attrs:{id:"vertical-line"+n,patternUnits:"userSpaceOnUse",width:"4",height:"49"}},[i("rect",{attrs:{width:"4",height:"50",fill:"#fff","fill-opacity":"0.8"}}),e._v(" "),i("rect",{attrs:{width:"2",height:"50",fill:"#fff","fill-opacity":"0.5"}}),e._v(" "),i("rect",{attrs:{x:"2",width:"1",height:"50",fill:t,"fill-opacity":"0.5"}})])]})],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"layout-navigation"}},[i("nav",{attrs:{id:"navigation"}},[i("section",{attrs:{id:"selections"}}),e._v(" "),i("div",{attrs:{id:"list"}},[i("Library",{attrs:{objectTypes:["stories"],mode:"stories",compact:"stories"!==e.libraryExpanded},on:{toggleCompact:function(t){e.libraryExpanded="stories"!==e.libraryExpanded&&"stories"}}}),e._v(" "),i("Library",{attrs:{addNewOnHotkey:"true",objectTypes:e.objectTypesForTab,mode:e.subselectionType,searchAvailable:!0,compact:"subselection"!==e.libraryExpanded},on:{changeMode:function(t){e.subselectionType=t},toggleCompact:function(t){e.libraryExpanded="subselection"!==e.libraryExpanded&&"subselection"}}})],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"library-select"},[i("div",{staticClass:"rows"},e._l(e.rows,function(t){return i("div",{key:t.id,class:{active:e.selectedItemId===t.id},attrs:{"data-id":t.id},on:{click:function(i){return e.selectItem(t)}}},[i("span",{style:{"background-color":t.color}}),e._v("\n        "+e._s(t.name)+"\n        "),i("div",{staticClass:"buttons"},[i("a",{staticClass:"duplicate",attrs:{title:"duplicate"},on:{click:function(i){return i.stopPropagation(),e.duplicateRow(t)}}},[i("Copy",{staticClass:"button"})],1),e._v(" "),i("a",{staticClass:"destroy",attrs:{title:"delete"},on:{click:function(i){return i.stopPropagation(),e.destroyItem(t)}}},[i("Delete",{staticClass:"button"})],1)])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"inspector"}},[i("section",{staticClass:"list",attrs:{id:"geometry-list"}},[e._l(e.currentStoryGeometry.faces,function(t){return e.currentSpace||e.currentShading?e._e():[i("header",[i("h3",[e._v("Face "+e._s(t.id))])]),e._v(" "),e._l(t.edgeRefs,function(t){return i("div",{staticClass:"list-item"},[e._v("\n        edge "+e._s(t.edge_id)+" "+e._s(t.reverse?"reversed ":"")+"\n        "),i("br"),e._v("startpoint "+e._s(e.startpoint(t))+"\n        "),i("br"),e._v("endpoint "+e._s(e.endpoint(t))+"\n      ")])})]}),e._v(" "),e.currentSubSelectionFace?[i("header",[i("h3",[e._v("Face "+e._s(e.currentSubSelectionFace.id)+" on "+e._s(e.currentSpace?e.currentSpace.name:e.currentShading.name))])]),e._v(" "),e._l(e.currentSubSelectionFace.edgeRefs,function(t){return i("div",{staticClass:"list-item"},[e._v("\n        edge "+e._s(t.edge_id)+" "+e._s(t.reverse?"reversed ":"")+"\n        "),i("br"),e._v("startpoint "+e._s(e.startpoint(t))+"\n        "),i("br"),e._v("endpoint "+e._s(e.endpoint(t))+"\n      ")])})]:e._e()],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editable-select-list",class:{expanded:!e.compact},attrs:{"data-object-type":e.selectedObjectType}},[i("div",{staticClass:"controls"},[i("div",{staticClass:"control-group"},[e.objectTypes.length>1?i("PrettySelect",{attrs:{options:e.objectTypes,value:e.selectedObjectType},on:{change:function(t){return e.$emit("selectObjectType",t)}}}):i("span",[e._v(e._s(e.objectTypes[0].display||e.objectTypes[0].displayName))]),e._v(" "),e.addRow?i("a",{staticClass:"add-new",attrs:{title:"Create new"},on:{click:e.addRow}},[i("AddNew",{staticClass:"button"})],1):e._e()],1),e._v(" "),i("div",{staticClass:"control-group"},[i("a",{attrs:{title:e.compact?"expand":"contract"},on:{click:e.toggleCompact}},[i("DoubleArrows",{staticClass:"button",attrs:{transform:e.compact?"":"scale(-1, 1)"}})],1)])]),e._v(" "),i("div",{staticClass:"input-text search-spot"},[e.searchAvailable?i("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search-bar",attrs:{placeholder:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}):e._e()]),e._v(" "),e.compact?i("LibrarySelect",{attrs:{rows:e.searchedRows,selectItem:e.selectRow,destroyItem:e.destroyRow,selectedItemId:e.selectedRowId,duplicateRow:e.duplicateRow}}):i("EditableTable",{attrs:{selectRow:e.selectRow,selectedItemId:e.selectedRowId,columns:e.visibleColumns,rows:e.searchedRows,deleteRow:e.destroyRow,updateRow:e.editRow,duplicateRow:e.duplicateRow}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isChrome?e._e():i("p",{staticClass:"non-chrome-warning"},[e._v("\n  Warning. This web-app is currently only tested against recent versions of Chrome. \n")])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"render-by"},[i("PrettySelect",{attrs:{label:"View By",options:e.renderableOptions,value:e.currentMode},on:{change:function(t){e.currentMode=t}}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"input-select"},[e.label?i("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),i("select",{ref:"select",staticClass:"pretty-select",attrs:{disabled:e.disabled},on:{change:e.handleChange}},e._l(e.normalizedOpts,function(t){return i("option",{domProps:{value:t.val,selected:t.val===e.value}},[e._v(e._s(t.display))])}),0),e._v(" "),i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[i("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"info"},[i("InfoIcon",{staticClass:"button"}),e._v(" "),i("span",{staticClass:"tooltip-text"},[e._t("default")],2)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("EditableSelectList",{attrs:{selectedObjectType:e.mode,objectTypes:e.objectTypesDisplay,rows:e.rows,columns:e.columns,selectedRowId:e.selectedObject&&e.selectedObject.id,selectRow:function(t){e.selectedObject=t},addRow:e.addRowPermitted&&e.createObject,editRow:e.modifyObject,destroyRow:e.destroyObject,duplicateRow:e.duplicateRow,searchAvailable:e.searchAvailable,compact:e.compact},on:{toggleCompact:function(t){return e.$emit("toggleCompact",t)},selectObjectType:e.changeMode}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"gridParent",class:{"reduce-ticks":e.reduceTicks},style:{"pointer-events":"Drag"===e.currentTool||"Map"===e.currentTool?"none":"auto"},attrs:{id:"grid"}},[i("svg",{ref:"grid",attrs:{id:"svg-grid"}},[i("g",{staticClass:"axis axis--x"}),e._v(" "),i("g",{staticClass:"axis axis--y"}),e._v(" "),i("g",{staticClass:"images",attrs:{"data-transform-plz":""}}),e._v(" "),i("g",{staticClass:"polygons",attrs:{"data-transform-plz":""}}),e._v(" "),i("g",{staticClass:"walls",attrs:{"data-transform-plz":""}})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"tool_"+e.tool.toLowerCase(),attrs:{id:"app"}},[i("toolbar",{class:{"disabled-component":"Map"===e.tool}}),e._v(" "),i("div",{class:{"nav-on-top":e.navigationExpanded},attrs:{id:"layout-main"}},[i("navigation",{class:{"disabled-component":"Map"===e.tool},on:{expanded:function(t){e.navigationExpanded=t}}}),e._v(" "),i("main",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.error||e.success,expression:"error || success"}],class:{error:e.error,success:e.success},attrs:{id:"alert-text"}},[i("p",[e._v(e._s(e.error||e.success))])]),e._v(" "),i("canvas-view"),e._v(" "),i("grid-view")],1)],1),e._v(" "),i("ImageUpload"),e._v(" "),i("Textures"),e._v(" "),i("PortalTarget",{attrs:{name:"texture-options"}}),e._v(" "),i("PortalTarget",{attrs:{name:"color-picker"}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("aside",[i("div",{staticClass:"overlay"}),e._v(" "),i("div",{staticClass:"modal"},[e._m(0),e._v(" "),i("NonChromeWarning"),e._v(" "),i("div",{staticClass:"content"},[i("p",[i("a",{staticClass:"quickstart-action new-floorplan",on:{click:function(t){e.mapEnabled=!1,e.mapVisible=!1,e.$emit("close")}}},[i("div",{staticClass:"title"},[e._v("New")]),e._v(" "),i("QuickstartIconNewFloorplan"),e._v(" "),i("div",{staticClass:"explanation"},[e._v("Create a new floorplan")])],1)]),e._v(" "),i("p",[i("a",{staticClass:"quickstart-action",attrs:{disabled:!e.online},on:{click:function(t){e.mapEnabled=!0,e.tool="Map",e.$emit("close")}}},[i("div",{staticClass:"title"},[e._v("New With Map")]),e._v(" "),i("QuickstartIconNewMapFloorplan"),e._v(" "),i("div",{staticClass:"explanation"},[e._v("Create a new floorplan with a map")])],1)]),e._v(" "),i("p",[i("a",{staticClass:"quickstart-action open-floorplan",attrs:{id:"import"},on:{click:function(t){return e.$refs.importInput.click()}}},[i("div",{staticClass:"title"},[e._v("Open")]),e._v(" "),i("QuickstartIconOpenFloorplan"),e._v(" "),i("div",{staticClass:"explanation"},[e._v("Open an existing floorplan")])],1)]),e._v(" "),i("input",{ref:"importInput",attrs:{id:"importInput",type:"file"},on:{change:e.importFloorplanAsFile}})])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[i("h2",[e._v("Quickstart")])])}]}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.4 17.7V5H.6v13h18.2l-.4-.3zM1.6 6h15.8v11L13 13.7l-2.3 1.7L7 11.5 1.8 17h-.2V6z",fill:"#fff"}}),_c("circle",{attrs:{cx:"9.7",cy:"5.4",fill:"#39b54a",r:"5"}}),_c("path",{attrs:{d:"M11.5 4.5h-1.2V3.3c0-.3-.2-.5-.5-.5h-.6c-.3 0-.5.2-.5.5v1.2H7.5c-.3 0-.5.2-.5.5v.6c0 .2.2.4.5.4h1.2v1.2c0 .3.2.5.5.5h.6c.3 0 .5-.2.5-.5V6h1.2c.3 0 .5-.2.5-.5V5c-.1-.3-.3-.5-.5-.5z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10.5",cy:"10",fill:"#39b54a",r:"7.9"}}),_c("path",{attrs:{d:"M13.6 8.8h-1.9V6.9c0-.4-.3-.8-.8-.8H10c-.4 0-.8.3-.8.8v1.9H7.3c-.4 0-.8.3-.8.8v.9c0 .4.3.8.8.8h1.9v1.9c0 .4.3.8.8.8h.9c.4 0 .8-.3.8-.8v-1.9h1.9c.4 0 .8-.3.8-.8v-1c-.1-.4-.4-.7-.8-.7z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM12.9 5.1c0-.9-.7-1.7-1.7-1.7-.9 0-1.7.7-1.7 1.7 0 .9.7 1.7 1.7 1.7.9 0 1.7-.8 1.7-1.7zm5.3 15.5h-2.9v1.1h7v-1.1h-1.7v-7.3h1.7v-1.1h-9.7v1.1h5.6v7.3zM6 16.7v.1c0 .3.2.5.5.5h1.6v1.5h.3v1l-2 .6v.5h.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1l1.6-.2v.1h.1v.6h.2v.4H9v-1h.1v-.1l1.5.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1h.2v-.5l-2-.5v-1h.3v-1.5h1.9c.3 0 .5-.2.5-.5v-.1c0-.2-.1-.3-.2-.4h1.3l-.8 4c-.1.5.3 1.1.8 1.2.6.1 1.1-.2 1.2-.8l1.1-5.3v-.4c-.1-.6-.5-1-1.1-1h-3.2l.4-1.9h3.9c.2 0 .3 0 .5-.1h4.2v-.5c.1 0 .1-.1.2-.1l.5.2 1.9-5-.6-.2-1.9 4.9h-.1c-.1 0-.2.1-.2.2H16v-.1c0-.5-.4-.9-.9-.9h-3.5l.2-1c.2-.9-.4-1.7-1.3-1.9l-.5-.1c-.8-.4-1.6.1-1.8 1L7.7 11l-.1.7V10c0-.3-.2-.5-.5-.5h-.5c-.3 0-.6.2-.6.5v3.8c0 .3.2.5.5.5v1.8c-.3.1-.5.3-.5.6zm1-1c.1.2.3.4.5.5H7v-.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-8.5-.2H6v-19h13v19zm-12.1-.9H18v-17H6.9v17z"}}),_c("path",{attrs:{d:"M11.8 15.9h5.8v4.3h-5.8zm0-5.7h5.8v4.3h-5.8zm0-5.8h5.8v4.3h-5.8z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM20.6 6.6c0-.1-.1-.2-.1-.3-.1.1-.1.2-.2.2-.7.8-1.3 1.7-2 2.5-.4.5-1 .6-1.5.2-.1-.1-.2-.2-.4-.3-.2-.2-.3-.4-.4-.7 0-.3.1-.6.3-.8.7-.8 1.3-1.7 2-2.5.1-.1.1-.2.2-.2-.1 0-.2 0-.3-.1-1.2-.2-2.5.3-3.4 1.3-.8 1-1 2.4-.6 3.6-.6.8-1.3 1.7-1.9 2.5L9.2 7.7c.2-.1.4-.3.6-.5 1.9-1.4 2.4-.2 2.9-.8.5-.6-2-2.2-4.1-.7-.1.2-.3.4-.5.5-.3-.2-.7-.3-1 0-.2.2-.3.5-.2.8-.6.5-1.1.8-1.3 1l-.1-.1c-.2-.3-.6-.3-.8-.1l-.7.5c-.3.2-.4.5-.2.8L5 10.8c.2.3.6.3.9.1l.7-.5c.3-.2.3-.6.1-.9.2-.2.7-.5 1.3-.9l3.4 4.7-.1.1c-.2.1-.3.3-.3.5-1.2 1.5-2.4 3.1-3.6 4.6-.2.3-.4.7-.3 1.1 0 .4.2.7.5 1 .1.1.2.2.4.3.6.5 1.5.4 2-.3.9-1.2 1.9-2.4 2.8-3.6l2.3 3.5c.3.4.8.4 1.1.2l2.2-1.6c.4-.3.4-.8.2-1.1l-3.4-4.1c.6-.7 1.1-1.5 1.7-2.2 1.2.2 2.4-.3 3.2-1.4.8-1.1 1-2.5.5-3.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM15.6 10.3l5.4 5.2L10.2 17zm-6.5 6.8l6-7.4-7.4-4-5.9 7.4z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM3 2.9v18h21v-18H3zm14.6 4H8.8l-2.6-2h14.1l-2.7 2zm-.6 2v6h-7v-6h7zm-9 .6v5.6l-3 2.6V7l3 2.5zm1.6 7.4h8.2l2.6 2H6.9l2.7-2zm9.4-1.8V8.8l3-2.6v11.4l-3-2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-6.4-8.9h-1.5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm-15.3 0H4.3c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm6.9-6.3c-.3 0-.5-.2-.5-.5V4.8c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm0 14.8c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm4.9-4.1l1.1 1m0 .5c-.1 0-.2 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.1.1-.3.1-.4.1zM6.8 7l1.1 1.1m0 .5c-.1 0-.3 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.2 0-.3.1-.4.1zm9.5-.7l1-1m-1 1.5c-.1 0-.3-.1-.4-.2-.2-.2-.2-.5 0-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.3.2zm-10.9 10l1.1-1m-1.1 1.5c-.1 0-.3-.1-.4-.2-.1-.1-.1-.5.1-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.4.2z"}}),_c("ellipse",{attrs:{cx:"12.8",cy:"12.9",rx:"4.8",ry:"4.6"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M6 2.9v19h13v-19H6zm12 1v8H7v-8h11zm-11 17v-8h11v8H7zM27.5 22l-3.3-5.5h6.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.5 6.3l-7.65-4.35v8.7zm-13.35 0L4.5 1.95v8.7z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[_c("path",{attrs:{d:"M17.6 12V0h-12v12h12zM16 1.6v8.8H7.2V1.6H16zM3.2 13.6H1.6V16H4v-1.6h-.8zM1.6 5.6h1.6v-.8H4V3.2H1.6zM12.8 14.4H12V16h2.4v-2.4h-1.6zM5.6 14.4h1.6V16H5.6zM8.8 14.4h1.6V16H8.8zM1.6 10.4h1.6V12H1.6zM1.6 7.2h1.6v1.6H1.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 99.999"}},[_c("path",{attrs:{d:"M31.001 54.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4zM31.001 35.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4z"}}),_c("path",{attrs:{d:"M95.001 70.007h-13V31.192c0-1.85-.853-3.594-2.31-4.73L53.812 6.269a5.999 5.999 0 0 0-7.36-.018l-26.12 20.193a6.003 6.003 0 0 0-2.33 4.748V70.006h-13v4h3v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v14.99c0 3.312 2.687 6 6 6h52c3.313 0 6-2.688 6-6v-14.99h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h3v-3.999zm-71-38.815l26.12-20.193 25.88 20.193V69.998h-52V31.192z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{staticStyle:{"text-indent":"0","text-transform":"none","block-progression":"tb"},attrs:{d:"M20.3 8.5c-2.96 0-5.4 2.44-5.4 5.4v52.2c0 2.96 2.44 5.4 5.4 5.4h59.4c2.96 0 5.4-2.44 5.4-5.4V13.9c0-2.96-2.44-5.4-5.4-5.4zm0 3.6h59.4c1.028 0 1.8.772 1.8 1.8v37.04L70.166 39.607c-.684-.677-1.934-.65-2.588.056L56.244 51.784 38.666 34.206a1.814 1.814 0 0 0-2.475-.056L18.5 50.294V13.9c0-1.028.772-1.8 1.8-1.8zm35.1 3.6c-4.95 0-9 4.05-9 9s4.05 9 9 9 9-4.05 9-9-4.05-9-9-9zm0 3.6c3.004 0 5.4 2.396 5.4 5.4 0 3.004-2.396 5.4-5.4 5.4a5.373 5.373 0 0 1-5.4-5.4c0-3.004 2.396-5.4 5.4-5.4zM37.344 37.975l17.69 17.69c.684.678 1.934.65 2.588-.055l11.334-12.122L81.5 56.03V66.1c0 1.028-.772 1.8-1.8 1.8H20.3c-1.028 0-1.8-.772-1.8-1.8V55.188z",overflow:"visible",color:"#000"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.6 18.4c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.8-.9-2.9 1.1-.2 1.5-.2 2.8-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("path",{attrs:{d:"M19.9 7.6c-.5-.7-1-.9-1.3-.6-.2.1-.3.4-.4.8 0 .3-.2.6-.4.8-.5.4-1.3.3-2-.7v-.1c-.7-1-.6-1.9-.1-2.2.2-.2.5-.2.9-.2.4.1.7 0 .9-.1.3-.2.3-.7-.2-1.4-.1-.2-.3-.4-.5-.6-1-1-1.5-1.2-2.5-1.8-.1.1-.1.2-.2.4-.4.8-.6 1.2-1.6 2.1-.2.2-.4.4-.6.5-.9.6-1.4.5-1.6.2-.1-.2-.2-.5-.1-.9.1-.3 0-.7-.2-.9-.3-.4-1.1-.6-2.1.1h-.1c-1 .8-1.1 1.6-.8 2.1.2.2.4.4.8.4s.7.2.8.4c.3.4.2.8-.6 1.4-.2.1-.4.3-.7.4-1.3.7-1.7.7-2.9.9.2 1.1.2 1.6.9 2.9.1.3.3.5.4.7.5.7 1 .9 1.3.6.2-.1.3-.4.4-.8 0-.3.2-.6.4-.8.6-.3 1.4-.2 2.2.8v.1c.7 1 .6 1.8.1 2.2-.2.2-.6.2-.9.2-.4-.1-.7 0-.9.1-.3.2-.3.7.2 1.4.1.2.3.4.5.6 1 1 1.5 1.2 2.5 1.8l9.7-7.1c-.2-1.2-.2-1.7-.8-3-.2-.2-.3-.5-.5-.7zm-4.5.5c.3.4.7.7 1 .9.4.2.8.2 1.1.1.3-.1.5-.2.7-.5.2-.2.3-.5.3-.8 0-.3.2-.5.2-.5.1 0 .3.1.7.6.1.2.3.4.4.6.5 1 .6 1.5.8 2.2 0 .1 0 .2.1.3l-9.3 6.8c-.1 0-.2-.1-.2-.1-.7-.4-1.1-.6-1.9-1.4-.2-.2-.4-.4-.5-.6-.4-.5-.4-.8-.3-.8 0-.1.2-.1.6-.1.3.1.6 0 .9-.1.3-.1.5-.3.7-.6.2-.3.3-.7.2-1.1-.1-.4-.2-.8-.6-1.3v-.1c-.3-.3-.7-.6-1.1-.7-.4-.2-.8-.2-1.1-.1-.6.2-1 .7-1 1.3 0 .3-.2.5-.2.5-.1 0-.3-.1-.7-.6-.1-.2-.3-.4-.4-.6-.5-1-.6-1.5-.8-2.3V9h.1c.8-.2 1.4-.3 2.5-.9 1-.5 1.5-1 1.6-1.6.1-.3 0-.6-.2-.8-.2-.3-.6-.5-1.1-.5-.2 0-.4-.1-.5-.3-.1-.1-.1-.3-.1-.6.1-.2.2-.6.7-.9.5-.3.9-.5 1.3-.4.2 0 .3.1.4.2.1.2.1.4.1.6-.1.5 0 .9.2 1.2.2.2.4.4.7.4.5 0 1.2-.3 2-1.1.9-.9 1.2-1.4 1.6-2.1 0 0 0-.1.1-.1 0 0 .1 0 .1.1.7.4 1.1.6 1.9 1.4.2.2.4.4.5.6.4.5.4.8.3.8 0 .1-.2.1-.6.1-.6-.1-1.2.1-1.5.6-.2.3-.3.7-.2 1.1 0 .4.2.8.5 1.3z",fill:"#878787"}}),_c("path",{attrs:{d:"M11.7 18.1c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.7-1-2.9 1.1-.2 1.6-.2 2.9-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("ellipse",{attrs:{cx:"18.9",cy:"18.6",fill:"#fff",rx:"6.6",ry:"6.6",transform:"rotate(-45.001 18.912 18.561)"}}),_c("path",{attrs:{d:"M16.4 20.9l5.2.4-.4-5.2-1.5 1.5-2.5-2.5-1.8 1.8 2.5 2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{attrs:{d:"M64.433 16.857l-1.932.693-1.527.913-1.024 1.091-.477 1.122v1.138l.489 1.084L60.997 24l1.55.95 1.937.688 2.186.331h2.301l2.192-.368 1.944-.69 1.512-.914 1.029-1.096.49-1.117-.016-1.139-.491-1.122-1.027-1.06-1.558-.955-1.937-.689-2.186-.331h-2.3z"}}),_c("path",{attrs:{d:"M75.752 25.386c-.034.03-.057.066-.097.09L73.962 26.5c-.04.023-.083.036-.124.053-.015.006-.024.019-.04.024l-2.107.749c-.03.01-.06.008-.09.016-.021.005-.04.02-.062.023l-2.343.395a.936.936 0 0 1-.149.012h-2.442-.001a.842.842 0 0 1-.134-.01l-2.342-.356c-.025-.004-.043-.019-.067-.023-.033-.009-.066-.007-.1-.018l-2.106-.748c-.017-.007-.027-.02-.043-.026-.043-.018-.087-.03-.128-.055l-1.731-1.063c-.038-.023-.06-.059-.094-.087-.03-.024-.066-.036-.094-.065l-.294-.314v1.202l.492 1.123 1.027 1.093 1.548.914 1.95.694 2.185.367 2.302-.038 2.195-.333 1.932-.686 1.509-.947 1.035-1.103.492-1.124v-1.16l-.293.312c-.027.03-.063.041-.093.065zM43.926 2.813c.022-.002.04-.015.063-.015l1.358-.022-1.588-.838-1.612 1.145 1.715-.273c.022-.004.043.004.064.002z"}}),_c("path",{attrs:{d:"M77.758 19.894l.087.197c.035.08.046.17.055.258.004.03.02.061.02.093l.018 1.515v4.408c-.002.06-.024.12-.038.18-.012.056-.014.118-.037.17v.005l-.63 1.437a.9.9 0 0 1-.16.243c-.003.004-.004.01-.009.013l-1.22 1.3c-.026.028-.061.04-.091.064-.032.025-.052.059-.087.081l-1.694 1.063c-.041.026-.087.04-.13.058-.019.008-.03.022-.047.028l-2.106.749c-.034.011-.068.01-.101.018-.024.005-.042.02-.066.023l-2.344.355a.788.788 0 0 1-.111.009l-.01.001-2.44.04H66.6a.916.916 0 0 1-.148-.013l-2.342-.394c-.024-.003-.042-.019-.063-.024-.03-.007-.059-.005-.09-.015l-2.106-.75c-.016-.005-.025-.018-.042-.023-.037-.017-.077-.027-.114-.05l-1.733-1.022c-.04-.024-.065-.062-.1-.091-.032-.025-.07-.038-.098-.069l-1.22-1.3c-.004-.004-.005-.01-.009-.013a.886.886 0 0 1-.16-.242l-.63-1.437-.001-.006c-.023-.053-.024-.113-.037-.17-.013-.06-.037-.12-.037-.18V20.491c0-.067.024-.134.04-.202.012-.05.011-.104.03-.15l.612-1.438c.021-.051.06-.087.091-.131.028-.044.045-.093.082-.132l1.22-1.3c.03-.03.068-.045.101-.071.033-.027.055-.062.093-.085l1.713-1.023c.025-.016.055-.016.08-.029.029-.013.048-.035.077-.046l2.091-.749c.026-.01.054-.004.08-.011s.048-.025.075-.03l2.342-.393c.026-.005.05.004.075.002s.049-.015.075-.015h1.356L55.183 7.97l.1.229.001.005c.023.054.025.114.038.17.013.06.035.12.036.18l.001.006V14.468c0 .067-.025.135-.041.203-.012.05-.012.102-.03.148h-.001l-.61 1.438a.88.88 0 0 1-.16.245c-.004.004-.005.01-.009.013l-1.2 1.299c-.027.03-.065.042-.096.067-.035.029-.059.068-.1.093l-1.733 1.043c-.035.022-.074.032-.111.049-.016.006-.026.019-.042.025l-2.088.768c-.031.013-.065.01-.096.018-.025.007-.046.022-.072.027l-2.342.374a.832.832 0 0 1-.141.012h-2.423a.84.84 0 0 1-.142-.012l-2.343-.374c-.023-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.125-.748c-.017-.006-.028-.019-.044-.026-.045-.019-.09-.032-.132-.058l-1.713-1.063c-.033-.02-.052-.054-.08-.077-.03-.022-.064-.034-.091-.061l-1.22-1.26c-.006-.005-.007-.013-.013-.018a.888.888 0 0 1-.166-.247l-.63-1.438c-.034-.08-.044-.167-.056-.255-.003-.031-.02-.063-.02-.095l-.019-1.515.002-.009-.002-.009.02-2.896v-.007l-.02-1.47.002-.012c0-.057.021-.115.034-.172.011-.06.015-.124.038-.179.001-.003 0-.007.002-.01l.134-.307-12.603 8.952 1.71-.274c.026-.004.048.005.073.003.025-.002.045-.014.07-.014h2.402c.025 0 .047.012.07.014.025.002.048-.006.072-.003l2.344.375c.026.004.046.02.072.027.026.006.052 0 .077.01l2.126.729c.031.01.054.035.083.05.03.013.062.015.09.03l1.732 1.044c.038.022.06.057.093.085.033.027.074.043.103.075l1.202 1.299c.034.037.048.083.075.124.026.04.063.07.084.116l.65 1.437c.002.004 0 .008.002.011.024.055.028.117.04.177.013.057.034.115.035.172l.002.011v5.912c0 .06-.024.12-.038.18-.012.057-.014.118-.037.17v.006l-.63 1.438a.906.906 0 0 1-.16.241c-.003.005-.004.01-.009.015l-1.2 1.28c-.028.028-.064.04-.095.065-.033.027-.056.064-.094.087l-1.712 1.043c-.038.023-.08.035-.119.052-.015.007-.025.02-.04.025l-2.107.768c-.033.011-.065.01-.097.017-.024.006-.044.021-.07.026l-2.344.374a.84.84 0 0 1-.14.012H24.612h-.002a.821.821 0 0 1-.14-.012l-2.363-.374c-.022-.004-.04-.018-.06-.023-.032-.007-.064-.005-.094-.016l-2.087-.728c-.016-.005-.026-.019-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.024-.062-.06-.097-.088-.03-.025-.067-.037-.095-.067l-1.202-1.28c-.002-.003-.003-.008-.007-.011a.896.896 0 0 1-.158-.239l-.65-1.456c0-.003 0-.006-.002-.007-.024-.056-.028-.122-.04-.182-.012-.057-.034-.113-.034-.17l-.002-.008V22.403c0-.051.021-.1.03-.151.012-.068.016-.139.042-.202l.131-.309-9.362 6.651L49.24 50.924c.3-.107.624-.05.868.154l36.973-26.26-9.322-4.924zm-19.27 15.875V40.16c0 .054-.021.099-.03.15-.011.066-.013.132-.039.198l-.002.002-.608 1.454a.895.895 0 0 1-.168.254c-.005.006-.007.014-.012.019l-1.22 1.28c-.026.027-.06.038-.089.06-.03.024-.048.058-.083.08l-1.712 1.082c-.046.029-.095.045-.143.064-.017.006-.027.02-.044.025l-2.107.73c-.027.009-.056.006-.083.014-.02.004-.035.018-.055.02l-2.343.413a.843.843 0 0 1-.155.015H47.173h-.001a.843.843 0 0 1-.156-.015l-2.344-.413c-.018-.003-.033-.016-.052-.02-.028-.007-.056-.005-.083-.014l-2.125-.729c-.017-.005-.026-.019-.042-.024-.045-.02-.092-.032-.134-.058l-1.713-1.043c-.038-.023-.062-.06-.095-.09-.03-.022-.065-.035-.092-.063l-1.22-1.299c-.003-.002-.004-.007-.006-.01a.881.881 0 0 1-.159-.235l-.65-1.439c-.001-.003 0-.007-.002-.01-.024-.055-.027-.117-.04-.177-.013-.057-.035-.115-.036-.173l-.002-.01V34.29l.001-.005c0-.06.024-.12.037-.18.013-.057.014-.118.038-.17v-.006l.63-1.437c.02-.046.057-.077.084-.118.03-.046.045-.096.084-.137l1.2-1.28c.03-.03.068-.045.1-.07.031-.025.053-.06.089-.083l1.713-1.043c.028-.018.062-.019.092-.033.03-.015.05-.038.082-.049l2.107-.729c.024-.008.049-.003.073-.01.022-.006.041-.02.065-.025l2.342-.413c.027-.005.054.004.08.002.027-.003.05-.016.076-.016h2.422c.025 0 .047.012.071.014.024.002.046-.006.07-.003l2.362.374c.026.004.047.02.072.027.027.006.055 0 .082.01l2.106.73c.034.012.057.037.09.053.032.016.066.018.096.037l1.713 1.082c.032.02.051.053.079.077.03.023.065.035.092.063l1.22 1.28c.036.037.052.085.08.127.027.04.064.07.085.116l.65 1.398.003.014c.026.056.03.119.044.179.012.057.033.114.035.17l.002.016v1.516z"}}),_c("path",{attrs:{d:"M55.144 32.278l-1.532-.969-1.936-.67-2.207-.349h-2.277l-2.19.387-1.95.675-1.526.928-1.012 1.079-.492 1.122v1.133l.505 1.119 1.033 1.066 1.536.954 1.959.689 2.19.349h2.274l2.187-.386 1.953-.693 1.53-.915 1.024-1.089.475-1.122v-1.135l-.501-1.08zM50.831 77.08L87.893 50.7V26.449L50.831 52.772zM37.424 11.011l1.029 1.096 1.526.93 1.97.675 2.183.386 2.276-.037 2.197-.351 1.92-.67 1.544-.966 1.012-1.078.478-1.14V8.752l-.49-1.12-1.031-1.08-1.53-.931-1.95-.675-2.181-.385-2.296.037-2.198.351-1.94.67-1.523.947-1.014 1.098-.492 1.12.014 1.099z"}}),_c("path",{attrs:{d:"M56.32 39.188c-.036.029-.06.066-.1.09l-1.713 1.025c-.038.022-.08.034-.12.051-.015.006-.024.02-.04.024l-2.108.748c-.028.01-.056.008-.086.016-.02.005-.038.019-.058.022l-2.343.413a.843.843 0 0 1-.156.015h-2.422a.829.829 0 0 1-.14-.012l-2.345-.373c-.022-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.126-.748c-.017-.006-.028-.019-.044-.026-.044-.019-.09-.032-.131-.058l-1.713-1.063c-.034-.021-.054-.055-.084-.08-.028-.021-.062-.033-.088-.06l-.324-.333v1.207l.509 1.126 1.032 1.099 1.526.93 1.971.675 2.19.386h2.27l2.19-.386 1.943-.672 1.53-.968 1.031-1.079.475-1.136v-1.15l-.275.293c-.028.027-.065.04-.095.064zM37.42 15.433l1.032 1.066 1.534.952 1.959.69 2.19.35h2.28l2.184-.35 1.926-.708 1.55-.933 1.007-1.09.478-1.125v-1.166l-.255.272c-.026.028-.062.04-.092.064-.031.025-.053.06-.088.083l-1.732 1.083c-.044.027-.091.04-.136.06-.016.006-.027.02-.044.026l-2.088.729c-.03.01-.062.009-.094.016-.02.006-.039.019-.061.023l-2.342.374a.88.88 0 0 1-.118.01l-.009.002-2.422.038h-.015a.826.826 0 0 1-.156-.014l-2.342-.413c-.02-.004-.034-.016-.053-.02-.028-.007-.055-.005-.082-.014l-2.126-.73c-.016-.005-.026-.018-.042-.024-.045-.018-.091-.031-.134-.057l-1.712-1.043c-.04-.024-.063-.06-.096-.09-.03-.023-.065-.035-.092-.063l-.313-.333.015 1.216.49 1.12zM19.002 25.907l1.545.932 1.929.672 2.216.389h2.265l2.19-.387 1.943-.671 1.528-.966 1.017-1.084.492-1.123v-1.093l-.51-1.128-1.014-1.098-1.54-.927-1.966-.673-2.192-.351h-2.262l-2.192.35-1.935.67-1.531.968-1.032 1.082-.473 1.116v1.118l.507 1.124zM5.707 54.46L49.03 77.333V52.85L5.707 29.997z"}}),_c("path",{attrs:{d:"M19.002 30.337l1.545.932 1.925.671 2.21.35h2.282l2.186-.349 1.94-.707 1.534-.934 1.012-1.078.492-1.123v-1.2l-.274.293c-.027.027-.06.038-.09.062-.031.026-.052.06-.087.083l-1.713 1.082c-.045.03-.094.045-.143.064-.016.006-.027.02-.043.025l-2.107.729c-.028.01-.056.007-.083.014-.02.004-.035.018-.054.02l-2.344.415a.836.836 0 0 1-.156.014h-2.422a.889.889 0 0 1-.155-.014l-2.362-.414c-.022-.003-.038-.018-.059-.022-.027-.007-.055-.005-.082-.014l-2.087-.729c-.016-.005-.026-.018-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.023-.062-.06-.097-.088-.03-.024-.067-.037-.095-.067l-.295-.314v1.201l.508 1.141 1.014 1.08z"
}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{d:"M11.6 8.3l3.3 4 3.4-4h-2.1V4.7h-2.5v3.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M26 14.4c-.3-1.2-1.7-.4-1.7-.5l-4.2 1c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-4.2c.5-.4.5-1 .2-1.5-.4-.5-1-.5-1.5-.2l-6.6 4.2c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-5.8c.5-.4.5-1.4.2-1.9-.4-.5-1-.5-1.5-.2L16.9 11c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l3.9-5.5c.5-.4.8-1 .5-1.5-.4-.5-1.3-.5-1.8-.2L15 9l-2.7 2.1c-.1.1-.3.1-.3 0s-.1-.1 0-.2l.6-4.5c.1-.6-.3-1.1-.9-1.2-.6-.1-1.1.3-1.2.9 0 0-1.2 5.7-1.3 6.7-.1.9.4 1.7.5 1.9l4.6 5.9c.4.5 1.3.6 1.9.1l3.5-2.7.6-.5 5.2-1.9c.4-.4.6-.7.5-1.2z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.4 26.8H52v28.7H11.4zm13 28.6V41.2m15.7-.2V26.8m5.3 14.1H52m-40.6-1.5H18",fill:"none",stroke:"#878787","stroke-miterlimit":"10","stroke-width":"3.252"}}),_c("path",{attrs:{d:"M43.3 13.6c0-6.8-5.5-12.3-12.3-12.3-6.8 0-12.3 5.4-12.3 12.2 0 1.4.3 3 .7 4L31 50.4l10.7-30.6c1-1.9 1.6-4 1.6-6.2z",fill:"#39b54a"}}),_c("path",{attrs:{d:"M36.4 9.6h-3.1V6.5c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2v-3.1h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c0-.7-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 52.6H9V20.7h43.9v31.9zm-40.7-3.2h37.4V24H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 36.8h3.3V51H22zm15.7-14.4H41v14.2h-3.3zm6.9 12.5h6.6v3.3h-6.6zm-34-1.5h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"30.2",cy:"20.6",fill:"#39b54a",r:"12.9"}}),_c("path",{attrs:{d:"M34.9 18.1h-3.1V15c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2V22h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c.1-.6-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 54.3H9V22.4h43.9v31.9zm-40.7-3.2h37.4V25.7H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 38.5h3.3v14.2H22zM37.7 24H41v14.2h-3.3zM10.6 35.1h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"31.8",cy:"19.5",fill:"#fff",r:"13.5"}}),_c("path",{attrs:{d:"M24.1 19.3l6.8 8.2 6.9-8.2h-4.3v-7.2h-5.2v7.2z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.2 13.2L14.8 4.6V10H7.1c-1.4 0-2.5 1.3-2.5 2.9v.5c0 1.6 1.1 2.9 2.5 2.9h7.7v5.3l10.4-8.4z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{d:"M11.6 8.7l3.3-4 3.4 4h-2.1v3.6h-2.5V8.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M14.3 15.2c.8.4 1.6.6 2.6.4-.1.1-.1.2-.2.2L14 18.5c-1.2 1.2-2.7 1.8-4.4 1.3-3.1-.9-3.9-4.6-1.7-7 .9-1 1.9-1.9 2.8-2.8.4-.4.8-.8 1.2-1.1 1.6-1.2 3.9-1.2 5.3 0 .6.5.7 1.2.3 1.7-.4.5-1.1.5-1.7 0-.9-.7-2-.6-2.9.3-1.2 1.1-2.3 2.3-3.4 3.4-.2.2-.3.3-.4.5-.3.5-.4 1-.3 1.5.2 1.1 1.4 1.7 2.4 1.3.4-.2.8-.4 1.2-.7.7-.5 1.2-1.1 1.9-1.7-.1 0 0 0 0 0z",fill:"#aaa"}}),_c("path",{attrs:{d:"M16.7 7.2c-1-.2-1.8-.3-2.6-.5l.2-.2 2.8-2.8c1.7-1.6 4.1-1.7 5.7-.3 1.8 1.5 1.9 4.2.3 6-1.2 1.4-2.6 2.6-3.9 3.9-1.6 1.5-4 1.5-5.6.2-.2-.2-.4-.5-.5-.8-.1-.5.1-.9.5-1.1.4-.2.8-.2 1.2.1 1.3.9 2.2.8 3.3-.3l3.2-3.2c.4-.5.7-1.1.7-1.8-.1-1.4-1.6-2.2-2.9-1.5-.3.2-.5.4-.8.6-.5.6-1.1 1.2-1.6 1.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4 3v16h22V3H4zm8 14v-6h-2v6H6v-6h2V9H6V5h12v6h2V5h4v5h-2v2h2v5H12z",fill:"#b2b2b2"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M13.1 18.4H1.5l9.7-14.8h11.6z",fill:"#aaa"}}),_c("path",{attrs:{d:"M18.8 18.4H7.2l9.7-14.8h11.6z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 21.5c-3.5 0-6.3-3.1-6.3-7.1 0-4 5.6-10.7 5.9-11L18 3l.4.5c.2.3 5.9 7 5.9 11 0 3.9-2.8 7-6.3 7zm0-16.9c-1.3 1.6-5.3 6.8-5.3 9.9 0 3.5 2.3 6.1 5.3 6.1s5.3-2.6 5.3-6.1c0-3.1-4-8.3-5.3-9.9z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.6 6.9l-4 4.9-7.9-9.3-3.5 2.7 8.6 10.1-5.3 6.5h23.8l3.2-6.6-14.9-8.3zm11 14h-21l3.9-4.7.6.8 6 3.6-2.4-6.3-1.3-1.5L19 8.4l13.3 7.5-2.7 5z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M16.3 7.9l-4.7-5.4L8 5.1l2.4 2.8H8v13h21v-13H16.3zM9 8.9h2.3l6.6 7.7 5.6 3.3H9v-11zm19 11h-4.2l-2.3-6-4.3-5H28v11z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 512 512"}},[_c("g",{attrs:{transform:"matrix(.8 0 0 .8 1.6 0)"}},[_c("title",[_v("eraser")]),_c("path",{attrs:{d:"M509.42 69.18a12.3 12.3 0 0 0-9.77-4.81H254.73a12.18 12.18 0 0 0-6.16 1.72l-.42-.37L41.63 284l-2.19 2.46.26.31a10.6 10.6 0 0 0-1 2.51L.41 432.16a12.31 12.31 0 0 0 11.91 15.46h245c3.92 0 7.42-1.67 11-5.28l201.45-213.4a20.06 20.06 0 0 0 3.55-6.22l36.93-137.87 1.36-5a12.37 12.37 0 0 0-2.19-10.67zM279.55 304.74l-31.71 118.33H28.31L60 304.74h219.55zM473.06 88.93L292.19 280.14h-213L260 88.93h213z"}})])])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 2.7l2.2 3.1h-4.4zM7.3 12l3.2-2.2v4.4zM18 21.9l-2.2-3.2h4.4zM28.7 12l-3.2 2.2V9.8z",fill:"#fff"}}),_c("path",{attrs:{d:"M9.5 11.5h17.1v1H9.5z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.5 3.7h1v17.1h-1z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4.7 13.2L15 21.7v-5.3h7.7c1.4 0 2.5-1.3 2.5-2.9V13c0-1.6-1.1-2.9-2.5-2.9H15V4.6L4.7 13.2z",fill:"#bf0049"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M20.3 2.4c-4 0-7.2 3.2-7.2 7.1 0 1.6.5 3.1 1.5 4.3l-6.1 6s-.1 2 1.8 1.8c.2-.2 6.2-6.1 6.2-6.1 1.1.7 2.5 1.1 3.9 1.1 4 0 7.2-3.2 7.2-7.1 0-3.9-3.3-7.1-7.3-7.1zm0 13.2c-3.4 0-6.2-2.7-6.2-6s2.8-6 6.2-6c3.4 0 6.2 2.7 6.2 6 0 3.2-2.8 6-6.2 6z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.1 8.4h1.8V6.7c0-.4.3-.7.7-.7h.9c.4 0 .7.3.7.7v1.8H23c.4 0 .7.3.7.7v.8c0 .4-.3.7-.7.7h-1.8v1.8c0 .4-.3.7-.7.7h-.9c-.4 0-.7-.3-.7-.7v-1.8h-1.8c-.4 0-.7-.3-.7-.7v-.8c0-.4.4-.8.7-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M21.4 13.8c.9-1.2 1.4-2.6 1.4-4.2 0-3.9-3.2-7-7.1-7-3.9 0-7.1 3.1-7.1 7s3.2 7 7.1 7c1.4 0 2.7-.4 3.9-1.1 0 0 5.9 5.7 6.1 6 1.9.2 1.8-1.8 1.8-1.8l-6.1-5.9zM9.7 9.6c0-3.3 2.7-5.9 6.1-5.9 3.3 0 6.1 2.7 6.1 5.9 0 3.3-2.7 5.9-6.1 5.9-3.4 0-6.1-2.7-6.1-5.9z",fill:"#fff"}}),_c("path",{attrs:{d:"M18.9 8.5h-6.4c-.4 0-.8.4-.8.8v1c0 .4.4.8.8.8h6.4c.4 0 .8-.4.8-.8v-1c0-.4-.3-.8-.8-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"}},[_c("path",{attrs:{d:"M201.896 183.169l-53.23-53.23a71.682 71.682 0 0 1-18.728 18.727l53.23 53.23a9 9 0 0 0 12.729 0l6-6a9 9 0 0 0 0-12.727z"}}),_c("path",{attrs:{d:"M153.668 89.768c0-35.234-28.666-63.9-63.901-63.9-35.234 0-63.9 28.666-63.9 63.9 0 35.234 28.666 63.9 63.9 63.9 35.236 0 63.9-28.666 63.9-63.9zm-63.9 48.6c-26.84 0-48.6-21.76-48.6-48.6s21.76-48.6 48.6-48.6c26.841 0 48.6 21.76 48.6 48.6s-21.759 48.6-48.6 48.6z"}}),_c("path",{attrs:{d:"M63 117h54V63H63v54zm10.8-43.2h32.4v32.4H73.8V73.8z"}})])}}},,,,,function(e,t){e.exports={XMLHttpRequest:XMLHttpRequest}}]);
//# sourceMappingURL=app.9ab3d288efa6b9b8c444.js.map