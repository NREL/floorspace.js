webpackJsonp([2,0],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(316);var r=n(80),o=i(r),a=n(284),s=i(a),d=n(304),c=i(d),l=n(640),u=i(l),f=n(121),p=i(f),h=n(247),m=i(h);o.default.component("pretty-select",p.default),o.default.component("generic-input",m.default),window.eventBus=new o.default,window.application=new o.default({store:s.default,el:"#app",template:"<App/>",components:{App:u.default}}),c.default.init(s.default)},,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.map(function(e){return[e.x,e.y]});return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push(t[0]),W.polygon([t])}function a(e,t){var n=e[0],i=F.default.findIndex(t,F.default.pick(n,["x","y"]));if(i===-1)return!1;var r=F.default.map([].concat((0,O.default)(t.slice(i)),(0,O.default)(t.slice(0,i))),function(e){return F.default.pick(e,["x","y"])});return F.default.isEqualWith(e,r,function(e,t){return F.default.isMatch(e,t)})}function s(e){return e.length<=3?e:F.default.isEqual(e[0],e[e.length-1])?e.slice(0,-1):e}function d(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;var n=s(e),i=s(t);return a(n,i)||a(n,[].concat((0,O.default)(i)).reverse())}function c(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function l(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"expand",r=e[1]-e[0],o=t[1]-t[0],a=o*n,s=r/n,d=a-r,c=s-o;return d>0==("expand"===i)?{xExtent:[e[0]-d/2,e[1]+d/2],yExtent:t}:{xExtent:e,yExtent:[t[0]-c/2,t[1]+c/2]}}function u(e){var t=e.start,n=e.end,i=n.x-t.x,r=n.y-t.y;return 0===i?.5*Math.PI:Math.atan(r/i)}function f(e,t){var n=u(e)-u(t),i=Math.min(Math.abs(n),Math.PI-n);return i<.05*Math.PI}function p(e){var t=e.dx,n=e.dy;if(0===t&&0===n)return{dx:0,dy:0};var i=Math.sqrt(t*t+n*n);return{dx:t/i,dy:n/i}}function h(e,t){var n=void 0,i=void 0;return e.x!==t.x?(i=1,n=(e.y-t.y)/(e.x-t.x)):e.y!==t.y?(n=1,i=(e.x-t.x)/(e.y-t.y)):n=i=1,p({dx:n,dy:i})}function m(e,t){var n=t.x-e.x,i=t.y-e.y;return p({dx:n,dy:i})}function g(e,t){var n=t.p1,i=n.x,r=n.y,o=t.p2,a=o.x,s=o.y,d=e.x-i,c=e.y-r,l=a-i,u=s-r,f=d*l+c*u,p=l*l+u*u||2,h=f/p;return h<=0?t.p1:h>1?t.p2:{x:i+h*l,y:r+h*u}}function v(e,t){var n=t.start,i=t.end,r=g(e,{p1:n,p2:i});return{dist:c(e,r),proj:r}}function y(e,t,n){var i=[e.x,e.y],r=i[0],o=i[1],a=[t.x,t.y],s=a[0],d=a[1],c=n.x,l=n.y;return Math.abs((d-o)*(c-s)-(l-d)*(s-r))<1e-5}function _(e){for(var t=e.start,n=e.end,i=e.spacing,r=e.width,o=c(t,n),a=[],s=m(t,n),d=r/2;d+r/2<o;){var l=s.dx*d,u=s.dy*d;a.push({x:t.x+l,y:t.y+u,distFromStart:d}),d+=r+(i||1)}if(0===a.length)return[];var f=(c(a[a.length-1],n)-r/2)/2,p=c(t,n),h=s.dx*f,g=s.dy*f;return a.map(function(e){return{x:e.x+h,y:e.y+g,alpha:(e.distFromStart+f)/p}})}function w(e){for(var t=1;t<e.length-1;t++){var n=e[t-1],i=e[t],r=e[t+1];if(y(n,i,r)){var o=F.default.reject([(n.x-i.x)/(r.x-i.x),(n.y-i.y)/(r.y-i.y)],isNaN)[0];if(!(o>1||o<0))return w([].concat((0,O.default)(e.slice(0,t)),(0,O.default)(e.slice(t+1))))}}return e}function x(e,t){if(!t||X!==e.edges||Y!==e.vertices){var n=e.vertices.reduce(function(e,t){return e[t.id]=t,e},{});K={},Z=e.edges.map(function(e){var t=(0,z.default)({},e,{v1:n[e.v1],v2:n[e.v2]});return K[e.id]=t,t}),t&&(X=e.edges,Y=e.vertices,J=n)}return[Z,K,J]}function b(e){return 2===e.length&&F.default.isNumber(e[0])&&F.default.isNumber(e[1])}function S(e){return e.length>=1&&F.default.every(e,b)}function M(e){return e.length>=1&&F.default.every(e,S)}function C(e,t){var n=function(e){var t=e.x,n=e.y;return[t,n]};return q.inRing(n(e),t.map(n))}function T(e){var t=F.default.cloneDeep(e),n={},i=(0,I.default)(e.vertices).map(function(e){return e.id});return i.forEach(function(e){var i=t.vertices.find(function(t){return t.id===e}),r=U.default.generate();n[e]=r,i.id=r;var o=t.vertices.findIndex(function(e){return e.id===r});t.vertices[o]=i}),t.edges.forEach(function(e){var t=U.default.generate();n[e.id]=t,e.id=t,e.v1=n[e.v1],e.v2=n[e.v2]}),t.faces.forEach(function(e){e.edgeRefs.forEach(function(e){e.edge_id=n[e.edge_id]});var t=U.default.generate();n[e.id]=t,e.id=t}),{clonedGeometry:t,idMap:n}}Object.defineProperty(t,"__esModule",{value:!0});var j=n(322),I=r(j),P=n(7),z=r(P),D=n(53),E=r(D),$=n(34),O=r($);t.ringEquals=d,t.distanceBetweenPoints=c,t.fitToAspectRatio=l,t.edgeDirection=u,t.haveSimilarAngles=f,t.unitPerpVector=h,t.unitVector=m,t.projectionOfPointToLine=g,t.pointDistanceToSegment=v,t.ptsAreCollinear=y,t.repeatingWindowCenters=_,t.cleanInvalidPoly=w,t.vertInRing=C,t.replaceIdsForCloning=T;var k=n(3),F=r(k),R=n(179),W=i(R),N=n(254),V=r(N),G=n(629),A=n(252),B=r(A),L=n(96),H=n(51),U=r(H),q={setOperation:function(e,t,n){var i=o(t).geometry.coordinates,r=o(n).geometry.coordinates,a="union"===e?G.union:"intersection"===e?G.intersection:"difference"===e?G.difference:null;if(null===a)throw new Error('invalid operation "'+e+'". expected union, intersection, or difference');var d=a(i,r);return null===d||0===d.length?[]:d.length>1?{error:"no split faces"}:d[0].length>1?{error:"no holes"}:s(d[0][0].map(function(e){var t=(0,E.default)(e,2),n=t[0],i=t[1];return{x:n,y:i}}))},intersection:function(e,t){return this.setOperation("intersection",e,t)},union:function(e,t){return this.setOperation("union",e,t)},difference:function(e,t){return this.setOperation("difference",e,t)},areaOfSelection:function(e){return e.length<3?0:(0,V.default)(e)},splittingVerticesForEdgeId:function(e,t,n,i){var r=this,o=x(t,!0)[2];i||(i=t.vertices);var a=o[e.v1];a||(a=t.vertices.find(function(t){return t.id===e.v1}));var s=o[e.v2];s||(s=t.vertices.find(function(t){return t.id===e.v2}));var d=(0,z.default)({},e,{v1:a,v2:s});return d.v1&&d.v2?i.filter(function(e){var t=d.v1.id===e.id||d.v2.id===e.id,i=d.v1.x===e.x&&d.v1.y===e.y,o=d.v2.x===e.x&&d.v2.y===e.y,a=t||i||o;if(a)return!1;var s=r.projectionOfPointToLine(e,{p1:d.v1,p2:d.v2}),c=r.distanceBetweenPoints(e,s),l=c<=n/20;return l}):[]},projectionOfPointToLine:g,distanceBetweenPoints:c,intersectionOfLines:function(e,t,n,i){var r=1e-7,o=function(e,t,n){return e-r<=t&&t<=n+r},a=((e.x*t.y-e.y*t.x)*(n.x-i.x)-(e.x-t.x)*(n.x*i.y-n.y*i.x))/((e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x)),s=((e.x*t.y-e.y*t.x)*(n.y-i.y)-(e.y-t.y)*(n.x*i.y-n.y*i.x))/((e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x));if(isNaN(a)||isNaN(s)||this.distanceBetweenPoints({x:a,y:s},e)<r||this.distanceBetweenPoints({x:a,y:s},t)<r||this.distanceBetweenPoints({x:a,y:s},n)<r||this.distanceBetweenPoints({x:a,y:s},i)<r)return!1;if(e.x>=t.x){if(!o(t.x,a,e.x))return!1}else if(!o(e.x,a,t.x))return!1;if(e.y>=t.y){if(!o(t.y,s,e.y))return!1}else if(!o(e.y,s,t.y))return!1;if(n.x>=i.x){if(!o(i.x,a,n.x))return!1}else if(!o(n.x,a,i.x))return!1;if(n.y>=i.y){if(!o(i.y,s,n.y))return!1}else if(!o(n.y,s,i.y))return!1;return{x:a,y:s}},vertexForId:function(e,t){return t.vertices.find(function(t){return t.id===e})},vertexForCoordinates:function(e,t){var n=this;return t.vertices.find(function(t){return n.distanceBetweenPoints(t,e)<1e-5})},verticesForFaceId:function(e,t){var n=this;return t.faces.find(function(t){return t.id===e}).edgeRefs.map(function(e){var i=n.edgeForId(e.edge_id,t),r=e.reverse?i.v2:i.v1;return n.vertexForId(r,t)})},edgeForId:function(e,t){return t.edges.find(function(t){return t.id===e})},edgesForVertexId:function(e,t){return t.edges.filter(function(t){return t.v1===e||t.v2===e})},edgesForFaceId:function(e,t){var n=this;return t.faces.find(function(t){return t.id===e}).edgeRefs.map(function(e){return n.edgeForId(e.edge_id,t)})},faceForId:function(e,t){return t.faces.find(function(t){return t.id===e})},facesForVertexId:function(e,t){var n=this;return t.faces.filter(function(i){return i.edgeRefs.find(function(i){var r=n.edgeForId(i.edge_id,t);return r.v1===e||r.v2===e})})},facesForEdgeId:function(e,t){return t.faces.filter(function(t){return t.edgeRefs.find(function(t){return t.edge_id===e})})},pointInFace:function(e,t){var n=o(t),i=W.point([e.x,e.y]);return(0,B.default)(i,n)},ptsAreCollinear:y,syntheticRectangleSnaps:function(e,t,n){var i=(t.x+n.x)/2,r=(t.y+n.y)/2;return[].concat((0,O.default)(e.map(function(e){var t=e.x,n=e.y;return{y:n,x:t+2*(i-t),synthetic:!0,originalPt:{x:t,y:n}}})),(0,O.default)(e.map(function(e){var t=e.x,n=e.y;return{x:t,y:n+2*(r-n),synthetic:!0,originalPt:{x:t,y:n}}})))},edgeDirection:u,haveSimilarAngles:f,pointDistanceToSegment:v,exceptFace:function(e,t){return t?(0,z.default)({},e,{faces:F.default.reject(e.faces,{id:t})}):e},denormalize:function(e){var t=x(e),n=(0,E.default)(t,2),i=n[0],r=n[1],o=e.faces.map(function(e){return{id:e.id,edges:e.edgeRefs.map(function(e){var t=e.edge_id,n=e.reverse;return(0,z.default)({},r[t],{edge_id:t,reverse:n})}),get vertices(){return(0,L.dropConsecutiveDups)(F.default.flatMap(this.edges,function(e){return e.reverse?[e.v2,e.v1]:[e.v1,e.v2]}),function(e){return e.id})}}});return(0,z.default)({},e,{edges:i,faces:o})},normalize:function(e){var t=F.default.uniqBy([].concat((0,O.default)(e.edges),(0,O.default)(F.default.flatMap(e.faces,function(e){return e.edges}))),"id"),n=F.default.uniqBy([].concat((0,O.default)(e.vertices),(0,O.default)(F.default.flatMap(t,function(e){return[e.v1,e.v2]}))),"id");return{id:e.id,vertices:n.map(function(e){return F.default.pick(e,["id","x","y"])}),edges:t.map(function(e){return{id:e.id,v1:e.v1.id,v2:e.v2.id}}),faces:e.faces.map(function(e){return{id:e.id,edgeRefs:e.edges.map(function(e){return{edge_id:e.id,reverse:e.reverse}})}})}}},X=null,Y=null,K=null,Z=null,J=null;q.inside=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!b(e))throw new Error("point does not have correct coords: "+e);if(!M(t))throw new Error("polygon does not have correct coords: "+t);var i=q.bboxOfRing(t[0]);if(i&&q.inBBox(e,i)===!1)return!1;for(var r=!1,o=0;o<t.length&&!r;o++)if(q.inRing(e,t[0],n)){for(var a=!1,s=1;s<t.length&&!a;)q.inRing(e,t[s],!n)&&(a=!0),s++;a||(r=!0)}return r},q.bboxOfRing=function(e){return[F.default.min(F.default.map(e,0)),F.default.min(F.default.map(e,1)),F.default.max(F.default.map(e,0)),F.default.max(F.default.map(e,1))]},q.inRing=function(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var r=0,o=t.length-1;r<t.length;o=r++){var a=t[r][0],s=t[r][1],d=t[o][0],c=t[o][1],l=e[1]*(a-d)+s*(d-e[0])+c*(e[0]-a)===0&&(a-e[0])*(d-e[0])<=0&&(s-e[1])*(c-e[1])<=0;if(l)return!n;var u=s>e[1]!=c>e[1]&&e[0]<(d-a)*(e[1]-s)/(c-s)+a;u&&(i=!i)}return i},t.default=q},,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.assignableProperties=["building_units","thermal_zones","space_types","construction_sets","pitched_roofs"],i=t.componentTypes=["window_definitions","daylighting_control_definitions","door_definitions"],r=(t.libraryTypes=[].concat(n,i),t.textures=["circles-2","circles-5","circles-8","diagonal-stripe-1","diagonal-stripe-4","diagonal-stripe-6","dots-5","dots-8","vertical-line","crosshatch"],{modes:{stories:"Story",images:"Image",spaces:"Space",shading:"Shading",building_units:"Building Unit",thermal_zones:"Thermal Zone",space_types:"Space Type",pitched_roofs:"Pitched Roof",construction_sets:"Construction Set",window_definitions:"Window Definitions",daylighting_control_definitions:"Daylighting Control Definitions"},componentTypes:i,assignableProperties:n,palette:{shading:"#E8E3E5",neutral:"#bbc3c7",colors:["#aa4499","#88ccee","#332288","#117733","#999933","#ddcc77","#cc6677","#882255","#44aa99","#6699cc","#661100","#aa4466"]}});t.default=r},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(71),o=i(r),a=n(3),s=i(a),d=n(95),c=i(d),l=n(51),u=i(l),f={map:c.default,displayNameForKey:function(e,t){return this.map[e].keymap[t]?this.map[e].keymap[t].private?null:this.map[e].keymap[t].displayName:t},valueForKey:function(e,t,n,i){return this.map[n].keymap[i]&&this.map[n].keymap[i].get?this.map[n].keymap[i].get(e,t):e[i]},setValueForKey:function(e,t,n,i,r){var a={success:!0};if(this.map[n].keymap[i]&&this.map[n].keymap[i].converter&&(r=this.map[n].keymap[i].converter(r,this.map[n].keymap[i])),this.map[n].keymap[i]&&this.map[n].keymap[i].validator){var s=this.map[n].keymap[i].validator(e,t,r,n);if(a.success=s.success,!s.success)return a.error=s.error,a}return"stories"===n?t.dispatch("models/updateStoryWithData",(0,o.default)({story:e},i,r)):"spaces"===n?t.dispatch("models/updateSpaceWithData",(0,o.default)({space:e},i,r)):"shading"===n?t.dispatch("models/updateShadingWithData",(0,o.default)({shading:e},i,r)):"images"===n?t.dispatch("models/updateImageWithData",(0,o.default)({image:e},i,r)):"window_definitions"===n?t.dispatch("models/updateWindowDefinitionWithData",(0,o.default)({object:e},i,r)):t.dispatch("models/updateObjectWithData",(0,o.default)({object:e},i,r)),a},inputTypeForKey:function(e,t){return this.map[e].keymap[t]&&!this.map[e].keymap[t].readonly?this.map[e].keymap[t].input_type:null},selectOptionsForKey:function(e,t,n,i){return this.map[n].keymap[i]&&!this.map[n].keymap[i].readonly&&"select"===this.map[n].keymap[i].input_type?this.map[n].keymap[i].select_data(e,t):[]},libraryObjectWithId:function(e,t){var n;for(var i in e.library)e.library.hasOwnProperty(i)&&!n&&e.library[i].find(function(e){return e.id===t})&&(n=e.library[i].find(function(e){return e.id===t}),n.type=i);if(!n&&e.stories.find(function(e){return e.id===t})&&(n=e.stories.find(function(e){return e.id===t}),n.type="story"),!n)for(var r=0;r<e.stories.length;r++){var o=e.stories[r];!n&&o.spaces.find(function(e){return e.id===t})&&(n=o.spaces.find(function(e){return e.id===t}),n.type="space"),!n&&o.shading.find(function(e){return e.id===t})&&(n=o.shading.find(function(e){return e.id===t}),n.type="shading"),!n&&o.images.find(function(e){return e.id===t})&&(n=o.images.find(function(e){return e.id===t}),n.type="image")}return n},modelForFace:function(e,t){for(var n=0;n<e.stories.length;n++){var i=e.stories[n],r=i.shading.find(function(e){return e.face_id===t}),o=i.spaces.find(function(e){return e.face_id===t});if(r)return r.type="shading",r;if(o)return o.type="space",o}},generateName:function(e,t,n){var i=this.modelsForType(e,t),r=c.default[t].displayName+" ";if(n){var o=e.stories.findIndex(function(e){return e.id===n.id})+1;r=r.concat(o+" - ")}for(var a="",s=1;!a;)a=r+s,i.find(function(e){return e.name===a})&&(a=""),s+=1;return a},modelsForType:function(e,t){switch(t){case"stories":return e.stories;case"shading":case"spaces":case"images":return e.stories.reduce(function(e,n){return e.concat(n[t])},[]);default:return e.library[t]}},replaceIdsUpdateInfoForCloning:function(e,t){var n=s.default.cloneDeep(e);return n.doors=n.doors.map(function(e){var n=u.default.generate();return t[e.id]=n,e.id=n,e}),n.windows=n.windows.map(function(e){var n=u.default.generate();return t[e.id]=n,e.id=n,e}),n.spaces=n.spaces.map(function(e){var n=u.default.generate();return t[e.id]=n,e.id=n,e.name="",e.face_id=t[e.face_id],e}),n.shading=n.shading.map(function(e){var n=u.default.generate();return t[e.id]=n,e.id=n,e.name="",e.face_id=t[e.face_id],e}),{clonedStory:n}},replaceSpaceNamesForCloning:function(e,t,n){var i=this;n.spaces=n.spaces.map(function(r){return r.name=i.generateName(e,t,n),r})}};t.default=f},,,,,function(e,t){"use strict";function n(e){var t=(r[e]||0)+1;return r[e]=t,e+" - "+t}Object.defineProperty(t,"__esModule",{value:!0}),t.genName=n;var i=1;t.default={setId:function(e){i=e},generate:function(){return function(){return String(i++)}}()};var r={}},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return f.default.modes[e]}function o(e,t){var n=l.default.find(e.windows,{id:t});if(n)return(0,d.default)({},n,{type:"windows"});var i=l.default.find(l.default.flatMap(e.spaces,function(e){return e.daylighting_controls}),{id:t});if(i)return(0,d.default)({},i,{type:"daylighting_controls"});var r=l.default.find(e.doors,{id:t});return r?(0,d.default)({},r,{type:"doors"}):null}function a(e,t){var n=void 0,i=void 0;return u.assignableProperties.some(function(r){return(i=l.default.find(e[r],{id:t}))&&(n=r),!!i}),i?(0,d.default)({},i,{type:n}):null}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),d=i(s);t.displayNameForMode=r,t.componentInstanceById=o,t.spacePropertyById=a;var c=n(3),l=i(c),u=n(24),f=i(u),p={displayNameForMode:r,config:f.default};t.default=p},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(52),a=r(o),s=n(7),d=r(s),c=n(34),l=r(c),u=n(3),f=r(u),p=n(125),h=r(p),m=n(299),g=r(m),v=n(295),y=i(v),_=n(24),w={building_units:{displayName:"Building Unit",definitionName:"BuildingUnit",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.BuildingUnit},thermal_zones:{displayName:"Thermal Zone",definitionName:"ThermalZone",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.ThermalZone},door_definitions:{displayName:"Door",definitionName:"DoorDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"width",displayName:"Width",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"door_type",displayName:"Type",input_type:"select",select_data:function(){var e=["Door","Glass Door","Overhead Door"];return f.default.zipObject(e,e)},validator:g.default.oneOf("Door","Glass Door","Overhead Door")},{name:"texture",displayName:"Texture",input_type:"texture",validator:g.default.oneOf.apply(g.default,(0,l.default)(_.textures))}],init:h.default.DoorDefinition},window_definitions:{displayName:"Window",definitionName:"WindowDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"window_definition_mode",displayName:"Mode",input_type:"select",select_data:function(){var e=["Single Window","Repeating Windows","Window to Wall Ratio"];return f.default.zipObject(e,e)},validator:g.default.oneOf("Single Window","Repeating Windows","Window to Wall Ratio")},{name:"wwr",displayName:"Window to Wall ratio",input_type:"text",validator:g.default.halfOpenInterval(0,1),converter:y.number,numeric:!0,enabled:function(e){return"Window to Wall Ratio"===e.window_definition_mode}},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(e){return"Single Window"===e.window_definition_mode||"Repeating Windows"===e.window_definition_mode}},{name:"width",displayName:"Width",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(e){return"Single Window"===e.window_definition_mode||"Repeating Windows"===e.window_definition_mode}},{name:"sill_height",displayName:"Sill Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"window_spacing",displayName:"Spacing",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0,enabled:function(e){return"Repeating Windows"===e.window_definition_mode}},{name:"window_type",displayName:"Window Type",input_type:"select",select_data:function(){var e=["Fixed","Operable"];return f.default.zipObject(e,e)},validator:g.default.oneOf("Fixed","Operable")},{name:"overhang_projection_factor",displayName:"Overhang Projection Factor",input_type:"text",validator:g.default.gt0orNull,converter:y.gt0orNull,numeric:!0},{name:"fin_projection_factor",displayName:"Fin Projection Factor",input_type:"text",validator:g.default.gt0orNull,converter:y.gt0orNull,numeric:!0},{name:"texture",displayName:"Texture",input_type:"texture",validator:g.default.oneOf.apply(g.default,(0,l.default)(_.textures)),enabled:function(e){return"Window to Wall Ratio"===e.window_definition_mode}},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(e,t){return f.default.chain(t.models.stories).flatMap("windows").filter({window_definition_id:e.id}).value().length}}],init:h.default.WindowDefn},space_types:{displayName:"Space Type",definitionName:"SpaceType",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.SpaceType},construction_sets:{displayName:"Construction Set",definitionName:"ConstructionSet",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}],init:h.default.ConstructionSet},daylighting_control_definitions:{displayName:"Daylighting Control",definitionName:"DaylightingControlDefinition",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"height",displayName:"Height",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"illuminance_setpoint",displayName:"Illuminance Setpoint (lux)",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"total_count",displayName:"Total Count",readonly:!0,numeric:!0,get:function(e,t){return f.default.chain(t.models.stories).flatMap("spaces").flatMap("daylighting_controls").filter({daylighting_control_definition_id:e.id}).value().length}}],init:h.default.DaylightingControlDefn},stories:{displayName:"Story",definitionName:"Story",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"geometry_id",readonly:!0,private:!0},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.number},{name:"floor_to_ceiling_height",displayName:"Floor To Ceiling Height",input_type:"text",converter:y.number,numeric:!0,validator:g.default.gt0},{name:"multiplier",displayName:"Multiplier",input_type:"text",converter:y.number,numeric:!0,validator:g.default.gt0},{name:"spaces",displayName:"Spaces",readonly:!0,numeric:!0,get:function(e,t){return e.spaces.length}},{name:"shading",displayName:"Shading",readonly:!0,numeric:!0,get:function(e,t){return e.shading.length}},{name:"images",readonly:!0,private:!0},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}]},spaces:{displayName:"Space",definitionName:"Space",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"daylighting_controls",displayName:"Daylighting Controls",readonly:!0,private:!0,get:function(e,t){return e.daylighting_controls.map(function(e){return e.name}).join(", ")}},{name:"story",displayName:"Story",readonly:!0,get:function(e,t){var n=t.models.stories.find(function(t){return~t.spaces.map(function(e){return e.id}).indexOf(e.id)});return n.name}},{name:"building_unit_id",displayName:"Building Unit",input_type:"select",select_data:function(e,t){var n={"(none)":null};return t.models.library.building_units.forEach(function(e){n[e.name]=e.id}),n},get:function(e,t){var n=t.models.library.building_units.find(function(t){return t.id===e.building_unit_id});return n?n.name:null}},{name:"thermal_zone_id",displayName:"Thermal Zone",input_type:"select",select_data:function(e,t){var n={"(none)":null};return t.models.library.thermal_zones.forEach(function(e){n[e.name]=e.id}),n},get:function(e,t){var n=t.models.library.thermal_zones.find(function(t){return t.id===e.thermal_zone_id});return n?n.name:null}},{name:"space_type_id",displayName:"Space Type",input_type:"select",select_data:function(e,t){var n={"(none)":null};return t.models.library.space_types.forEach(function(e){n[e.name]=e.id}),n},get:function(e,t){var n=t.models.library.space_types.find(function(t){return t.id===e.space_type_id});return n?n.name:null}},{name:"construction_set_id",displayName:"Construction Set",input_type:"select",select_data:function(e,t){var n={"(none)":null};return t.models.library.construction_sets.forEach(function(e){n[e.name]=e.id}),n},get:function(e,t){var n=t.models.library.construction_sets.find(function(t){return t.id===e.construction_set_id});return n?n.name:null}},{name:"pitched_roof_id",displayName:"Pitched Roof",input_type:"select",select_data:function(e,t){return(0,d.default)({"(none)":null},f.default.fromPairs(t.models.library.pitched_roofs.map(function(e){return[e.name,e.id]})))},get:function(e,t){var n=f.default.find(t.models.library.pitched_roofs,{id:e.pitched_roof_id});return n?n.name:null}},{name:"below_floor_plenum_height",displayName:"Below Floor Plenum Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"floor_to_ceiling_height",displayName:"Floor to Ceiling Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"above_ceiling_plenum_height",displayName:"Above Ceiling Plenum Height",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"floor_offset",displayName:"Floor Offset",input_type:"text",numeric:!0,validator:g.default.number,converter:y.number},{name:"open_to_below",displayName:"Open To Below",input_type:"select",select_data:function(){return{False:!1,True:!0}},converter:y.bool},{name:"color",displayName:"Color",input_type:"color",validator:g.default.color}]},shading:{displayName:"Shading",definitionName:"Shading",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"handle",readonly:!0,private:!0},{name:"face_id",readonly:!0,private:!0},{name:"color",readonly:!0,private:!0}]},images:{displayName:"Image",columns:[{name:"id",displayName:"ID",readonly:!0,private:!0},{name:"name",displayName:"Name",input_type:"text",validator:g.default.name},{name:"width",displayName:"Width",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"height",displayName:"Height",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"z",displayName:"z",input_type:"text",validator:g.default.number,private:!0},{name:"scale",displayName:"Scale",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0,get:function(e){return e.width/e.naturalWidth}},{name:"opacity",displayName:"opacity",input_type:"text",validator:g.default.closedInterval(0,1),converter:y.number,numeric:!0},{name:"x",displayName:"x",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"y",displayName:"y",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"src",readonly:!0,private:!0}]},windows:{displayName:"Window",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"window_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.window_definitions.map(function(e){return[e.name,e.id]}))}}]},daylighting_controls:{displayName:"Daylighting Control",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"daylighting_control_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.daylighting_control_definitions.map(function(e){return[e.name,e.id]}))}}]},doors:{displayName:"Door",columns:[{name:"id",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"door_definition_id",displayName:"Definition",input_type:"select",select_data:function(e,t){return f.default.fromPairs(t.models.library.door_definitions.map(function(e){return[e.name,e.id]}))}}]},pitched_roofs:{displayName:"Pitched Roof",columns:[{name:"id",displayName:"ID",private:!0},{name:"name",displayName:"Name",input_type:"text"},{name:"pitched_roof_type",displayName:"Type",input_type:"select",select_data:function(){var e=["Gable","Hip","Shed"];return f.default.zipObject(e,e)},validator:g.default.oneOf("Gable","Hip","Shed")},{name:"pitch",displayName:"Pitch",input_type:"text",validator:g.default.gt0,converter:y.number,numeric:!0},{name:"shed_direction",displayName:"Shed Direction",input_type:"text",validator:g.default.number,converter:y.number,numeric:!0},{name:"color",displayName:"Color",input_type:"color"}],init:h.default.PitchedRoof}};(0,a.default)(w).forEach(function(e){w[e].keymap=f.default.zipObject(f.default.map(w[e].columns,"name"),w[e].columns),w[e].columns.forEach(function(t){f.default.has(w[e],"definitionName")&&f.default.get(p.allowableTypes,w[e].definitionName)&&f.default.includes(p.allowableTypes[w[e].definitionName][t.name],"null")&&(t.nullable=!0),f.default.has(w[e],"definitionName")&&(0,p.getDefaults)(w[e].definitionName)&&f.default.has((0,p.getDefaults)(w[e].definitionName),t.name)&&(t.default=(0,p.getDefaults)(w[e].definitionName)[t.name])})}),t.default=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n;return function(){for(var i=this,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){n=null,e.apply(i,o)},t)}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default,n={};return e.filter(function(e){var i=t(e);return!n[i]&&(n[i]=!0,!0)})}function a(e){return f.default.flatten(e.map(function(t,n){return e.slice(n+1).map(function(e){return[t,e]})}))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default;return e.filter(function(n,i){return 0===i||t(n)!==t(e[i-1])})}function d(e){for(var t=[],n=e.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t}Object.defineProperty(t,"__esModule",{value:!0});var c=n(42),l=i(c);t.debounce=r,t.uniq=o,t.allPairs=a,t.dropConsecutiveDups=s,t.getSiblings=d;var u=n(3),f=i(u)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(620);var i=n(8)(n(277),n(684),"data-v-8f6e6820",null);e.exports=i.exports},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.x,i=t.y;return[{x:Math.floor(n/e)*e,y:Math.floor(i/e)*e},{x:(Math.floor(n/e)+1)*e,y:Math.floor(i/e)*e},{x:Math.floor(n/e)*e,y:(Math.floor(i/e)+1)*e},{x:(Math.floor(n/e)+1)*e,y:(Math.floor(i/e)+1)*e}].map(function(e){return(0,w.default)({},e,{type:"grid"})})}function o(e,t,n){return e.filter(function(e){return(0,S.distanceBetweenPoints)(n,e)<=t}).map(function(e){return(0,w.default)({},e,{type:"vertex"})})}function a(e,t,n){var i=[].concat((0,y.default)(r(t,n)),(0,y.default)(o(e,t,n))).map(function(e){return(0,w.default)({},e,{dist:(0,S.distanceBetweenPoints)(e,n),dx:n.x-e.x,dy:n.y-e.y})});return b.default.orderBy(i,["dist","origin","type"],["asc","asc","desc"])}function s(e,t,n){var i=n.width,r=n.spacing,o=n.window_definition_mode,a=n.texture;if("Window to Wall Ratio"===o||"Repeating Windows"===o)return{
edge_id:e.id,center:{x:(e.v1.x+e.v2.x)/2,y:(e.v1.y+e.v2.y)/2},edge_start:e.v1,alpha:.5,start:e.v1,end:e.v2,window_definition_mode:o,width:i,spacing:r,texture:a};var s=(0,S.edgeDirection)({start:e.v1,end:e.v2}),d=i*Math.cos(s)/2,c=i*Math.sin(s)/2,l=e.v2.x===e.v1.x?(t.y-e.v1.y)/(e.v2.y-e.v1.y):(t.x-e.v1.x)/(e.v2.x-e.v1.x);return{edge_id:e.id,center:t,edge_start:e.v1,alpha:l,start:{x:t.x-d,y:t.y-c},end:{x:t.x+d,y:t.y+c},window_definition_mode:o}}function d(e,t){var n=void 0,i=void 0,r=1/0,o=!0,a=!1,s=void 0;try{for(var d,c=(0,g.default)(e);!(o=(d=c.next()).done);o=!0){var l=d.value,u=(0,S.pointDistanceToSegment)(t,{start:l.v1,end:l.v2});if(u.dist<r){if(0===u.dist)return(0,w.default)({},l,u);r=u.dist,n=l,i=u}}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}return n?(0,w.default)({},n,i):void 0}function c(e,t){var n=e.map(function(e){var n="Single Window"===e.window_definition_mode?{dist:(0,S.distanceBetweenPoints)(t,e.center),proj:e.center}:(0,S.pointDistanceToSegment)(t,e);return(0,w.default)({},e,n,{v1:e.start,v2:e.end})});return b.default.minBy(n,"dist")}function l(e,t,n,i){var r=d(e,t);return!r||r.dist>i?null:s(r,r.proj,n)}function u(e,t,n,i,r){var o=d(e,t);if(!o||o.dist>i)return null;var a=(0,S.distanceBetweenPoints)(o.v1,o.proj),c=Math.round(a/r)*r,l=o.v2.x-o.v1.x,u=o.v2.y-o.v1.y,f=Math.sqrt(l*l+u*u),p={x:o.v1.x+c*(l/f),y:o.v1.y+c*(u/f)};return s(o,p,n)}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return"grid-strict"===e?u.apply(void 0,n):l.apply(void 0,n)}function p(e,t,n,i){var r="grid-strict"===e?[]:[n];return b.default.chain(a(r,i,n)).map(function(e){return(0,w.default)({},e,{face_id:b.default.find(t,function(t){return(0,S.vertInRing)(e,t.vertices)})})}).filter("face_id").map(function(e){return(0,w.default)({},e,{face_id:e.face_id.id})}).first().value()}function h(e,t){var n=t.alpha||.5;return{x:e.v1.x+n*(e.v2.x-e.v1.x),y:e.v1.y+n*(e.v2.y-e.v1.y)}}Object.defineProperty(t,"__esModule",{value:!0});var m=n(127),g=i(m),v=n(34),y=i(v),_=n(7),w=i(_);t.gridSnapTargets=r,t.vertexSnapTargets=o,t.snapTargets=a,t.expandWindowAlongEdge=s,t.findClosestEdge=d,t.findClosestWindow=c,t.snapWindowToEdge=f,t.snapToVertexWithinFace=p,t.windowLocation=h;var x=n(3),b=i(x),S=n(15)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeEvents=void 0;var r=n(180),o=i(r);t.ResizeEvents=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),o=i(r),a=n(15);i(a);t.default={Vertex:function(e,t){return{id:o.default.generate(),x:e,y:t}},Edge:function(e,t){return{id:o.default.generate(),v1:e,v2:t}},Face:function(e){return{id:o.default.generate(),edgeRefs:e}},Geometry:function(){return{id:o.default.generate(),vertices:[],edges:[],faces:[]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.allowableTypes=t.getDefaults=void 0;var r=n(7),o=i(r),a=n(3),s=i(a),d=n(51),c=i(d),l=n(306),u=i(l),f=n(307),p=i(f),h=n(24),m=i(h),g=n(243),v=i(g),y=n(126),_=function(e){var t=function t(n){return s.default.has(n,"default")?n[e]:"null"===n.type?null:"array"===n.type?[]:"object"===n.type?s.default.mapValues(n.properties,t):s.default.has(n,e)?n[e]:null};return t},w=function(e){return s.default.mapValues(v.default.definitions,_(e))},x=w("default");if("ip"!==x.Project.config.units)throw new Error("Expected default units to be ip. Code changes are required to change the default units");var b=s.default.mapValues(x,function(e,t){return(0,y.getConverter)(t,"ip","si")(e)}),S=t.getDefaults=function(e){return s.default.cloneDeep("ip"===s.default.get(window,"application.$store.state.project.config.units","ip")?x[e]:b[e])};t.allowableTypes=w("type");t.default={Story:function(e){return(0,o.default)({},S("Story"),{id:c.default.generate(),name:e,color:(0,u.default)("story")})},Space:function(e){return(0,o.default)({},S("Space"),{id:c.default.generate(),name:e,color:(0,u.default)("space"),type:"space"})},Shading:function(e){return(0,o.default)({},S("Shading"),{id:c.default.generate(),name:e,color:m.default.palette.shading})},Image:function(e,t){return{id:c.default.generate(),src:t,name:e,visible:!0,height:0,width:0,x:0,y:0,z:0,r:0,opacity:.6,naturalWidth:0,naturalHeight:0}},BuildingUnit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:c.default.generate(),color:(0,u.default)("building_unit"),name:e.name,handle:e.handle||null}},ThermalZone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ThermalZone"),{id:c.default.generate(),color:(0,u.default)("thermal_zone"),name:e.name})},SpaceType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("SpaceType"),{id:c.default.generate(),color:(0,u.default)("space_type"),name:e.name})},ConstructionSet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("ConstructionSet"),{id:c.default.generate(),name:e.name,color:(0,u.default)("construction_set")})},WindowDefn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("WindowDefinition"),{id:c.default.generate(),name:e.name,wwr:null,window_spacing:null,texture:(0,p.default)("window_definition")})},DaylightingControlDefn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DaylightingControlDefinition"),{id:c.default.generate(),name:e.name})},DoorDefinition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("DoorDefinition"),{id:c.default.generate(),name:e.name,texture:(0,p.default)("door_definition")})},PitchedRoof:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)({},S("PitchedRoof"),{id:c.default.generate(),name:e.name,color:(0,u.default)("pitched_roof")})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertLibrary=t.convertState=t.convertSchema=t.getConverter=t.conversionFactor=t.units=void 0;var r=n(186),o=i(r),a=n(7),s=i(a),d=n(3),c=i(d),l=n(243),u=i(l),f=n(24),p=n(314),h=i(p),m=function e(t){if(c.default.has(t,"si_units"))return c.default.pick(t,["si_units","ip_units"]);if("object"===t.type){var n=c.default.pickBy(c.default.mapValues(t.properties,e),c.default.identity);return c.default.isEmpty(n)?null:n}return"array"===t.type&&c.default.get(t,"items.$ref")?{arrayOf:t.items.$ref.replace("#/definitions/","")}:t.$ref?{$ref:t.$ref.replace("#/definitions/","")}:null},g=(0,s.default)({$schema:c.default.pickBy(c.default.mapValues(u.default.properties,m),c.default.identity)},c.default.pickBy(c.default.mapValues(u.default.definitions,m),c.default.identity));g.$state=c.default.pickBy({application:g.Application,project:g.Project,geometry:{arrayOf:"Geometry"},models:{stories:{arrayOf:"Story"},library:c.default.fromPairs(f.libraryTypes.map(function(e){return[e,g.$schema[e]]}))}},c.default.identity);var v=t.units=(0,h.default)(g),y={"m -> ft":3.280839895,"ft -> m":.3048,"fc -> lux":10.7639,"lux -> fc":.092903},_=t.conversionFactor=function(e,t){var n=y[e+" -> "+t];if(!n)throw new Error("Unable to find conversion from "+e+" to "+t);return n},w=t.getConverter=function e(t,n,i){if(!c.default.includes(["si","ip"],n))throw new Error("expected fromSystem to be 'si' or 'ip'. received "+n);if(!c.default.includes(["si","ip"],i))throw new Error("expected toSystem to be 'si' or 'ip'. received "+i);if(n===i)return c.default.identity;var r=n+"_units",a=i+"_units",s=c.default.get(v,t);if(!s||c.default.has(s,"si_units")&&s.si_units===s.ip_units)return c.default.identity;if(c.default.has(s,"si_units")){var d=_(s[r],s[a]);return function(e){return("undefined"==typeof e?"undefined":(0,o.default)(e))===(0,o.default)(0)?e*d:e}}if(s.$ref)return e(s.$ref,n,i);if(s.arrayOf){var l=e(s.arrayOf,n,i);return function(e){return e.map(l)}}if(c.default.isObject(s)){var u=c.default.mapValues(s,function(r,o){return e(t+"."+o,n,i)});return function(e){return c.default.mapValues(e,function(e,t){return(u[t]||c.default.identity)(e)})}}throw new Error("Path "+t+" did not lead to a useful spot in 'units'")},x=t.convertSchema=function(e,t,n){return w("$schema",t,n)(e)};t.convertState=function(e,t,n){return w("$state",t,n)(e)},t.convertLibrary=x},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10",cy:"10",fill:"#bf0049",r:"5.6"}}),_c("path",{attrs:{d:"M10.8 9.9L12.7 8c.2-.2.2-.6 0-.8-.2-.2-.6-.2-.8 0L10 9 8.1 7.1c-.2-.2-.6-.2-.8 0s-.3.7-.1.9l1.9 1.9-1.9 1.9c-.2.2-.2.6 0 .8.1.1.3.2.4.2s.3-.1.4-.2l1.9-1.9 1.9 1.9c.1.1.3.2.4.2s.3-.1.4-.2c.2-.2.2-.6 0-.8l-1.8-1.9z",fill:"#fff"}})])}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),o=i(r);t.default=new o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(705),o=i(r),a=n(711),s=i(a),d=n(703),c=i(d),l=n(722),u=i(l),f=n(710),p=i(f),h=n(715),m=i(h),g=n(716),v=i(g),y=n(713),_=i(y),w=n(714),x=i(w),b=n(719),S=i(b),M=n(718),C=i(M),T=n(720),j=i(T),I=n(721),P=i(I),z=n(717),D=i(z),E=n(702),$=i(E),O=n(700),k=i(O),F=n(704),R=i(F),W=n(725),N=i(W),V=n(723),G=i(V),A=n(724),B=i(A),L=n(706),H=i(L),U=n(690),q=i(U),X=n(701),Y=i(X),K=n(698),Z=i(K),J=n(697),Q=i(J),ee=n(693),te=i(ee),ne=n(694),ie=(i(ne),n(692)),re=i(ie),oe=n(696),ae=i(oe),se=n(695),de=i(se),ce=n(707),le=i(ce),ue=n(708),fe=i(ue),pe=n(709),he=i(pe),me=n(251),ge=i(me),ve=n(712),ye=i(ve),_e={name:"ComponentIcon",props:["which"],template:'\n    <ComponentsWindow v-if="which === \'window_definitions\'" class="button" />\n    <ComponentsDaylighting v-else-if="which === \'daylighting_control_definitions\'" class="button" />\n  ',components:{ComponentsWindow:Z.default,ComponentsDaylighting:Q.default}},we={name:"AssignSpacePropIcon",props:["which"],template:'\n    <AssignBldgModule v-if="which === \'building_units\'" class="button" />\n    <AssignThermalZone v-else-if="which === \'thermal_zones\'" class="button" />\n    <AssignActivity v-else-if="which === \'space_types\'" class="button" />\n    <AssignRoof v-else-if="which === \'pitched_roofs\'" class="button" />\n  ',components:{AssignBldgModule:te.default,AssignThermalZone:ae.default,AssignActivity:re.default,AssignRoof:de.default}};t.default={"open-floorplan-svg":o.default,"save-floorplan-svg":s.default,"import-library-svg":c.default,"undo-svg":u.default,"redo-svg":p.default,"tab-floorplan-svg":m.default,"tab-shading-svg":v.default,"tab-assign-svg":_.default,"tab-components-svg":x.default,"tool-color-svg":D.default,"tool-draw-rectangle-svg":S.default,"tool-draw-polygon-svg":C.default,"tool-erase-svg":j.default,"tool-move-size-svg":P.default,"tool-image-svg":$.default,"tool-fill-svg":k.default,"tool-component-svg":R.default,"zoom-in-svg":G.default,"zoom-out-svg":B.default,"pan-svg":H.default,"add-image":q.default,ZoomToFitSvg:N.default,ComponentIcon:_e,AssignSpacePropIcon:we,QuickstartIconNewMapFloorplan:le.default,QuickstartIconNewFloorplan:fe.default,QuickstartIconOpenFloorplan:he.default,InfoIcon:ge.default,SettingsGear:ye.default,GroundPropertiesIcon:Y.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=(0,m.default)(e);!(i=(a=s.next()).done);i=!0){var d=a.value,c=!0,l=!1,u=void 0;try{for(var f,p=(0,m.default)(d.edges);!(c=(f=p.next()).done);c=!0){var h=f.value;if(h.id===t){n.push(d);break}}}catch(e){l=!0,u=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw u}}}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}function o(e,t){var n=_.default.denormalize(e.geometry.find(function(e){return e.id===t})),i=e.models.stories.find(function(e){return e.geometry_id===t}),o=i.spaces.map(function(e){return{daylighting_controls:e.daylighting_controls.map(function(e){return(0,p.default)({},e,{vertex:v.default.find(n.vertices,{id:e.vertex_id})})}),space_id:e.id,face_id:e.face_id}});return{geometry_id:t,story_id:i.id,windows:i.windows.map(function(e){var t=v.default.find(n.edges,{id:e.edge_id}),i=r(n.faces,e.edge_id);return(0,p.default)({},e,{originalLoc:(0,w.windowLocation)(t,e),originalFaceIds:v.default.map(i,"id")})}),doors:i.doors.map(function(e){var t=v.default.find(n.edges,{id:e.edge_id}),i=r(n.faces,e.edge_id);return(0,p.default)({},e,{originalLoc:(0,w.windowLocation)(t,e),originalFaceIds:v.default.map(i,"id")})}),perFaceComponents:o}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.geometry_id,o=t.story_id,a=t.windows,s=t.doors,d=t.perFaceComponents,l=_.default.denormalize(v.default.find(e.rootState.geometry,{id:i})),f=v.default.find(e.rootState.models.stories,{id:o}),p=l.faces.filter(function(e){return v.default.find(f.spaces,{face_id:e.id})}),h=e.rootState.project.grid.spacing;e.dispatch("models/destroyAllComponents",{story_id:o},{root:!0});var m=v.default.flatMap(p,"edges"),g=function(t,i){var a=[];t.forEach(function(e){var t=n[e.originalFaceIds[0]]||{dx:0,dy:0},s=t.dx,d=t.dy,l={x:e.originalLoc.x+s,y:e.originalLoc.y+d},f=(0,w.snapWindowToEdge)("nonstrict",m,l,{width:1},h/4);if(f){var g=r(p,f.edge_id).map(function(e){return e.id});e.originalFaceIds.length!==g.length||e.originalFaceIds.length>1&&v.default.intersection((0,u.default)(n),e.originalFaceIds)||a.push((0,c.default)({story_id:o,edge_id:f.edge_id,alpha:f.alpha},i.toLowerCase()+"_definition_id",e.window_definition_id||e.door_definition_id))}}),e.dispatch("models/create"+i+"s",a,{root:!0})};g(a,"Window"),g(s,"Door"),d.forEach(function(t){var i=t.face_id,r=t.daylighting_controls;r.forEach(function(t){var r=n[i]||{dx:0,dy:0},a=r.dx,s=r.dy,d={x:t.vertex.x+a,y:t.vertex.y+s},c=(0,w.snapToVertexWithinFace)("nonstrict",p,d,h/4);c&&e.dispatch("models/createDaylightingControl",{daylighting_control_definition_id:t.daylighting_control_definition_id,x:c.x,y:c.y,story_id:o,face_id:c.face_id},{root:!0})})})}function s(){for(var e=void 0,t=void 0,n=void 0,i=void 0,r=arguments.length,s=Array(r),d=0;d<r;d++)s[d]=arguments[d];if(3===s.length)e=s[0],t=s[1],n=s[2],i={};else{if(4!==s.length)throw new Error("usage: withPreservedComponents(context, geometry_id, action [,movementsByFaceId])");e=s[0],t=s[1],i=s[2],n=s[3]}var c=o(e.rootState,t);n(),a(e,c,i)}Object.defineProperty(t,"__esModule",{value:!0});var d=n(71),c=i(d),l=n(52),u=i(l),f=n(7),p=i(f),h=n(127),m=i(h);t.withPreservedComponents=s;var g=n(3),v=i(g),y=n(15),_=i(y),w=n(122)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(300),o=i(r),a=n(302),s=i(a),d=n(301),c=i(d);t.default={namespaced:!0,state:{config:{units:"ip",unitsEditable:!0,language:"EN-US"},north_axis:0,ground:{floor_offset:0,azimuth_angle:0,tilt_slope:0},grid:{visible:!0,spacing:5},view:{min_x:-250,min_y:-150,max_x:250,max_y:150},map:{initialized:!1,enabled:!0,visible:!0,latitude:39.7653,longitude:-104.9863,zoom:4.5,rotation:0,elevation:0},previous_story:{visible:!0},show_import_export:!0},actions:o.default,mutations:s.default,getters:c.default}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",version:"0.7.0",description:"Comment describing your JSON Schema",type:"object",properties:{version:{description:"File format version",type:"string"},application:{$ref:"#/definitions/Application"},project:{$ref:"#/definitions/Project"},stories:{type:"array",items:{$ref:"#/definitions/Story"}},building_units:{type:"array",items:{$ref:"#/definitions/BuildingUnit"}},thermal_zones:{type:"array",items:{$ref:"#/definitions/ThermalZone"}},space_types:{type:"array",items:{$ref:"#/definitions/SpaceType"}},construction_sets:{type:"array",items:{$ref:"#/definitions/ConstructionSet"}},window_definitions:{type:"array",items:{$ref:"#/definitions/WindowDefinition"}},door_definitions:{type:"array",items:{$ref:"#/definitions/DoorDefinition"}},daylighting_control_definitions:{type:"array",items:{$ref:"#/definitions/DaylightingControlDefinition"}},pitched_roofs:{type:"array",items:{$ref:"#/definitions/PitchedRoof"}}},required:["version","application","project","stories","building_units","thermal_zones","space_types","construction_sets","window_definitions","door_definitions","daylighting_control_definitions","pitched_roofs"],definitions:{Application:{description:"Reserved for application data, not for external use",type:"object"},Project:{description:"Information that applies to the entire project",type:"object",properties:{config:{type:"object",properties:{units:{type:["string","null"],enum:["ip","si"],default:"ip"},language:{type:["string","null"],default:"EN-US"}},required:["units","language"]},north_axis:{description:"Angle between building north and true north in degrees (clockwise is positive)",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},ground:{type:"object",properties:{floor_offset:{description:"Specifies the vertical offset between the building floor and the ground plane. Use a value < 0 for buildings with below-grade spaces, or a value > 0 for, e.g., buildings on piers.",type:["number","null"],default:0,si_units:"m",ip_units:"ft"},azimuth_angle:{description:"Direction of the ground plane, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},tilt_slope:{description:"Slope of the ground plane from horizontal. For example, a value of 1 implies a 45-deg angle.",type:["number","null"],default:0}},required:["floor_offset","azimuth_angle","tilt_slope"]},grid:{type:"object",properties:{visible:{type:["boolean","null"]},spacing:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["visible","spacing"]},view:{type:"object",properties:{min_x:{type:["number","null"],si_units:"m",ip_units:"ft"},min_y:{type:["number","null"],si_units:"m",ip_units:"ft"},max_x:{type:["number","null"],si_units:"m",ip_units:"ft"},max_y:{type:["number","null"],si_units:"m",ip_units:"ft"}},required:["min_x","min_y","max_x","max_y"]},map:{type:"object",properties:{visible:{type:["boolean","null"]},latitude:{type:["number","null"]},longitude:{type:["number","null"]},zoom:{type:["number","null"]},elevation:{type:["number","null"],si_units:"m",ip_units:"ft"},enabled:{type:["boolean","null"]},initialized:{type:["boolean","null"]},rotation:{type:["number","null"],si_units:"deg",ip_units:"deg"}},required:["visible","latitude","longitude","zoom","elevation","enabled","initialized","rotation"]},previous_story:{type:"object",properties:{visible:{type:["boolean","null"]}},required:["visible"]},show_import_export:{type:["boolean","null"]}},required:["config","north_axis","ground","grid","view","map","previous_story","show_import_export"]},Geometry:{type:"object",properties:{id:{type:"string"},vertices:{type:"array",items:{$ref:"#/definitions/Vertex"}},edges:{type:"array",items:{$ref:"#/definitions/Edge"}},faces:{type:"array",items:{$ref:"#/definitions/Face"}}},required:["id","vertices","edges","faces"]},Vertex:{type:"object",properties:{id:{type:"string"},x:{type:"number",si_units:"m",ip_units:"ft"},y:{type:"number",si_units:"m",ip_units:"ft"},edge_ids:{type:"array",items:{type:"string"}}},required:["id","x","y","edge_ids"]},Edge:{type:"object",properties:{id:{type:"string"},vertex_ids:{type:"array",minItems:2,maxItems:2,uniqueItems:!0,items:{type:"string"}},face_ids:{type:"array",minItems:1,maxItems:2,items:{type:"string"}}},required:["id","vertex_ids","face_ids"]},Face:{type:"object",properties:{id:{type:"string"},edge_ids:{type:"array",minItems:3,items:{type:"string"}},edge_order:{type:"array",minItems:3,items:{type:"number",enum:[0,1]}}},required:["id","edge_ids","edge_order"]},Story:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},image_visible:{type:["boolean","null"],default:!0},below_floor_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{type:["number","null"],minimum:0,default:8,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{type:["number","null"],minimum:0,default:0,si_units:"m",ip_units:"ft"},multiplier:{type:["integer","null"],minimum:1,multipleOf:1,default:1},color:{$ref:"#/definitions/HexColor"},geometry:{$ref:"#/definitions/Geometry"},images:{type:"array"},spaces:{type:"array",items:{$ref:"#/definitions/Space"}},shading:{type:"array",items:{$ref:"#/definitions/Shading"}},windows:{type:"array",items:{type:"object",properties:{window_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:'Distance along edge to center point of window, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1).  Does not apply if window_definition_mode is "Window to Wall Ratio". Will be an array of such values if window_definition_mode is "Repeating Windows".',type:["array","number","null"],minimum:0,maximum:1,items:{type:"number",minimum:0,maximum:1}}},required:["window_definition_id","edge_id","alpha"]}},doors:{type:"array",items:{type:"object",properties:{door_definition_id:{type:"string"},edge_id:{type:"string"},alpha:{description:"Distance along edge to center point of door, starting from first vertex of edge at a = 0 and ending at second vertex of edge at a =1.  v = v1 + a*(v2-v1). ",type:"number",minimum:0,maximum:1}},required:["door_definition_id","edge_id","alpha"]}}},required:["id","handle","name","image_visible","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","multiplier","color","geometry","images","spaces","shading","windows","doors"]},Space:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]},building_unit_id:{type:["string","null"]},thermal_zone_id:{type:["string","null"]},space_type_id:{type:["string","null"]},construction_set_id:{type:["string","null"]},pitched_roof_id:{type:["string","null"]},daylighting_controls:{type:"array",items:{type:"object",properties:{daylighting_control_definition_id:{type:"string"},vertex_id:{type:"string"}},required:["daylighting_control_definition_id","vertex_id"]}},below_floor_plenum_height:{description:"If provided, overrides the story below_floor_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_to_ceiling_height:{description:"If provided, overrides the story floor_to_ceiling_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},above_ceiling_plenum_height:{description:"If provided, overrides the story above_ceiling_plenum_height.",type:["number","null"],minimum:0,si_units:"m",ip_units:"ft"},floor_offset:{description:"If provided, specifies the vertical offset between the space floor and the story floor.",type:["number","null"],si_units:"m",ip_units:"ft"},open_to_below:{description:"If true, defines a space that is open to below (has no floor).",type:["boolean","null"]}},required:["id","handle","name","face_id","building_unit_id","thermal_zone_id","space_type_id","construction_set_id","pitched_roof_id","daylighting_controls","below_floor_plenum_height","floor_to_ceiling_height","above_ceiling_plenum_height","floor_offset","open_to_below"]},Shading:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},face_id:{type:["string","null"]}},required:["id","handle","name","face_id"]},ThermalZone:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},SpaceType:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},BuildingUnit:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]},color:{$ref:"#/definitions/HexColor"}},required:["id","handle","name","color"]},ConstructionSet:{type:"object",properties:{id:{type:"string"},handle:{type:["string","null"]},name:{type:["string","null"]}},required:["id","handle","name"]},WindowDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},window_definition_mode:{type:"string",enum:["Single Window","Repeating Windows","Window to Wall Ratio"],default:"Single Window"},wwr:{description:'Target window to wall ratio, only used if window_definition_mode is "Window to Wall Ratio"',type:["number","null"],minimum:0,maximum:1,exclusiveMaximum:!0,default:.2},sill_height:{description:"Vertical distance from the floor to the window sill. In drawing units.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},window_spacing:{description:'Spacing between windows.  Only used if window_definition_mode is  "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},height:{description:'Vertical height of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:4,si_units:"m",ip_units:"ft"},width:{description:'Horizontal width of each window. In drawing units. Used if window_definition_mode is "Single Window" or "Repeating Windows".',type:["number","null"],minimum:0,exclusiveMinimum:!0,default:2,si_units:"m",ip_units:"ft"},window_type:{type:"string",enum:["Fixed","Operable"],default:"Fixed"},overhang_projection_factor:{description:"Projection factor for overhangs, set to null for no overhang.  Overhang depth = overhang_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},fin_projection_factor:{description:"Projection factor for fins, set to null for no overhang. Projection factor for overhangs, set to null for no overhang.  Fin depth = fin_projection_factor*height.",type:["number","null"],minimum:0,exclusiveMinimum:!0,default:null},texture:{description:'Internal attribute representing how this window group is displayed. Applies only if window_definition_mode is "Window to Wall Ratio".',type:["string","null"],default:null}},required:["id","name","window_definition_mode","wwr","sill_height","window_spacing","height","width","window_type","overhang_projection_factor","fin_projection_factor"]},DoorDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},height:{description:"Vertical height of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:6.67,si_units:"m",ip_units:"ft"},width:{description:"Horizontal width of each door. In drawing units.",type:"number",minimum:0,exclusiveMinimum:!0,default:3,si_units:"m",ip_units:"ft"},door_type:{type:"string",enum:["Door","Glass Door","Overhead Door"],default:"Door"}},required:["id","name","height","width","door_type"]},DaylightingControlDefinition:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},illuminance_setpoint:{description:"Setpoint for daylighting control.",type:"number",default:300,si_units:"lux",ip_units:"fc"},height:{description:"Vertical distance of sensor above floor.  In drawing units.",type:"number",default:3,si_units:"m",ip_units:"ft"}},required:["id","name","illuminance_setpoint","height"]},PitchedRoof:{type:"object",properties:{id:{type:"string"},name:{type:["string","null"]},pitched_roof_type:{type:"string",enum:["Gable","Hip","Shed"],default:"Gable"},pitch:{description:"Pitch of roof. A value of 6, for example, implies a 6 in 12 pitch (or 26.57 degrees).",type:"number",minimum:0,default:6},shed_direction:{description:"Direction of shed roof, from low edge to high edge, in clockwise degrees from the positive y-axis when viewed from above.",type:["number","null"],default:0,si_units:"deg",ip_units:"deg"},color:{$ref:"#/definitions/HexColor"}},required:["id","name","pitched_roof_type","pitch","shed_direction","color"]},HexColor:{type:["string","null"],pattern:"^#[a-fA-F0-9]{6}$"}}}},,,,function(e,t,n){n(604);var i=n(8)(n(263),n(664),"data-v-14ece691",null);e.exports=i.exports},function(e,t,n){n(616);var i=n(8)(n(269),n(679),"data-v-6bbb2c29",null);e.exports=i.exports},function(e,t,n){n(605);var i=n(8)(n(272),n(665),"data-v-20be75f3",null);e.exports=i.exports},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("switch",[_c("g",[_c("path",{attrs:{d:"M82.992 97.5h-49.23a3.853 3.853 0 0 1-3.852-3.852V23.101a3.853 3.853 0 0 1 3.852-3.851h49.23a3.853 3.853 0 0 1 3.852 3.851v70.548a3.853 3.853 0 0 1-3.852 3.851zm-45.379-7.703H79.14V26.952H37.613v62.845z"}}),_c("path",{attrs:{d:"M25.834 80.751h-8.826a3.854 3.854 0 0 1-3.852-3.852V6.352A3.853 3.853 0 0 1 17.008 2.5h50.523a3.853 3.853 0 0 1 3.852 3.852v8.826H63.68v-4.975H20.859v62.845h4.975v7.703z"}})])])])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"}},[_c("title",[_v("Artboard 10")]),_c("path",{attrs:{d:"M50 18a32 32 0 1 0 32 32 32 32 0 0 0-32-32zm4 49h-8V47h8zm0-26h-8v-8h8z"}})])}}},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(244),d=n(657),c=i(d),l=n(648),u=i(l),f=n(641),p=i(f),h=n(662),m=i(h),g=n(649),v=i(g),y=n(651),_=i(y),w=n(661),x=i(w);n(123);t.default={name:"app",data:function(){return{error:null,success:null,navigationExpanded:!1}},beforeCreate:function(){this.$store.dispatch("models/initStory")},mounted:function(){var e=this;window.eventBus.$on("error",function(t){e.error=t,setTimeout(function(){e.error=null},5e3)}),window.eventBus.$on("success",function(t){e.success=t,setTimeout(function(){e.success=null},5e3)}),window.eventBus.$on("reload-grid",function(){document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}),document.addEventListener("keydown",function(t){e.$store.timetravel&&(90===t.keyCode&&(t.ctrlKey||t.metaKey)?(t.shiftKey?e.$store.timetravel.redo():e.$store.timetravel.undo(),t.preventDefault()):89==t.keyCode&&(t.ctrlKey||t.metaKey)&&(e.$store.timetravel.redo(),t.preventDefault()))})},computed:(0,o.default)({},(0,a.mapState)({tool:function(e){return e.application.currentSelections.tool}})),components:{"grid-view":u.default,"canvas-view":p.default,"inspector-view":_.default,navigation:c.default,toolbar:m.default,ImageUpload:v.default,Textures:x.default,PortalTarget:s.PortalTarget}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(642),s=i(a),d=n(29);t.default={name:"app",data:function(){return{}},computed:(0,o.default)({},(0,d.mapState)({mapEnabled:function(e){return e.project.map.enabled},mapVisible:function(e){return e.project.map.visible},northAxis:function(e){return e.project.north_axis}})),components:{"map-view":s.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(123),d=n(654),c=i(d),l=n(627)("AIzaSyDIja3lnhq63SxukBm9_mA-jn5R0Bj9RN8",["places"]),u=n(628),f=n(79);t.default={name:"map-view",data:function(){return{view:null,map:null,startResolution:null,autocomplete:null,
mapModalVisible:!window.api||window.api.config.showMapDialogOnStart,showGrid:!1}},mounted:function(){this.showGrid=this.gridVisible,this.initAutoComplete(),this.loadMap(),s.ResizeEvents.$on("resize",this.updateMapView),window.eventBus.$on("boundsResolved",this.clearStartResolution)},beforeDestroy:function(){s.ResizeEvents.$off("resize",this.updateMapView),window.eventBus.$off("boundsResolved",this.clearStartResolution)},methods:{clearStartResolution:function(){this.startResolution=null,this.updateMapView()},initAutoComplete:function(){var e=this;l().then(function(t){var n=new t.places.Autocomplete(e.$refs.addressSearch);n.addListener("place_changed",function(){var t=n.getPlace();t.geometry&&(e.latitude=t.geometry.location.lat(),e.longitude=t.geometry.location.lng(),e.updateMapView())})})},loadMap:function(){var e=this;window.ol=u,this.$refs.map.innerHTML="",this.view=new u.View,this.map=new u.Map({layers:[new u.layer.Tile({source:new u.source.OSM})],target:"map",view:this.view}),this.view.on("propertychange",function(t){"rotation"===t.key&&(e.rotation=e.view.getRotation())}),this.updateMapView(),_.defer(function(){return e.updateMapView()})},updateMapView:function(){console.log("updateMapView"),this.map.updateSize();var e=u.proj.fromLonLat([this.longitude,this.latitude]),t=this.unAdjustedResolution,n=this.unAdjustedDelta.y,i=this.unAdjustedDelta.x;if(this.view.getCenter()){this.startResolution=this.startResolution||u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter());var r=1/u.proj.getPointResolution(this.view.getProjection(),1,this.view.getCenter());t*=r,n*=r,i*=r}e[0]+=n,e[1]+=i,this.view.setResolution(t),this.view.setCenter(e),this.view.setRotation(this.rotation)},finishSetup:function(){var e=u.proj.transform(this.view.getCenter(),"EPSG:3857","EPSG:4326");this.longitude=e[0],this.latitude=e[1];var t=u.proj.getPointResolution(this.view.getProjection(),this.view.getResolution(),this.view.getCenter()),n=this.startResolution/t;console.log("scaling to "+this.startResolution+" / "+t+" == "+n),window.eventBus.$emit("scaleTo",n),this.rotation=this.view.getRotation(),this.$store.dispatch("project/setMapInitialized",{initialized:!0}),this.tool="Rectangle",f.select("#reticle").remove(),this.gridVisible=this.showGrid},showReticle:function(){if("Map"===this.tool){this.gridVisible=!1;var e=100,t=this.$refs.map.clientWidth/2,n=this.$refs.map.clientHeight/2;f.select("#reticle").selectAll("#reticle path").data([[{x:t,y:n-e},{x:t,y:n+e}],[{x:t-e,y:n},{x:t+e,y:n}]]).enter().append("path").attr("stroke-width","1").attr("stroke","gray").attr("d",f.line().x(function(e){return e.x}).y(function(e){return e.y}))}}},computed:(0,o.default)({},(0,a.mapState)({projectView:function(e){return e.project.view},min_x:function(e){return e.project.view.min_x},max_x:function(e){return e.project.view.max_x},min_y:function(e){return e.project.view.min_y},max_y:function(e){return e.project.view.max_y},units:function(e){return e.project.config.units},mapInitialized:function(e){return e.project.map.initialized}}),{mPerFt:function(){return u.proj.METERS_PER_UNIT["us-ft"]},unAdjustedResolutionMeters:function(){return(this.max_x-this.min_x)/this.$refs.map.clientWidth},unAdjustedResolution:function(){return"ip"===this.units?this.mPerFt*this.unAdjustedResolutionMeters:this.unAdjustedResolutionMeters},gridCenterMeters:function(){return{x:(this.min_x+this.max_x)/2,y:(this.min_y+this.max_y)/2}},gridCenter:function(){var e=this;return"ip"===this.units?_.mapValues(this.gridCenterMeters,function(t){return t*e.mPerFt}):this.gridCenterMeters},unAdjustedDelta:function(){var e=this.gridCenter.x*Math.cos(this.rotation)-this.gridCenter.y*Math.sin(this.rotation),t=this.gridCenter.y*Math.cos(this.rotation)+this.gridCenter.x*Math.sin(this.rotation);return{x:t,y:e}},gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(e){this.$store.dispatch("project/setGridVisible",{visible:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}},latitude:{get:function(){return this.$store.state.project.map.latitude},set:function(e){this.$store.dispatch("project/setMapLatitude",{latitude:e})}},longitude:{get:function(){return this.$store.state.project.map.longitude},set:function(e){this.$store.dispatch("project/setMapLongitude",{longitude:e})}},rotation:{get:function(){return this.$store.state.project.map.rotation},set:function(e){this.$store.dispatch("project/setMapRotation",{rotation:e})}}}),watch:{units:function(){this.updateMapView()},projectView:{handler:function(){this.updateMapView()},deep:!0}},components:{MapModal:c.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(95),s=i(a),d=n(29),c=n(644),l=i(c);t.default={computed:(0,o.default)({},(0,d.mapGetters)({componentInstance:"application/currentComponentInstance",currentStory:"application/currentStory",currentComponent:"application/currentComponent"}),{instanceType:function(){return this.componentInstance&&this.componentInstance.type},columns:function(){return this.componentInstance?s.default[this.instanceType].columns:[]},visibleColumns:function(){return _.reject(this.columns,"private")},showInstanceEditor:function(){return this.instanceType&&this.currentComponent.type.replace(/_definitions$/,"s")===this.instanceType}}),methods:{destroyComponent:function(){if("windows"===this.instanceType)this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:this.componentInstance});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:this.componentInstance});else{if("doors"!==this.instanceType)throw new Error("Unrecognized component type "+this.instanceType);this.$store.dispatch("models/destroyDoor",{story_id:this.currentStory.id,object:this.componentInstance})}},modifyComponentInstance:function(e,t,n){if("windows"===this.instanceType)this.$store.dispatch("models/modifyWindow",{id:e,key:t,value:n,story_id:this.currentStory.id});else if("daylighting_controls"===this.instanceType)this.$store.dispatch("models/modifyDaylightingControl",{id:e,key:t,value:n,story_id:this.currentStory.id});else{if("doors"!==this.instanceType)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDoor",{id:e,key:t,value:n,story_id:this.currentStory.id})}}},components:{EditBar:l.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(247),o=i(r),a=n(178),s=i(a);t.default={props:["row","columns","updateRow","destroy"],components:{GenericInput:o.default,Delete:s.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(646),o=i(r),a=n(248),s=i(a),d=n(121),c=i(d),l=n(699),u=i(l),f=n(691),p=i(f);t.default={name:"EditableSelectList",props:["columns","rows","addRow","editRow","destroyRow","selectRow","selectedRowId","objectTypes","selectedObjectType","searchAvailable","compact","duplicateRow"],data:function(){return{search:""}},computed:{visibleColumns:function(){return _.reject(this.columns,"private")},searchedRows:function(){var e=this;return this.rows.filter(function(t){return _.chain(t).omit(["color"]).values().compact().some(function(t){return t.toLowerCase&&t.toLowerCase().includes(e.search.toLowerCase())}).value()})}},methods:{toggleCompact:function(){this.$emit("toggleCompact",!this.compact)}},watch:{rows:function(e,t){e===t&&e.length>t.length&&this.selectRow(_.maxBy(this.rows,function(e){return+e.id}))}},components:{EditableTable:o.default,LibrarySelect:s.default,PrettySelect:c.default,DoubleArrows:u.default,AddNew:p.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(727);n(626);var s=n(178),d=i(s),c=n(250),l=i(c);t.default={name:"EditableTable",props:["columns","rows","deleteRow","updateRow","selectRow","selectedItemId","duplicateRow"],data:function(){return{sortKey:function(e){return+e.id},sortDescending:!1,wrapperScrollLeft:0}},computed:{visibleColumns:function(){return o.default.reject(this.columns,"private")},sortedRows:function(){var e=o.default.sortBy(this.rows,this.sortKey);return this.sortDescending&&e.reverse(),e}},methods:{sortBy:function(e){this.sortKey===e?this.sortDescending?this.sortDescending=!1:this.sortKey=void 0:(this.sortKey=e,this.sortDescending=!0)}},components:{Delete:d.default,Copy:l.default,RecycleScroller:a.RecycleScroller}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["title"],data:function(){return{expanded:!1}},computed:{caret:function(){return this.expanded?"▼":"►"}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=i(r),a=n(3),s=i(a),d=n(660),c=i(d),l=n(653),u=i(l),f=n(312);t.default={name:"GenericInput",props:["col","row","onChange"],data:function(){return{showColorModal:!1}},methods:{blurOnEnter:function(e){13===e.keyCode&&this.$el.blur(),27==e.keyCode&&(this.$el.value=this.row[this.col.name],this.$el.blur())}},computed:{selectData:function(){return s.default.toPairs(this.col.select_data(this.row,this.$store.state)).map(function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];return{val:i,display:n}})},rootState:function(){return this.$store.state},disabled:function(){return!!this.col.enabled&&!this.col.enabled(this.row)},colorStyles:function(){var e=this.row[this.col.name];if(!e||!e.slice)return{color:"#fff",background:"#000"};var t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return{color:(0,f.brightness)(t,n,i)<123?"#fff":"#000",background:e}},value:function(){try{return this.col.get(this.row,this.rootState)}catch(e){return this.row[this.col.name]}}},components:{TextureSelect:c.default,ColorPickerModal:u.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=i(r),a=n(7),s=i(a),d=n(29),c=n(96),l=n(313),u=i(l),f=n(283),p=i(f),h=n(15),m=i(h),g=n(46),v=i(g),y=n(70),w=i(y),x=n(123),b=n(282),S=i(b),M=n(122),C=n(79);t.default={name:"grid",data:function(){var e=this,t=function(t){return e.rwuToGrid(t,"x")},n=function(t){return e.rwuToGrid(t,"y")};return(0,s.default)({points:[],axis:{x:null,y:null},axis_generator:{x:null,y:null},reduceTicks:!1,componentFacingSelection:null,transform:{k:1,x:0,y:0},transformAtLastRender:C.zoomIdentity,lastMousePosition:null,handleMouseMove:null},(0,S.default)({xScale:t,yScale:n,selectImage:function(t){e.currentImage=t},updateImage:function(e){return window.application.$store.dispatch("models/updateImageWithData",e)}}),{crosshatchModifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}})},mounted:function(){this.handleMouseMove=(0,u.default)(this.highlightSnapTarget,100),this.renderGrid(),this.renderGrid=(0,c.debounce)(this.renderGrid,5),this.$refs.grid.addEventListener("reloadGrid",this.reloadGridAndScales),window.addEventListener("keyup",this.escapeAction),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$on("resize",this.reloadGridAndScales),window.eventBus.$on("zoomToFit",this.zoomToFit),window.eventBus.$on("scaleTo",this.scaleTo)},beforeDestroy:function(){this.$refs.grid.removeEventListener("reloadGrid",this.reloadGridAndScales),window.removeEventListener("keyup",this.escapeAction),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("resize",this.reloadGridAndScales),x.ResizeEvents.$off("resize",this.reloadGridAndScales),window.eventBus.$off("zoomToFit",this.zoomToFit),window.eventBus.$off("scaleTo",this.scaleTo)},computed:(0,s.default)({},(0,d.mapState)({currentMode:function(e){return e.application.currentSelections.mode},modeTab:function(e){return e.application.currentSelections.modeTab},currentTool:function(e){return e.application.currentSelections.tool},snapMode:function(e){return e.application.currentSelections.snapMode},previousStoryVisible:function(e){return e.project.previous_story.visible},gridVisible:function(e){return e.project.grid.visible},units:function(e){return e.project.config.units},spacing:function(e){return e.project.grid.spacing},scaleX:function(e){return e.application.scale.x},scaleY:function(e){return e.application.scale.y},windowDefs:function(e){return e.models.library.window_definitions},doorDefs:function(e){return e.models.library.door_definitions},windowWidths:function(e){return _.sumBy(e.models.library.window_definitions,"width")},allVertices:function(e){return _.flatMap(e.geometry,"vertices")}}),(0,d.mapGetters)({currentStory:"application/currentStory",currentStoryGeometry:"application/currentStoryGeometry",denormalizedGeometry:"application/currentStoryDenormalizedGeom",currentSpace:"application/currentSpace",currentShading:"application/currentShading",currentComponent:"application/currentComponent",currentComponentInstance:"application/currentComponentInstance",currentSpaceProperty:"application/currentSpaceProperty"}),{spacePropertyKey:function(){switch(this.currentSpaceProperty.type){case"building_units":return"building_unit_id";case"thermal_zones":return"thermal_zone_id";case"space_types":return"space_type_id";case"pitched_roofs":return"pitched_roof_id";case"construction_sets":return"construction_set_id";default:throw new Error("unrecognized space property type "+this.currentSpaceProperty.type)}},windowAndDoorDefs:function(){return[].concat((0,o.default)(this.windowDefs),(0,o.default)(this.doorDefs.map(function(e){return(0,s.default)({},e,{window_definition_mode:"Single Window"})})))},currentImage:{get:function(){return this.$store.getters["application/currentImage"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentComponentInstanceId:{get:function(){return"components"===this.$store.state.application.currentSelections.modeTab&&this.$store.state.application.currentSelections.component_instance_id},set:function(e){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:e})}},min_x:{get:function(){return this.$store.state.project.view.min_x},set:function(e){this.$store.dispatch("project/setViewMinX",{min_x:e})}},min_y:{get:function(){return this.$store.state.project.view.min_y},set:function(e){this.$store.dispatch("project/setViewMinY",{min_y:e})}},max_x:{get:function(){return this.$store.state.project.view.max_x},set:function(e){this.$store.dispatch("project/setViewMaxX",{max_x:e})}},max_y:{get:function(){return this.$store.state.project.view.max_y},set:function(e){this.$store.dispatch("project/setViewMaxY",{max_y:e})}},dimensions:{get:function(){return{min_x:this.$store.state.project.view.min_x,max_x:this.$store.state.project.view.max_x,min_y:this.$store.state.project.view.min_y,max_y:this.$store.state.project.view.max_y}},set:function(e){this.$store.dispatch("project/setDimensions",e)}},previousStory:function(){var e=this,t=this.$store.state.models.stories.findIndex(function(t){return t===e.currentStory});return 0===t?null:this.$store.state.models.stories[t-1]},previousStoryGeometry:function(){var e=this;return this.previousStory?this.$store.state.geometry.find(function(t){return t.id===e.previousStory.geometry_id}):null},previousStoryPolygons:function(){return this.previousStoryVisible&&this.previousStoryGeometry?this.polygonsFromGeometry(this.previousStoryGeometry,{previous_story:!0}):[]},images:function(){var e=this;return this.currentStory.images.map(function(t){return(0,s.default)({},t,{current:"Image"===e.currentTool&&e.currentImage&&e.currentImage.id===t.id,clickable:"Image"===e.currentTool&&(!e.currentImage||e.currentImage.id!==t.id)})})},polygons:function(){var e=this.polygonsFromGeometry(this.currentStoryGeometry);return this.previousStoryPolygons?this.previousStoryPolygons.concat(e):e},walls:function(){var e=_.keyBy(this.currentStoryGeometry.edges,"id"),t=_.keyBy(this.currentStoryGeometry.vertices,"id");return _.chain(this.currentStoryGeometry.faces).flatMap(function(e){return _.map(e.edgeRefs,"edge_id")}).sortBy(_.identity).groupBy(_.identity).mapValues("length").map(function(n,i){var r=e[i];return{id:i,start:t[r.v1],end:t[r.v2],interior:n>1}}).value()},daylightingControlLocs:function(){var e=this;return _.flatten(this.currentStory.spaces.map(function(t){return t.daylighting_controls.map(function(n){return(0,s.default)({},n,m.default.vertexForId(n.vertex_id,e.currentStoryGeometry),{id:n.id,type:"daylighting_controls",face_id:t.face_id})})}))},spaceFaces:function(){var e=this;return this.denormalizedGeometry.faces.filter(function(t){return _.find(e.currentStory.spaces,{face_id:t.id})})},spaceEdges:function(){return _.flatMap(this.spaceFaces,"edges")},visibleVerts:function(){var e=this;return this.allVertices.filter(function(t){return e.min_x<=t.x&&t.x<=e.max_x&&e.min_y<=t.y&&t.y<=e.max_y})},redraw:function(){var e=this.currentMode,t=this.polygons,n=this.images,i=this.windowDefs,r=this.doorDefs,o=this.currentSpace,a=this.currentShading;return{currentMode:e,polygons:t,images:n,windowDefs:i,doorDefs:r,currentSpace:o,currentShading:a}}}),watch:{gridVisible:function(){this.showOrHideAxes()},spacing:function(){this.updateGrid()},units:function(){this.reloadGridAndScales()},redraw:{handler:function(){this.draw()},deep:!0},currentTool:function(){this.points=[],this.draw(),this.clearHighlights(),"Image"===this.currentTool&&this.currentStory.images.length?this.currentImage&&_.includes(_.map(this.currentStory.images,"id"),this.currentImage.id)||(this.currentImage=this.currentStory.images[0]):_.includes(_.map(this.currentStory.spaces,"id"),this.currentSubSelection.id)||(this.currentSubSelection=this.currentStory.spaces[0])},currentSpace:function(){this.points=[]},currentShading:function(){this.points=[]},transform:function(e,t){e.k<.5?C.select("#svg-grid").selectAll(".polygon-text").style("display","none"):C.select("#svg-grid").selectAll(".polygon-text").style("display","initial")}},methods:(0,s.default)({},p.default,{windowCenterLocs:function(e){var t=this;return this.currentStory.windows.map(function(e){return{w:e,e:_.find(t.denormalizedGeometry.edges,{id:e.edge_id})}}).map(function(n){var i=n.w,r=n.e,o=t.denormalizeWindowOrDoor(r,i),a=(0,h.pointDistanceToSegment)(e,o),d=a.proj;return(0,s.default)({},o,{id:i.id,type:"windows"},d)})},doorCenterLocs:function(e){var t=this;return this.currentStory.doors.map(function(e){return{w:e,e:_.find(t.denormalizedGeometry.edges,{id:e.edge_id})}}).map(function(n){var i=n.w,r=n.e,o=t.denormalizeWindowOrDoor(r,i),a=(0,h.pointDistanceToSegment)(e,o),d=a.proj;return(0,s.default)({},o,{id:i.id,type:"doors"},d)})},currentComponentTypeLocs:function(e){if("window_definitions"===this.currentComponentType)return this.windowCenterLocs(e);if("daylighting_control_definitions"===this.currentComponentType)return this.daylightingControlLocs;if("door_definitions"===this.currentComponentType)return this.doorCenterLocs(e);throw new Error("unrecognized componentType: "+this.currentComponentType)},denormalizeWindowOrDoor:function(e,t){var n=(t.edge_id,t.alpha),i=t.window_definition_id,r=t.door_definition_id,o=_.find(this.windowAndDoorDefs,{id:i||r}),a=(0,M.windowLocation)(e,{alpha:n});return(0,s.default)({},(0,M.expandWindowAlongEdge)(e,a,o),{window_definition_mode:o.window_definition_mode,windowOrDoor:o.window_definition_mode?"window":"door",width:o.width,spacing:o.window_spacing,texture:o.texture})},windowsOnFace:function(e){var t=this;return _.flatMap(e.edges,function(e){return _.filter(t.currentStory.windows,{edge_id:e.id}).map(function(n){return(0,s.default)({},t.denormalizeWindowOrDoor(e,n),{selected:n.id===t.currentComponentInstanceId,facingSelection:n.id===t.componentFacingSelection})})})},doorsOnFace:function(e){var t=this;return _.flatMap(e.edges,function(e){return _.filter(t.currentStory.doors,{edge_id:e.id}).map(function(n){return(0,s.default)({},t.denormalizeWindowOrDoor(e,n),{windowOrDoor:"door",selected:n.id===t.currentComponentInstanceId,facingSelection:n.id===t.componentFacingSelection})})})},polygonsFromGeometry:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.default.denormalize(e),r=i.faces.map(function(i){var r=v.default.modelForFace(t.$store.state.models,i.id),o=i.vertices.slice(0,-1),a=(0,s.default)({face_id:i.id,name:r.name,modelType:r.type,color:r.color,points:o,labelPosition:t.polygonLabelPosition(o),windows:t.windowsOnFace(i),doors:t.doorsOnFace(i),current:"Apply Property"!==t.currentTool&&t.currentSpace&&i.id===t.currentSpace.face_id||"Apply Property"!==t.currentTool&&t.currentShading&&i.id===t.currentShading.face_id||"Apply Property"===t.currentTool&&t.currentSpaceProperty&&r[t.spacePropertyKey]===t.currentSpaceProperty.id,daylighting_controls:(r.daylighting_controls||[]).map(function(n){return(0,s.default)({},m.default.vertexForId(n.vertex_id,e),{selected:n.id===t.currentComponentInstanceId,facingSelection:n.id===t.componentFacingSelection})})},n);if(!o.length)return null;if("space"===r.type)if("thermal_zones"===t.currentMode){var d=v.default.libraryObjectWithId(t.$store.state.models,r.thermal_zone_id);a.color=d?d.color:w.default.config.palette.neutral}else if("space_types"===t.currentMode){var c=v.default.libraryObjectWithId(t.$store.state.models,r.space_type_id);a.color=c?c.color:w.default.config.palette.neutral}else if("building_units"===t.currentMode){var l=v.default.libraryObjectWithId(t.$store.state.models,r.building_unit_id);a.color=l?l.color:w.default.config.palette.neutral}else if("pitched_roofs"===t.currentMode){var u=v.default.libraryObjectWithId(t.$store.state.models,r.pitched_roof_id);a.color=u?u.color:w.default.config.palette.neutral}else if("construction_sets"===t.currentMode){var f=v.default.libraryObjectWithId(t.$store.state.models,r.construction_set_id);a.color=f?f.color:w.default.config.palette.neutral}else if("spaces"!==t.currentMode)throw new Error("unknown assignable property: "+t.currentMode);return a});return _.sortBy(_.compact(r),"current")}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(46),d=i(s);t.default={name:"ImageUpload",mounted:function(){window.eventBus.$on("uploadImage",this.promptUpload.bind(this))},computed:(0,o.default)({},(0,a.mapState)({pxPerRWU:function(e){var t=e.application.scale.x,n=t.pixels,i=t.rwuRange;return n/(i[1]-i[0])},max_y:function(e){return e.project.view.max_y},min_y:function(e){return e.project.view.min_y},min_x:function(e){return e.project.view.min_x},max_x:function(e){return e.project.view.max_x}}),(0,a.mapGetters)({currentStory:"application/currentStory"})),methods:{promptUpload:function(){this.$refs.imageInput.click()},uploadImage:function(e){for(var t=e.target.files,n=this,i=function(e){var i=t[e],r=new FileReader;r.addEventListener("load",function(){var e=new Image;e.onload=function(){var t=e.height/n.pxPerRWU/4,i=e.width/n.pxPerRWU/4;n.$store.dispatch("models/createImageForStory",{story_id:n.currentStory.id,src:e.src,name:d.default.generateName(n.$store.state.models,"images",n.currentStory),height:t,width:i,x:(n.min_x+n.max_x)/2,y:(n.min_y+n.max_y)/2,naturalHeight:e.height,naturalWidth:e.width}),n.$refs.imageInput.value=""},e.src=r.result},!1),i&&r.readAsDataURL(i)},r=0;r<t.length;r++)i(r)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(251),o=i(r);t.default={name:"Info",components:{InfoIcon:o.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(15),d=i(s);t.default={name:"inspector",data:function(){return{geometryInspector:!0,storyInspector:!1}},methods:{startpoint:function(e){var t=this.edgeForId(e.edge_id);if(e.reverse){var n=this.vertexForId(t.v2);return"v2 "+n.id+" ("+n.x+", "+n.y+")"}var i=this.vertexForId(t.v1);return"v1 "+i.id+" ("+i.x+", "+i.y+")"},endpoint:function(e){var t=this.edgeForId(e.edge_id);if(!e.reverse){var n=this.vertexForId(t.v2);return n.id+" (v2) ("+n.x+", "+n.y+")"}var i=this.vertexForId(t.v1);return i.id+" (v1) ("+i.x+", "+i.y+")"},edgeForId:function(e){return d.default.edgeForId(e,this.currentStoryGeometry)},vertexForId:function(e){return d.default.vertexForId(e,this.currentStoryGeometry)}},computed:(0,o.default)({},(0,a.mapGetters)({currentStory:"application/currentStory",currentSubSelectionFace:"application/currentSubSelectionFace",currentStoryGeometry:"application/currentStoryGeometry",currentSpace:"application/currentSpace",currentShading:"application/currentShading"}))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return"stories"===e?"currentStory":_.includes(b.componentTypes,e)?"currentComponentDef":_.includes(b.assignableProperties,e)?"currentSpaceProperty":_.includes(["windows","daylighting_controls"],e)?"currentComponentInstance":"currentSubSelection"}Object.defineProperty(t,"__esModule",{value:!0});var o=n(328),a=i(o),s=n(327),d=i(s),c=n(42),l=i(c),u=n(7),f=i(u),p=n(29),h=n(95),m=i(h),g=n(645),v=i(g),y=n(46),w=i(y),x=n(15),b=n(24);t.default={name:"Library",props:["objectTypes","mode","searchAvailable","compact","addNewOnHotkey"],mounted:function(){document.body.addEventListener("keyup",this.hotkeyAddNew)},beforeDestroy:function(){document.body.removeEventListener("keyup",this.hotkeyAddNew)},computed:(0,f.default)({},(0,p.mapGetters)({currentStoryGeom:"application/currentStoryGeometry"}),{objectTypesDisplay:function(){return this.objectTypes.map(function(e){return{val:e,display:m.default[e].displayName}})},columns:function(){return m.default[this.mode]?m.default[this.mode].columns:[]},currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e.id})}},currentSpaceProperty:{get:function(){return this.$store.getters["application/currentSpaceProperty"]},set:function(e){this.$store.dispatch("application/setCurrentSpacePropertyId",{id:e.id})}},currentComponentDef:{get:function(){return this.$store.getters["application/currentComponentDefinition"]},set:function(e){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:e.id})}},currentComponentInstance:{get:function(){return this.$store.getters["application/currentComponentInstance"]},set:function(e){this.$store.dispatch("application/setCurrentComponentInstanceId",{id:e.id})}},selectedObject:{get:function(){return this[this.keyForCurrentMode]},set:function(e){this[this.keyForCurrentMode]=e}},keyForCurrentMode:function(){return r(this.mode)}},(0,p.mapState)({stories:function(e){return e.models.stories},modeTab:function(e){return e.application.currentSelections.modeTab}}),{spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},windows:function(){return this.currentStory.windows},daylighting_controls:function(){return _.flatMap(this.currentStory.spaces,function(e){return e.daylighting_controls})},rows:function(){return _.includes(["stories","spaces","shading","images","windows","daylighting_controls"],this.mode)?this[this.mode]:this.$store.state.models.library[this.mode]},componentInstanceMode:function(){return _.includes(["windows","daylighting_controls"],this.mode)},addRowPermitted:function(){return"stories"!==this.mode||"floorplan"===this.modeTab},renderByMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}}}),watch:{rows:function(){this.selectedObject&&_.includes(_.map(this.rows,"id"),this.selectedObject.id)||!(this.rows.length>0)||(this.selectedObject=this.rows[0])},mode:function(e,t){"currentSpaceProperty"===r(e)?this.renderByMode=this.mode:"currentSpaceProperty"===r(t)&&(this.renderByMode="spaces")}},methods:{hotkeyAddNew:function(e){this.addNewOnHotkey&&this.addRowPermitted&&e.ctrlKey&&"a"===e.key&&this.createObject()},changeMode:function(e){if(!_.includes(this.objectTypes,e))throw new Error("Unable to find "+e+" in options "+(0,l.default)(this.objectTypes));this.$emit("changeMode",e)},modifyObject:function(e,t,n){if(this.componentInstanceMode)return this.modifyComponentInstance(e,t,n);var i=_.find(this.rows,{id:e}),r=w.default.setValueForKey(i,this.$store,this.mode,t,n);r.success||window.eventBus.$emit("error",r.error)},modifyComponentInstance:function(e,t,n){if("windows"===this.mode)this.$store.dispatch("models/modifyWindow",{id:e,key:t,value:n,story_id:this.currentStory.id});else{if("daylighting_controls"!==this.mode)throw new Error('unrecognized component mode "'+this.mode+'"');this.$store.dispatch("models/modifyDaylightingControl",{id:e,key:t,value:n,story_id:this.currentStory.id})}},createObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duplicate,n=void 0!==t&&t;if(n){var i=this.currentStory.floor_to_ceiling_height;this.$store.dispatch("models/initStory"),this.$store.dispatch("models/updateStoryWithData",{story:this.currentStory,floor_to_ceiling_height:i}),this.$store.dispatch("application/setCurrentTool",{tool:"Rectangle"})}else switch(this.mode){case"stories":return void this.$store.dispatch("models/initStory");case"spaces":this.$store.dispatch("models/initSpace",{story:this.currentStory});break;case"shading":this.$store.dispatch("models/initShading",{story:this.currentStory});break;case"images":window.eventBus.$emit("uploadImage");break;case"windows":case"daylighting_controls":window.eventBus.$emit("error","Create components by clicking where you would like it to be");break;default:this.$store.dispatch("models/createObjectWithType",{type:this.mode})}this.selectLatest()},duplicateRow:function(e){var t=this;return(0,d.default)(a.default.mark(function n(){var i,r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.stories.find(function(e){return e.id===t.selectedObject.id})){n.next=4;break}t.cloneStory(t.selectedObject),n.next=11;break;case 4:return t.createObject(),n.next=7,t.$nextTick();case 7:for(i=e.name;_.find(t.rows,{name:i});)r=i.match(/\((\d+)\)/),i=r?i.slice(0,r.index)+"("+(+r[1]+1)+")":i+" (2)";t.modifyObject(t.selectedObject.id,"name",i),t.columns.forEach(function(n){var i=n.name,r=n.readonly,o=n.private;"id"!==i&&"name"!==i&&"color"!==i&&(r||o||t.selectedObject[i]!==e[i]&&t.modifyObject(t.selectedObject.id,i,e[i]))});case 11:case"end":return n.stop()}},n,t)}))()},selectLatest:function(){var e=_.maxBy(this.rows,function(e){return+e.id});e&&(this.selectedObject=e)},cloneStory:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id});var t=(0,x.replaceIdsForCloning)(this.currentStoryGeom),n=t.clonedGeometry,i=t.idMap;this.createObject({duplicate:!0});var r=w.default.replaceIdsUpdateInfoForCloning(e,i,this.state,this.currentStory),o=r.clonedStory;this.destroyDuplicateSpaces(),this.$store.dispatch("models/cloneStory",o),
this.$store.dispatch("geometry/cloneStoryGeometry",n);for(var a=this.currentStory.shading.length-1;a>=0;a--)this.$store.dispatch("models/destroyShading",{shading:this.currentStory.shading[a],story:this.currentStory})},destroyDuplicateSpaces:function(){this.$store.dispatch("models/destroySpace",{space:this.currentStory.spaces[0],story:this.currentStory})},destroyObject:function(e){var t=this;switch(this.mode){case"stories":return void this.$store.dispatch("models/destroyStory",{story:e});case"spaces":this.$store.dispatch("models/destroySpace",{space:e,story:this.$store.state.models.stories.find(function(n){return n[t.mode].find(function(t){return t.id===e.id})})});break;case"shading":this.$store.dispatch("models/destroyShading",{shading:e,story:this.$store.state.models.stories.find(function(n){return n[t.mode].find(function(t){return t.id===e.id})})});break;case"images":this.$store.dispatch("models/destroyImage",{image:e,story:this.$store.state.models.stories.find(function(n){return n[t.mode].find(function(t){return t.id===e.id})})});break;case"window_definitions":this.$store.dispatch("models/destroyWindowDef",{object:e});break;case"daylighting_control_definitions":this.$store.dispatch("models/destroyDaylightingControlDef",{object:e});break;case"door_definitions":this.$store.dispatch("models/destroyDoorDef",{object:e});break;case"windows":this.$store.dispatch("models/destroyWindow",{story_id:this.currentStory.id,object:e});break;case"daylighting_controls":this.$store.dispatch("models/destroyDaylightingControl",{story_id:this.currentStory.id,object:e});break;default:this.$store.dispatch("models/destroyObject",{object:e})}}},components:{EditableSelectList:v.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(178),o=i(r),a=n(250),s=i(a);t.default={name:"LibrarySelect",props:["rows","selectedItemId","selectItem","destroyItem","duplicateRow"],components:{Delete:o.default,Copy:s.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(726),o=i(r);t.default={name:"ColorPickerModal",props:["value"],computed:{color:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},mounted:function(){document.addEventListener("keydown",this.closeOnEsc)},beforeDestroy:function(){document.removeEventListener("keydown",this.closeOnEsc)},methods:{closeOnEsc:function(e){27===e.keyCode&&this.$emit("close")}},components:{Swatches:o.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(181),s=i(a),d=n(658),c=i(d);t.default={name:"MapModal",data:function(){return{address:""}},computed:{online:function(){return!window.api||!window.api.config||window.api.config.online},mapEnabled:{get:function(){return this.$store.state.project.map.enabled},set:function(e){this.$store.dispatch("project/setMapEnabled",{enabled:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}}},methods:{importFloorplanAsFile:function(e){var t=this,n=e.target.files[0],i=new FileReader;i.addEventListener("load",function(){t.importFloorplan(i.result)},!1),n&&i.readAsText(n)},importFloorplan:function(e){this.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:JSON.parse(e)}),this.$emit("close")}},components:(0,o.default)({},s.default,{NonChromeWarning:c.default})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ModalBase",props:["title"],methods:{close:function(){this.$emit("close")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(42),o=i(r),a=n(249),s=i(a);t.default={name:"SaveAsModal",props:["saveWhat","dataToDownload"],mounted:function(){this.$refs.downloadName.focus()},methods:{downloadFile:function(){var e=document.createElement("a"),t=new Blob([(0,o.default)(this.dataToDownload)],{type:"text/json;charset=utf-8"});e.setAttribute("href",URL.createObjectURL(t)),e.setAttribute("download",this.$refs.downloadName.value+".json"),e.click(),console.log("exporting:\n"+(0,o.default)(this.dataToDownload)),this.$emit("close")}},components:{ModalBase:s.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(249),d=i(s),c=n(650),l=i(c),u=n(647),f=i(u);t.default={name:"Settings",computed:(0,o.default)({},(0,a.mapState)({ground:function(e){return e.project.ground},mapEnabled:function(e){return e.project.map.enabled}}),{floor_offset:{get:function(){return this.ground.floor_offset},set:function(e){this.$store.dispatch("project/modifyGround",{key:"floor_offset",val:e})}},azimuth_angle:{get:function(){return this.ground.azimuth_angle},set:function(e){this.$store.dispatch("project/modifyGround",{key:"azimuth_angle",val:e})}},tilt_slope:{get:function(){return this.ground.tilt_slope},set:function(e){this.$store.dispatch("project/modifyGround",{key:"tilt_slope",val:e})}},northAxis:{get:function(){return this.$store.state.project.north_axis+"°"},set:function(e){this.$store.dispatch("project/setNorthAxis",{north_axis:e})}}}),components:{ModalBase:d.default,Info:l.default,ExpandableDrawer:f.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(3),s=i(a),d=n(29),c=(n(96),n(70)),l=(i(c),n(46)),u=(i(l),n(180)),f=i(u),p=n(652),h=i(p),m=n(248);i(m);t.default={name:"navigation",data:function(){return{libraryExpanded:!1}},computed:(0,o.default)({},(0,d.mapGetters)({currentComponent:"application/currentComponent"}),(0,d.mapState)({modeTab:function(e){return e.application.currentSelections.modeTab}}),{currentStory:{get:function(){return this.$store.getters["application/currentStory"]},set:function(e){this.$store.dispatch("application/setCurrentStoryId",{id:e.id})}},currentSubSelection:{get:function(){return this.$store.getters["application/currentSubSelection"]},set:function(e){this.$store.dispatch("application/setCurrentSubSelectionId",{id:e?e.id:null})}},spaces:function(){return this.currentStory.spaces},shading:function(){return this.currentStory.shading},images:function(){return this.currentStory.images},objectTypesForTab:function(){switch(this.modeTab){case"floorplan":return["spaces","shading","images"];case"shading":return["shading"];case"components":return["window_definitions","daylighting_control_definitions","door_definitions"];case"assign":return["building_units","thermal_zones","space_types","construction_sets","pitched_roofs"]}},mode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}},subselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(e){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:e})}}}),methods:{resetSize:function(){this.libraryExpanded},setWidthForOpenLibrary:function(){this.$emit("expanded",!!this.libraryExpanded),f.default.$emit("resize")}},watch:{libraryExpanded:function(){this.setWidthForOpenLibrary()},objectTypesForTab:function(e){s.default.includes(e,this.subselectionType)||("assign"===this.modeTab?this.subselectionType="thermal_zones":this.subselectionType=e[0])}},components:{Library:h.default}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{isChrome:function(){var e=window.chrome||window.qt,t=window.navigator,n=t.vendor,i=t.userAgent.indexOf("OPR")>-1,r=t.userAgent.indexOf("Edge")>-1,o=t.userAgent.match("CriOS");return!o&&(null!==e&&"undefined"!=typeof e&&"Google Inc."===n&&i===!1&&r===!1)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r);t.default={name:"PrettySelect",props:["options","value","label","disabled"],computed:{normalizedOpts:function(){if(o.default.isArray(this.options)){if(!this.options.length)return[];if(o.default.has(this.options[0],"val")&&o.default.has(this.options[0],"display"))return this.options;if(o.default.isString(this.options[0]))return this.options.map(function(e){return{val:e,display:e}})}return console.warn("unrecognized options structure",this.options),this.options}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),o=n(121),a=i(o);t.default={computed:{renderableProperties:function(){return["spaces","building_units","thermal_zones","space_types","construction_sets","pitched_roofs"]},renderableOptions:function(){return this.renderableProperties.map(function(e){return{display:(0,r.displayNameForMode)(e),val:e}})},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}}},components:{PrettySelect:a.default}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),o=(i(r),n(244)),a=n(24),s=n(3);i(s);t.default={name:"TextureSelect",props:["value","label","disabled"],data:function(){return{open:!1}},computed:{textures:function(){return a.textures}},methods:{choose:function(e){this.$emit("change",e),this.open=!1},ulStyle:function(){var e=this.$el&&this.$el.getBoundingClientRect();return e?{left:e.left+"px",top:e.top+e.height-17+"px",width:e.width+"px"}:{}}},components:{Portal:o.Portal}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=i(r),a=n(184),s=i(a),d=n(52),c=i(d),l=n(3),u=i(l),f=n(24);t.default={name:"Textures",data:function(){return{modifiers:{"-highlight":"green","-selected":"green","-facing-selection":"blue","":"#222"}}},mounted:function(){this.loadCssStyles(),this.checkTexturesList()},methods:{loadCssStyles:function(){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=this.styles:e.appendChild(document.createTextNode(this.styles)),document.head.appendChild(e)},checkTexturesList:function(){var e=u.default.difference(f.textures,u.default.map(this.patterns,"id")),t=u.default.difference(u.default.map(this.patterns,"id"),f.textures);e.length&&console.error("[warning]: Textures were added to Textures.vue, but not to appconfig.js.\n  This will cause those textures not to be used. The following are missing from appconfig:\n  "+e),t.length&&console.error("[warning]: Textures were added to appconfig.js, but not to Textures.vue.\n  Those textures will not be visible. The following are missing from Textures.vue:\n  "+t)}},computed:{modSuffixes:function(){return u.default.filter((0,c.default)(this.modifiers),u.default.identity)},patterns:function(){var e=this;return u.default.reject((0,s.default)(this.$el.querySelectorAll("pattern")),function(t){return e.modSuffixes.some(function(e){return u.default.endsWith(t.getAttribute("id"),e)})})},cssStyles:function(){return this.patterns.map(function(e){var t=e.getAttribute("id"),n=e.getAttribute("width"),i=e.getAttribute("height"),r=e.innerHTML,o="<svg xmlns='http://www.w3.org/2000/svg' width='"+n+"' height='"+i+"'>"+r+"</svg>";return"\n            .texture-"+t+' {\n              background-image: url("data:image/svg+xml;base64,'+btoa(o)+'");\n              background-repeat: repeat;\n            }'})},windowStyles:function(){return u.default.map(this.patterns,function(e){return e.getAttribute("id")}).map(function(e){return'\n            #grid svg .polygons .window .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+');\n            }\n            #grid svg .polygons .window .facing-selection .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+'-facing-selection);\n            }\n            #grid svg .polygons .window .selected .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+'-selected);\n            }\n            #grid svg .highlight .window .hatch[data-texture="'+e+'"] {\n              fill: url(#'+e+"-highlight);\n            }\n          "})},styles:function(){return[].concat((0,o.default)(this.cssStyles),(0,o.default)(this.windowStyles)).join("\n")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(29),s=n(655),d=i(s),c=n(656),l=i(c),u=n(121),f=i(u),p=n(70),h=i(p),m=n(181),g=i(m),v=n(659),y=i(v),w=n(643),x=i(w),b=n(24),S=i(b);t.default={name:"toolbar",data:function(){return{componentTypes:{daylighting_control_definitions:"Daylighting Control Definitions",window_definitions:"Window Definitions"},showSaveModal:!1,thingWereSaving:"",visibleComponentType:null,showGroundPropsModal:!1}},methods:{setImageTool:function(){this.tool="Image",0===this.currentStory.images.length&&window.eventBus.$emit("uploadImage")},zoomToFit:function(){window.eventBus.$emit("zoomToFit")},exportData:function(){return this.thingWereSaving="Floorplan",this.showSaveModal=!0,this.$store.getters.exportData},importDataAsFile:function(e,t){var n=this,i=e.target.files[0],r=new FileReader;r.addEventListener("load",function(){var e=void 0;try{e=JSON.parse(r.result)}catch(e){return void window.eventBus.$emit("error","Invalid JSON")}"library"===t?n.$store.dispatch("importLibrary",{data:e}):"floorplan"===t&&n.$store.dispatch("importFloorplan",{clientWidth:document.getElementById("svg-grid").clientWidth,clientHeight:document.getElementById("svg-grid").clientHeight,data:e})},!1),i&&r.readAsText(i)},undo:function(){this.$store.timetravel.undo()},redo:function(){this.$store.timetravel.redo()},updateUnits:function(e){this.allowSettingUnits?this.rwUnits=e:window.eventBus.$emit("error","Units must be set before any geometry is drawn.")},displayNameForMode:function(e){return h.default.displayNameForMode(e)}},computed:(0,o.default)({latestCreatedCompId:function(){return _.chain(this.allComponents).map("defs").flatten().map("id").map(Number).max().value()+""},allComponents:function(){var e=this;return b.componentTypes.map(function(t){return{defs:e.$store.state.models.library[t],name:S.default.modes[t],type:t}})},currentComponentType:function(){return this.currentComponent.type},currentComponentDefinition:function(){return this.currentComponent.definition}},(0,a.mapGetters)({currentSpaceProperty:"application/currentSpaceProperty",currentStory:"application/currentStory"}),(0,a.mapState)({mapEnabled:function(e){return e.project.map.enabled},timetravelInitialized:function(e){return e.timetravelInitialized},showImportExport:function(e){return e.project.show_import_export},allowSettingUnits:function(e){return!1}}),{currentSubselectionType:{get:function(){return this.$store.state.application.currentSelections.subselectionType},set:function(e){this.$store.dispatch("application/setCurrentSubselectionType",{subselectionType:e})}},availableTools:function(){var e=[];switch(this.modeTab){case"floorplan":e=["Rectangle","Polygon","Eraser","Select","Image"];break;case"shading":e=["Rectangle","Polygon","Eraser","Select"];break;case"components":e=["Place Component"];break;case"assign":e=["Apply Property"]}return!this.previousStoryVisible||"floorplan"!==this.modeTab&&"shading"!==this.currentMode||e.push("Fill"),e},currentMode:{get:function(){return this.$store.state.application.currentSelections.mode},set:function(e){this.$store.dispatch("application/setCurrentMode",{mode:e})}},modeTab:{get:function(){return this.$store.state.application.currentSelections.modeTab},set:function(e){this.$store.dispatch("application/setCurrentModeTab",{modeTab:e})}},gridVisible:{get:function(){return this.$store.state.project.grid.visible},set:function(e){this.$store.dispatch("project/setGridVisible",{visible:e})}},mapVisible:{get:function(){return this.$store.state.project.map.visible},set:function(e){this.$store.dispatch("project/setMapVisible",{visible:e})}},previousStoryVisible:{get:function(){return this.$store.state.project.previous_story.visible},set:function(e){this.$store.dispatch("project/setPreviousStoryVisible",{visible:e})}},tool:{get:function(){return this.$store.state.application.currentSelections.tool},set:function(e){this.$store.dispatch("application/setCurrentTool",{tool:e})}},spacing:{get:function(){return this.$store.state.project.grid.spacing},set:function(e){this.$store.dispatch("project/setSpacing",{spacing:e})}},currentComponent:{get:function(){return this.$store.getters["application/currentComponent"]},set:function(e){e&&e.definition&&e.definition.id&&this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:e.definition.id})}},rwUnits:{get:function(){return"ip"===this.$store.state.project.config.units?"ft":"m"},set:function(e){this.$store.dispatch("project/setUnits",{units:"ft"===e?"ip":"si"})}},snapMode:{get:function(){return this.$store.state.application.currentSelections.snapMode},set:function(e){this.$store.dispatch("application/setCurrentSnapMode",{snapMode:e})}},dataToDownload:function(){return this.$store.getters.exportData}}),watch:{modeTab:function(){"assign"===this.modeTab&&this.currentSpaceProperty?this.currentMode=this.currentSpaceProperty.type:this.currentMode="spaces"},tool:function(e){this.availableTools.indexOf(e)===-1&&"Map"!==e&&(this.tool=this.availableTools[0]),"Image"===this.tool&&"images"!==this.currentSubselectionType?this.currentSubselectionType="images":"Image"!==this.tool&&"images"===this.currentSubselectionType&&(this.currentSubselectionType="spaces")},availableTools:function(){_.includes(this.availableTools,this.tool)||(this.tool=this.availableTools[0])},currentSubselectionType:function(e){"images"===e&&"Image"!==this.tool?this.tool="Image":"images"!==e&&"Image"===this.tool&&(this.tool=this.availableTools[0])},latestCreatedCompId:function(){this.$store.dispatch("application/setCurrentComponentDefinitionId",{id:this.latestCreatedCompId})}},components:(0,o.default)({PrettySelect:f.default,SaveAsModal:d.default,Settings:l.default,RenderByDropdown:y.default,ComponentInstanceEditBar:x.default},g.default)}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.xScale,n=e.yScale,i=e.edge,r=e.offset,o=(0,j.unitPerpVector)(i.start,i.end),a=o.dx,s=o.dy;return[[t(i.start.x)+r*a,n(i.start.y)+r*s],[t(i.start.x)-r*a,n(i.start.y)-r*s],[t(i.end.x)-r*a,n(i.end.y)-r*s],[t(i.end.x)+r*a,n(i.end.y)+r*s],[t(i.start.x)+r*a,n(i.start.y)+r*s]]}function a(e,t,n,i){M.select(n).selectAll(".single-window, .repeating-windows").remove();var r=M.select(n).selectAll(".window-wall-ratio").data([i]),a=r.enter().append("g").attr("class","window-wall-ratio");a.append("path").attr("class","hatch");var s=M.line(),d=r.merge(a);d.classed("selected",function(e){return e.selected}),d.classed("facing-selection",function(e){return e.facingSelection}),d.select(".hatch").attr("d",s(o({edge:i,xScale:e,yScale:t,offset:8}))).attr("data-texture",i.texture||"diagonal-stripes-4")}function s(e,t,n,i){var r=M.select(n).selectAll(".door").data([i]),a=r.enter().append("g").attr("class","door");a.append("path").attr("class","hatch");var s=M.line(),d=r.merge(a);d.exit().remove(),d.classed("selected",function(e){return e.selected}),d.classed("facing-selection",function(e){return e.facingSelection}),d.select(".hatch").attr("d",s(o({edge:i,xScale:e,yScale:t,offset:8}))).attr("data-texture",i.texture)}function d(e,t,n,i){M.select(n).selectAll(".window-wall-ratio, .repeating-windows").remove();var r=M.select(n).selectAll(".single-window").data([i]),o=r.enter().append("g").attr("class","single-window");o.append("line").attr("class","pane"),o.append("circle"),o.append("line").attr("class","start-linecap"),o.append("line").attr("class","end-linecap");var a=r.merge(o);a.classed("selected",function(e){return e.selected}),a.classed("facing-selection",function(e){return e.facingSelection}),a.select("line.pane").attr("x1",function(t){return e(t.start.x)}).attr("y1",function(e){return t(e.start.y)}).attr("x2",function(t){return e(t.end.x)}).attr("y2",function(e){return t(e.end.y)}),a.each(function(n){var i=(0,j.unitPerpVector)(n.start,n.end),r=i.dx,o=i.dy,a=6,s=M.select(this);s.select(".start-linecap").attr("x1",e(n.start.x)+a*r).attr("y1",t(n.start.y)+a*o).attr("x2",e(n.start.x)-a*r).attr("y2",t(n.start.y)-a*o),s.select(".end-linecap").attr("x1",e(n.end.x)+a*r).attr("y1",t(n.end.y)+a*o).attr("x2",e(n.end.x)-a*r).attr("y2",t(n.end.y)-a*o),(n.selected||n.facingSelection)&&s.raise()}),a.select("circle").attr("cx",function(t){return e(t.center.x)}).attr("cy",function(e){return t(e.center.y)}).attr("r","2")}function c(e,t,n,i){var r=i.start,a=i.end,s=i.width,c=i.spacing;M.select(n).selectAll(".window-wall-ratio, .single-window").remove();var l=M.select(n).selectAll(".repeating-windows").data([i]),u=l.enter().append("g").attr("class","repeating-windows");u.append("path").attr("class","box"),u.append("g").attr("class","sub-windows");var f=M.line(),p=l.merge(u);p.classed("selected",function(e){return e.selected}),p.classed("facing-selection",function(e){return e.facingSelection}),p.select(".box").attr("d",f(o({edge:i,xScale:e,yScale:t,offset:6})));var h=(0,j.unitVector)(r,a),m=(0,j.repeatingWindowCenters)({start:r,end:a,spacing:c,width:s}),g=h.dx*s,v=h.dy*s,y=m.map(function(e){return(0,b.default)({},i,{center:e,start:{x:e.x-g/2,y:e.y-v/2},end:{x:e.x+g/2,y:e.y+v/2}})}),_=p.select(".sub-windows").selectAll(".sub-window").data(y);_.exit().remove(),_.merge(_.enter().append("g").attr("class","sub-window")).each(function(n){d(e,t,this,n)})}function l(){function e(e){e.exit().remove(),e.merge(e.enter().append("g").attr("class","window")).each(function(e){if("door"===e.windowOrDoor)s(t,n,this,e);else if("Single Window"===e.window_definition_mode)d(t,n,this,e);else if("Window to Wall Ratio"===e.window_definition_mode)a(t,n,this,e);else{if("Repeating Windows"!==e.window_definition_mode)throw new Error("unexpected window_definition_mode: "+e.window_definition_mode);c(t,n,this,e)}})}var t=T.default.identity,n=T.default.identity;return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e}function u(){function e(e){e.exit().remove();var o=e.enter().append("g").attr("class","distance-measure").attr("transform",function(e){var t=(0,j.unitPerpVector)(e.start,e.end),n=t.dx,r=t.dy,o=i*n,a=i*r;return"translate("+o+", "+a+")"});o.append("line"),o.append("text"),o.append("path").attr("class","start"),o.append("path").attr("class","end");var a=e.merge(o);a.select("text").attr("x",function(e){return(1-r)*t(e.start.x)+r*t(e.end.x)}).attr("y",function(e){return(1-r)*n(e.start.y)+r*n(e.end.y)}).attr("dominant-baseline","text-before-edge").attrs(function(e){var t=(0,j.unitPerpVector)(e.start,e.end),n=t.dx,i=t.dy,r=4;return{dx:n*r,dy:i*r}}).text(function(e){var t=(0,j.distanceBetweenPoints)(e.start,e.end),n=Math.round(100*t)/100;return""+n}),a.select("line").attrs(function(e){var i=(0,j.unitVector)(e.start,e.end),r=i.dx,o=i.dy,a=11.5,s=r*a,d=o*a;return{x1:t(e.start.x)+s,y1:n(e.start.y)-d,x2:t(e.end.x)-s,y2:n(e.end.y)+d}});var s="M -6,-2 V 2 L0,0 Z",d=function(e){var t=180*(0,j.edgeDirection)(e)/Math.PI,n=e.start.x===e.end.x?e.start.y>e.end.y?0:180:e.start.x>e.end.x?0:180;return n-t};a.select("path.start").attr("transform",function(e){return"translate("+t(e.start.x)+", "+n(e.start.y)+") scale(2) rotate("+d(e)+")"}).attr("d",s),a.select("path.end").attr("transform",function(e){return"translate("+t(e.end.x)+", "+n(e.end.y)+") scale(2) rotate("+(180+d(e))+")"}).attr("d",s)}var t=T.default.identity,n=T.default.identity,i=20,r=1;return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e.lineOffset=function(t){return arguments.length?(i=t,e):i},e.labelPosition=function(t){return arguments.length?((t<0||t>1)&&console.warn("Expected labelPosition to be in [0, 1] (got "+t+")"),r=t,e):r},e}function f(){function e(e){i.xScale(t).yScale(n),e.exit().remove(),e.merge(e.enter().append("g").classed("window-guideline component-guideline",!0)).selectAll(".distance-measure").data(e.merge(e.enter()).data().map(function(e){return{start:e.edge_start,end:e.center}})).filter(function(e){return"Single Window"===e.window_definition_mode}).call(i)}var t=T.default.identity,n=T.default.identity,i=u();return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e}function p(){function e(e){e.exit().remove();var i=e.enter().append("g").attr("class","daylighting-control");i.append("circle").attr("class","bg"),i.append("path").attr("class","quadrants");var r=e.merge(i);r.classed("selected",function(e){return e.selected}),r.classed("facing-selection",function(e){return e.facingSelection}),r.select("circle.bg").attr("cx",function(e){return t(e.x)}).attr("cy",function(e){return n(e.y)}).attr("r",10),r.select("path.quadrants").attr("d",function(e){var i=t(e.x),r=n(e.y),o=10;return"M"+i+" "+r+" L"+(i+o)+" "+r+" A "+o+" "+o+" 0 0 1 "+i+" "+(r+o)+" L "+i+" "+(r-o)+" A "+o+" "+o+" 0 0 0 "+(i-o)+" "+r+" Z"}),r.each(function(e){(e.selected||e.facingSelection)&&M.select(this).raise()})}var t=T.default.identity,n=T.default.identity;return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e}function h(){function e(e){i.xScale(t).yScale(n),e.exit().remove();var r=e.enter().append("g").classed("daylighting-control-guideline component-guideline",!0),o=T.default.flatMap(e.merge(e.enter()).data(),function(e){var t=(0,j.unitVector)(e.nearestEdge.v1,e.nearestEdge.v2),n={start:e.loc,end:e.nearestEdge.proj},i=(n.end.x-n.start.x)*t.dx+(n.end.y-n.start.y)*t.dy,r={start:n.start,end:{x:n.start.x+i*t.dx,y:n.start.y+i*t.dy}},o={start:r.end,end:n.end};return[n,o,r].filter(function(e){var t=e.start,n=e.end;return(0,j.distanceBetweenPoints)(t,n)>.01})}),a=e.merge(r);a.selectAll(".distance-measure").data(o).call(i)}var t=T.default.identity,n=T.default.identity,i=u().lineOffset(0).labelPosition(.5);return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e}function m(e,t,n){var i=Math.sqrt(e*e+t*t),r=e/i,o=t/i,a=Math.PI*n/180,s={x:r*Math.cos(a)-o*Math.sin(a),y:r*Math.sin(a)+o*Math.cos(a)};return T.default.minBy(P,function(e){return(0,j.distanceBetweenPoints)(e.vec,s)}).cursor}function g(){function e(e){var o=(t(100)-t(0))/100,a=void 0,s=void 0,d=void 0,c=void 0,l=function(e){var t=d-a,n=c-s,i=-1*e.r*Math.PI/180;return{dx:t*Math.cos(i)-n*Math.sin(i),dy:t*Math.sin(i)+n*Math.cos(i)}},u=M.drag().on("start",function(){M.event.sourceEvent.stopPropagation();var e=M.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=c=void 0}).on("drag",function(e){var t=M.mouse(document.querySelector("#grid svg")),n=(0,w.default)(t,2);d=n[0],c=n[1];var i=l(e),r=i.dx,o=i.dy;M.select(this).attr("transform","translate("+r+", "+o+")")}).on("end",function(e){if("undefined"!=typeof d){var t=l(e);t.dx,t.dy;i({image:e,x:e.x+(d-a)/o,y:e.y-(c-s)/o})}}),f=function(e){var i={x:t(e.x),y:n(e.y)},r={x:i.x+(i.x-a),y:i.y+(i.y-s)},o={x:a-r.x,y:s-r.y},l=(0,j.distanceBetweenPoints)({x:d,y:c},r),u=(0,j.distanceBetweenPoints)({x:a,y:s},r),f={x:l*o.x/u,y:l*o.y/u},p=l/u,h={x:(f.x-o.x)/2,y:(f.y-o.y)/2},m=M.zoomIdentity.translate(h.x,h.y).scale(p);return m},p=M.drag().on("start",function(){M.event.sourceEvent.stopPropagation();var e=M.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=c=void 0}).on("drag",function(e){var t=M.mouse(document.querySelector("#grid svg")),n=(0,w.default)(t,2);d=n[0],c=n[1],M.select(this.parentNode.parentNode).attr("transform",f(e))}).on("end",function(e){if("undefined"!=typeof d){var t=f(e);i({image:e,width:e.width*t.k,height:e.height*t.k,x:e.x+t.x/o,y:e.y-t.y/o})}}),h=function(e){var i={x:t(e.x),y:n(e.y)},r=(0,j.edgeDirection)({start:i,end:{x:a,y:s}}),o=(0,j.edgeDirection)({start:i,end:{x:d,y:c}});return 180*(o-r)/Math.PI+180*(t(e.x)>d!=t(e.x)>a)},g=M.drag().on("start",function(){M.event.sourceEvent.stopPropagation();var e=M.mouse(document.querySelector("#grid svg")),t=(0,w.default)(e,2);a=t[0],s=t[1],d=c=void 0}).on("drag",function(e){var t=M.mouse(document.querySelector("#grid svg")),n=(0,w.default)(t,2);d=n[0],c=n[1],M.select(this.parentNode.parentNode).attr("transform","rotate("+h(e)+")")}).on("end",function(e){if("undefined"!=typeof d){var t=h(e);i({image:e,r:t+e.r})}});e.exit().remove();var v=e.enter().append("g").attr("class","image-group"),y=v.append("g").attr("class","moveable-wrapper");y.append("image");var _=y.append("g").attr("class","controls");_.append("line").attr("class","rotation-to-center"),_.append("circle").attr("class","rotation-handle"),["tl","tr","bl","br"].forEach(function(e){return _.append("circle").attr("class","corner "+e)});var x=e.merge(v);x.attr("transform",function(e){return"translate("+t(e.x)+", "+n(e.y)+") rotate("+e.r+")"}),x.select("image").attr("x",function(e){return-1*o*e.width/2}).attr("y",function(e){return-1*o*e.height/2}).attr("width",function(e){return o*e.width}).attr("height",function(e){return o*e.height}).attr("opacity",function(e){return e.opacity}).attr("xlink:href",function(e){return e.src}),x.select(".moveable-wrapper").attr("transform","translate(0,0)").style("cursor",function(e){return e.current?"move":e.clickable?"pointer":null}).style("pointer-events",function(e){return e.current?"auto":"none"}),x.select(".controls").attr("display",function(e){return e.current?"":"none"}),x.each(function(e){var t=M.select(this);e.clickable?t.on("click",function(e){M.event.stopPropagation(),r(e)}):t.on("click",null),e.current?(t.select(".moveable-wrapper").call(u),t.select(".controls .center").attr("cx",0).attr("cy",0).attr("r",3),t.select(".controls .rotation-handle").attr("cx",0).attr("cy",o*e.height*.7).attr("r",5).style("cursor",z).call(g),t.select(".controls .rotation-to-center").attr("x1",0).attr("y1",o*e.height/2).attr("x2",0).attr("y2",o*e.height*.7-5),T.default.forIn({tl:[-1,-1],tr:[1,-1],bl:[-1,1],br:[1,1]},function(n,i){var r=(0,w.default)(n,2),a=r[0],s=r[1];t.select(".controls ."+i).attr("cx",a*o*e.width/2).attr("cy",s*o*e.height/2).attr("r",5).style("cursor",m(a,s,e.r)).call(p)})):t.select(".moveable-wrapper, .rotation-handle, .corner").on(".drag",null)})}var t=T.default.identity,n=T.default.identity,i=T.default.identity,r=T.default.identity;return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e.updateImage=function(t){return arguments.length?(i=t,e):i},e.selectImage=function(t){return arguments.length?(r=t,e):r},e}function v(){function e(e){e.exit().remove();var t=e.enter().append("path").attr("class","wall"),n=e.merge(t);n.attr("d",function(e){return i([e.start,e.end])}).attr("class",function(e){return"wall "+(e.interior?"interior":"exterior")}).attr("data-edge-id",function(e){return e.id})}var t=T.default.identity,n=T.default.identity,i=M.line().x(function(e){return t(e.x)}).y(function(e){return n(e.y)});return e.xScale=function(n){return arguments.length?(t=n,e):t},e.yScale=function(t){return arguments.length?(n=t,e):n},e}function y(e){var t=e.xScale,n=e.yScale,i=e.updateImage,r=e.selectImage;return{drawWindow:l().xScale(t).yScale(n),drawWindowGuideline:f().xScale(t).yScale(n),drawDaylightingControl:p().xScale(t).yScale(n),drawDaylightingControlGuideline:h().xScale(t).yScale(n),
drawImage:g().xScale(t).yScale(n).updateImage(i).selectImage(r),drawWall:v().xScale(t).yScale(n)}}Object.defineProperty(t,"__esModule",{value:!0});var _=n(53),w=r(_),x=n(7),b=r(x);t.drawWindow=l,t.drawWindowGuideline=f,t.drawDaylightingControl=p,t.drawDaylightingControlGuideline=h,t.drawImage=g,t.drawWall=v,t.default=y;var S=n(79),M=i(S);n(599);var C=n(3),T=r(C),j=n(15),I=1/Math.sqrt(2),P=[{vec:{x:1,y:0},cursor:"ew-resize"},{vec:{x:-1,y:0},cursor:"ew-resize"},{vec:{x:0,y:1},cursor:"ns-resize"},{vec:{x:0,y:-1},cursor:"ns-resize"},{vec:{x:I,y:I},cursor:"nwse-resize"},{vec:{x:-1*I,y:-1*I},cursor:"nwse-resize"},{vec:{x:I,y:-1*I},cursor:"nesw-resize"},{vec:{x:-1*I,y:I},cursor:"nesw-resize"}],z="url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="25.6" height="25.6" viewBox="0 0 25.6 25.6">  <path transform="scale(0.5)" d="M25.6,44.8c7.9406,0,14.4-6.4594,14.4-14.4s-6.4594-14.4-14.4-14.4v9.6L9.6,12.8L25.6,0v9.6c11.4688,0,20.8,9.3313,20.8,20.8s-9.3313,20.8-20.8,20.8S4.8,41.8688,4.8,30.4h6.4C11.2,38.3406,17.6594,44.8,25.6,44.8z"/></svg>')+") 12.8 12.8, pointer"},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return b.default.range(Math.ceil(e/n)*n,t,n)}function a(e,t){return new y.zoomIdentity.constructor(t.k/e.k,(t.x/t.k-e.x/e.k)*t.k,(t.y/t.k-e.y/e.k)*t.k)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(42),d=r(s),c=n(53),l=r(c),u=n(34),f=r(u),p=n(7),h=r(p),m=n(71),g=r(m),v=n(79),y=i(v),_=n(630),w=r(_),x=n(3),b=r(x),S=n(122),M=n(15),C=r(M),T=n(46),j=r(T);t.default={gridClicked:function(){"Eraser"!==this.currentTool&&("Rectangle"!==this.currentTool&&"Polygon"!==this.currentTool||!this.currentSpace&&!this.currentShading)||this.addPoint(),"Place Component"===this.currentTool&&this.placeOrSelectComponent(),"Image"===this.currentTool&&this.deselectImages(),"Apply Property"===this.currentTool&&this.assignProperty()},assignProperty:function(){var e=this;if(this.currentSpaceProperty){var t=y.mouse(this.$refs.grid),n={x:t[0],y:t[1]},i=this.gridPointToRWU(n),r=this.currentStory.spaces.find(function(t){var n=b.default.find(e.denormalizedGeometry.faces,{id:t.face_id});return!!n&&C.default.pointInFace(i,n.vertices)});r&&this.$store.dispatch("models/updateSpaceWithData",(0,g.default)({space:r},this.spacePropertyKey,this.currentSpaceProperty.id))}},deselectImages:function(){this.$store.dispatch("application/setCurrentSubSelectionId",this.currentStory.spaces[0])},componentToSelect:function(){var e=y.mouse(this.$refs.grid),t={x:e[0],y:e[1]},n=this.gridPointToRWU(t),i=b.default.minBy(this.currentComponentTypeLocs(n),function(e){return(0,M.distanceBetweenPoints)(e,n)}),r=i&&(0,M.distanceBetweenPoints)(i,n);return!i||r>this.spacing/2?null:i},handleKeyDown:function(e){8!==e.keyCode&&46!==e.keyCode||b.default.includes(["input","textarea"],document.activeElement.tagName.toLowerCase())||this.deleteElement()},deleteElement:function(){"components"===this.modeTab&&this.removeSelectedComponent()},removeSelectedComponent:function(){var e=this.currentComponentInstance;if(e){var t={story_id:this.currentStory.id,object:{id:e.id}};"windows"===e.type?this.$store.dispatch("models/destroyWindow",t):"daylighting_controls"===e.type?this.$store.dispatch("models/destroyDaylightingControl",t):"doors"===e.type?this.$store.dispatch("models/destroyDoor",t):console.error("unrecognized component to remove: "+e)}},placeOrSelectComponent:function(){var e=!y.event.shiftKey&&this.componentToSelect();if(e)return void(this.currentComponentInstanceId=e.id);if("daylighting_control_definitions"===this.currentComponentType)this.placeDaylightingControl();else{if("window_definitions"!==this.currentComponentType&&"door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.placeWindowOrDoor()}},highlightComponentToSelect:function(){if(y.event.shiftKey)return null;var e=this.componentToSelect();if(this.componentFacingSelection=e&&e.id,e)if("windows"===e.type||"doors"===e.type)this.highlightWindowGuideline(e);else{if("daylighting_controls"!==e.type)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDaylightingControlGuideline(e)}else;return e},placeWindowOrDoor:function(){var e,t=y.mouse(this.$refs.grid),n={x:t[0],y:t[1]},i=this.gridPointToRWU(n),r=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,i,this.currentComponentDefinition,2*this.spacing,this.spacing),o="window_definitions"===this.currentComponentType?"Window":"Door";if(r){var a=(e={story_id:this.currentStory.id,edge_id:r.edge_id},(0,g.default)(e,o.toLowerCase()+"_definition_id",this.currentComponentDefinition.id),(0,g.default)(e,"alpha",r.alpha),e);this.$store.dispatch("models/create"+o,a)}},raiseOrLowerImages:function(){"Image"===this.currentTool?y.select("#grid svg .images").raise():y.select("#grid svg .images").lower()},placeDaylightingControl:function(){var e=y.mouse(this.$refs.grid),t={x:e[0],y:e[1]},n={x:this.gridToRWU(t.x,"x"),y:this.gridToRWU(t.y,"y")},i=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,n,this.spacing);if(i){var r=(0,h.default)({story_id:this.currentStory.id,face_id:i.face_id,daylighting_control_definition_id:this.currentComponentDefinition.id},i);this.$store.dispatch("models/createDaylightingControl",r)}},addPoint:function(){var e=y.mouse(this.$refs.grid),t={x:e[0],y:e[1]},n=this.findSnapTarget(t);if("vertex"===n.type&&n.origin&&"Polygon"===this.currentTool)return void this.savePolygonFace();var i="edge"===n.type?n.projection:n;this.points.push(i),this.drawPoints(),"Eraser"===this.currentTool&&2===this.points.length&&this.eraseRectangularSelection(),"Rectangle"===this.currentTool&&2===this.points.length&&this.saveRectangularFace()},highlightSnapTarget:function(e){if("Eraser"===this.currentTool||"Place Component"===this.currentTool&&this.currentComponentDefinition||("Rectangle"===this.currentTool||"Polygon"===this.currentTool)&&(this.currentSpace||this.currentShading)){this.clearHighlights();var t=void 0;if(y.event instanceof MouseEvent){var n=y.mouse(this.$refs.grid);t={x:n[0],y:n[1]}}else t=this.lastMousePosition;if(t){if("Place Component"===this.currentTool)return void this.highlightComponentToPlaceOrSelect(t);var i=this.findSnapTarget(t),r="edge"===i.type?i.projection:i,o=i.synthetic?i.originalPt:r;this.drawGuideLines(e,r),"vertex"===i.type?y.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",5).attr("ry",5).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"):y.select("#grid svg").append("ellipse").attr("cx",this.rwuToGrid(o.x,"x")).attr("cy",this.rwuToGrid(o.y,"y")).attr("rx",3).attr("ry",3).classed("gridpoint",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),"edge"===i.type&&"Eraser"!==this.currentTool&&y.select("#grid svg").append("line").attr("x1",this.rwuToGrid(i.v1GridCoords.x,"x")).attr("y1",this.rwuToGrid(i.v1GridCoords.y,"y")).attr("x2",this.rwuToGrid(i.v2GridCoords.x,"x")).attr("y2",this.rwuToGrid(i.v2GridCoords.y,"y")).attr("stroke-width",1).classed("highlight",!0).attr("data-transform-plz","").attr("vector-effect","non-scaling-stroke"),this.lastMousePosition=t}}},clearHighlights:function(){y.selectAll("#grid .highlight, #grid .gridpoint, #grid .guideline").remove(),this.componentFacingSelection=null},clearComponentHighlights:function(){y.selectAll("#grid .highlight, #grid .component-guideline").remove(),this.componentFacingSelection=null},highlightComponentToPlaceOrSelect:function(e){this.highlightComponentToSelect()||this.highlightComponentToPlace(e)},highlightComponentToPlace:function(e){if("window_definitions"===this.currentComponentType)this.highlightWindow(e);else if("daylighting_control_definitions"===this.currentComponentType)this.highlightDaylightingControl(e);else{if("door_definitions"!==this.currentComponentType)throw new Error("unrecognized componentType: "+this.currentComponentType);this.highlightDoor(e)}},highlightWindow:function(e){var t=this.gridPointToRWU(e),n=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,t,this.currentComponentDefinition,2*this.spacing,this.spacing);n&&("Single Window"!==this.currentComponentDefinition.window_definition_mode&&b.default.filter(this.windowCenterLocs(t),{edge_id:n.edge_id}).filter(function(e){return"Single Window"!==e.window_definition_mode}).length||(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,h.default)({},n,{window_definition_mode:this.currentComponentDefinition.window_definition_mode,width:this.currentComponentDefinition.width,spacing:this.currentComponentDefinition.window_spacing,texture:this.currentComponentDefinition.texture})]).call(this.drawWindow),this.highlightWindowGuideline(n)))},highlightDoor:function(e){var t=this.gridPointToRWU(e),n=(0,S.snapWindowToEdge)(this.snapMode,this.spaceEdges,t,this.currentComponentDefinition,2*this.spacing,this.spacing);n&&(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".window").data([(0,h.default)({},n,{window_definition_mode:null,windowOrDoor:"door",width:this.currentComponentDefinition.width,texture:this.currentComponentDefinition.texture})]).call(this.drawWindow),this.highlightWindowGuideline(n))},highlightWindowGuideline:function(e){y.select("#grid svg").append("g").classed("guideline",!0).selectAll(".window-guideline").data([e]).call(this.drawWindowGuideline)},highlightDaylightingControl:function(e){var t=this.gridPointToRWU(e),n=(0,S.snapToVertexWithinFace)(this.snapMode,this.spaceFaces,t,this.spacing);n&&(y.select("#grid svg").append("g").classed("highlight",!0).selectAll(".daylighting-control").data([n]).call(this.drawDaylightingControl),this.highlightDaylightingControlGuideline(n))},highlightDaylightingControlGuideline:function(e){var t=b.default.find(this.denormalizedGeometry.faces,{id:e.face_id}),n=this.windowsOnFace(t),i=(0,S.findClosestWindow)(n,e)||(0,S.findClosestEdge)(t.edges,e);y.select("#grid svg").append("g").classed("guideline",!0).selectAll(".daylighting-control-guideline").data([{loc:e,nearestEdge:i}]).call(this.drawDaylightingControlGuideline)},drawGuideLines:function(e,t){var n=this;if(this.points.length){this.eraseGuidelines();var i=void 0,r=void 0;"Polygon"===this.currentTool?(i=[t,this.points[this.points.length-1]],r=[i]):"Rectangle"!==this.currentTool&&"Eraser"!==this.currentTool||(i=[this.points[0],{x:t.x,y:this.points[0].y},t,{x:this.points[0].x,y:t.y},this.points[0]],r=[[i[0],i[1]],[i[1],i[2]]]);var o="Polygon"===this.currentTool?[].concat((0,f.default)(this.points),[t,this.points[0]]):i,a=[o,this.points],s=y.select("#grid svg");if(s.selectAll(".guideline-line").append("path").datum(i).attr("fill","none").classed("guideline guideline-line",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",y.line().x(function(e){return n.rwuToGrid(e.x,"x")}).y(function(e){return n.rwuToGrid(e.y,"y")})).lower(),s.selectAll(".guideline-area").data(a).enter().append("polygon").attr("points",function(e){return e.map(function(e){return[n.rwuToGrid(e.x,"x"),n.rwuToGrid(e.y,"y")].join(",")}).join(" ")}).classed("guideline guideline-area guideLine",!0).attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("fill",function(){return"Eraser"===n.currentTool?"none":n.currentSpace?n.currentSpace.color:n.currentShading?n.currentShading.color:null}),"Eraser"!==this.currentTool){if(s.selectAll(".guideline-text").data(r).enter().append("text").attr("x",function(e){return n.rwuToGrid(e[0].x,"x")+(n.rwuToGrid(e[1].x,"x")-n.rwuToGrid(e[0].x,"x"))/2}).attr("y",function(e){return n.rwuToGrid(e[0].y,"y")+(n.rwuToGrid(e[1].y,"y")-n.rwuToGrid(e[0].y,"y"))/2}).attr("dx",-1.25*(this.transform.k>1?1:this.transform.k)+"em").attr("data-transform-plz","").text(function(e){var t=n.distanceBetweenPoints(e[0],e[1]);return t?t.toFixed(2):""}).classed("guideline guideline-text guideline-dist",!0).attr("font-family","sans-serif").attr("fill","red").style("font-size","1em"),o.length>3){var d=o.map(function(e){var t=e.x,n=e.y;return{x:t,y:n,X:t,Y:n}}),c=this.polygonLabelPosition(d),l=c.x,u=c.y,p=c.area,h=p?p.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"",m=h+" "+("ip"===this.units?"ft":"m")+"²";if(null===l||null===u)return;s.append("text").attr("x",this.rwuToGrid(l,"x")).attr("y",this.rwuToGrid(u,"y")).text(m).classed("guideline guideline-text guideline-area-text guideLine",!0).attr("data-transform-plz","").attr("text-anchor","middle").attr("font-family","sans-serif").attr("fill","red").style("font-size","1em").raise()}y.selectAll(".vertical, .horizontal").lower()}}},eraseGuidelines:function(){y.selectAll("#grid .guideline").remove()},escapeAction:function(e){"Escape"!==e.code&&27!==e.which||(this.points=[],this.clearHighlights(),y.selectAll("#grid .point-path").remove())},savePolygonFace:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var e={points:[].concat((0,f.default)(this.points))};this.currentSpace?e.model_id=this.currentSpace.id:this.currentShading&&(e.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",e),this.points=[]},saveRectangularFace:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var e={};e.points=[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}],this.currentSpace?e.model_id=this.currentSpace.id:this.currentShading&&(e.model_id=this.currentShading.id),this.$store.dispatch("geometry/createFaceFromPoints",e),this.points=[]},eraseRectangularSelection:function(){this.clearHighlights(),y.selectAll("#grid .point-path").remove();var e={points:[this.points[0],{x:this.points[1].x,y:this.points[0].y},this.points[1],{x:this.points[0].x,y:this.points[1].y}]};this.$store.dispatch("geometry/eraseSelection",e),this.points=[]},drawPoints:function(){var e=this;y.selectAll("#grid .point-path").remove();var t=y.select("#grid svg").selectAll("ellipse.point-path").data(this.points);t.merge(t.enter().append("ellipse").attr("class","point-path")).classed("origin",function(e,t){return 0===t}).attr("data-transform-plz","").attr("cx",function(t){return e.rwuToGrid(t.x,"x")}).attr("cy",function(t){return e.rwuToGrid(t.y,"y")}).attr("rx",function(e,t){return 0===t?7:2}).attr("ry",function(e,t){return 0===t?7:2}).attr("vector-effect","non-scaling-stroke").attr("fill",function(e,t){return 0===t?"none":""}),y.select("#grid svg").append("path").attr("class","point-path").datum(this.points).attr("fill","none").attr("vector-effect","non-scaling-stroke").attr("data-transform-plz","").attr("d",y.line().x(function(t){return e.rwuToGrid(t.x,"x")}).y(function(t){return e.rwuToGrid(t.y,"y")})).lower(),y.selectAll(".vertical, .horizontal").lower()},registerDrag:function(){var e=y.select("#grid svg").selectAll("polygon");this.deregisterD3Events(e),"Select"===this.currentTool?this.registerSelectEvents(e):"Fill"===this.currentTool&&this.registerFillEvents(e)},deregisterD3Events:function(e){e.on(".drag",null).on("click",null)},registerFillEvents:function(e){var t=this;e.on("click",function(e){(t.currentSpace||t.currentShading)&&(t.points=[].concat((0,f.default)(e.points)),t.savePolygonFace())})},registerSelectEvents:function(e){var t=this,n=void 0,i=void 0,r=y.drag().on("start",function(e){var r=y.mouse(t.$refs.grid),o=(0,l.default)(r,2);n=o[0],i=o[1],e.previous_story||(t.currentSubSelection=j.default.modelForFace(t.$store.state.models,e.face_id))}).on("drag",function(e){if(!e.previous_story){var r=y.mouse(t.$refs.grid),o=(0,l.default)(r,2),a=o[0],s=o[1];y.select("#poly-"+e.face_id).attr("transform",function(){return"translate("+(a-n)+", "+(s-i)+")"})}}).on("end",function(e){if(!e.previous_story){var r=y.mouse(t.$refs.grid),o=(0,l.default)(r,2),a=o[0],s=o[1];t.$store.dispatch("geometry/moveFaceByOffset",{face_id:e.face_id,dx:t.gridToRWU(a,"x")-t.gridToRWU(n,"x"),dy:t.gridToRWU(s,"y")-t.gridToRWU(i,"y")})}});e.call(r)},drawPolygons:function(){var e=this;this.recalcScales();var t=y.select("#grid svg .polygons").selectAll("g.poly").data(this.polygons,function(e){return e.face_id});t.exit().remove();var n=t.enter().append("g").attr("class","poly");n.append("polygon"),n.append("text").attr("class","polygon-text"),n.append("g").attr("class","windows"),n.append("g").attr("class","doors"),n.append("g").attr("class","daylighting-controls"),t=n.merge(t).classed("current",function(e){return e.current}).classed("previousStory",function(e){return e.previous_story}).classed("poly",!0).attr("data-model-type",function(e){return e.modelType}).attr("id",function(e){return"poly-"+e.face_id}).attr("transform",null),t.select("polygon").attr("id",function(e){return"face-"+e.face_id}).attr("points",function(t){return t.points.map(function(t){return[e.rwuToGrid(t.x,"x"),e.rwuToGrid(t.y,"y")].join(",")}).join(" ")}).attr("fill",function(e){return e.color}).attr("vector-effect","non-scaling-stroke"),t.select("text").attr("id",function(e){return"text-"+e.face_id}).attr("x",function(t){return e.rwuToGrid(t.labelPosition.x,"x")}).attr("y",function(t){return e.rwuToGrid(t.labelPosition.y,"y")}).text(function(e){return e.name}).attr("text-anchor","middle").style("font-size","14px").style("font-weight","bold").attr("font-family","sans-serif").attr("fill","red").classed("polygon-text",!0),t.select(".windows").selectAll(".window").data(function(e){return e.windows}).call(this.drawWindow),t.select(".doors").selectAll(".window").data(function(e){return e.doors}).call(this.drawWindow),t.select(".daylighting-controls").selectAll(".daylighting-control").data(function(e){return e.daylighting_controls}).call(this.drawDaylightingControl),this.registerDrag(),t.order()},drawWalls:function(){y.select("#grid svg .walls").selectAll(".wall").data(this.walls,function(e){return e.id}).call(this.drawWall)},drawImages:function(){y.select("#grid svg .images").selectAll(".image-group").data(this.images,function(e){return e.id}).call(this.drawImage)},draw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.zoomEnd;this.transformAtLastRender=(0,h.default)({},this.transform),y.selectAll("[data-transform-plz]").attr("transform",""),this.drawPolygons(),this.drawWalls(),this.drawImages(),this.raiseOrLowerImages();var n=t&&this.points.length>0;n&&(this.highlightSnapTarget(),this.drawPoints())},findSnapTarget:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.edge_component,r={x:this.gridToRWU(e.x,"x"),y:this.gridToRWU(e.y,"y")};if("grid-strict"===this.snapMode)return this.strictSnapTargets(r)[0];if("grid-verts-edges"===this.snapMode){var o=this.gridPointToRWU(e),a=[].concat((0,f.default)((0,S.vertexSnapTargets)(this.currentStoryGeometry.vertices,this.spacing,o)),(0,f.default)(this.snappingEdgeData(o)),(0,f.default)((0,S.gridSnapTargets)(this.spacing,o)),(0,f.default)(this.polygonOriginPoint())).map(function(e){var t="edge"===e.type?1.4:1;return(0,h.default)({},e,{dist:t*(0,M.distanceBetweenPoints)(e,o),dx:o.x-e.x,dy:o.y-e.y})}),s=b.default.orderBy(a,["dist","origin","type"],["asc","asc","desc"]);return s[0]||(0,h.default)({type:"gridpoint"},o)}if(i){var d=this.snappingEdgeData(r);return d[0]||(0,h.default)({type:"gridpoint"},r)}var c=this.snappingVertexData(r);if(c)return c;var l=this.snappingEdgeData(r);if(l.length>0)return l[0];if(this.gridVisible){var u=this.rwuToGrid(this.spacing+this.min_x,"x"),p=this.rwuToGrid(this.max_y-this.spacing,"y"),m={type:"gridpoint",x:this.round(e.x,u)-.5,y:this.round(e.y,p)-.5};return m.x=Math.abs(e.x-(m.x-u))>Math.abs(e.x-m.x)?m.x:m.x-u,m.y=Math.abs(e.y-(m.y-p))>Math.abs(e.y-m.y)?m.y:m.y-p,m}if(this.points.length){var g,v=[-180,-90,0,90,180],y=this.points[this.points.length-1],_=Math.atan2(y.y-e.y,y.x-e.x)*(180/Math.PI);if(v.some(function(n){if(Math.abs(_-n)<t.$store.getters["project/angleTolerance"]){if(n===-180||0===n||180===n)return{x:e.x,y:t.rotatePoint(y,e,n-_).y};if(n===-90||90===n)return{x:t.rotatePoint(y,e,n-_).x,y:e.y}}}),g)return(0,h.default)({type:"gridpoint"},g)}return(0,h.default)({type:"gridpoint"},e)},polygonOriginPoint:function(){return this.points.length>=3&&"Polygon"===this.currentTool?[(0,h.default)({},this.points[0],{origin:!0,type:"vertex"})]:[]},strictSnapTargets:function(e){var t=[].concat((0,f.default)(this.currentStoryGeometry.vertices),(0,f.default)(this.previousStoryGeometry?this.previousStoryGeometry.vertices:[]),(0,f.default)(this.polygonOriginPoint()));return(0,S.snapTargets)(t,this.spacing,e)},snappingVertexData:function(e){var t=this,n=[].concat((0,f.default)(this.currentStoryGeometry.vertices));if(this.previousStoryGeometry&&(n=n.concat(JSON.parse((0,d.default)(this.previousStoryGeometry.vertices)))),this.points.length>=3&&"Polygon"===this.currentTool&&n.push((0,h.default)({},this.points[0],{origin:!0})),1===this.points.length&&"Rectangle"===this.currentTool&&(n=n.concat(C.default.syntheticRectangleSnaps(n,this.points[0],e))),!n.length)return null;var i=n.reduce(function(n,i){var r=t.distanceBetweenPoints(n,e),o=t.distanceBetweenPoints(i,e);return r<o?n:i});return this.distanceBetweenPoints(i,e)<this.$store.getters["project/snapTolerance"]?(0,h.default)({},i,{type:"vertex"}):void 0},snappingEdgeData:function(e){var t=this,n=[].concat((0,f.default)(this.currentStoryGeometry.edges));if(this.previousStoryGeometry&&(n=n.concat(this.previousStoryGeometry.edges.map(function(e){return(0,h.default)({},e,{previous_story:!0})}))),0===n.length)return[];var i=b.default.map(n,function(n){var i=n.previous_story?t.previousStoryGeometry:t.currentStoryGeometry,r=C.default.vertexForId(n.v1,i),o=C.default.vertexForId(n.v2,i),a=(0,M.projectionOfPointToLine)(e,{p1:r,p2:o}),s=(0,M.distanceBetweenPoints)(a,e);return(0,h.default)({},n,{projection:a,dist:s,v1Coords:r,V2Coords:o})}),r=b.default.minBy(i,"dist");return r.dist<this.$store.getters["project/snapTolerance"]?[{snappingEdge:r,dist:r.dist,type:"edge",projection:r.projection,v1GridCoords:r.v1Coords,v2GridCoords:r.V2Coords,x:r.projection.x,y:r.projection.y}]:[]},distanceBetweenPoints:function(e,t){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(n*n+i*i)},round:function(e,t){var n,i=e<0?-1:1;return e=Math.abs(e),n=e%t<t/2?e-e%t:e+t-e%t,n*=i},rotatePoint:function(e,t,n){var i=n*Math.PI/180,r=Math.cos(i),o=Math.sin(i),a=t.x-e.x,s=t.y-e.y;return{x:r*a-o*s+e.x,y:o*a+r*s+e.y}},resolveBounds:function(){var e=[this.min_x,this.max_x],t=[this.min_y,this.max_y],n=function(e){var t=(0,l.default)(e,2),n=t[0],i=t[1],r=(i-n)/20;return[n-r,i+r]};this.visibleVerts.length&&(e=n(y.extent(this.allVertices,function(e){return e.x})),t=n(y.extent(this.allVertices,function(e){return e.y})));var i=this.$refs.gridParent.clientWidth,r=this.$refs.gridParent.clientHeight,o=(0,M.fitToAspectRatio)(e,t,i/r,"expand"),a=o.xExtent,s=o.yExtent;this.dimensions={min_x:a[0],max_x:a[1],min_y:s[0],max_y:s[1]},b.default.defer(function(){window.eventBus.$emit("boundsResolved")})},nullTransform:function(){y.select(this.$refs.grid).call(this.zoomBehavior.transform,y.zoomIdentity)},renderGrid:function(){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight;this.resolveBounds(),this.$store.dispatch("application/setScaleX",{scaleX:{pixels:e,rwuRange:[this.min_x,this.max_x]}}),this.$store.dispatch("application/setScaleY",{scaleY:{pixels:t,rwuRange:[this.min_y,this.max_y]}}),this.calcGrid(),this.nullTransform(),this.draw()},reloadGridAndScales:function(){this.zoomXScale=null,this.zoomYScale=null,this.resolveBounds(),this.renderGrid()},recalcScales:function(){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight;this.xScale=y.scaleLinear().domain([this.min_x,this.max_x]).range([0,e]),this.yScale=y.scaleLinear().domain([this.min_y,this.max_y]).range([t,0]),this.zoomXScale=this.zoomXScale||this.xScale.copy(),this.zoomYScale=this.zoomYScale||this.yScale.copy()},calcGrid:function(){var e=this;this.recalcScales();var t=this.$refs.gridParent.clientWidth,n=this.$refs.gridParent.clientHeight,i=y.select("#grid svg"),r=1,o="14px";i.attr("height",n).attr("width",t),this.axis.x=i.selectAll("g.axis--x").data([void 0]),this.axis.x=this.axis.x.merge(this.axis.x.enter().append("g").attr("class","axis axis--x")).attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.axis.y=i.selectAll("g.axis--y").data([void 0]),this.axis.y=this.axis.y.merge(this.axis.y.enter().append("g").attr("class","axis axis--y")).attr("class","axis axis--y").attr("stroke-width",r).style("font-size",o).style("display",this.gridVisible?"inline":"none"),this.updateGrid(),this.zoomBehavior=y.zoom().scaleExtent([0,1/0]).on("zoom",function(){var t=y.event.transform;e.transform=(0,h.default)({},t);var n=t.rescaleX(e.zoomXScale),i=t.rescaleY(e.zoomYScale),r=n.domain(),o=i.domain();e.dimensions={min_x:r[0],max_x:r[1],min_y:o[0],max_y:o[1]},e.axis_generator.x.scale(n),e.axis_generator.y.scale(i),e.updateGrid(),e.padTickY(-12),e.translateEntities(),e.clearComponentHighlights()}).on("end",function(){e._lastTransform!==y.event.transform&&(e._lastTransform=y.event.transform,e.draw({zoomEnd:!0}))}),i.call(this.zoomBehavior),i.on("mousemove",this.handleMouseMove).on("click",this.gridClicked)},transformTo:function(e){y.select(this.$refs.grid).call(this.zoomBehavior.transform,e)},zoomBy:function(e){var t=this.transform.k*e;y.select(this.$refs.grid).transition().duration(400).call(this.zoomBehavior.transform,y.zoomIdentity.scale(t))},zoomToFit:function(){var e,t=this,n=this.$refs.grid.clientWidth,i=this.$refs.grid.clientHeight;if(this.allVertices.length){var r=y.extent(this.allVertices,function(e){return t.zoomXScale(e.x)}),o=y.extent(this.allVertices,function(e){return t.zoomYScale(e.y)}),a=r[1]-r[0],s=o[1]-o[0],d=(r[0]+r[1])/2,c=(o[0]+o[1])/2,l=.9/Math.max(a/n,s/i),u=[n/2-l*d,i/2-l*c],f=y.select("#grid svg"),p=(e=y.zoomIdentity).translate.apply(e,u).scale(l);f.call(this.zoomBehavior.transform,p)}},scaleTo:function(e){var t,n=this.$refs.grid.clientWidth,i=this.$refs.grid.clientHeight,r=(this.zoomXScale(this.max_x)+this.zoomXScale(this.min_x))/2,o=(this.zoomYScale(this.max_y)+this.zoomYScale(this.min_y))/2,a=[n/2-e*r,i/2-e*o];y.select(this.$refs.grid).call(this.zoomBehavior.transform,(t=y.zoomIdentity).translate.apply(t,a).scale(e))},translateEntities:function(){y.selectAll("[data-transform-plz]").attr("transform",a(this.transformAtLastRender,y.event.transform))},showOrHideAxes:function(){this.axis.x.style("visibility",this.gridVisible?"visible":"hidden"),this.axis.y.style("visibility",this.gridVisible?"visible":"hidden")},updateGrid:function(){if(this.axis.x&&this.axis.y){var e=this.$refs.gridParent.clientWidth,t=this.$refs.gridParent.clientHeight,n=this.max_x-this.min_x,i=this.max_y-this.min_y,r=o(this.min_x,this.max_x,this.spacing),a=o(this.min_y,this.max_y,this.spacing);this.reduceTicks=a.length>250||r.length>250,this.axis_generator.x=this.axis_generator.x||y.axisBottom(this.xScale),this.axis_generator.x.tickSize(t).tickPadding(-20).tickFormat(this.reduceTicks?b.default.identity:this.formatTickX.bind(this,Math.floor(10*(e/t)))),this.axis_generator.y=this.axis_generator.y||y.axisRight(this.yScale),this.axis_generator.y.tickSize(e).tickPadding(-25).tickFormat(this.reduceTicks?b.default.identity:this.formatTickY.bind(this,10)),this.reduceTicks?(this.axis_generator.x.tickValues(null).ticks(5*(n/i)),this.axis_generator.y.tickValues(null).ticks(5)):(this.axis_generator.x.ticks(null).tickValues(r),this.axis_generator.y.ticks(null).tickValues(a)),this.axis.y.call(this.axis_generator.y),this.axis.x.call(this.axis_generator.x)}},rwuToGrid:function(e,t){var n=void 0;return"x"===t?n=this.xScale:"y"===t&&(n=this.yScale),n(e)},gridToRWU:function(e,t){var n=void 0;"x"===t?n=this.xScale:"y"===t&&(n=this.yScale);var i=n.invert(e);return Math.round(1e11*i)/1e11},gridPointToRWU:function(e){return{x:this.gridToRWU(e.x,"x"),y:this.gridToRWU(e.y,"y")}},rwuPointToGrid:function(e){return{x:this.rwuToGrid(e.x,"x"),y:this.rwuToGrid(e.y,"y")}},polygonLabelPosition:function(e){var t=[e.map(function(e){return[e.x,e.y]})],n=Math.abs(Math.round(C.default.areaOfSelection(e))),i=n?(0,w.default)(t,1):[null,null],r=(0,l.default)(i,2),o=r[0],a=r[1];return{x:o,y:a,area:n}},formatTickX:function(e,t){var n=this.max_x-this.min_x,i=this.spacing,r=Math.ceil(n/e/i)*i;return 0===r||t%r===0?t:""},formatTickY:function(e,t){var n=this.max_y-this.min_y,i=this.spacing,r=Math.ceil(n/e/i)*i;return 0===r||t%r===0?t:""},padTickY:function(e){var t=Math.abs(this.min_y),n=Math.abs(this.max_y),i=(t<n?n:t).toFixed(0).length,r=e*i;this.axis.y.call(this.axis_generator.y.tickPadding(r))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),o=i(r),a=n(29),s=i(a),d=n(287),c=i(d),l=n(183),u=i(l),f=n(292),p=i(f),h=n(297),m=i(h),g=n(305),v=i(g),y=n(308),_=i(y),w=n(309),x=i(w),b=n(126),S=n(303),M=i(S);o.default.use(s.default);var C=new s.default.Store({strict:!1,modules:{application:c.default,project:u.default,geometry:p.default,models:m.default},getters:{exportData:v.default},actions:{importFloorplan:_.default,importLibrary:x.default,changeUnits:function(e,t){var n=t.newUnits,i=e.state.project.config.units;console.log("moving from "+i+" to "+n),"ip"!==i&&"si"!==i&&console.error('Expected data.project.config.units to be "ip" or "si", received "'+i+'"'),"ip"!==n&&"si"!==n&&console.error('Expected oldUnits to be "ip" or "si", received "'+n+'"'),e.commit("changeUnits",(0,b.convertState)(e.state,i,n)),e.dispatch("project/setUnits",{units:n})}},mutations:M.default});t.default=C},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(24),s=n(70);t.default={setCurrentStoryId:function(e,t){var n=t.id;e.rootState.models.stories.map(function(e){return e.id}).indexOf(n)!==-1&&e.commit("setCurrentStoryId",{id:n})},setCurrentSubSelectionId:function(e,t){var n=t.id;e.getters.currentStory&&(e.getters.currentStory.spaces.find(function(e){return e.id===n})||e.getters.currentStory.shading.find(function(e){return e.id===n})||e.getters.currentStory.images.find(function(e){return e.id===n}))&&e.commit("setCurrentSubSelectionId",{id:n})},setCurrentComponentId:function(e,t){var n=t.id;e.getters.currentStory&&(e.getters.currentStory.windows.find(function(e){return e.id===n})||e.getters.currentStory.daylighting_controls.find(function(e){return e.id===n}))&&e.commit("setCurrentComponentId",{id:n})},setCurrentComponentDefinitionId:function(e,t){var n=t.id;if(e.rootState.models.library.daylighting_control_definitions.find(function(e){return e.id===n})||e.rootState.models.library.window_definitions.find(function(e){return e.id===n})||e.rootState.models.library.door_definitions.find(function(e){return e.id===n}))e.commit("setCurrentComponentDefinitionId",{id:n});else if("undefined"!==n)throw new Error("unable to set component definition -- couldn't find one with id "+n)},setCurrentComponentInstanceId:function(e,t){var n=t.id;(0,s.componentInstanceById)(e.getters.currentStory,n)?e.commit("setCurrentComponentInstanceId",t):console.error("unable to find an instance with that id on the current story")},setCurrentSnapMode:function(e,t){var n=t.snapMode;if(!o.default.includes(["grid-strict","grid-verts-edges"],n))throw new Error("Unknown grid mode "+n);e.commit("setCurrentSnapMode",{snapMode:n})},setCurrentModeTab:function(e,t){var n=t.modeTab;e.commit("setCurrentModeTab",{modeTab:n})},setCurrentSubselectionType:function(e,t){var n=t.subselectionType;e.commit("setCurrentSubselectionType",{subselectionType:n})},setCurrentTool:function(e,t){var n=t.tool;e.state.tools.indexOf(n)!==-1&&e.commit("setCurrentTool",{tool:n})},setCurrentMode:function(e,t){var n=t.mode;
"spaces"===n||o.default.includes(a.assignableProperties,n)?e.commit("setCurrentMode",{mode:n}):console.error("unrecognized view-by option: "+n)},setCurrentSpacePropertyId:function(e,t){var n=t.id;!n||(0,s.spacePropertyById)(e.rootState.models.library,n)?e.commit("setCurrentSpacePropertyId",{id:n}):console.error("unable to find space property with id: "+n)},setScaleX:function(e,t){var n=t.scaleX;e.commit("setScaleX",{scaleX:n})},setScaleY:function(e,t){var n=t.scaleY;e.commit("setScaleY",{scaleY:n})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(15),s=i(a),d=n(70);t.default={currentStory:function(e,t,n){return console.log("trying to get currentStory",n.models.stories),n.models.stories.find(function(t){return t.id===e.currentSelections.story_id})},currentSubSelection:function(e,t){var n=t.currentStory;if(!n)return null;var i=e.currentSelections.subselection_ids[n.id];return n.spaces.find(function(e){return e.id===i})||n.shading.find(function(e){return e.id===i})||n.images.find(function(e){return e.id===i})},currentSubSelectionType:function(e,t){var n=t.currentStory;if(!n)return null;var i=e.currentSelections.subselection_ids[n.id];return n.spaces.find(function(e){return e.id===i})?"spaces":n.shading.find(function(e){return e.id===i})?"shading":n.images.find(function(e){return e.id===i})?"images":null},currentSpace:function(e,t){return"spaces"===t.currentSubSelectionType?t.currentSubSelection:null},currentShading:function(e,t){return"shading"===t.currentSubSelectionType?t.currentSubSelection:null},currentImage:function(e,t){return"images"===t.currentSubSelectionType?t.currentSubSelection:null},currentComponent:function(e,t,n){var i=e.currentSelections.component_definition_id,r=void 0,a=void 0;return(a=n.models.library.window_definitions.find(function(e){return e.id===i}))?r="window_definitions":(a=n.models.library.daylighting_control_definitions.find(function(e){return e.id===i}))?r="daylighting_control_definitions":(a=o.default.find(n.models.library.door_definitions,{id:i}))&&(r="door_definitions"),{type:r,definition:a}},currentComponentDefinition:function(e,t){return t.currentComponent.definition},currentComponentInstance:function(e,t){var n=e.currentSelections.component_instance_id;return n?(0,d.componentInstanceById)(t.currentStory,n):null},currentSpaceProperty:function(e,t,n){var i=e.currentSelections.space_property_id,r=n.models.library;return(0,d.spacePropertyById)(r,i)},currentStoryGeometry:function(e,t,n){var i=t.currentStory;return i?n.geometry.find(function(e){return e.id===i.geometry_id}):null},currentStoryDenormalizedGeom:function(e,t){var n=t.currentStoryGeometry;return n?s.default.denormalize(n):null},currentSubSelectionFace:function(e,t){return t.currentSubSelection&&t.currentSubSelection.face_id?t.currentStoryGeometry.faces.find(function(e){return e.id===t.currentSubSelection.face_id}):null}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(285),o=i(r),a=n(288),s=i(a),d=n(286),c=i(d),l=n(79);t.default={namespaced:!0,state:{currentSelections:{story:null,story_id:null,subselection_ids:{},component_id:null,component_definition_id:null,component_instance_id:null,space_property_id:null,tool:"Rectangle",mode:"spaces",snapMode:"grid-strict",modeTab:"floorplan",subselectionType:"spaces"},modes:["spaces","shading","building_units","thermal_zones","pitched_roofs","space_types","images"],tools:["Pan","Drag","Rectangle","Polygon","Eraser","Select","Map","Fill","Place Component","Image","Apply Property"],scale:{x:l.scaleLinear().range([0,0]).domain([0,0]),y:l.scaleLinear().range([0,0]).domain([0,0])}},actions:o.default,mutations:s.default,getters:c.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(71),o=i(r),a=n(7),s=i(a);t.default={setCurrentStoryId:function(e,t){e.currentSelections.story_id=t.id},setCurrentSubSelectionId:function(e,t){var n=e.currentSelections.story_id;return n?void(e.currentSelections.subselection_ids=(0,s.default)({},e.currentSelections.subselection_ids,(0,o.default)({},n,t.id))):void console.error("expected a story to be selected, in order to set a subselection")},setCurrentComponentId:function(e,t){e.currentSelections.component_id=t.id},setCurrentComponentDefinitionId:function(e,t){e.currentSelections.component_definition_id=t.id},setCurrentComponentInstanceId:function(e,t){e.currentSelections.component_instance_id=t.id},setCurrentSpacePropertyId:function(e,t){e.currentSelections.space_property_id=t.id},setCurrentSnapMode:function(e,t){e.currentSelections.snapMode=t.snapMode},setCurrentModeTab:function(e,t){e.currentSelections.modeTab=t.modeTab},setCurrentSubselectionType:function(e,t){e.currentSelections.subselectionType=t.subselectionType},setCurrentTool:function(e,t){e.currentSelections.tool=t.tool},setCurrentMode:function(e,t){e.currentSelections.mode=t.mode},setScaleX:function(e,t){e.scale.x=t.scaleX},setScaleY:function(e,t){e.scale.y=t.scaleY}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return h.default.vertexForCoordinates(t,e)||f.default.Vertex(t.x,t.y)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),a=i(o),s=n(71),d=i(s);t.getOrCreateVertex=r;var c=n(3),l=i(c),u=n(124),f=i(u),p=n(15),h=i(p),m=n(290),g=i(m),v=n(182);t.default={initGeometry:function(e,t){var n=t.story_id,i=new f.default.Geometry;e.commit("initGeometry",{geometry:i}),e.dispatch("models/updateStoryWithData",{story:e.rootState.models.stories.find(function(e){return e.id===n}),geometry_id:i.id},{root:!0})},destroyGeometry:function(e,t){var n=e.commit;n("destroyGeometry",{id:t})},eraseSelection:function(e,t){var n=t.points,i=e.rootGetters["application/currentStoryGeometry"].id;(0,v.withPreservedComponents)(e,i,function(){var t=(0,m.eraseSelection)(n,e);t||window.eventBus.$emit("error","Operation cancelled - no split faces")}),e.dispatch("trimGeometry",{geometry_id:i})},moveFaceByOffset:function(e,t){var n=t.face_id,i=t.dx,r=t.dy,o=e.rootGetters["application/currentStoryGeometry"],a=h.default.faceForId(n,o),s=h.default.verticesForFaceId(a.id,o).map(function(e){return{x:e.x+i,y:e.y+r}}),c=(0,m.newGeometriesOfOverlappedFaces)(s,h.default.exceptFace(o,n));if(c.error)return window.eventBus.$emit("error","Operation cancelled - "+c.error),void window.eventBus.$emit("reload-grid");var l=(0,m.validateFaceGeometry)(s,o);if(!l.success)return window.eventBus.$emit("error",l.error),void window.eventBus.$emit("reload-grid");var u=(0,d.default)({},n,{dx:i,dy:r});(0,v.withPreservedComponents)(e,o.id,u,function(){c.forEach(function(t){return e.dispatch("replaceFacePoints",t)}),e.dispatch("replaceFacePoints",{geometry_id:o.id,face_id:n,vertices:l.vertices,edges:l.edges,dx:i,dy:r})}),e.dispatch("trimGeometry",{geometry_id:o.id})},createFaceFromPoints:g.default,destroyFaceAndDescendents:function(e,t){var n=t.geometry_id,i=t.face,r=e.state.find(function(e){return e.id===n}),o=i.edgeRefs.map(function(e){var t=h.default.edgeForId(e.edge_id,r),n=e.reverse?t.v2:t.v1;return h.default.vertexForId(n,r)}).filter(function(e){return h.default.facesForVertexId(e.id,r).length<2}),a=i.edgeRefs.filter(function(e){return h.default.facesForEdgeId(e.edge_id,r).length<2});e.commit("destroyGeometry",{id:i.id}),a.forEach(function(t){return e.commit("destroyGeometry",{id:t.edge_id})}),o.forEach(function(t){return e.commit("destroyGeometry",{id:t.id})})},replaceFacePoints:function(e,t){var n=t.geometry_id,i=t.face_id,r=t.vertices,o=t.edges,s=l.default.find(e.state,{id:n}),d=e.rootState.project.grid.spacing,c=l.default.chain(r).map(function(e){var t=l.default.find(s.vertices,function(t){return(0,p.distanceBetweenPoints)(t,e)<d/20});return t?e.id===t.id?null:[e.id,t.id]:null}).compact().fromPairs().value(),u=r.map(function(e){return(0,a.default)({},e,{id:c[e.id]||e.id})}),f=o.map(function(e){return(0,a.default)({},e,{v1:c[e.v1]||e.v1,v2:c[e.v2]||e.v2})});f.forEach(function(e){var t=l.default.find(s.edges,{v1:e.v1,v2:e.v2})||l.default.find(s.edges,{v1:e.v2,v2:e.v1});t&&e.id!==t.id&&(e.id=t.id,e.reverse=t.v1!==e.v1)}),e.commit("replaceFacePoints",{geometry_id:n,vertices:u,edges:f,face_id:i})},trimGeometry:function(e,t){var n=e.rootState,i=e.commit,r=t.geometry_id,o=l.default.find(n.models.stories,{geometry_id:r}),a=l.default.flatMap(o.spaces,function(e){return l.default.map(e.daylighting_controls,"vertex_id")});i("trimGeometry",{geometry_id:r,vertsReferencedElsewhere:a})},cloneStoryGeometry:function(e,t){var n=e.rootGetters["application/currentStoryGeometry"];e.commit("updateClonedGeometry",{newGeom:t,currentStoryId:n.id})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.model_id,i=t.points;if(!((0,G.uniq)(i).length<3)){var r=e.rootGetters["application/currentStoryGeometry"],a=V.default.libraryObjectWithId(e.rootState.models,n),d=a.face_id?W.default.faceForId(a.face_id,r):null,c=void 0;if(d){var l=W.default.verticesForFaceId(d.id,r);if(c=W.default.setOperation("union",l,i),c.error)return void window.eventBus.$emit("error","Operation cancelled - "+c.error)}else c=i;var u=g(c,e.rootGetters["application/currentStoryGeometry"],e.rootGetters["project/snapTolerance"]);if(!u.success)return window.eventBus.$emit("error",u.error),void console.error(u.error);var f=o(c,W.default.exceptFace(r,d&&d.id));if(f.error)return void window.eventBus.$emit("error","Operation cancelled - "+f.error);var p=u.edges.slice(),h=u.vertices.slice();(0,A.withPreservedComponents)(e,r.id,function(){var t=r.edges.length,n=r.vertices.length;f.forEach(function(t){return e.dispatch("replaceFacePoints",t)}),p=p.concat(r.edges.slice(t)),h=h.concat(r.vertices.slice(n)),s(u,a,e,d),e.dispatch("trimGeometry",{geometry_id:r.id}),w(e,p,h)})}}function o(e,t){if(e.length<3||!W.default.areaOfSelection(e))return!1;var n=W.default.denormalize(t),i=n.faces.filter(function(t){var n=W.default.intersection(t.vertices,e);return n.error||n.length>0}),r=i.map(function(t){return W.default.difference(t.vertices,e)}),o=O.default.find(r,"error");if(o)return o;var a=r.map(function(e){return g(e,t)}),s=O.default.find(a,"error");return s?s:O.default.zip(i,a).map(function(e){var n=(0,E.default)(e,2),i=n[0],r=n[1],o=r.vertices,a=r.edges;return{geometry_id:t.id,face_id:i.id,vertices:o,edges:a}})}function a(e,t){var n=t.rootGetters["application/currentStoryGeometry"];if(e.length<3||!W.default.areaOfSelection(e))return!1;var i=o(e,n);if(i.error)return window.eventBus.$emit("error","Operation cancelled - "+i.error),!1;var r=n.edges.length,a=n.vertices.length;i.forEach(function(e){return t.dispatch("replaceFacePoints",e)});var s=n.edges.slice(r),d=n.vertices.slice(a);return w(t,s,d),!0}function s(e,t,n,i){var r,o=e.vertices,a=e.edges,s=n.rootGetters["application/currentStoryGeometry"],d=i||new F.default.Face([]);n.dispatch("replaceFacePoints",{face_id:d.id,geometry_id:s.id,vertices:o,edges:a}),n.dispatch("space"===t.type?"models/updateSpaceWithData":"models/updateShadingWithData",(r={},(0,z.default)(r,t.type,t),(0,z.default)(r,"face_id",d.id),r),{root:!0})}function d(e,t,n){var i=n.find(function(n){return n.v1===e.id&&n.v2===t.id||n.v2===e.id&&n.v1===t.id});return i&&(0,I.default)({},i,{reverse:i.v1===t.id})}function c(e){return function(t){var n=(0,E.default)(t,2),i=n[0],r=n[1];return d(i,r,e)||new F.default.Edge(i.id,r.id)}}function l(e,t){return e.length?O.default.zip(e,[].concat((0,T.default)(e.slice(1)),[e[0]])).map(c(t)):[]}function u(e){this.message=e}function f(e){if(e.length<3)throw new u("can't make a polygon with fewer than three vertices: "+(0,M.default)(e))}function p(e){e.forEach(function(t){if(O.default.find(e,{x:t.x,y:t.y}).length>=2)throw new u("Duplicate vertex at ("+t.x+", "+t.y+")")})}function h(e,t){t.forEach(function(t){var n=t.v1,i=t.v2,r=O.default.find(e,{id:n}),o=O.default.find(e,{id:i});e.forEach(function(e){if(e.id!==n&&e.id!==i&&W.default.ptsAreCollinear(r,o,e)){var t=O.default.reject([(e.x-r.x)/(o.x-r.x),(e.y-r.y)/(o.y-r.y)],isNaN)[0];if(!(t>1||t<0))throw new u("An edge is being touched by a vertex on the same face at ("+e.x+", "+e.y+")")}})})}function m(e,t){var n=e.reduce(function(e,t){return e[t.id]=t,e},{});(0,G.allPairs)(t).forEach(function(e){var t=(0,E.default)(e,2),i=t[0],r=t[1],o=n[i.v1],a=n[i.v2],s=n[r.v1],d=n[r.v2],c=W.default.intersectionOfLines(o,a,s,d);if(c)throw new u("Self intersection at "+c.x+", "+c.y)})}function g(e,t){if(0===e.length)return{success:!0,vertices:[],edges:[]};if(e.length<=2)return{success:!1,error:"need at least 3 points to make a face"};var n=e.map(function(e){return W.default.vertexForCoordinates(e,t)||new F.default.Vertex(e.x,e.y)});n=(0,G.dropConsecutiveDups)(n);var i=l(n,t.edges);try{f(n),p(n),h(n,i),m(n,i)}catch(e){if(e instanceof u)return{success:!1,error:e.message};throw e}return{success:!0,vertices:n,edges:i}}function v(e,t){return O.default.zip(e.slice(0,-1),e.slice(1)).map(c(t))}function y(e,t,n){var i=W.default.facesForEdgeId(t,e),r=i.map(function(i){var r=O.default.find(i.edgeRefs,{edge_id:t}).reverse,o=n.map(function(e){var t=e.id,n=e.reverse;return{id:t,reverse:!n!=!r}});return r&&o.reverse(),{type:"replaceEdgeRef",geometry_id:e.id,edge_id:t,face_id:i.id,newEdges:o}});return r}function _(e,t,n,i){function r(e,t,n){if(0===n.length)return!1;var i=W.default.vertexForId(t.v1,e),r=W.default.vertexForId(t.v2,e);n=O.default.sortBy(n,function(e){return(0,R.distanceBetweenPoints)(e,i)}),n=[i].concat((0,T.default)(n),[r]);var a=v(n,[].concat((0,T.default)(e.edges),o)),s=y(e,t.id,a);return o.push.apply(o,(0,T.default)(a)),{edgeToDelete:t.id,newEdges:a,replaceEdgeRefs:s}}var o=[];if(n&&i){var a={};return n.forEach(function(n){var i=W.default.splittingVerticesForEdgeId(n,e,t),o=r(e,n,i);o&&(a[o.edgeToDelete]=o)}),e.edges.forEach(function(n){var o=W.default.splittingVerticesForEdgeId(n,e,t,i),s=r(e,n,o);s&&(a[s.edgeToDelete]=s)}),(0,b.default)(a).map(function(e){var t=(0,E.default)(e,2),n=(t[0],t[1]);return n})}return e.edges.map(function(n){var i=W.default.splittingVerticesForEdgeId(n,e,t);return r(e,n,i)}).filter(function(e){return e})}function w(e,t,n){var i=e.rootGetters["application/currentStoryGeometry"],r=e.rootState.project.grid.spacing,o=_(i,r,t,n);o.forEach(function(t){return e.commit((0,I.default)({type:"splitEdge",geometry_id:i.id},t))})}Object.defineProperty(t,"__esModule",{value:!0});var x=n(185),b=i(x),S=n(42),M=i(S),C=n(34),T=i(C),j=n(7),I=i(j),P=n(71),z=i(P),D=n(53),E=i(D);t.default=r,t.newGeometriesOfOverlappedFaces=o,t.eraseSelection=a,t.findExistingEdge=d,t.matchOrCreateEdges=l,t.errOnTooFewVerts=f,t.errOnDuplicateVerts=p,t.errOnVertexIntersectsEdge=h,t.errOnEdgeIntersectsEdge=m,t.validateFaceGeometry=g,t.edgesToSplit=_;var $=n(3),O=i($),k=n(124),F=i(k),R=n(15),W=i(R),N=n(46),V=i(N),G=n(96),A=n(182);u.prototype=new Error},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(15),s=i(a),d=n(311),c=i(d);t.default={denormalized:function(e){return e.map(function(e){return s.default.denormalize(e)})},errors:function(e,t){return o.default.flatMap(t.denormalized,c.default)},exportData:function(e,t,n,i){return e.map(function(e){return{id:e.id,vertices:e.vertices.map(function(t){return{id:t.id,x:Number(t.x),y:Number(t.y),edge_ids:s.default.edgesForVertexId(t.id,e).map(function(e){return e.id})}}),edges:e.edges.map(function(t){return{id:t.id,vertex_ids:[t.v1,t.v2],face_ids:s.default.facesForEdgeId(t.id,e).map(function(e){return e.id})}}),faces:e.faces.map(function(e){return{id:e.id,edge_ids:e.edgeRefs.map(function(e){return e.edge_id}),edge_order:e.edgeRefs.map(function(e){return e.reverse?0:1})}})}})}}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(289),a=r(o),s=n(293),d=i(s),c=n(291),l=r(c);t.default={namespaced:!0,state:[],actions:a.default,mutations:d,getters:l.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.geometry_id,i=t.vertsReferencedElsewhere,r=C.default.find(e,{id:n}),o=new S.default(C.default.flatMap(r.faces,function(e){return C.default.map(e.edgeRefs,"edge_id")})),a=C.default.flatMap(r.edges.filter(function(e){return o.has(e.id)}),function(e){return[e.v1,e.v2]}),s=new S.default([].concat((0,x.default)(i||[]),(0,x.default)(a))),d=r.edges.filter(function(e){return o.has(e.id)}),c=r.vertices.filter(function(e){return s.has(e.id)}),l=C.default.difference([].concat((0,x.default)(o)),C.default.map(d,"id"));l.length&&console.error("An edge is referenced by a face, but does not exist!",(0,_.default)(r));var u=C.default.difference(a,C.default.map(c,"id"));u.length&&console.error("A vertex is referenced by a face, but does not exist!",(0,_.default)(r)),r.vertices=c,r.edges=d,r.faces=r.faces.filter(function(e){return e.edgeRefs.length>0})}function o(e,t){var n=t.geometry;e.push(n)}function a(e,t){var n=t.geometry_id,i=t.vertex;e.find(function(e){return e.id===n}).vertices.push(i)}function s(e,t){var n=t.geometry_id,i=t.face;e.find(function(e){return e.id===n}).faces.push(i)}function d(e,t){for(var n=t.id,i=0;i<e.length;i++){var r=e[i];if(r.id===n){e.splice(e.findIndex(function(e){return e.id===n}),1);break}if(~r.faces.map(function(e){return e.id}).indexOf(n)){r.faces.splice(r.faces.findIndex(function(e){return e.id===n}),1);break}if(~r.edges.map(function(e){return e.id}).indexOf(n)){r.edges.splice(r.edges.findIndex(function(e){return e.id===n}),1),r.faces.forEach(function(e){e.edgeRefs.forEach(function(t){n===t.edge_id&&e.edgeRefs.splice(e.edgeRefs.findIndex(function(e){return e.edge_id===n}),1)})});break}if(~r.vertices.map(function(e){return e.id}).indexOf(n)){r.vertices.splice(r.vertices.findIndex(function(e){return e.id===n}),1);break}}}function c(e,t){var n=t.geometry_id,i=t.face_id,r=t.edgeRef,o=e.find(function(e){return e.id===n}),a=o.faces.find(function(e){return e.id===i}),s=o.edges.find(function(e){return e.id===r.edge_id});s&&a.edgeRefs.push(r)}function l(e,t){var n=t.geometry_id,i=t.face_id,r=t.edgeRefs,o=e.find(function(e){return e.id===n}),a=o.faces.find(function(e){return e.id===i});a.edgeRefs=r.filter(function(e){return o.edges.find(function(t){return t.id===e.edge_id})})}function u(e,t){var n=t.geometry_id,i=t.face_id,r=t.edge_id,o=e.find(function(e){return e.id===n}),a=o.faces.find(function(e){return e.id===i});a.edgeRefs.splice(a.edgeRefs.findIndex(function(e){return e.edge_id===r}),1)}function f(e,t){var n,i=t.geometry_id,r=t.face_id,o=t.edge_id,a=t.newEdges,s=e.find(function(e){return e.id===i}),d=s.faces.find(function(e){return e.id===r}),c=C.default.findIndex(d.edgeRefs,{edge_id:o});(n=d.edgeRefs).splice.apply(n,[c,1].concat((0,x.default)(a.map(function(e){var t=e.id,n=e.reverse;return{edge_id:t,reverse:n}}))))}function p(e,t){var n=t.geometry_id,i=t.vertices,r=C.default.find(e,{id:n});i.forEach(function(e){return C.default.find(r.vertices,{id:e.id})||r.vertices.push(e)})}function h(e,t){var n=t.geometry_id,i=t.edges,r=C.default.find(e,{id:n});i.forEach(function(e){return C.default.find(r.edges,{id:e.id})||r.edges.push(e)})}function m(e,t){var n=t.geometry_id,i=t.edgeToDelete,r=t.newEdges,o=t.replaceEdgeRefs;h(e,{geometry_id:n,edges:r}),o.forEach(function(t){return f(e,t)}),d(e,{id:i})}function g(e,t){var n=t.geometry_id,i=t.vertices,r=t.edges,o=t.face_id,a=C.default.find(e,{id:n});p(e,{geometry_id:n,vertices:i}),h(e,{geometry_id:n,edges:r,vertices:i});var s=C.default.find(a.faces,{id:o});s||(s={id:o,edgeRefs:[]},a.faces.push(s)),s.edgeRefs=r.map(function(e){return{edge_id:e.id,reverse:!!e.reverse}})}function v(e,t){var n=e.find(function(e){return e.id===t.currentStoryId});n.edges=t.newGeom.edges,n.faces=t.newGeom.faces,n.vertices=t.newGeom.vertices}Object.defineProperty(t,"__esModule",{value:!0});var y=n(42),_=i(y),w=n(34),x=i(w),b=n(324),S=i(b);t.trimGeometry=r,t.initGeometry=o,t.createVertex=a,t.createFace=s,t.destroyGeometry=d,t.createEdgeRef=c,t.setEdgeRefsForFace=l,t.destroyEdgeRef=u,t.replaceEdgeRef=f,t.ensureVertsExist=p,t.ensureEdgesExist=h,t.splitEdge=m,t.replaceFacePoints=g,t.updateClonedGeometry=v;var M=n(3),C=i(M)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(81),s=i(a),d=n(52),c=i(d),l=n(3),u=i(l),f=n(95),p=i(f),h=n(125),m=i(h),g=n(51),v=i(g),y=n(124),_=i(y),w=n(46),x=i(w),b=n(15),S=i(b);t.default={initStory:function(e){var t=x.default.generateName(e.state,"stories"),n=new m.default.Story(t);e.commit("initStory",{story:n}),e.dispatch("geometry/initGeometry",{story_id:n.id},{root:!0}),e.dispatch("initSpace",{story:n}),e.dispatch("initShading",{story:n}),e.dispatch("selectStory",{story:n})},initSpace:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=x.default.generateName(e.state,"spaces",n),r=new m.default.Space(i);e.commit("initSpace",{story:n,space:r})},initShading:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=x.default.generateName(e.state,"shading",n),r=new m.default.Shading(i);e.commit("initShading",{story:n,shading:r})},destroyStory:function(e,t){var n=e.state.stories,i=n.findIndex(function(e){return e.id===t.story.id}),r=n[i];e.commit("destroyStory",{story:r}),e.dispatch("geometry/destroyGeometry",r.geometry_id,{root:!0}),0===n.length?e.dispatch("initStory"):e.dispatch("selectStory",{story:n[i-1]})},destroySpace:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=n.spaces.find(function(e){return e.id===t.space.id});e.commit("destroySpace",{space:i,story:n});var r=e.rootGetters["application/currentStoryGeometry"],o=r.faces.find(function(e){return e.id===i.face_id});if(o){var a=r.edges.filter(function(e){return o.edgeRefs.map(function(e){return e.edge_id}).includes(e.id)});a.forEach(function(t){var i=n.windows.filter(function(e){return e.edge_id===t.id});i.forEach(function(t){return e.dispatch("destroyWindow",{story_id:n.id,object:t})})}),e.dispatch("geometry/destroyFaceAndDescendents",{face:o,geometry_id:r.id},{root:!0})}},destroyShading:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=n.shading.find(function(e){return e.id===t.shading.id});e.commit("destroyShading",{shading:i,story:n});var r=e.rootGetters["application/currentStoryGeometry"].faces.find(function(e){return e.id===i.face_id});r&&e.dispatch("geometry/destroyFaceAndDescendents",{face:r,geometry_id:e.rootGetters["application/currentStoryGeometry"].id},{root:!0})},destroyImage:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=n.images.find(function(e){return e.id===t.image.id});e.commit("destroyImage",{image:i,story:n})},destroyWindowDef:function(e,t){e.commit("destroyWindowsByDefinition",t.object),e.commit("destroyObject",t)},destroyDaylightingControlDef:function(e,t){e.commit("destroyDaylightingControlsByDefinition",t.object),e.commit("destroyObject",t)},destroyDoorDef:function(e,t){e.commit("destroyDoorsByDefinition",t.object),e.commit("destroyObject",t)},destroyObject:function(e,t){e.commit("destroyObject",{object:t.object})},updateStoryWithData:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story.id}),i=(0,c.default)(p.default.stories.keymap),r={};for(var o in t)t.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=t[o]);r.story=n,e.commit("updateStoryWithData",r)},updateSpaceWithData:function(e,t){var n=e.getters.allSpaces.find(function(e){return e.id===t.space.id}),i=(0,c.default)(n),r={};for(var o in t)t.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=t[o]);r.space=n,e.commit("updateSpaceWithData",r)},updateShadingWithData:function(e,t){var n=e.getters.allShading.find(function(e){return e.id===t.shading.id}),i=(0,c.default)(n),r={};for(var o in t)t.hasOwnProperty(o)&&~i.indexOf(o)&&(r[o]=t[o]);r.shading=n,e.commit("updateShadingWithData",r)},updateImageWithData:function(e,t){var n=e.getters.allImages.find(function(e){return e.id===t.image.id}),i=u.default.difference((0,c.default)(n),["src","naturalWidth","naturalHeight"]);t.scale&&(t.height=t.scale*n.naturalHeight,t.width=t.scale*n.naturalWidth);var r=u.default.pick(t,i);r.image=n,e.commit("updateImageWithData",r)},updateWindowDefinitionWithData:function(e,t){var n=e.state,i=e.dispatch,r=t.object.id,o=u.default.pick((0,h.getDefaults)("WindowDefinition"),["height","width","window_spacing","wwr"]);if("Window to Wall Ratio"===t.window_definition_mode)(0,s.default)(t,o,{height:null,width:null,window_spacing:null});else if("Repeating Windows"===t.window_definition_mode)(0,s.default)(t,o,{wwr:null});else if("Single Window"===t.window_definition_mode)(0,s.default)(t,o,{wwr:null,window_spacing:null});else if(t.window_definition_mode)throw new Error("unrecognized window_definition_mode: "+t.window_definition_mode);if(u.default.includes(["Window to Wall Ratio","Repeating Windows"],t.window_definition_mode)){var a=u.default.flatMap(n.stories,function(e){return u.default.chain(e.windows).filter({window_definition_id:r}).groupBy("edge_id").values().flatMap(u.default.tail).map(function(t){return{story_id:e.id,object:{id:t.id}}}).value()});a.forEach(function(e){return i("destroyWindow",e)})}i("updateObjectWithData",t)},updateObjectWithData:function(e,t){var n=x.default.libraryObjectWithId(e.state,t.object.id);t.object=n,e.commit("updateObjectWithData",t)},createImageForStory:function(e,t){var n=e.state.stories.find(function(e){return e.id===t.story_id}),i=x.default.generateName(e.state,"images",n),r=new m.default.Image(i,t.src);r.height=t.height,r.width=t.width,r.x=t.x,r.y=t.y,r.naturalWidth=t.naturalWidth,r.naturalHeight=t.naturalHeight,e.commit("createImageForStory",{story_id:n.id,image:r})},createObjectWithType:function(e,t){var n=t.type,i=x.default.generateName(e.state,n),r=new x.default.map[n].init({name:i});e.commit("initObject",{type:n,object:r})},selectStory:function(e,t){var n=t.story;e.dispatch("application/setCurrentStoryId",{id:n.id},{root:!0})},cloneStory:function(e,t){var n=e.rootGetters["application/currentStory"];e.commit("cloneObjectArray",{storyInfo:t,currentStory:n})},createWindow:function(e,t){var n=t.story_id,i=t.edge_id,r=t.window_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:n}),d=u.default.find(e.state.library.window_definitions,{id:r}),c=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),l=c&&u.default.find(c.edges,{id:i});if(!s)throw new Error("Story not found");if(!d)throw new Error("Window Definition not found");if(!c)throw new Error("Geometry not found");if(!l)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");var f=u.default.filter(s.windows,{edge_id:i}).map(function(t){return(0,o.default)({},t,{window_definition_mode:u.default.find(e.state.library.window_definitions,{id:t.window_definition_id}).window_definition_mode})}),p=void 0;p="Single Window"===d.window_definition_mode?u.default.reject(f,{window_definition_mode:"Single Window"}):f,p.forEach(function(t){return e.commit("destroyWindow",{story_id:n,object:{id:t.id}})}),e.commit("createWindow",(0,o.default)({},t,{id:v.default.generate(),name:(0,g.genName)(d.name)}))},createWindows:function(e,t){var n=[],i=[];t.forEach(function(t){var r=t.story_id,a=t.edge_id,s=t.window_definition_id,d=t.alpha,c=u.default.find(e.state.stories,{id:r}),l=u.default.find(e.state.library.window_definitions,{id:s}),f=c&&u.default.find(e.rootState.geometry,{id:c.geometry_id}),p=f&&u.default.find(f.edges,{id:a});if(!c)throw new Error("Story not found");if(!l)throw new Error("Window Definition not found");if(!f)throw new Error("Geometry not found");if(!p)throw new Error("Edge not found");if(d<0||d>1)throw new Error("Alpha must be between 0 and 1");var h=u.default.filter(c.windows,{edge_id:a}).map(function(t){return(0,o.default)({},t,{window_definition_mode:u.default.find(e.state.library.window_definitions,{id:t.window_definition_id}).window_definition_mode})}),m=void 0;m="Single Window"===l.window_definition_mode?u.default.reject(h,{window_definition_mode:"Single Window"}):h,m.forEach(function(e){return n.push({story_id:r,object:{id:e.id}})}),i.push((0,o.default)({},t,{id:v.default.generate(),name:(0,g.genName)(l.name)}))}),e.commit("destroyWindows",n),e.commit("createWindows",i)},createDoor:function(e,t){var n=t.story_id,i=t.edge_id,r=t.door_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:n}),d=u.default.find(e.state.library.door_definitions,{id:r}),c=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),l=c&&u.default.find(c.edges,{id:i});if(!s)throw new Error("Story not found");if(!d)throw new Error("Door Definition not found");if(!c)throw new Error("Geometry not found");if(!l)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");e.commit("createDoor",(0,o.default)({},t,{id:v.default.generate(),name:(0,g.genName)(d.name)}))},createDoors:function(e,t){var n=t.map(function(t){var n=t.story_id,i=t.edge_id,r=t.door_definition_id,a=t.alpha,s=u.default.find(e.state.stories,{id:n}),d=u.default.find(e.state.library.door_definitions,{id:r}),c=s&&u.default.find(e.rootState.geometry,{id:s.geometry_id}),l=c&&u.default.find(c.edges,{id:i});if(!s)throw new Error("Story not found");if(!d)throw new Error("Door Definition not found");if(!c)throw new Error("Geometry not found");if(!l)throw new Error("Edge not found");if(a<0||a>1)throw new Error("Alpha must be between 0 and 1");return(0,o.default)({},t,{id:v.default.generate(),name:(0,g.genName)(d.name)})});e.commit("createDoors",n)},createDaylightingControl:function(e,t){var n=t.story_id,i=t.face_id,r=t.daylighting_control_definition_id,a=t.x,s=t.y,d=u.default.find(e.state.stories,{id:n}),c=u.default.find(e.state.library.daylighting_control_definitions,{id:r}),l=d&&u.default.find(e.rootState.geometry,{id:d.geometry_id}),f=l&&u.default.find(l.faces,{id:i}),p=l&&(S.default.vertexForCoordinates({x:a,y:s},l)||_.default.Vertex(a,s));if(!d)throw new Error("Story not found");if(!c)throw new Error("Daylighting Control Definition not found");if(!l)throw new Error("Geometry not found");if(!f)throw new Error("Face not found");if(!p.id)throw new Error("Unable to find or create vertex");e.commit("geometry/ensureVertsExist",{geometry_id:l.id,vertices:[p]},{root:!0}),e.commit("createDaylightingControl",(0,o.default)({},t,{vertex_id:p.id,id:v.default.generate(),name:(0,g.genName)(c.name)}))},destroyDaylightingControl:function(e,t){var n=e.commit;n("destroyDaylightingControl",t)},destroyWindow:function(e,t){var n=e.commit;n("destroyWindow",t)},destroyWindows:function(e,t){var n=e.commit;n("destroyWindows",t)},destroyDoor:function(e,t){var n=e.commit;n("destroyDoor",t)},destroyDoors:function(e,t){var n=e.commit;n("destroyDoors",t)},modifyDaylightingControl:function(e,t){var n=e.commit;n("modifyDaylightingControl",t)},modifyWindow:function(e,t){var n=e.commit;n("modifyWindow",t)},modifyDoor:function(e,t){var n=e.commit;n("modifyDoor",t)},destroyAllComponents:function(e,t){var n=e.commit,i=t.story_id;n("dropDaylightingControls",{story_id:i}),n("dropWindows",{story_id:i}),n("dropDoors",{story_id:i})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return""===e||null===e?l.default.has(t,"default")?t.default:t.nullable?null:0:+e}function o(e){return("undefined"==typeof e?"undefined":(0,d.default)(e))===(0,d.default)(!0)?e:"true"===e.toLowerCase()}function a(e){return+e||null}Object.defineProperty(t,"__esModule",{value:!0});var s=n(186),d=i(s);t.number=r,t.bool=o,t.gt0orNull=a;var c=n(3),l=i(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e
}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=i(r),a=n(52),s=i(a),d=n(7),c=i(d);t.default={allSpaces:function(e,t,n,i){return n.models.stories.reduce(function(e,t){return e.concat(t.spaces)},[])},allShading:function(e,t,n,i){return n.models.stories.reduce(function(e,t){return e.concat(t.shading)},[])},allImages:function(e,t,n,i){return n.models.stories.reduce(function(e,t){return e.concat(t.images)},[])},all:function(e,t,n,i){var r=(0,c.default)({},n.models.library,{stories:n.models.stories,spaces:t.allSpaces,shading:t.allShading,images:t.allImages});return(0,s.default)(r).reduce(function(e,t){return e.push.apply(e,(0,o.default)(r[t])),e},[])}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(294),o=i(r),a=n(298),s=i(a),d=n(296),c=i(d);t.default={namespaced:!0,state:{stories:[],library:{building_units:[],thermal_zones:[],space_types:[],construction_sets:[],window_definitions:[],daylighting_control_definitions:[],pitched_roofs:[],door_definitions:[]}},actions:o.default,mutations:s.default,getters:c.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=i(r),a=n(185),s=i(a),d=n(81),c=i(d),l=n(3),u=i(l),f=n(46),p=i(f);t.default={initStory:function(e,t){e.stories.push(t.story)},initSpace:function(e,t){t.story.spaces.push(t.space)},initShading:function(e,t){t.story.shading.push(t.shading)},initObject:function(e,t){e.library[t.type].push(t.object)},destroySpace:function(e,t){t.story.spaces.splice(t.story.spaces.findIndex(function(e){return e.id===t.space.id}),1)},destroyShading:function(e,t){t.story.shading.splice(t.story.shading.findIndex(function(e){return e.id===t.shading.id}),1)},destroyImage:function(e,t){t.story.images.splice(t.story.images.findIndex(function(e){return e.id===t.image.id}),1)},destroyStory:function(e,t){e.stories.splice(e.stories.findIndex(function(e){return e.id===t.story.id}),1)},destroyObject:function(e,t){var n=t.object.id;e.library=u.default.mapValues(e.library,function(e){return u.default.reject(e,{id:n})})},updateStoryWithData:function(e,t){var n=t.story;delete t.story,(0,c.default)(n,t)},createImageForStory:function(e,t){var n=e.stories.find(function(e){return e.id===t.story_id});n.images.push(t.image)},updateSpaceWithData:function(e,t){var n=t.space;(0,c.default)(n,t),delete n.space},updateShadingWithData:function(e,t){var n=t.shading;(0,c.default)(n,t),delete n.shading},updateImageWithData:function(e,t){var n=t.image;(0,c.default)(n,t),delete n.image},updateObjectWithData:function(e,t){var n=t.object;(0,c.default)(n,t),delete n.object},createWindow:function(e,t){var n=t.story_id,i=t.edge_id,r=t.window_definition_id,o=t.alpha,a=t.id,s=t.name,d=u.default.find(e.stories,{id:n});d.windows.push({window_definition_id:r,edge_id:i,alpha:o,id:a,name:s})},createWindows:function(e,t){var n={};t.forEach(function(e){var t=e.story_id,i=e.edge_id,r=e.window_definition_id,o=e.alpha,a=e.id,s=e.name,d={window_definition_id:r,edge_id:i,alpha:o,id:a,name:s};n[t]?n[t].push(d):n[t]=[d]}),(0,s.default)(n).forEach(function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1],a=u.default.find(e.stories,{id:i});a.windows=a.windows.concat(r)})},createDoor:function(e,t){var n=t.story_id,i=t.edge_id,r=t.door_definition_id,o=t.alpha,a=t.id,s=u.default.find(e.stories,{id:n});s.doors.push({door_definition_id:r,edge_id:i,alpha:o,id:a,name:name})},createDoors:function(e,t){var n={};t.forEach(function(e){var t=e.story_id,i=e.edge_id,r=e.door_definition_id,o=e.alpha,a=e.id,s={door_definition_id:r,edge_id:i,alpha:o,id:a,name:name};n[t]?n[t].push(s):n[t]=[s]}),(0,s.default)(n).forEach(function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1],a=u.default.find(e.stories,{id:i});a.doors=a.doors.concat(r)})},dropWindows:function(e,t){var n=t.story_id,i=u.default.find(e.stories,{id:n});i.windows=[]},dropDoors:function(e,t){var n=t.story_id,i=u.default.find(e.stories,{id:n});i.doors=[]},createDaylightingControl:function(e,t){var n=t.story_id,i=t.face_id,r=t.daylighting_control_definition_id,o=t.vertex_id,a=t.name,s=t.id,d=u.default.find(e.stories,{id:n}),c=u.default.find(d.spaces,{face_id:i});c.daylighting_controls.push({daylighting_control_definition_id:r,vertex_id:o,id:s,name:a})},dropDaylightingControls:function(e,t){var n=t.story_id,i=u.default.find(e.stories,{id:n});i.spaces=i.spaces.map(function(e){return 0===e.daylighting_controls.length?e:(0,c.default)({},e,{daylighting_controls:[]})})},destroyWindowsByDefinition:function(e,t){var n=t.id;e.stories.forEach(function(e){e.windows=u.default.reject(e.windows,{window_definition_id:n})})},destroyDaylightingControlsByDefinition:function(e,t){var n=t.id;e.stories.forEach(function(e){e.spaces.forEach(function(e){e.daylighting_controls=u.default.reject(e.daylighting_controls,{daylighting_control_definition_id:n})})})},destroyDoorsByDefinition:function(e,t){var n=t.id;e.stories.forEach(function(e){e.doors=u.default.reject(e.doors,{door_definition_id:n})})},destroyDaylightingControl:function(e,t){var n=t.story_id,i=t.object.id,r=u.default.find(e.stories,{id:n});r.spaces.forEach(function(e){e.daylighting_controls=u.default.reject(e.daylighting_controls,{id:i})})},modifyDaylightingControl:function(e,t){var n=t.story_id,i=t.id,r=t.key,o=t.value,a=u.default.find(e.stories,{id:n});a.spaces.some(function(e){var t=u.default.find(e.daylighting_controls,{id:i});return!!t&&(t[r]=o,!0)})},destroyWindow:function(e,t){var n=t.story_id,i=t.object.id,r=u.default.find(e.stories,{id:n});r.windows=u.default.reject(r.windows,{id:i})},destroyWindows:function(e,t){var n={};t.forEach(function(e){var t=e.story_id,i=e.object.id;n[t]?n[t].push(i):n[t]=[i]}),(0,s.default)(n).forEach(function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1],a=u.default.find(e.stories,{id:i});a.windows=a.windows.filter(function(e){return r.indexOf(e.id)===-1})})},destroyDoor:function(e,t){var n=t.story_id,i=t.object.id,r=u.default.find(e.stories,{id:n});r.doors=u.default.reject(r.doors,{id:i})},destroyDoors:function(e,t){var n={};t.forEach(function(e){var t=e.story_id,i=e.object.id;n[t]?n[t].push(i):n[t]=[i]}),(0,s.default)(n).forEach(function(t){var n=(0,o.default)(t,2),i=n[0],r=n[1],a=u.default.find(e.stories,{id:i});a.doors=a.doors.filter(function(e){return r.indexOf(e.id)===-1})})},modifyWindow:function(e,t){var n=t.story_id,i=t.id,r=t.key,o=t.value,a=u.default.find(e.stories,{id:n}),s=u.default.find(a.windows,{id:i});s[r]=o},modifyDoor:function(e,t){var n=t.story_id,i=t.id,r=t.key,o=t.value,a=u.default.find(e.stories,{id:n}),s=u.default.find(a.doors,{id:i});s[r]=o},cloneObjectArray:function(e,t){var n=e.stories.find(function(e){return e.id===t.currentStory.id});n.spaces=t.storyInfo.spaces,p.default.replaceSpaceNamesForCloning(e,"spaces",t.currentStory),n.shading=t.storyInfo.shading,n.doors=t.storyInfo.doors,n.images=t.storyInfo.images,n.windows=t.storyInfo.windows}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r);t.default={name:function(e,t,n,i){var r=t.getters["models/all"];switch(i){case"stories":r=t.state.models.stories;break;case"spaces":r=t.getters["models/allSpaces"];break;case"shading":r=t.getters["models/allShading"];break;case"images":r=t.getters["models/allImages"];break;default:r=t.state.models.library[i]}var o="";return r.filter(function(t){return t.name===n&&t.id!==e.id}).length?o="Names must be unique.":""===n&&(o="Names must be at least 1 characters long."),o?{success:!1,error:o}:{success:!0}},number:function(e,t,n,i){var r="";return isNaN(n)&&(r="Value must be numeric."),r?{success:!1,error:r}:{success:!0}},oneOf:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,i,r){return o.default.includes(t,i)?{success:!0}:{success:!1,error:"Expected one of "+t+", got "+i}}},gt0:function(e,t,n,i){return n>0?{success:!0}:{success:!1,error:"Expected value to be greater than zero"}},closedInterval:function(e,t){return function(n,i,r,o){return r<e||r>t?{success:!1,error:"Must be between "+e+" and "+t}:{success:!0}}},halfOpenInterval:function(e,t){return function(n,i,r,o){return r<e||r>=t?{success:!1,error:"Must be greater than or equal "+e+" and less than "+t}:{success:!0}}},gt0orNull:function(e,t,n,i){return null===n||""===n||n>0?{success:!0}:{success:!1,error:"If provided, value must be greater than 0"}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),o=i(r),a=n(3),s=i(a),d=n(310),c=i(d);t.default={setUnits:function(e,t){var n=e.commit,i=e.dispatch,r=e.rootState;if("m"===t.units||"ft"===t.units)throw new Error('units must be "ip" or "si"');"ip"!==t.units&&"si"!==t.units||(n("setUnits",t),r.models.stories.forEach(function(e){return i("models/destroyStory",{story:e},{root:!0})}))},setLanguage:function(e,t){"EN-US"===t.language&&e.commit("setLanguage",t)},setNorthAxis:function(e,t){var n=t.north_axis;n>360||n<0||(e.commit("setConfigNorthAxis",{north_axis:n}),e.commit("setMapRotation",{rotation:n*Math.PI/180}))},setMapVisible:function(e,t){"boolean"==typeof t.visible&&e.commit("setMapVisible",t)},setMapEnabled:function(e,t){"boolean"==typeof t.enabled&&e.commit("setMapEnabled",t)},setMapInitialized:function(e,t){"boolean"==typeof t.initialized&&e.commit("setMapInitialized",t)},setGridVisible:function(e,t){"boolean"==typeof t.visible&&e.commit("setGridVisible",t)},setSpacing:function(e,t){e.commit("setSpacing",t)},setViewMinX:function(e,t){e.commit("setViewMinX",t)},setViewMinY:function(e,t){e.commit("setViewMinY",t)},setViewMaxX:function(e,t){var n=new c.default(t);n.validateInt("max_x"),n.validateMin("max_x",e.state.view.min_x),e.commit("setViewMaxX",n.validatedPayload)},setViewMaxY:function(e,t){var n=new c.default(t);n.validateInt("max_y"),n.validateMin("max_y",e.state.view.min_y),e.commit("setViewMaxY",n.validatedPayload)},setDimensions:function(e,t){var n=new c.default(t);n.validateInt("max_y"),n.validateMin("max_y",e.state.view.min_y),n.validateInt("max_x"),n.validateMin("max_x",e.state.view.min_x),e.commit("setDimensions",t)},setZoom:function(e,t){e.commit("setMapZoom",t)},setMapLatitude:function(e,t){var n=new c.default(t);n.validateFloat("latitude"),n.validateMax("latitude",180),n.validateMin("latitude",-180),e.commit("setMapLatitude",n.validatedPayload)},setMapLongitude:function(e,t){var n=new c.default(t);n.validateFloat("longitude"),n.validateMax("longitude",180),n.validateMin("longitude",-180),e.commit("setMapLongitude",n.validatedPayload)},setMapZoom:function(e,t){var n=new c.default(t);n.validateFloat("zoom"),e.commit("setMapZoom",{zoom:t.zoom})},setMapRotation:function(e,t){e.commit("setConfigNorthAxis",{north_axis:t.rotation/(2*Math.PI)*360}),e.commit("setMapRotation",{rotation:t.rotation})},setPreviousStoryVisible:function(e,t){e.commit("setPreviousStoryVisible",{visible:t.visible})},setShowImportExport:function(e,t){e.commit("setShowImportExport",t)},zoomToFit:function(e,t){t.geometry_id,t.widthOverHeight;e.commit("setView",{xExtent:xExtent,yExtent:yExtent})},modifyGround:function(e,t){var n=e.state,i=e.commit,r=t.key,a=t.val,d=+a;return isNaN(d)&&(d=0),s.default.includes((0,o.default)(n.ground),r)?"tilt_angle"===r&&(d<0||d>=90)?void window.eventBus.$emit("error","Tilt Angle must be in [0, 90)"):void i("modifyGround",{key:r,value:d}):void console.error('unrecognized ground property "'+r+'"')}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={snapTolerance:function(e){var t=.025*Math.abs(e.view.max_x-e.view.min_x);return e.grid.visible?.5*e.grid.spacing:t},angleTolerance:function(){return 20}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),o=i(r);t.default={setUnits:function(e,t){"units"in t&&(e.config.units=t.units),"editable"in t&&(e.config.unitsEditable=t.editable)},setLanguage:function(e,t){"language"in t&&(e.config.language=t.language)},setConfigNorthAxis:function(e,t){"north_axis"in t&&(e.north_axis=t.north_axis)},setGridVisible:function(e,t){"visible"in t&&(e.grid.visible=t.visible)},setSpacing:function(e,t){e.grid.spacing=t.spacing},setViewMinX:function(e,t){"min_x"in t&&(e.view.min_x=t.min_x)},setViewMinY:function(e,t){"min_y"in t&&(e.view.min_y=t.min_y)},setViewMaxX:function(e,t){"max_x"in t&&(e.view.max_x=t.max_x)},setViewMaxY:function(e,t){"max_y"in t&&(e.view.max_y=t.max_y)},setDimensions:function(e,t){e.view=(0,o.default)({},e.view,t)},setMapEnabled:function(e,t){"enabled"in t&&(e.map.enabled=t.enabled)},setMapInitialized:function(e,t){"initialized"in t&&(e.map.initialized=t.initialized)},setMapVisible:function(e,t){"visible"in t&&(e.map.visible=t.visible)},setMapLatitude:function(e,t){"latitude"in t&&(e.map.latitude=t.latitude)},setMapLongitude:function(e,t){"longitude"in t&&(e.map.longitude=t.longitude)},setMapZoom:function(e,t){"zoom"in t&&(e.map.zoom=t.zoom)},setMapRotation:function(e,t){"rotation"in t&&(e.map.rotation=t.rotation)},setPreviousStoryVisible:function(e,t){"visible"in t&&(e.previous_story.visible=t.visible)},setShowImportExport:function(e,t){e.show_import_export=t},modifyGround:function(e,t){var n=t.key,i=t.value;e.ground[n]=i}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),o=i(r),a=n(3),s=i(a),d=n(183),c=i(d);t.default={importState:function(e,t){e.project=(0,o.default)(c.default.state,t.project),e.application=t.application,e.models=t.models,e.geometry=t.geometry},importLibrary:function(e,t){e.models.library=t},changeUnits:function(e,t){s.default.keys(e).forEach(function(n){e[n]=t[n]})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=i(r),a=n(42),s=i(a),d=n(3),c=i(d),l=function(e){return(0,s.default)(e)},u=["application/setScaleX","application/setCurrentTool","application/setScaleY","project/setSpacing","project/setViewMinX","project/setViewMinY","project/setViewMaxX","project/setViewMaxY","project/setDimensions","application/clearSubSelections","application/setCurrentStoryId","application/setCurrentStory","application/setCurrentSpace","application/setCurrentShading","application/setCurrentImage","application/setCurrentSpacePropertyId","application/setCurrentSubSelectionType","project/setPreviousStoryVisible","project/setGridVisible","project/setMapLatitude","project/setMapLongitude","project/setMapRotation"],f=["importFloorplan","project/setMapEnabled","project/setMapInitialized"],p=function(e){return e};t.default={store:null,pastTimetravelStates:[],futureTimetravelStates:[],currentlyInBatch:!1,triggeringAction:"(none)",init:function(e){var t=this;this.store=e,e.timetravel=this,this.pastTimetravelStates=[],this.futureTimetravelStates=[],this.store.replaceState((0,o.default)({},e.state,{timetravelInitialized:!0}));var n=e.replaceState;e.replaceState=function(){window.api&&window.api.config.onChange();for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t[0];r.application.scale=this.state.application.scale,r.project.view=this.state.project.view,r.project.grid=this.state.project.grid,r.project.previous_story=this.state.project.previous_story,n.apply(this,t)};var i=e.commit;e.commit=function(){window.api&&window.api.config.onChange();for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)};var r=e.dispatch;e.dispatch=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n[0];c.default.includes(u,o)||(t.maybeSaveCheckpoint(o),console.log("dispatching action:",n[0])),r.apply(this,n)}},maybeSaveCheckpoint:function(e){var t=this;this.currentlyInBatch||this.saveCheckpoint(e),this.currentlyInBatch=!0,clearTimeout(this.resetBatchFlag),this.resetBatchFlag=setTimeout(function(){t.currentlyInBatch=!1},0)},saveCheckpoint:function(e){this.pastTimetravelStates.push({triggeringAction:this.triggeringAction,state:l(this.store.state)}),this.triggeringAction=e,console.warn("saving state"),this.futureTimetravelStates=[],this.potentiallyRollbackCheckpoint(e)},potentiallyRollbackCheckpoint:function(e){var t=this.pastTimetravelStates,n=this.store;return c.default.includes(f,e)?(this.pastTimetravelStates=[],void(this.futureTimetravelStates=[])):void c.default.defer(function(){for(;t.length>0&&c.default.isEqual(l(n.state),t[t.length-1].state);)console.log("current state matches previous, so rolling back",t[t.length-1].triggeringAction),t.pop()})},undo:function(){if(this.pastTimetravelStates.length){var e=this.pastTimetravelStates.pop(),t=e.state,n=e.triggeringAction,i=JSON.parse(t),r=this.triggeringAction;this.futureTimetravelStates.push({triggeringAction:this.triggeringAction,state:l(this.store.state)}),this.triggeringAction=n,this.store.replaceState(i),console.log("undo",i),window.eventBus.$emit("success","undo "+r)}},redo:function(){if(this.futureTimetravelStates.length){var e=this.futureTimetravelStates.pop(),t=e.state,n=e.triggeringAction,i=JSON.parse(t);this.pastTimetravelStates.push({state:l(this.store.state),triggeringAction:this.triggeringAction}),this.triggeringAction=n,this.store.replaceState(i),window.eventBus.$emit("success","redo "+n),console.log("redo",i)}},logTimetravel:function(){console.log("past:",this.pastTimetravelStates.map(function(e){return p(e)})),console.log("current",p(this.store.state)),console.log("future:",this.futureTimetravelStates.map(function(e){return p(e)}))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e?4===e.length?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e:null}function o(e){return h.default.isArray(e)?e.map(o):h.default.isObject(e)?h.default.mapValues(e,function(e,t){return("id"===t||t.indexOf("_id")>=0)&&h.default.isNumber(e)?String(e):"color"===t?r(e):o(e)}):e}function a(e,t,n){var i=h.default.chain(n).filter({window_definition_mode:"Repeating Windows"}).map(function(e){return[e.id,e]}).fromPairs().value();return e.map(function(e){var n=i[e.window_definition_id];if(n){var r=h.default.find(t.edges,{id:e.edge_id}),o=(0,v.repeatingWindowCenters)({start:h.default.find(t.vertices,{id:r.vertex_ids[0]}),end:h.default.find(t.vertices,{id:r.vertex_ids[1]}),spacing:n.window_spacing,width:n.width});return(0,f.default)({},e,{alpha:h.default.map(o,"alpha")})}return e})}function s(e,t,n){return e.map(function(e){var i=JSON.parse((0,l.default)(h.default.find(t,{id:e.geometry_id})||{edges:[],vertices:[],faces:[]}));return(0,f.default)({},e,{spaces:e.spaces,geometry:i,windows:a(e.windows,i,n),geometry_id:void 0})})}function d(e,t){var n=(0,f.default)({application:e.application,project:e.project,stories:s(e.models.stories,t["geometry/exportData"],e.models.library.window_definitions)},e.models.library,{version:g.default});return o(n)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(42),l=i(c),u=n(7),f=i(u);t.default=d;var p=n(3),h=i(p),m=n(315),g=i(m),v=n(15)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return s[e]=(s[e]||0)+1,a.default.palette.colors[s[e]%a.default.palette.colors.length]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(24),a=i(o),s={}},function(e,t,n){"use strict";function i(e){return o[e]=(o[e]||0)+1,r.textures[o[e]%r.textures.length]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(24),o={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.config.north_axis&&(e.north_axis=e.north_axis||e.config.north_axis,delete e.config.north_axis),e.config.units="ft"===e.config.units?"ip":"m"===e.config.units?"si":e.config.units,e}function o(e){return e&&e.length?e.map(function(e){return(0,f.default)({handle:null},e)}):[]}function a(e){return e&&e.length?e.map(function(e){return(0,f.default)({},(0,v.getDefaults)("WindowDefinition"),{window_definition_mode:e.window_definition_type||(0,v.getDefaults)("WindowDefinition").window_definition_mode},e,{window_definition_type:void 0})}):[]}function s(e){return e.map(function(e){var t=e.multiplier>=1?e.multiplier:(0,v.getDefaults)("Story").multiplier;return(0,f.default)({},(0,v.getDefaults)("Story"),e,{spaces:e.spaces.map(function(e){return(0,f.default)({},(0,v.getDefaults)("Space"),e)}),shading:o(e.shading),multiplier:t})})}function d(e,t){function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h.default.isObject(e)?(0,l.default)(e).forEach(function(i){return n(e[i],t,i)}):h.default.isArray(e)?e.forEach(function(e){return n(e,t)}):t(i,e)}window.api&&(window.versionNumber=0);var i=t.options||{},d=t.data.stories.map(function(e){var t=e.geometry.faces.map(function(e){var t=e.edge_ids.map(function(t,n){return{edge_id:t,reverse:!e.edge_order[n]}});return{id:e.id,edgeRefs:t}}),n=e.geometry.edges.map(function(e){return{id:e.id,v1:e.vertex_ids[0],v2:e.vertex_ids[1]}});return{id:e.geometry.id,faces:t,edges:n,vertices:e.geometry.vertices}}),c=t.data.stories.map(function(e){var t=(0,f.default)({geometry_id:e.geometry.id},e);return delete t.geometry,t}),u=0;n(t,function(e,t){e&&"id"===e&&+t>u&&(u=+t)}),u+=1,g.default.setId(u),e.commit("importState",{project:r(t.data.project),application:e.state.application,models:{stories:s(c),library:{building_units:o(t.data.building_units),thermal_zones:o(t.data.thermal_zones),space_types:o(t.data.space_types),construction_sets:o(t.data.construction_sets),window_definitions:a(t.data.window_definitions),daylighting_control_definitions:t.data.daylighting_control_definitions||[],pitched_roofs:(t.data.pitched_roofs||[]).map(function(e){return(0,f.default)({shed_direction:null},e)}),door_definitions:o(t.data.door_definitions)}},geometry:d}),h.default.defer(function(){e.dispatch("application/setCurrentStoryId",{id:c[0].id},{root:!0}),c.forEach(function(t){return e.dispatch("geometry/trimGeometry",{geometry_id:t.geometry_id})}),i.noReloadGrid||h.default.defer(function(){return window.eventBus.$emit("zoomToFit")})}),i.noReloadGrid||document.getElementById("svg-grid").dispatchEvent(new Event("reloadGrid"))}Object.defineProperty(t,"__esModule",{value:!0});var c=n(52),l=i(c),u=n(7),f=i(u);t.default=d;var p=n(3),h=i(p),m=n(51),g=i(m),v=n(125)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=0;c.libraryTypes.forEach(function(i){if(t.data[i]&&t.data[i].length){var r=e.state.models.library[i].map(function(e){return/_\d+[\w\s]?$/.test(e.name)?e.name.split("_").slice(0,-1).join("_"):e.name});t.data[i]=t.data[i].map(function(e){var t=e;t.id=d.default.generate();var i=r.filter(function(t){return t===e.name}).length;return i&&(t.name+="_"+i),n+=1,t})}});var i=e.state.project.config.units,r=a.default.get(t,"data.project.config.units"),o="ft"===r?"ip":"m"===r?"si":r;"ip"!==o&&"si"!==o&&(console.warn('Expected data.project.config.units to be "ip" or "si", received "'+r+'"'),console.warn("unable to determine units of library -- using project units"),o=i);var s=(0,l.convertLibrary)(t.data,o,i);window.eventBus.$emit("success","Imported "+n+" object"+(1!==n?"s":"")),e.commit("importLibrary",a.default.fromPairs(["building_units","thermal_zones","space_types","construction_sets","window_definitions","daylighting_control_definitions","pitched_roofs"].map(function(t){return[t,e.state.models.library[t].concat(s[t]||[])]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(3),a=i(o),s=n(51),d=i(s),c=n(24),l=n(126)},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return{invalidKeys:n,validatedPayload:t,validateLength:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in e&&n.indexOf(i)===-1&&(i in e&&e[i].length>=r?t[i]=e[i]:(delete t[i],n.push(i)))},validateMin:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in e&&n.indexOf(i)===-1&&(e[i]>r?t[i]=e[i]:(delete t[i],n.push(i)))},validateMax:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i in e&&n.indexOf(i)===-1&&(i in e&&e[i]<r?t[i]=e[i]:(delete t[i],n.push(i)))},validateFloat:function(i){i in e&&n.indexOf(i)===-1&&(i in e&&!isNaN(parseFloat(e[i]))?t[i]=parseFloat(e[i]):(delete t[i],n.push(i)))},validateInt:function(i){i in e&&n.indexOf(i)===-1&&(i in e&&!isNaN(parseInt(e[i]))?t[i]=parseInt(e[i]):(delete t[i],n.push(i)))},validateBoolean:function(i){i in e&&n.indexOf(i)===-1&&(i in e?t[i]=!!e[i]:(delete t[i],n.push(i)))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"list of vertices",n=[];return e.map(function(e,t,n){return[n[0===t?n.length-1:t-1],n[t],n[(t+1)%n.length]]}).forEach(function(e){var i=(0,f.default)(e,3),r=i[0],o=i[1],a=i[2];(0,m.ptsAreCollinear)(r,o,a)&&(0,m.distanceBetweenPoints)(r,o)>(0,m.distanceBetweenPoints)(r,a)&&n.push(t+" has a backwards section ("+(0,l.default)(r)+" -> "+(0,l.default)(o)+" -> "+(0,l.default)(a)+")")}),n}function o(e){return r(e.vertices,"face "+e.id)}function a(e){var t=[],n=function(e){return e.x+":"+e.y},i=h.default.fromPairs(e.vertices.map(function(e){return[n(e),e.id]})),r=function(e){return Math.min(+e.v1.id,+e.v2.id)+":"+Math.max(+e.v1.id,+e.v2.id)},a=h.default.fromPairs(e.edges.map(function(e){return[r(e),e.id]}));return e.vertices.forEach(function(e){e.id!==i[n(e)]&&t.push("vertex "+e.id+" is a duplicate of "+i[n(e)])}),e.edges.forEach(function(e){e.v1.id!==e.v2.id&&n(e.v1)!==n(e.v2)||t.push("edge "+e.id+" is of length zero"),e.id!==a[r(e)]&&t.push("edge "+e.id+" is a duplicate of "+a[r(e)])}),e.faces.map(o).forEach(function(e){return t.push.apply(t,(0,d.default)(e))}),t}Object.defineProperty(t,"__esModule",{value:!0});var s=n(34),d=i(s),c=n(42),l=i(c),u=n(53),f=i(u);t.checkVertexList=r,t.checkFace=o,t.default=a;var p=n(3),h=i(p),m=n(15)},function(e,t){"use strict";function n(e,t,n){return(299*e+587*t+114*n)/1e3}Object.defineProperty(t,"__esModule",{value:!0}),t.brightness=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){function i(t){var n=m,i=g,r=d.event;return c.event=v,v=m=g=void 0,b=t,_=e.apply(i,n),c.event=r,_}function r(e){return b=e,w=setTimeout(l,t),S?i(e):_}function o(e){var n=e-x,i=e-b,r=t-n;return M?Math.min(r,y-i):r}function a(e){var n=e-x,i=e-b;return void 0===x||n>=t||n<0||M&&i>=y}function l(){var e=s.default.now();return a(e)?u(e):void(w=setTimeout(l,o(e)))}function u(e){return w=void 0,C&&m?i(e):(v=m=g=void 0,_)}function f(){void 0!==w&&clearTimeout(w),b=0,v=m=x=g=w=void 0}function p(){return void 0===w?_:u(s.default.now())}function h(){var e=s.default.now(),n=a(e);if(m=arguments,g=this,x=e,v=d.event,n){if(void 0===w)return r(x);if(M)return w=setTimeout(l,t),i(x)}return void 0===w&&(w=setTimeout(l,t)),_}var m,g,v,y,_,w,x,b=0,S=!1,M=!1,C=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return t=s.default.toNumber(t)||0,s.default.isObject(n)&&(S=!!n.leading,M="maxWait"in n,y=M?Math.max(s.default.toNumber(n.maxWait)||0,t):y,C="trailing"in n?!!n.trailing:C),h.cancel=f,h.flush=p,h}function o(e,t){return r(e,t,{leading:!0,trailing:!0,maxWait:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(3),s=i(a),d=n(79),c=n(69)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return l.default.forOwn(e,function(e){l.default.isObject(e)&&r(e)}),(0,d.default)(e)||(0,a.default)(e),e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(320),a=i(o),s=n(321),d=i(s);t.default=r;var c=n(3),l=i(c)},function(e,t){"use strict";e.exports="0.7.0"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,function(e,t,n){n(623),n(624);var i=n(8)(n(255),n(688),"data-v-c1b60834",null);e.exports=i.exports},function(e,t,n){n(603);var i=n(8)(n(256),n(663),"data-v-031586be",null);e.exports=i.exports},function(e,t,n){n(611);var i=n(8)(n(257),n(671),"data-v-3d99eee3",null);e.exports=i.exports},function(e,t,n){var i=n(8)(n(258),n(673),null,null);e.exports=i.exports},function(e,t,n){n(608);var i=n(8)(n(259),n(668),"data-v-306f4abb",null);e.exports=i.exports},function(e,t,n){n(618);var i=n(8)(n(260),n(681),"data-v-746cecc8",null);e.exports=i.exports},function(e,t,n){n(613);var i=n(8)(n(261),n(674),null,null);e.exports=i.exports},function(e,t,n){var i=n(8)(n(262),n(676),null,null);e.exports=i.exports},function(e,t,n){n(622);var i=n(8)(n(264),n(687),"data-v-a8e9dfbe",null);e.exports=i.exports},function(e,t,n){var i=n(8)(n(265),n(675),null,null);e.exports=i.exports},function(e,t,n){n(621);var i=n(8)(n(266),n(685),"data-v-987d60e8",null);e.exports=i.exports},function(e,t,n){n(617);var i=n(8)(n(267),n(680),"data-v-73ec12ee",null);e.exports=i.exports},function(e,t,n){var i=n(8)(n(268),n(686),null,null);e.exports=i.exports},function(e,t,n){n(606);var i=n(8)(n(270),n(666),null,null);e.exports=i.exports},function(e,t,n){n(625);var i=n(8)(n(271),n(689),"data-v-d56d6c28",null);e.exports=i.exports},function(e,t,n){n(610);var i=n(8)(n(273),n(670),"data-v-3c3490f3",null);e.exports=i.exports},function(e,t,n){n(607);var i=n(8)(n(274),n(667),null,null);e.exports=i.exports},function(e,t,n){n(615);var i=n(8)(n(275),n(678),"data-v-64bc751c",null);e.exports=i.exports},function(e,t,n){n(619);var i=n(8)(n(276),n(682),null,null);e.exports=i.exports},function(e,t,n){var i=n(8)(n(278),n(683),null,null);e.exports=i.exports},function(e,t,n){n(609);var i=n(8)(n(279),n(669),"data-v-309036ee",null);e.exports=i.exports},function(e,t,n){n(614);var i=n(8)(n(280),n(677),null,null);e.exports=i.exports},function(e,t,n){n(612);var i=n(8)(n(281),n(672),"data-v-40563b8d",null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"canvas",attrs:{id:"canvas"}},[n("svg",{attrs:{id:"north_axis",height:"1792",viewBox:"0 0 1792 1792",width:"1792",xmlns:"http://www.w3.org/2000/svg",transform:"rotate("+e.northAxis+")"}},[n("path",{attrs:{d:"M1277 493q-9 19-29 19h-224v1248q0 14-9 23t-23 9H800q-14 0-23-9t-9-23V512H544q-21 0-29-19t5-35L870 74q10-10 23-10 14 0 24 10l355 384q13 16 5 35z"}})]),e._v(" "),e.mapEnabled?n("map-view",{directives:[{name:"show",rawName:"v-show",value:e.mapVisible,expression:"mapVisible"}]}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.col.readonly||!e.col.input_type?n("span",{class:{numeric:e.col.numeric}},[e._v("\n  "+e._s(e.value)+"\n")]):"text"===e.col.input_type?n("input",{class:{numeric:e.col.numeric},attrs:{disabled:e.disabled,placeholder:e.col.nullable&&null===e.row[e.col.name]?"(none)":null},domProps:{value:e.value},on:{keydown:e.blurOnEnter,blur:function(t){e.onChange(t.target.value),e.$forceUpdate()}}}):"color"===e.col.input_type?n("div",{staticClass:"color-wrapper"},[n("input",{staticClass:"input-color",style:e.colorStyles,attrs:{disabled:e.disabled,readonly:""},domProps:{value:e.row[e.col.name]},on:{click:function(t){e.showColorModal=!0}}}),e._v(" "),e.showColorModal?n("ColorPickerModal",{attrs:{value:e.row[e.col.name]
},on:{close:function(t){e.showColorModal=!1},change:e.onChange}}):e._e()],1):"select"===e.col.input_type?n("pretty-select",{attrs:{options:e.selectData,value:e.row[e.col.name],disabled:e.disabled},on:{change:function(t){return e.onChange(t)}}}):"texture"===e.col.input_type?n("TextureSelect",{attrs:{value:e.row[e.col.name],disabled:e.disabled},on:{change:function(t){return e.onChange(t)}}}):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",[n("div",{staticClass:"overlay",on:{click:e.close}}),e._v(" "),n("div",{staticClass:"modal"},[n("span",[n("svg",{staticClass:"close-button",attrs:{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},on:{click:e.close}},[n("path",{attrs:{d:"M137.05 128l75.476-75.475c2.5-2.5 2.5-6.55 0-9.05s-6.55-2.5-9.05 0L128 118.948 52.525 43.474c-2.5-2.5-6.55-2.5-9.05 0s-2.5 6.55 0 9.05L118.948 128l-75.476 75.475c-2.5 2.5-2.5 6.55 0 9.05 1.25 1.25 2.888 1.876 4.525 1.876s3.274-.624 4.524-1.874L128 137.05l75.475 75.476c1.25 1.25 2.888 1.875 4.525 1.875s3.275-.624 4.525-1.874c2.5-2.5 2.5-6.55 0-9.05L137.05 128z"}})])]),e._v(" "),n("header",[n("h2",[e._v(e._s(e.title))])]),e._v(" "),n("div",{staticClass:"content"},[e._t("default")],2)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"color-picker-modal"},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper",on:{click:function(t){return e.$emit("close")}}},[n("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"modal-body"},[n("swatches",{attrs:{inline:"","show-fallback":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)])])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalBase",{staticClass:"settings-modal",attrs:{title:"Settings"},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"settings"},[n("p",[n("label",{staticClass:"input-text"},[e._v("\n        North Axis\n        "),n("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.northAxis,expression:"northAxis",modifiers:{number:!0,lazy:!0}}],attrs:{type:"text",disabled:e.mapEnabled},domProps:{value:e.northAxis},on:{change:function(t){e.northAxis=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),n("ExpandableDrawer",{staticClass:"ground-props-drawer",attrs:{title:"Ground Properties"}},[n("p",[n("label",{staticClass:"input-text"},[e._v("\n          Floor Offset\n          "),n("Info",[e._v("\n            Specifies the vertical offset between the building floor and the ground plane.\n            Use a value < 0 for buildings with below-grade spaces, or a value > 0 for,\n            e.g., buildings on piers.\n          ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.floor_offset,expression:"floor_offset"}],attrs:{type:"text"},domProps:{value:e.floor_offset},on:{input:function(t){t.target.composing||(e.floor_offset=t.target.value)}}})],1)]),e._v(" "),n("p",[n("label",{staticClass:"input-text"},[e._v("\n          Azimuth Angle\n          "),n("Info",[e._v("\n            Direction of the ground plane, in clockwise degrees from the\n            positive y-axis when viewed from above.\n          ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.azimuth_angle,expression:"azimuth_angle"}],attrs:{type:"text"},domProps:{value:e.azimuth_angle},on:{input:function(t){t.target.composing||(e.azimuth_angle=t.target.value)}}})],1)]),e._v(" "),n("p",[n("label",{staticClass:"input-text"},[e._v("\n          Tilt Slope\n          "),n("Info",[e._v("\n            Slope of the ground plane from horizontal. For example, a value of 1 implies a 45° angle.\n          ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.tilt_slope,expression:"tilt_slope"}],attrs:{type:"text"},domProps:{value:e.tilt_slope},on:{input:function(t){t.target.composing||(e.tilt_slope=t.target.value)}}})],1)])]),e._v(" "),n("button",{staticClass:"button",on:{click:function(t){return e.$emit("close")}}},[e._v("Okay")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-bar"},[e._l(e.columns,function(t){return n("span",{key:t.name,attrs:{"data-column":t.name}},[n("GenericInput",{attrs:{col:t,row:e.row,onChange:e.updateRow.bind(null,e.row.id,t.name)}})],1)}),e._v(" "),n("span",{staticClass:"destroy",on:{click:function(t){return e.destroy()}}},[n("Delete",{staticClass:"button"})],1)],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-select"},[e.disabled?e._e():n("button",{class:"texture-"+e.value,on:{click:function(t){e.open=!e.open},blur:function(t){e.open=!1}}},[n("span",{staticClass:"svg-background"}),e._v(" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[n("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])]),e._v(" "),e.open?n("Portal",{attrs:{to:"texture-options"}},[n("ul",{style:e.ulStyle()},e._l(e.textures,function(t){return n("li",{key:t,class:(i={selected:t===e.value},i["texture-"+t]=!0,i),on:{mousedown:function(n){return e.choose(t)}}});var i}),0)]):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalBase",{attrs:{title:"Save "+e.saveWhat+" as"},on:{close:function(t){return e.$emit("close")}}},[n("span",{staticClass:"input-text"},[n("input",{ref:"downloadName",attrs:{type:"text",id:"download-name",spellcheck:"false"},domProps:{value:e.saveWhat.toLowerCase()},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.downloadFile.apply(null,arguments)}}}),e._v("\n    .json\n    "),n("button",{staticClass:"download-button",on:{click:e.downloadFile}},[e._v("Download")])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"map-container"}},[n("div",{ref:"map",style:{"pointer-events":"Map"===e.tool?"all":"none"},attrs:{id:"map"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===e.tool,expression:"tool === 'Map'"}],attrs:{id:"autocomplete"}},[n("span",{staticClass:"input-text"},[n("input",{ref:"addressSearch",attrs:{type:"text",placeholder:"Search for a location"}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"Map"===e.tool,expression:"tool === 'Map'"}],attrs:{id:"help-text"}},[n("p",[e._v("Drag the map and/or search to set desired location.  Use alt+shift to rotate the north axis. Click 'Done' when finished.")]),e._v(" "),n("button",{on:{click:e.finishSetup}},[e._v("Done")])]),e._v(" "),e.mapModalVisible&&!e.mapInitialized?n("map-modal",{on:{close:function(t){e.mapModalVisible=!1,e.showReticle()}}}):e._e(),e._v(" "),n("svg",{attrs:{id:"reticle"}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{attrs:{id:"toolbar"}},[n("section",{attrs:{id:"top"}},[n("div",{attrs:{id:"navigation-head"}},[e.showImportExport?n("div",{staticClass:"import-export-buttons"},[n("input",{ref:"importLibrary",attrs:{type:"file"},on:{change:function(t){return e.importDataAsFile(t,"library")}}}),e._v(" "),n("input",{ref:"importInput",attrs:{type:"file"},on:{change:function(t){return e.importDataAsFile(t,"floorplan")}}}),e._v(" "),n("div",{attrs:{title:"open floorplan"}},[n("open-floorplan-svg",{staticClass:"button",attrs:{id:"import"},nativeOn:{click:function(t){return e.$refs.importInput.click()}}})],1),e._v(" "),n("div",{attrs:{title:"save floorplan"}},[n("save-floorplan-svg",{staticClass:"button",attrs:{id:"export"},nativeOn:{click:function(t){return e.exportData.apply(null,arguments)}}})],1),e._v(" "),n("div",{attrs:{title:"import library"}},[n("import-library-svg",{staticClass:"button",nativeOn:{click:function(t){return e.$refs.importLibrary.click()}}})],1)]):e._e(),e._v(" "),n("div",{attrs:{id:"undo-redo"}},[n("div",{attrs:{title:"undo"}},[n("undo-svg",{staticClass:"button",class:{disabled:!e.timetravelInitialized},nativeOn:{click:function(t){return e.undo.apply(null,arguments)}}})],1),e._v(" "),n("div",{attrs:{title:"redo"}},[n("redo-svg",{staticClass:"button",class:{disabled:!e.timetravelInitialized},attrs:{disabled:!e.timetravelInitialized},nativeOn:{click:function(t){return e.redo.apply(null,arguments)}}})],1)])]),e._v(" "),n("ul",{attrs:{id:"mode-tabs"}},[n("li",{staticClass:"tab",class:{active:"floorplan"===e.modeTab},attrs:{"data-modetab":"floorplan"},on:{click:function(t){e.modeTab="floorplan"}}},[n("span",[e._v("\n          Floorplan\n          "),n("tab-floorplan-svg",{staticClass:"icon"})],1)]),e._v(" "),n("li",{staticClass:"tab",class:{active:"assign"===e.modeTab},on:{click:function(t){e.modeTab="assign"}}},[n("span",[e._v("\n          Assignments\n          "),n("tab-assign-svg",{staticClass:"icon"})],1)]),e._v(" "),n("li",{staticClass:"tab",class:{active:"components"===e.modeTab},attrs:{"data-modetab":"components"},on:{click:function(t){e.modeTab="components"}}},[n("span",[e._v("\n          Components\n          "),n("tool-component-svg",{staticClass:"icon"})],1)]),e._v(" "),e._m(0)]),e._v(" "),n("div",{attrs:{id:"grid-settings"}},[n("div",{staticClass:"input-checkbox"},[n("label",[e._v("Story Below")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.previousStoryVisible,expression:"previousStoryVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.previousStoryVisible)?e._i(e.previousStoryVisible,null)>-1:e.previousStoryVisible},on:{change:function(t){var n=e.previousStoryVisible,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.previousStoryVisible=n.concat([o])):a>-1&&(e.previousStoryVisible=n.slice(0,a).concat(n.slice(a+1)))}else e.previousStoryVisible=r}}})]),e._v(" "),e.mapEnabled?n("div",{staticClass:"input-checkbox"},[n("label",[e._v("map")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mapVisible,expression:"mapVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.mapVisible)?e._i(e.mapVisible,null)>-1:e.mapVisible},on:{change:function(t){var n=e.mapVisible,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.mapVisible=n.concat([o])):a>-1&&(e.mapVisible=n.slice(0,a).concat(n.slice(a+1)))}else e.mapVisible=r}}})]):e._e(),e._v(" "),n("div",{staticClass:"input-checkbox"},[n("label",[e._v("grid")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.gridVisible,expression:"gridVisible"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.gridVisible)?e._i(e.gridVisible,null)>-1:e.gridVisible},on:{change:function(t){var n=e.gridVisible,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&(e.gridVisible=n.concat([o])):a>-1&&(e.gridVisible=n.slice(0,a).concat(n.slice(a+1)))}else e.gridVisible=r}}})]),e._v(" "),n("div",{staticClass:"input-number"},[n("label",[e._v("spacing")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.spacing,expression:"spacing",modifiers:{number:!0,lazy:!0}}],domProps:{value:e.spacing},on:{change:function(t){e.spacing=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e.allowSettingUnits?e._e():n("label",[e._v(e._s(e.rwUnits))])]),e._v(" "),e.allowSettingUnits?n("PrettySelect",{ref:"unitsSelect",attrs:{options:["ft","m"],value:e.rwUnits},on:{change:e.updateUnits}}):e._e(),e._v(" "),n("div",{attrs:{title:"settings"},on:{click:function(t){e.showGroundPropsModal=!0}}},[n("SettingsGear",{staticClass:"button"})],1)],1)]),e._v(" "),n("section",{class:e.modeTab,attrs:{id:"bottom"}},["floorplan"===e.modeTab?[n("div",{attrs:{id:"instructions"}},[e._v("Draw a floorplan and import images")]),e._v(" "),n("div",{staticClass:"tools-list tools",attrs:{id:"drawing-tools"}},[n("div",{class:{active:"Rectangle"===e.tool},attrs:{"data-tool":"Rectangle",title:"Rectangle"},on:{click:function(t){e.tool="Rectangle"}}},[n("tool-draw-rectangle-svg",{staticClass:"button"})],1),e._v(" "),n("div",{class:{active:"Polygon"===e.tool},attrs:{"data-tool":"Polygon",title:"Polygon"},on:{click:function(t){e.tool="Polygon"}}},[n("tool-draw-polygon-svg",{staticClass:"button"})],1),e._v(" "),n("div",{class:{active:"Fill"===e.tool},attrs:{"data-tool":"Fill",title:"Fill"},on:{click:function(t){e.tool="Fill"}}},[n("tool-fill-svg",{staticClass:"button"})],1),e._v(" "),n("div",{class:{active:"Eraser"===e.tool},attrs:{"data-tool":"Eraser",title:"Eraser"},on:{click:function(t){e.tool="Eraser"}}},[n("tool-erase-svg",{staticClass:"button"})],1),e._v(" "),n("div",{class:{active:"Image"===e.tool},attrs:{"data-tool":"Image",title:"Image"},on:{click:e.setImageTool}},[n("tool-image-svg",{staticClass:"button"})],1)])]:e._e(),e._v(" "),"components"===e.modeTab?[n("div",{attrs:{id:"instructions"}},[e.currentComponentDefinition?n("span",[e._v("Click to place a "+e._s(e.currentComponentDefinition.name))]):n("span",[e._v("Add fenestration, daylighting, and PV")])]),e._v(" "),n("ComponentInstanceEditBar")]:e._e(),e._v(" "),"assign"===e.modeTab?[n("div",{attrs:{id:"instructions"}},[e._v("Assign thermal zones, etc, to spaces")])]:e._e(),e._v(" "),n("div",{attrs:{id:"grid-tools"}},[n("RenderByDropdown"),e._v(" "),n("div",{attrs:{title:"zoom to fit"}},[n("ZoomToFitSvg",{staticClass:"button",nativeOn:{click:function(t){return e.zoomToFit.apply(null,arguments)}}})],1)],1)],2),e._v(" "),n("section",{staticClass:"modals"},[e.showSaveModal?n("SaveAsModal",{attrs:{saveWhat:e.thingWereSaving,dataToDownload:e.dataToDownload},on:{close:function(){e.showSaveModal=!1,e.thingWereSaving=""}}}):e.showGroundPropsModal?n("Settings",{on:{close:function(t){e.showGroundPropsModal=!1}}}):e._e()],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("span")])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showInstanceEditor?n("EditBar",{attrs:{row:e.componentInstance,columns:e.visibleColumns,updateRow:e.modifyComponentInstance,destroy:e.destroyComponent}}):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editable-table"},[n("RecycleScroller",{staticClass:"scroller",attrs:{id:"recycle-scroller",items:e.sortedRows,"item-size":70},nativeOn:{scroll:function(t){e.wrapperScrollLeft=t.target.scrollLeft}},scopedSlots:e._u([{key:"before",fn:function(){return[n("div",{staticClass:"flex-row fixed",style:{"-webkit-transform":"translateX("+-e.wrapperScrollLeft+"px)",transform:"translateX("+-e.wrapperScrollLeft+"px)","clip-path":"polygon("+e.wrapperScrollLeft+"px 0%, 100% 0%, 100% 100%, "+e.wrapperScrollLeft+"px 100%)"},attrs:{id:"fixedHeader"}},[n("div",{staticClass:"checkbox-header"}),e._v(" "),e._l(e.visibleColumns,function(t){return n("div",{key:t.name,staticClass:"headers",class:{active:e.sortKey===t.name},attrs:{fixed:t.fixed,id:t.displayName.replace(/\s/g,""),"data-column":t.name,prop:t.name,label:t.displayName,"class-name":"column__"+t.name,"min-width":t.width||165},on:{click:function(n){return e.sortBy(t.name)}}},[e._v("\n          "+e._s(t.displayName)+"\n          "),e.sortKey!==t.name||e.sortKey===t.name&&e.sortDescending?n("i",{staticClass:"icon-chevron-down"}):e._e(),e._v(" "),e.sortKey!==t.name||e.sortDescending?e._e():n("i",{staticClass:"icon-chevron-up"})])})],2)]},proxy:!0},{key:"default",fn:function(t){var i=t.item;return[n("div",{staticClass:"cell table-data flex-row table-first-column"},[n("div",{staticClass:"select",on:{click:function(t){return t.stopPropagation(),e.selectRow(i)}}},[n("input",{attrs:{type:"radio"},domProps:{checked:e.selectedItemId===i.id}})]),e._v(" "),n("generic-input",{attrs:{col:e.visibleColumns[0],row:i,onChange:e.updateRow.bind(null,i.id,e.visibleColumns[0].name)}})],1),e._v(" "),n("div",{key:i.id,staticClass:"flex-row",attrs:{fixed:i.fixed,"data-column":i.name,prop:i.name,label:i.displayName,"class-name":"column__"+i.name,"min-width":i.width||154}},[e._l(e.visibleColumns.slice(1),function(t){return n("div",{key:t.name,staticClass:"cell table-data",attrs:{"data-column":t.name,prop:t.name,label:t.displayName}},[n("generic-input",{attrs:{col:t,row:i,onChange:e.updateRow.bind(null,i.id,t.name)}})],1)}),e._v(" "),n("div",[n("div",{staticClass:"duplicate",attrs:{title:"duplicate"},on:{click:function(t){return t.stopPropagation(),e.duplicateRow(i)}}},[n("Copy",{staticClass:"button"})],1)]),e._v(" "),n("div",[n("div",{staticClass:"destroy",attrs:{title:"destroy"},on:{click:function(t){return t.stopPropagation(),e.deleteRow(i)}}},[n("Delete",{staticClass:"button"})],1)])],2)]}}])})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{ref:"imageInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg,image/png,image/svg,image/gif",id:"upload-image-input"},on:{change:e.uploadImage}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"expandable-drawer":!0,expanded:e.expanded}},[n("p",{staticClass:"title",on:{click:function(t){e.expanded=!e.expanded}}},[e._v("\n    "+e._s(e.caret)+" "+e._s(e.title)+"\n  ")]),e._v(" "),e.expanded?n("p",[e._t("default")],2):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{id:"pattern-defs"}},[n("defs",[e._l(e.modifiers,function(t,i){return[n("pattern",{attrs:{id:"circles-2"+i,patternUnits:"userSpaceOnUse",width:"5",height:"5"}},[n("rect",{attrs:{width:"5",height:"5",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("circle",{attrs:{cx:"1.5",cy:"1.5",r:"1.5",fill:t}})]),e._v(" "),n("pattern",{attrs:{id:"circles-5"+i,patternUnits:"userSpaceOnUse",width:"9",height:"9"}},[n("rect",{attrs:{width:"9",height:"9",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("circle",{attrs:{cx:"3",cy:"3",r:"3",fill:t}})]),e._v(" "),n("pattern",{attrs:{id:"circles-8"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("circle",{attrs:{cx:"4.5",cy:"4.5",r:"4.5",fill:t}})]),e._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-1"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:t,"stroke-width":"1"}})]),e._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-4"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:t,"stroke-width":"3"}})]),e._v(" "),n("pattern",{attrs:{id:"diagonal-stripe-6"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:t}}),e._v(" "),n("path",{attrs:{d:"M-1,1 l2,-2\n                 M0,10 l10,-10\n                 M9,11 l2,-2",stroke:"white","stroke-width":"1"}})]),e._v(" "),n("pattern",{attrs:{id:"dots-5"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("rect",{attrs:{x:"0",y:"0",width:"5",height:"5",fill:t}})]),e._v(" "),n("pattern",{attrs:{id:"dots-8"+i,patternUnits:"userSpaceOnUse",width:"10",height:"10"}},[n("rect",{attrs:{width:"10",height:"10",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("rect",{attrs:{x:"0",y:"0",width:"8",height:"8",fill:t}})]),e._v(" "),n("pattern",{attrs:{id:"crosshatch"+i,patternUnits:"userSpaceOnUse",width:"8",height:"8"}},[n("rect",{attrs:{width:"8",height:"8",fill:"#fff","fill-opacity":"0.7"}}),e._v(" "),n("path",{attrs:{d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":"0.5",stroke:t,"stroke-opacity":"0.8"}})]),e._v(" "),n("pattern",{attrs:{id:"vertical-line"+i,patternUnits:"userSpaceOnUse",width:"4",height:"49"}},[n("rect",{attrs:{width:"4",height:"50",fill:"#fff","fill-opacity":"0.8"}}),e._v(" "),n("rect",{attrs:{width:"2",height:"50",fill:"#fff","fill-opacity":"0.5"}}),e._v(" "),n("rect",{attrs:{x:"2",width:"1",height:"50",fill:t,"fill-opacity":"0.5"}})])]})],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"layout-navigation"}},[n("nav",{attrs:{id:"navigation"}},[n("section",{attrs:{id:"selections"}}),e._v(" "),n("div",{attrs:{id:"list"}},[n("Library",{attrs:{objectTypes:["stories"],mode:"stories",compact:"stories"!==e.libraryExpanded},on:{toggleCompact:function(t){e.libraryExpanded="stories"!==e.libraryExpanded&&"stories"}}}),e._v(" "),n("Library",{attrs:{addNewOnHotkey:"true",objectTypes:e.objectTypesForTab,mode:e.subselectionType,searchAvailable:!0,compact:"subselection"!==e.libraryExpanded},on:{changeMode:function(t){e.subselectionType=t},toggleCompact:function(t){e.libraryExpanded="subselection"!==e.libraryExpanded&&"subselection"}}})],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"library-select"},[n("div",{staticClass:"rows"},e._l(e.rows,function(t){return n("div",{key:t.id,class:{active:e.selectedItemId===t.id},attrs:{"data-id":t.id},on:{click:function(n){return e.selectItem(t)}}},[n("span",{style:{"background-color":t.color}}),e._v("\n        "+e._s(t.name)+"\n        "),n("div",{staticClass:"buttons"},[n("a",{staticClass:"duplicate",attrs:{title:"duplicate"},on:{click:function(n){return n.stopPropagation(),e.duplicateRow(t)}}},[n("Copy",{staticClass:"button"})],1),e._v(" "),n("a",{staticClass:"destroy",attrs:{title:"delete"},on:{click:function(n){return n.stopPropagation(),e.destroyItem(t)}}},[n("Delete",{staticClass:"button"})],1)])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"inspector"}},[n("section",{staticClass:"list",attrs:{id:"geometry-list"}},[e._l(e.currentStoryGeometry.faces,function(t){return e.currentSpace||e.currentShading?e._e():[n("header",[n("h3",[e._v("Face "+e._s(t.id))])]),e._v(" "),e._l(t.edgeRefs,function(t){return n("div",{staticClass:"list-item"},[e._v("\n        edge "+e._s(t.edge_id)+" "+e._s(t.reverse?"reversed ":"")+"\n        "),n("br"),e._v("startpoint "+e._s(e.startpoint(t))+"\n        "),n("br"),e._v("endpoint "+e._s(e.endpoint(t))+"\n      ")])})]}),e._v(" "),e.currentSubSelectionFace?[n("header",[n("h3",[e._v("Face "+e._s(e.currentSubSelectionFace.id)+" on "+e._s(e.currentSpace?e.currentSpace.name:e.currentShading.name))])]),e._v(" "),e._l(e.currentSubSelectionFace.edgeRefs,function(t){return n("div",{staticClass:"list-item"},[e._v("\n        edge "+e._s(t.edge_id)+" "+e._s(t.reverse?"reversed ":"")+"\n        "),n("br"),e._v("startpoint "+e._s(e.startpoint(t))+"\n        "),n("br"),e._v("endpoint "+e._s(e.endpoint(t))+"\n      ")])})]:e._e()],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editable-select-list",class:{expanded:!e.compact},attrs:{"data-object-type":e.selectedObjectType}},[n("div",{staticClass:"controls"},[n("div",{staticClass:"control-group"},[e.objectTypes.length>1?n("PrettySelect",{attrs:{options:e.objectTypes,value:e.selectedObjectType},on:{change:function(t){return e.$emit("selectObjectType",t)}}}):n("span",[e._v(e._s(e.objectTypes[0].display||e.objectTypes[0].displayName))]),e._v(" "),e.addRow?n("a",{staticClass:"add-new",attrs:{title:"Create new"},on:{click:e.addRow}},[n("AddNew",{staticClass:"button"})],1):e._e()],1),e._v(" "),n("div",{staticClass:"control-group"},[n("a",{attrs:{title:e.compact?"expand":"contract"},on:{click:e.toggleCompact}},[n("DoubleArrows",{staticClass:"button",attrs:{transform:e.compact?"":"scale(-1, 1)"}})],1)])]),e._v(" "),n("div",{staticClass:"input-text search-spot"},[e.searchAvailable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search-bar",attrs:{placeholder:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}):e._e()]),e._v(" "),e.compact?n("LibrarySelect",{attrs:{rows:e.searchedRows,selectItem:e.selectRow,destroyItem:e.destroyRow,selectedItemId:e.selectedRowId,duplicateRow:e.duplicateRow}}):n("EditableTable",{attrs:{selectRow:e.selectRow,selectedItemId:e.selectedRowId,columns:e.visibleColumns,rows:e.searchedRows,deleteRow:e.destroyRow,updateRow:e.editRow,duplicateRow:e.duplicateRow}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isChrome?e._e():n("p",{staticClass:"non-chrome-warning"},[e._v("\n  Warning. This web-app is currently only tested against recent versions of Chrome. \n")])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"render-by"},[n("PrettySelect",{attrs:{label:"View By",options:e.renderableOptions,value:e.currentMode},on:{change:function(t){e.currentMode=t}}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-select"},[e.label?n("label",[e._v(e._s(e.label))]):e._e(),e._v(" "),n("select",{attrs:{disabled:e.disabled},on:{change:function(t){return e.$emit("change",t.target.value)}}},e._l(e.normalizedOpts,function(t){return n("option",{domProps:{value:t.val,selected:t.val===e.value}},[e._v(e._s(t.display))])}),0),e._v(" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 14",height:"10px"}},[n("path",{attrs:{d:"M.5 0v14l11-7-11-7z",transform:"translate(13) rotate(90)"}})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"info"},[n("InfoIcon",{staticClass:"button"}),e._v(" "),n("span",{staticClass:"tooltip-text"},[e._t("default")],2)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("EditableSelectList",{attrs:{selectedObjectType:e.mode,objectTypes:e.objectTypesDisplay,rows:e.rows,columns:e.columns,selectedRowId:e.selectedObject&&e.selectedObject.id,selectRow:function(t){e.selectedObject=t},addRow:e.addRowPermitted&&e.createObject,editRow:e.modifyObject,destroyRow:e.destroyObject,duplicateRow:e.duplicateRow,searchAvailable:e.searchAvailable,compact:e.compact},on:{toggleCompact:function(t){return e.$emit("toggleCompact",t)},selectObjectType:e.changeMode}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"gridParent",class:{"reduce-ticks":e.reduceTicks},style:{"pointer-events":"Drag"===e.currentTool||"Map"===e.currentTool?"none":"auto"},attrs:{id:"grid"}},[n("svg",{ref:"grid",attrs:{id:"svg-grid"}},[n("g",{staticClass:"axis axis--x"}),e._v(" "),n("g",{staticClass:"axis axis--y"}),e._v(" "),n("g",{staticClass:"images",attrs:{"data-transform-plz":""}}),e._v(" "),n("g",{staticClass:"polygons",attrs:{"data-transform-plz":""}}),e._v(" "),n("g",{staticClass:"walls",attrs:{"data-transform-plz":""}})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"tool_"+e.tool.toLowerCase(),attrs:{id:"app"}},[n("toolbar",{class:{"disabled-component":"Map"===e.tool}}),e._v(" "),n("div",{class:{"nav-on-top":e.navigationExpanded},attrs:{id:"layout-main"}},[n("navigation",{class:{"disabled-component":"Map"===e.tool},on:{expanded:function(t){e.navigationExpanded=t}}}),e._v(" "),n("main",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.error||e.success,expression:"error || success"}],class:{error:e.error,success:e.success},attrs:{id:"alert-text"}},[n("p",[e._v(e._s(e.error||e.success))])]),e._v(" "),n("canvas-view"),e._v(" "),n("grid-view")],1)],1),e._v(" "),n("ImageUpload"),e._v(" "),n("Textures"),e._v(" "),n("PortalTarget",{attrs:{name:"texture-options"}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",[n("div",{staticClass:"overlay"}),e._v(" "),n("div",{staticClass:"modal"},[e._m(0),e._v(" "),n("NonChromeWarning"),e._v(" "),n("div",{staticClass:"content"},[n("p",[n("a",{staticClass:"quickstart-action new-floorplan",on:{click:function(t){e.mapEnabled=!1,e.mapVisible=!1,e.$emit("close")}}},[n("div",{staticClass:"title"},[e._v("New")]),e._v(" "),n("QuickstartIconNewFloorplan"),e._v(" "),n("div",{staticClass:"explanation"},[e._v("Create a new floorplan")])],1)]),e._v(" "),n("p",[n("a",{staticClass:"quickstart-action",attrs:{disabled:!e.online},on:{click:function(t){e.mapEnabled=!0,e.tool="Map",e.$emit("close")}}},[n("div",{staticClass:"title"},[e._v("New With Map")]),e._v(" "),n("QuickstartIconNewMapFloorplan"),e._v(" "),n("div",{staticClass:"explanation"},[e._v("Create a new floorplan with a map")])],1)]),e._v(" "),n("p",[n("a",{staticClass:"quickstart-action open-floorplan",attrs:{id:"import"},on:{click:function(t){return e.$refs.importInput.click()}}},[n("div",{staticClass:"title"},[e._v("Open")]),e._v(" "),n("QuickstartIconOpenFloorplan"),e._v(" "),n("div",{staticClass:"explanation"},[e._v("Open an existing floorplan")])],1)]),e._v(" "),n("input",{ref:"importInput",attrs:{id:"importInput",type:"file"},on:{change:e.importFloorplanAsFile}})])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h2",[e._v("Quickstart")])])}]}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.4 17.7V5H.6v13h18.2l-.4-.3zM1.6 6h15.8v11L13 13.7l-2.3 1.7L7 11.5 1.8 17h-.2V6z",fill:"#fff"}}),_c("circle",{attrs:{cx:"9.7",cy:"5.4",fill:"#39b54a",r:"5"}}),_c("path",{attrs:{d:"M11.5 4.5h-1.2V3.3c0-.3-.2-.5-.5-.5h-.6c-.3 0-.5.2-.5.5v1.2H7.5c-.3 0-.5.2-.5.5v.6c0 .2.2.4.5.4h1.2v1.2c0 .3.2.5.5.5h.6c.3 0 .5-.2.5-.5V6h1.2c.3 0 .5-.2.5-.5V5c-.1-.3-.3-.5-.5-.5z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("circle",{attrs:{cx:"10.5",cy:"10",fill:"#39b54a",r:"7.9"}}),_c("path",{attrs:{d:"M13.6 8.8h-1.9V6.9c0-.4-.3-.8-.8-.8H10c-.4 0-.8.3-.8.8v1.9H7.3c-.4 0-.8.3-.8.8v.9c0 .4.3.8.8.8h1.9v1.9c0 .4.3.8.8.8h.9c.4 0 .8-.3.8-.8v-1.9h1.9c.4 0 .8-.3.8-.8v-1c-.1-.4-.4-.7-.8-.7z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM12.9 5.1c0-.9-.7-1.7-1.7-1.7-.9 0-1.7.7-1.7 1.7 0 .9.7 1.7 1.7 1.7.9 0 1.7-.8 1.7-1.7zm5.3 15.5h-2.9v1.1h7v-1.1h-1.7v-7.3h1.7v-1.1h-9.7v1.1h5.6v7.3zM6 16.7v.1c0 .3.2.5.5.5h1.6v1.5h.3v1l-2 .6v.5h.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1l1.6-.2v.1h.1v.6h.2v.4H9v-1h.1v-.1l1.5.2v.1c-.1.1-.3.2-.3.4s.2.4.4.4.4-.2.4-.4-.1-.3-.3-.4v-.1h.2v-.5l-2-.5v-1h.3v-1.5h1.9c.3 0 .5-.2.5-.5v-.1c0-.2-.1-.3-.2-.4h1.3l-.8 4c-.1.5.3 1.1.8 1.2.6.1 1.1-.2 1.2-.8l1.1-5.3v-.4c-.1-.6-.5-1-1.1-1h-3.2l.4-1.9h3.9c.2 0 .3 0 .5-.1h4.2v-.5c.1 0 .1-.1.2-.1l.5.2 1.9-5-.6-.2-1.9 4.9h-.1c-.1 0-.2.1-.2.2H16v-.1c0-.5-.4-.9-.9-.9h-3.5l.2-1c.2-.9-.4-1.7-1.3-1.9l-.5-.1c-.8-.4-1.6.1-1.8 1L7.7 11l-.1.7V10c0-.3-.2-.5-.5-.5h-.5c-.3 0-.6.2-.6.5v3.8c0 .3.2.5.5.5v1.8c-.3.1-.5.3-.5.6zm1-1c.1.2.3.4.5.5H7v-.5z"
}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-8.5-.2H6v-19h13v19zm-12.1-.9H18v-17H6.9v17z"}}),_c("path",{attrs:{d:"M11.8 15.9h5.8v4.3h-5.8zm0-5.7h5.8v4.3h-5.8zm0-5.8h5.8v4.3h-5.8z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM20.6 6.6c0-.1-.1-.2-.1-.3-.1.1-.1.2-.2.2-.7.8-1.3 1.7-2 2.5-.4.5-1 .6-1.5.2-.1-.1-.2-.2-.4-.3-.2-.2-.3-.4-.4-.7 0-.3.1-.6.3-.8.7-.8 1.3-1.7 2-2.5.1-.1.1-.2.2-.2-.1 0-.2 0-.3-.1-1.2-.2-2.5.3-3.4 1.3-.8 1-1 2.4-.6 3.6-.6.8-1.3 1.7-1.9 2.5L9.2 7.7c.2-.1.4-.3.6-.5 1.9-1.4 2.4-.2 2.9-.8.5-.6-2-2.2-4.1-.7-.1.2-.3.4-.5.5-.3-.2-.7-.3-1 0-.2.2-.3.5-.2.8-.6.5-1.1.8-1.3 1l-.1-.1c-.2-.3-.6-.3-.8-.1l-.7.5c-.3.2-.4.5-.2.8L5 10.8c.2.3.6.3.9.1l.7-.5c.3-.2.3-.6.1-.9.2-.2.7-.5 1.3-.9l3.4 4.7-.1.1c-.2.1-.3.3-.3.5-1.2 1.5-2.4 3.1-3.6 4.6-.2.3-.4.7-.3 1.1 0 .4.2.7.5 1 .1.1.2.2.4.3.6.5 1.5.4 2-.3.9-1.2 1.9-2.4 2.8-3.6l2.3 3.5c.3.4.8.4 1.1.2l2.2-1.6c.4-.3.4-.8.2-1.1l-3.4-4.1c.6-.7 1.1-1.5 1.7-2.2 1.2.2 2.4-.3 3.2-1.4.8-1.1 1-2.5.5-3.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM15.6 10.3l5.4 5.2L10.2 17zm-6.5 6.8l6-7.4-7.4-4-5.9 7.4z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zM3 2.9v18h21v-18H3zm14.6 4H8.8l-2.6-2h14.1l-2.7 2zm-.6 2v6h-7v-6h7zm-9 .6v5.6l-3 2.6V7l3 2.5zm1.6 7.4h8.2l2.6 2H6.9l2.7-2zm9.4-1.8V8.8l3-2.6v11.4l-3-2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M27.5 22l-3.3-5.5h6.7zm-6.4-8.9h-1.5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm-15.3 0H4.3c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h1.5c.3 0 .5.2.5.5s-.2.5-.5.5zm6.9-6.3c-.3 0-.5-.2-.5-.5V4.8c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm0 14.8c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5s.5.2.5.5v1.5c0 .2-.2.5-.5.5zm4.9-4.1l1.1 1m0 .5c-.1 0-.2 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.1.1-.3.1-.4.1zM6.8 7l1.1 1.1m0 .5c-.1 0-.3 0-.3-.1l-1.1-1c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l1.1 1c.2.2.2.5 0 .7-.2 0-.3.1-.4.1zm9.5-.7l1-1m-1 1.5c-.1 0-.3-.1-.4-.2-.2-.2-.2-.5 0-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.3.2zm-10.9 10l1.1-1m-1.1 1.5c-.1 0-.3-.1-.4-.2-.1-.1-.1-.5.1-.7l1.1-1c.2-.2.5-.2.7 0 .2.2.2.5 0 .7l-1.1 1c-.1.2-.2.2-.4.2z"}}),_c("ellipse",{attrs:{cx:"12.8",cy:"12.9",rx:"4.8",ry:"4.6"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M6 2.9v19h13v-19H6zm12 1v8H7v-8h11zm-11 17v-8h11v8H7zM27.5 22l-3.3-5.5h6.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.5 6.3l-7.65-4.35v8.7zm-13.35 0L4.5 1.95v8.7z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[_c("path",{attrs:{d:"M17.6 12V0h-12v12h12zM16 1.6v8.8H7.2V1.6H16zM3.2 13.6H1.6V16H4v-1.6h-.8zM1.6 5.6h1.6v-.8H4V3.2H1.6zM12.8 14.4H12V16h2.4v-2.4h-1.6zM5.6 14.4h1.6V16H5.6zM8.8 14.4h1.6V16H8.8zM1.6 10.4h1.6V12H1.6zM1.6 7.2h1.6v1.6H1.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 99.999"}},[_c("path",{attrs:{d:"M31.001 54.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4zM31.001 35.999h38a2 2 0 0 0 0-4h-38a2 2 0 0 0 0 4z"}}),_c("path",{attrs:{d:"M95.001 70.007h-13V31.192c0-1.85-.853-3.594-2.31-4.73L53.812 6.269a5.999 5.999 0 0 0-7.36-.018l-26.12 20.193a6.003 6.003 0 0 0-2.33 4.748V70.006h-13v4h3v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v16.5c0 .824.675 1.5 1.5 1.5s1.5-.676 1.5-1.5v-16.5h2v14.99c0 3.312 2.687 6 6 6h52c3.313 0 6-2.688 6-6v-14.99h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h2v16.5c0 .826.675 1.5 1.5 1.5s1.5-.674 1.5-1.5v-16.5h3v-3.999zm-71-38.815l26.12-20.193 25.88 20.193V69.998h-52V31.192z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{staticStyle:{"text-indent":"0","text-transform":"none","block-progression":"tb"},attrs:{d:"M20.3 8.5c-2.96 0-5.4 2.44-5.4 5.4v52.2c0 2.96 2.44 5.4 5.4 5.4h59.4c2.96 0 5.4-2.44 5.4-5.4V13.9c0-2.96-2.44-5.4-5.4-5.4zm0 3.6h59.4c1.028 0 1.8.772 1.8 1.8v37.04L70.166 39.607c-.684-.677-1.934-.65-2.588.056L56.244 51.784 38.666 34.206a1.814 1.814 0 0 0-2.475-.056L18.5 50.294V13.9c0-1.028.772-1.8 1.8-1.8zm35.1 3.6c-4.95 0-9 4.05-9 9s4.05 9 9 9 9-4.05 9-9-4.05-9-9-9zm0 3.6c3.004 0 5.4 2.396 5.4 5.4 0 3.004-2.396 5.4-5.4 5.4a5.373 5.373 0 0 1-5.4-5.4c0-3.004 2.396-5.4 5.4-5.4zM37.344 37.975l17.69 17.69c.684.678 1.934.65 2.588-.055l11.334-12.122L81.5 56.03V66.1c0 1.028-.772 1.8-1.8 1.8H20.3c-1.028 0-1.8-.772-1.8-1.8V55.188z",overflow:"visible",color:"#000"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.6 18.4c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.8-.9-2.9 1.1-.2 1.5-.2 2.8-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("path",{attrs:{d:"M19.9 7.6c-.5-.7-1-.9-1.3-.6-.2.1-.3.4-.4.8 0 .3-.2.6-.4.8-.5.4-1.3.3-2-.7v-.1c-.7-1-.6-1.9-.1-2.2.2-.2.5-.2.9-.2.4.1.7 0 .9-.1.3-.2.3-.7-.2-1.4-.1-.2-.3-.4-.5-.6-1-1-1.5-1.2-2.5-1.8-.1.1-.1.2-.2.4-.4.8-.6 1.2-1.6 2.1-.2.2-.4.4-.6.5-.9.6-1.4.5-1.6.2-.1-.2-.2-.5-.1-.9.1-.3 0-.7-.2-.9-.3-.4-1.1-.6-2.1.1h-.1c-1 .8-1.1 1.6-.8 2.1.2.2.4.4.8.4s.7.2.8.4c.3.4.2.8-.6 1.4-.2.1-.4.3-.7.4-1.3.7-1.7.7-2.9.9.2 1.1.2 1.6.9 2.9.1.3.3.5.4.7.5.7 1 .9 1.3.6.2-.1.3-.4.4-.8 0-.3.2-.6.4-.8.6-.3 1.4-.2 2.2.8v.1c.7 1 .6 1.8.1 2.2-.2.2-.6.2-.9.2-.4-.1-.7 0-.9.1-.3.2-.3.7.2 1.4.1.2.3.4.5.6 1 1 1.5 1.2 2.5 1.8l9.7-7.1c-.2-1.2-.2-1.7-.8-3-.2-.2-.3-.5-.5-.7zm-4.5.5c.3.4.7.7 1 .9.4.2.8.2 1.1.1.3-.1.5-.2.7-.5.2-.2.3-.5.3-.8 0-.3.2-.5.2-.5.1 0 .3.1.7.6.1.2.3.4.4.6.5 1 .6 1.5.8 2.2 0 .1 0 .2.1.3l-9.3 6.8c-.1 0-.2-.1-.2-.1-.7-.4-1.1-.6-1.9-1.4-.2-.2-.4-.4-.5-.6-.4-.5-.4-.8-.3-.8 0-.1.2-.1.6-.1.3.1.6 0 .9-.1.3-.1.5-.3.7-.6.2-.3.3-.7.2-1.1-.1-.4-.2-.8-.6-1.3v-.1c-.3-.3-.7-.6-1.1-.7-.4-.2-.8-.2-1.1-.1-.6.2-1 .7-1 1.3 0 .3-.2.5-.2.5-.1 0-.3-.1-.7-.6-.1-.2-.3-.4-.4-.6-.5-1-.6-1.5-.8-2.3V9h.1c.8-.2 1.4-.3 2.5-.9 1-.5 1.5-1 1.6-1.6.1-.3 0-.6-.2-.8-.2-.3-.6-.5-1.1-.5-.2 0-.4-.1-.5-.3-.1-.1-.1-.3-.1-.6.1-.2.2-.6.7-.9.5-.3.9-.5 1.3-.4.2 0 .3.1.4.2.1.2.1.4.1.6-.1.5 0 .9.2 1.2.2.2.4.4.7.4.5 0 1.2-.3 2-1.1.9-.9 1.2-1.4 1.6-2.1 0 0 0-.1.1-.1 0 0 .1 0 .1.1.7.4 1.1.6 1.9 1.4.2.2.4.4.5.6.4.5.4.8.3.8 0 .1-.2.1-.6.1-.6-.1-1.2.1-1.5.6-.2.3-.3.7-.2 1.1 0 .4.2.8.5 1.3z",fill:"#878787"}}),_c("path",{attrs:{d:"M11.7 18.1c-1-.6-1.5-.7-2.5-1.8-1.6-1.7-.9-2.4.1-2.2 1 .2 1.9-.9.8-2.4-1.1-1.5-2.4-1-2.5 0-.1 1.1-1 1.5-2.1-.5-.7-1.3-.7-1.7-1-2.9 1.1-.2 1.6-.2 2.9-.9 2-1.1 1.6-2 .5-2.1-1.1-.1-1.5-1.4 0-2.5s2.6-.3 2.4.8c-.2 1 .5 1.7 2.2.1 1-1 1.2-1.5 1.8-2.5 1 .6 1.5.7 2.5 1.8 1.6 1.7.9 2.4-.1 2.2-1-.2-1.9.9-.8 2.4 1.1 1.5 2.4 1 2.5 0 .1-1.1 1-1.5 2.1.5.7 1.3.7 1.8.9 2.9l-9.7 7.1z",fill:"#878787"}}),_c("ellipse",{attrs:{cx:"18.9",cy:"18.6",fill:"#fff",rx:"6.6",ry:"6.6",transform:"rotate(-45.001 18.912 18.561)"}}),_c("path",{attrs:{d:"M16.4 20.9l5.2.4-.4-5.2-1.5 1.5-2.5-2.5-1.8 1.8 2.5 2.5z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[_c("path",{attrs:{d:"M64.433 16.857l-1.932.693-1.527.913-1.024 1.091-.477 1.122v1.138l.489 1.084L60.997 24l1.55.95 1.937.688 2.186.331h2.301l2.192-.368 1.944-.69 1.512-.914 1.029-1.096.49-1.117-.016-1.139-.491-1.122-1.027-1.06-1.558-.955-1.937-.689-2.186-.331h-2.3z"}}),_c("path",{attrs:{d:"M75.752 25.386c-.034.03-.057.066-.097.09L73.962 26.5c-.04.023-.083.036-.124.053-.015.006-.024.019-.04.024l-2.107.749c-.03.01-.06.008-.09.016-.021.005-.04.02-.062.023l-2.343.395a.936.936 0 0 1-.149.012h-2.442-.001a.842.842 0 0 1-.134-.01l-2.342-.356c-.025-.004-.043-.019-.067-.023-.033-.009-.066-.007-.1-.018l-2.106-.748c-.017-.007-.027-.02-.043-.026-.043-.018-.087-.03-.128-.055l-1.731-1.063c-.038-.023-.06-.059-.094-.087-.03-.024-.066-.036-.094-.065l-.294-.314v1.202l.492 1.123 1.027 1.093 1.548.914 1.95.694 2.185.367 2.302-.038 2.195-.333 1.932-.686 1.509-.947 1.035-1.103.492-1.124v-1.16l-.293.312c-.027.03-.063.041-.093.065zM43.926 2.813c.022-.002.04-.015.063-.015l1.358-.022-1.588-.838-1.612 1.145 1.715-.273c.022-.004.043.004.064.002z"}}),_c("path",{attrs:{d:"M77.758 19.894l.087.197c.035.08.046.17.055.258.004.03.02.061.02.093l.018 1.515v4.408c-.002.06-.024.12-.038.18-.012.056-.014.118-.037.17v.005l-.63 1.437a.9.9 0 0 1-.16.243c-.003.004-.004.01-.009.013l-1.22 1.3c-.026.028-.061.04-.091.064-.032.025-.052.059-.087.081l-1.694 1.063c-.041.026-.087.04-.13.058-.019.008-.03.022-.047.028l-2.106.749c-.034.011-.068.01-.101.018-.024.005-.042.02-.066.023l-2.344.355a.788.788 0 0 1-.111.009l-.01.001-2.44.04H66.6a.916.916 0 0 1-.148-.013l-2.342-.394c-.024-.003-.042-.019-.063-.024-.03-.007-.059-.005-.09-.015l-2.106-.75c-.016-.005-.025-.018-.042-.023-.037-.017-.077-.027-.114-.05l-1.733-1.022c-.04-.024-.065-.062-.1-.091-.032-.025-.07-.038-.098-.069l-1.22-1.3c-.004-.004-.005-.01-.009-.013a.886.886 0 0 1-.16-.242l-.63-1.437-.001-.006c-.023-.053-.024-.113-.037-.17-.013-.06-.037-.12-.037-.18V20.491c0-.067.024-.134.04-.202.012-.05.011-.104.03-.15l.612-1.438c.021-.051.06-.087.091-.131.028-.044.045-.093.082-.132l1.22-1.3c.03-.03.068-.045.101-.071.033-.027.055-.062.093-.085l1.713-1.023c.025-.016.055-.016.08-.029.029-.013.048-.035.077-.046l2.091-.749c.026-.01.054-.004.08-.011s.048-.025.075-.03l2.342-.393c.026-.005.05.004.075.002s.049-.015.075-.015h1.356L55.183 7.97l.1.229.001.005c.023.054.025.114.038.17.013.06.035.12.036.18l.001.006V14.468c0 .067-.025.135-.041.203-.012.05-.012.102-.03.148h-.001l-.61 1.438a.88.88 0 0 1-.16.245c-.004.004-.005.01-.009.013l-1.2 1.299c-.027.03-.065.042-.096.067-.035.029-.059.068-.1.093l-1.733 1.043c-.035.022-.074.032-.111.049-.016.006-.026.019-.042.025l-2.088.768c-.031.013-.065.01-.096.018-.025.007-.046.022-.072.027l-2.342.374a.832.832 0 0 1-.141.012h-2.423a.84.84 0 0 1-.142-.012l-2.343-.374c-.023-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.125-.748c-.017-.006-.028-.019-.044-.026-.045-.019-.09-.032-.132-.058l-1.713-1.063c-.033-.02-.052-.054-.08-.077-.03-.022-.064-.034-.091-.061l-1.22-1.26c-.006-.005-.007-.013-.013-.018a.888.888 0 0 1-.166-.247l-.63-1.438c-.034-.08-.044-.167-.056-.255-.003-.031-.02-.063-.02-.095l-.019-1.515.002-.009-.002-.009.02-2.896v-.007l-.02-1.47.002-.012c0-.057.021-.115.034-.172.011-.06.015-.124.038-.179.001-.003 0-.007.002-.01l.134-.307-12.603 8.952 1.71-.274c.026-.004.048.005.073.003.025-.002.045-.014.07-.014h2.402c.025 0 .047.012.07.014.025.002.048-.006.072-.003l2.344.375c.026.004.046.02.072.027.026.006.052 0 .077.01l2.126.729c.031.01.054.035.083.05.03.013.062.015.09.03l1.732 1.044c.038.022.06.057.093.085.033.027.074.043.103.075l1.202 1.299c.034.037.048.083.075.124.026.04.063.07.084.116l.65 1.437c.002.004 0 .008.002.011.024.055.028.117.04.177.013.057.034.115.035.172l.002.011v5.912c0 .06-.024.12-.038.18-.012.057-.014.118-.037.17v.006l-.63 1.438a.906.906 0 0 1-.16.241c-.003.005-.004.01-.009.015l-1.2 1.28c-.028.028-.064.04-.095.065-.033.027-.056.064-.094.087l-1.712 1.043c-.038.023-.08.035-.119.052-.015.007-.025.02-.04.025l-2.107.768c-.033.011-.065.01-.097.017-.024.006-.044.021-.07.026l-2.344.374a.84.84 0 0 1-.14.012H24.612h-.002a.821.821 0 0 1-.14-.012l-2.363-.374c-.022-.004-.04-.018-.06-.023-.032-.007-.064-.005-.094-.016l-2.087-.728c-.016-.005-.026-.019-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.024-.062-.06-.097-.088-.03-.025-.067-.037-.095-.067l-1.202-1.28c-.002-.003-.003-.008-.007-.011a.896.896 0 0 1-.158-.239l-.65-1.456c0-.003 0-.006-.002-.007-.024-.056-.028-.122-.04-.182-.012-.057-.034-.113-.034-.17l-.002-.008V22.403c0-.051.021-.1.03-.151.012-.068.016-.139.042-.202l.131-.309-9.362 6.651L49.24 50.924c.3-.107.624-.05.868.154l36.973-26.26-9.322-4.924zm-19.27 15.875V40.16c0 .054-.021.099-.03.15-.011.066-.013.132-.039.198l-.002.002-.608 1.454a.895.895 0 0 1-.168.254c-.005.006-.007.014-.012.019l-1.22 1.28c-.026.027-.06.038-.089.06-.03.024-.048.058-.083.08l-1.712 1.082c-.046.029-.095.045-.143.064-.017.006-.027.02-.044.025l-2.107.73c-.027.009-.056.006-.083.014-.02.004-.035.018-.055.02l-2.343.413a.843.843 0 0 1-.155.015H47.173h-.001a.843.843 0 0 1-.156-.015l-2.344-.413c-.018-.003-.033-.016-.052-.02-.028-.007-.056-.005-.083-.014l-2.125-.729c-.017-.005-.026-.019-.042-.024-.045-.02-.092-.032-.134-.058l-1.713-1.043c-.038-.023-.062-.06-.095-.09-.03-.022-.065-.035-.092-.063l-1.22-1.299c-.003-.002-.004-.007-.006-.01a.881.881 0 0 1-.159-.235l-.65-1.439c-.001-.003 0-.007-.002-.01-.024-.055-.027-.117-.04-.177-.013-.057-.035-.115-.036-.173l-.002-.01V34.29l.001-.005c0-.06.024-.12.037-.18.013-.057.014-.118.038-.17v-.006l.63-1.437c.02-.046.057-.077.084-.118.03-.046.045-.096.084-.137l1.2-1.28c.03-.03.068-.045.1-.07.031-.025.053-.06.089-.083l1.713-1.043c.028-.018.062-.019.092-.033.03-.015.05-.038.082-.049l2.107-.729c.024-.008.049-.003.073-.01.022-.006.041-.02.065-.025l2.342-.413c.027-.005.054.004.08.002.027-.003.05-.016.076-.016h2.422c.025 0 .047.012.071.014.024.002.046-.006.07-.003l2.362.374c.026.004.047.02.072.027.027.006.055 0 .082.01l2.106.73c.034.012.057.037.09.053.032.016.066.018.096.037l1.713 1.082c.032.02.051.053.079.077.03.023.065.035.092.063l1.22 1.28c.036.037.052.085.08.127.027.04.064.07.085.116l.65 1.398.003.014c.026.056.03.119.044.179.012.057.033.114.035.17l.002.016v1.516z"}}),_c("path",{attrs:{d:"M55.144 32.278l-1.532-.969-1.936-.67-2.207-.349h-2.277l-2.19.387-1.95.675-1.526.928-1.012 1.079-.492 1.122v1.133l.505 1.119 1.033 1.066 1.536.954 1.959.689 2.19.349h2.274l2.187-.386 1.953-.693 1.53-.915 1.024-1.089.475-1.122v-1.135l-.501-1.08zM50.831 77.08L87.893 50.7V26.449L50.831 52.772zM37.424 11.011l1.029 1.096 1.526.93 1.97.675 2.183.386 2.276-.037 2.197-.351 1.92-.67 1.544-.966 1.012-1.078.478-1.14V8.752l-.49-1.12-1.031-1.08-1.53-.931-1.95-.675-2.181-.385-2.296.037-2.198.351-1.94.67-1.523.947-1.014 1.098-.492 1.12.014 1.099z"}}),_c("path",{attrs:{d:"M56.32 39.188c-.036.029-.06.066-.1.09l-1.713 1.025c-.038.022-.08.034-.12.051-.015.006-.024.02-.04.024l-2.108.748c-.028.01-.056.008-.086.016-.02.005-.038.019-.058.022l-2.343.413a.843.843 0 0 1-.156.015h-2.422a.829.829 0 0 1-.14-.012l-2.345-.373c-.022-.004-.04-.02-.063-.024-.031-.007-.063-.004-.094-.016l-2.126-.748c-.017-.006-.028-.019-.044-.026-.044-.019-.09-.032-.131-.058l-1.713-1.063c-.034-.021-.054-.055-.084-.08-.028-.021-.062-.033-.088-.06l-.324-.333v1.207l.509 1.126 1.032 1.099 1.526.93 1.971.675 2.19.386h2.27l2.19-.386 1.943-.672 1.53-.968 1.031-1.079.475-1.136v-1.15l-.275.293c-.028.027-.065.04-.095.064zM37.42 15.433l1.032 1.066 1.534.952 1.959.69 2.19.35h2.28l2.184-.35 1.926-.708 1.55-.933 1.007-1.09.478-1.125v-1.166l-.255.272c-.026.028-.062.04-.092.064-.031.025-.053.06-.088.083l-1.732 1.083c-.044.027-.091.04-.136.06-.016.006-.027.02-.044.026l-2.088.729c-.03.01-.062.009-.094.016-.02.006-.039.019-.061.023l-2.342.374a.88.88 0 0 1-.118.01l-.009.002-2.422.038h-.015a.826.826 0 0 1-.156-.014l-2.342-.413c-.02-.004-.034-.016-.053-.02-.028-.007-.055-.005-.082-.014l-2.126-.73c-.016-.005-.026-.018-.042-.024-.045-.018-.091-.031-.134-.057l-1.712-1.043c-.04-.024-.063-.06-.096-.09-.03-.023-.065-.035-.092-.063l-.313-.333.015 1.216.49 1.12zM19.002 25.907l1.545.932 1.929.672 2.216.389h2.265l2.19-.387 1.943-.671 1.528-.966 1.017-1.084.492-1.123v-1.093l-.51-1.128-1.014-1.098-1.54-.927-1.966-.673-2.192-.351h-2.262l-2.192.35-1.935.67-1.531.968-1.032 1.082-.473 1.116v1.118l.507 1.124zM5.707 54.46L49.03 77.333V52.85L5.707 29.997z"}}),_c("path",{attrs:{d:"M19.002 30.337l1.545.932 1.925.671 2.21.35h2.282l2.186-.349 1.94-.707 1.534-.934 1.012-1.078.492-1.123v-1.2l-.274.293c-.027.027-.06.038-.09.062-.031.026-.052.06-.087.083l-1.713 1.082c-.045.03-.094.045-.143.064-.016.006-.027.02-.043.025l-2.107.729c-.028.01-.056.007-.083.014-.02.004-.035.018-.054.02l-2.344.415a.836.836 0 0 1-.156.014h-2.422a.889.889 0 0 1-.155-.014l-2.362-.414c-.022-.003-.038-.018-.059-.022-.027-.007-.055-.005-.082-.014l-2.087-.729c-.016-.005-.026-.018-.04-.024-.043-.018-.087-.03-.128-.055l-1.732-1.044c-.039-.023-.062-.06-.097-.088-.03-.024-.067-.037-.095-.067l-.295-.314v1.201l.508 1.141 1.014 1.08z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{d:"M11.6 8.3l3.3 4 3.4-4h-2.1V4.7h-2.5v3.6z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M26 14.4c-.3-1.2-1.7-.4-1.7-.5l-4.2 1c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-4.2c.5-.4.5-1 .2-1.5-.4-.5-1-.5-1.5-.2l-6.6 4.2c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l6.6-5.8c.5-.4.5-1.4.2-1.9-.4-.5-1-.5-1.5-.2L16.9 11c-.1.1-.3.1-.3 0-.1-.1-.1-.3 0-.3l3.9-5.5c.5-.4.8-1 .5-1.5-.4-.5-1.3-.5-1.8-.2L15 9l-2.7 2.1c-.1.1-.3.1-.3 0s-.1-.1 0-.2l.6-4.5c.1-.6-.3-1.1-.9-1.2-.6-.1-1.1.3-1.2.9 0 0-1.2 5.7-1.3 6.7-.1.9.4 1.7.5 1.9l4.6 5.9c.4.5 1.3.6 1.9.1l3.5-2.7.6-.5 5.2-1.9c.4-.4.6-.7.5-1.2z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M11.4 26.8H52v28.7H11.4zm13 28.6V41.2m15.7-.2V26.8m5.3 14.1H52m-40.6-1.5H18",fill:"none",stroke:"#878787","stroke-miterlimit":"10","stroke-width":"3.252"}}),_c("path",{attrs:{d:"M43.3 13.6c0-6.8-5.5-12.3-12.3-12.3-6.8 0-12.3 5.4-12.3 12.2 0 1.4.3 3 .7 4L31 50.4l10.7-30.6c1-1.9 1.6-4 1.6-6.2z",fill:"#39b54a"}}),_c("path",{attrs:{d:"M36.4 9.6h-3.1V6.5c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2v-3.1h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c0-.7-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 52.6H9V20.7h43.9v31.9zm-40.7-3.2h37.4V24H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 36.8h3.3V51H22zm15.7-14.4H41v14.2h-3.3zm6.9 12.5h6.6v3.3h-6.6zm-34-1.5h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"30.2",cy:"20.6",fill:"#39b54a",r:"12.9"}}),_c("path",{attrs:{d:"M34.9 18.1h-3.1V15c0-.7-.6-1.2-1.2-1.2h-1.5c-.7 0-1.2.6-1.2 1.2v3.1h-3.1c-.7 0-1.2.6-1.2 1.2v1.5c0 .7.6 1.2 1.2 1.2h3.1v3.1c0 .7.6 1.2 1.2 1.2h1.5c.7 0 1.2-.6 1.2-1.2V22h3.1c.7 0 1.2-.6 1.2-1.2v-1.5c.1-.6-.5-1.2-1.2-1.2z",fill:"#58595b"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M52.9 54.3H9V22.4h43.9v31.9zm-40.7-3.2h37.4V25.7H12.2v25.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M22 38.5h3.3v14.2H22zM37.7 24H41v14.2h-3.3zM10.6 35.1h6.6v3.3h-6.6z",fill:"#878787"}}),_c("circle",{attrs:{cx:"31.8",cy:"19.5",fill:"#fff",r:"13.5"}}),_c("path",{attrs:{d:"M24.1 19.3l6.8 8.2 6.9-8.2h-4.3v-7.2h-5.2v7.2z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.2 13.2L14.8 4.6V10H7.1c-1.4 0-2.5 1.3-2.5 2.9v.5c0 1.6 1.1 2.9 2.5 2.9h7.7v5.3l10.4-8.4z",fill:"#39b54a"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M25.7 25.4H4.2V9.8h21.5v15.6zM5.8 23.8h18.3V11.4H5.8v12.4z",fill:"#878787"}}),_c("path",{attrs:{d:"M10.6 17.7h1.6v7h-1.6zm7.7-7.1h1.6v7h-1.6zM5 16h3.2v1.6H5z",fill:"#878787"}}),_c("circle",{attrs:{cx:"14.9",cy:"8.4",fill:"#fff",r:"6.6"}}),_c("path",{attrs:{d:"M11.6 8.7l3.3-4 3.4 4h-2.1v3.6h-2.5V8.7z"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M14.3 15.2c.8.4 1.6.6 2.6.4-.1.1-.1.2-.2.2L14 18.5c-1.2 1.2-2.7 1.8-4.4 1.3-3.1-.9-3.9-4.6-1.7-7 .9-1 1.9-1.9 2.8-2.8.4-.4.8-.8 1.2-1.1 1.6-1.2 3.9-1.2 5.3 0 .6.5.7 1.2.3 1.7-.4.5-1.1.5-1.7 0-.9-.7-2-.6-2.9.3-1.2 1.1-2.3 2.3-3.4 3.4-.2.2-.3.3-.4.5-.3.5-.4 1-.3 1.5.2 1.1 1.4 1.7 2.4 1.3.4-.2.8-.4 1.2-.7.7-.5 1.2-1.1 1.9-1.7-.1 0 0 0 0 0z",fill:"#aaa"}}),_c("path",{attrs:{d:"M16.7 7.2c-1-.2-1.8-.3-2.6-.5l.2-.2 2.8-2.8c1.7-1.6 4.1-1.7 5.7-.3 1.8 1.5 1.9 4.2.3 6-1.2 1.4-2.6 2.6-3.9 3.9-1.6 1.5-4 1.5-5.6.2-.2-.2-.4-.5-.5-.8-.1-.5.1-.9.5-1.1.4-.2.8-.2 1.2.1 1.3.9 2.2.8 3.3-.3l3.2-3.2c.4-.5.7-1.1.7-1.8-.1-1.4-1.6-2.2-2.9-1.5-.3.2-.5.4-.8.6-.5.6-1.1 1.2-1.6 1.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M15.9 19.6l-2.4-.1c-.2 0-.4-.2-.4-.4v-.7c0-.5-.3-1.1-.8-1.3-.2-.1-.3-.1-.5-.1-.4 0-.8.1-1.1.4l-.5.5c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1L8 16.1c-.2-.2-.2-.4 0-.6l.5-.5c.4-.4.6-1 .4-1.5-.2-.5-.7-.9-1.3-.9h-.7c-.2 0-.4-.2-.4-.4l.1-2.4c0-.2.2-.4.4-.4h.7c.5 0 1.1-.3 1.3-.8.3-.5.2-1.2-.2-1.6l-.5-.5c-.2-.2-.2-.4 0-.6l1.8-1.6c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l.5.5c.2.3.6.4 1 .4.2 0 .3 0 .5-.1.5-.2.9-.7.9-1.3v-.7c0-.2.2-.4.4-.4l2.4.1c.2 0 .4.2.4.4v.7c0 .5.3 1.1.8 1.3.1.1.3.1.5.1.4 0 .8-.1 1.1-.4l.5-.5c.1-.1.2-.1.3-.1.1 0 .2.1.3.1l1.6 1.8c.2.2.1.4 0 .6l-.5.5c-.4.4-.6 1-.4 1.5.2.5.7.9 1.3.9h.7c.2 0 .4.2.4.4l-.1 2.4c0 .2-.2.4-.4.4h-.7c-.5 0-1.1.3-1.3.8-.2.5-.1 1.1.3 1.5l.5.5c.2.2.2.4 0 .6l-1.8 1.6c-.1.1-.2.1-.3.1-.1 0-.2-.1-.3-.1l-.5-.5c-.2-.3-.6-.4-1-.4-.2 0-.3 0-.5.1-.5.2-.9.7-.9 1.3v.7c-.1.4-.3.5-.5.5zm-.9-11c-1.4 0-2.7 1.1-2.7 2.5 0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.1 2.7-2.5.1-1.5-1-2.7-2.5-2.7z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4 3v16h22V3H4zm8 14v-6h-2v6H6v-6h2V9H6V5h12v6h2V5h4v5h-2v2h2v5H12z",fill:"#b2b2b2"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M13.1 18.4H1.5l9.7-14.8h11.6z",fill:"#aaa"}}),_c("path",{attrs:{d:"M18.8 18.4H7.2l9.7-14.8h11.6z",fill:"#aaa"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 21.5c-3.5 0-6.3-3.1-6.3-7.1 0-4 5.6-10.7 5.9-11L18 3l.4.5c.2.3 5.9 7 5.9 11 0 3.9-2.8 7-6.3 7zm0-16.9c-1.3 1.6-5.3 6.8-5.3 9.9 0 3.5 2.3 6.1 5.3 6.1s5.3-2.6 5.3-6.1c0-3.1-4-8.3-5.3-9.9z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18.6 6.9l-4 4.9-7.9-9.3-3.5 2.7 8.6 10.1-5.3 6.5h23.8l3.2-6.6-14.9-8.3zm11 14h-21l3.9-4.7.6.8 6 3.6-2.4-6.3-1.3-1.5L19 8.4l13.3 7.5-2.7 5z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M16.3 7.9l-4.7-5.4L8 5.1l2.4 2.8H8v13h21v-13H16.3zM9 8.9h2.3l6.6 7.7 5.6 3.3H9v-11zm19 11h-4.2l-2.3-6-4.3-5H28v11z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 512 512"}},[_c("g",{attrs:{transform:"matrix(.8 0 0 .8 1.6 0)"}},[_c("title",[_v("eraser")]),_c("path",{attrs:{d:"M509.42 69.18a12.3 12.3 0 0 0-9.77-4.81H254.73a12.18 12.18 0 0 0-6.16 1.72l-.42-.37L41.63 284l-2.19 2.46.26.31a10.6 10.6 0 0 0-1 2.51L.41 432.16a12.31 12.31 0 0 0 11.91 15.46h245c3.92 0 7.42-1.67 11-5.28l201.45-213.4a20.06 20.06 0 0 0 3.55-6.22l36.93-137.87 1.36-5a12.37 12.37 0 0 0-2.19-10.67zM279.55 304.74l-31.71 118.33H28.31L60 304.74h219.55zM473.06 88.93L292.19 280.14h-213L260 88.93h213z"}})])])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M18 2.7l2.2 3.1h-4.4zM7.3 12l3.2-2.2v4.4zM18 21.9l-2.2-3.2h4.4zM28.7 12l-3.2 2.2V9.8z",fill:"#fff"}}),_c("path",{attrs:{d:"M9.5 11.5h17.1v1H9.5z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.5 3.7h1v17.1h-1z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M4.7 13.2L15 21.7v-5.3h7.7c1.4 0 2.5-1.3 2.5-2.9V13c0-1.6-1.1-2.9-2.5-2.9H15V4.6L4.7 13.2z",fill:"#bf0049"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M20.3 2.4c-4 0-7.2 3.2-7.2 7.1 0 1.6.5 3.1 1.5 4.3l-6.1 6s-.1 2 1.8 1.8c.2-.2 6.2-6.1 6.2-6.1 1.1.7 2.5 1.1 3.9 1.1 4 0 7.2-3.2 7.2-7.1 0-3.9-3.3-7.1-7.3-7.1zm0 13.2c-3.4 0-6.2-2.7-6.2-6s2.8-6 6.2-6c3.4 0 6.2 2.7 6.2 6 0 3.2-2.8 6-6.2 6z",fill:"#fff"}}),_c("path",{attrs:{d:"M17.1 8.4h1.8V6.7c0-.4.3-.7.7-.7h.9c.4 0 .7.3.7.7v1.8H23c.4 0 .7.3.7.7v.8c0 .4-.3.7-.7.7h-1.8v1.8c0 .4-.3.7-.7.7h-.9c-.4 0-.7-.3-.7-.7v-1.8h-1.8c-.4 0-.7-.3-.7-.7v-.8c0-.4.4-.8.7-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[_c("path",{attrs:{d:"M21.4 13.8c.9-1.2 1.4-2.6 1.4-4.2 0-3.9-3.2-7-7.1-7-3.9 0-7.1 3.1-7.1 7s3.2 7 7.1 7c1.4 0 2.7-.4 3.9-1.1 0 0 5.9 5.7 6.1 6 1.9.2 1.8-1.8 1.8-1.8l-6.1-5.9zM9.7 9.6c0-3.3 2.7-5.9 6.1-5.9 3.3 0 6.1 2.7 6.1 5.9 0 3.3-2.7 5.9-6.1 5.9-3.4 0-6.1-2.7-6.1-5.9z",fill:"#fff"}}),_c("path",{attrs:{d:"M18.9 8.5h-6.4c-.4 0-.8.4-.8.8v1c0 .4.4.8.8.8h6.4c.4 0 .8-.4.8-.8v-1c0-.4-.3-.8-.8-.8z",fill:"#fff"}})])}}},function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{fill:"#FFF",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"}},[_c("path",{attrs:{d:"M201.896 183.169l-53.23-53.23a71.682 71.682 0 0 1-18.728 18.727l53.23 53.23a9 9 0 0 0 12.729 0l6-6a9 9 0 0 0 0-12.727z"}}),_c("path",{attrs:{d:"M153.668 89.768c0-35.234-28.666-63.9-63.901-63.9-35.234 0-63.9 28.666-63.9 63.9 0 35.234 28.666 63.9 63.9 63.9 35.236 0 63.9-28.666 63.9-63.9zm-63.9 48.6c-26.84 0-48.6-21.76-48.6-48.6s21.76-48.6 48.6-48.6c26.841 0 48.6 21.76 48.6 48.6s-21.759 48.6-48.6 48.6z"}}),_c("path",{attrs:{d:"M63 117h54V63H63v54zm10.8-43.2h32.4v32.4H73.8V73.8z"}})])}}},,,,,function(e,t){e.exports={XMLHttpRequest:XMLHttpRequest}}]);
//# sourceMappingURL=app.7132944ba8da952b7cc4.js.map